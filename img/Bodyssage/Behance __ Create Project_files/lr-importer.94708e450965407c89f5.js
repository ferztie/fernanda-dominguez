/*! For license information please see lr-importer.94708e450965407c89f5.js.LICENSE.txt */
(()=>{var e,t,r,i,n={116376:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(414270);const n=r.n(i)()},414270:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let i=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!(!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(316694)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},316694:(e,t,r)=>{r(936963),e.exports=function(e){function t(e){let r,n,o,s=null;function a(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(!a.enabled)return;const o=a,s=Number(new Date),l=s-(r||s);o.diff=l,o.prev=r,o.curr=s,r=s,i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";u++;const n=t.formatters[r];if("function"==typeof n){const t=i[u];e=n.call(o,t),i.splice(u,1),u--}return e})),t.formatArgs.call(o,i);const c=o.log||t.log;c.apply(o,i)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=i,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(n!==t.namespaces&&(n=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function i(e,r){const i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),n=i.length;for(r=0;r<n;r++)i[r]&&("-"===(e=i[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,i;for(r=0,i=t.skips.length;r<i;r++)if(t.skips[r].test(e))return!1;for(r=0,i=t.names.length;r<i;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(642062),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},683726:function(e,t,r){"use strict";r(936963);var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=r(344505),a=r(311484),l=r(830553),u=r(834422),c=r(178069),d=function(e){function t(t){void 0===t&&(t=null);var r=e.call(this,t)||this;r.onAccessTokenHasExpired=null,r.onAccessToken=null,r.onReauthAccessToken=null,r.onError=null,r.handlers={triggerOnAccessToken:function(e){r.onAccessToken&&r.onAccessToken(e)},triggerOnReauthAccessToken:function(e){r.onReauthAccessToken&&r.onReauthAccessToken(e)},triggerOnAccessTokenHasExpired:function(){r.onAccessTokenHasExpired&&r.onAccessTokenHasExpired()},triggerOnReady:function(e){void 0===e&&(e=null),r.onReady&&r.onReady(e)},triggerOnError:function(e,t){r.onError&&r.onError(e,t)}};var i=t||window[s.AdobeIdKey];if(!i)throw new Error("Please provide adobeId information");var n=i.standalone,o=i.autoValidateToken,u=i.modalSettings,c=void 0===u?{}:u,d=i.modalMode,h=void 0!==d&&d,p=i.onAccessToken,f=i.onReauthAccessToken,g=i.onAccessTokenHasExpired,m=i.onReady,v=i.onError,y=i.overrideErrorHandler;return n&&n.token&&(r.standalone=new l.StandaloneToken(n)),r.modalSettings=new a.PopupSettings(c),r.modalMode=h,r.autoValidateToken=!!o,r.onAccessToken=p||null,r.onReauthAccessToken=f||null,r.onAccessTokenHasExpired=g||null,r.onReady=m||null,r.onError=v||null,r.overrideErrorHandler=y,r}return n(t,e),t.prototype.createSocialProviderRedirectRequest=function(e,t,r,i,n){void 0===n&&(n=c.IGrantTypes.token);var s={idp_flow:"social.deep_link.web",provider_id:e},a=o(o({},t),s);return this.createRedirectRequest(a,r,i,n)},t.prototype.createReAuthenticateRedirectRequest=function(e,t,r,i,n){void 0===i&&(i=u.IReauth.check),void 0===n&&(n=c.IGrantTypes.token);var s={reauth:i},a=o(o({},e),s);return this.createRedirectRequest(a,t,r,n)},t.prototype.createSignUpRedirectRequest=function(e,t,r,i){void 0===i&&(i=c.IGrantTypes.token);var n=o(o({},e),{idp_flow:"create_account"});return this.createRedirectRequest(n,t,r,i)},t}(r(717640).AdobeIdThinData);t.AdobeIdData=d},717640:function(e,t,r){"use strict";r(936963);var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(344505),s=r(317712),a=n(r(462913)),l=r(163059),u=n(r(734148)),c=r(834422),d=r(178069),h=r(442736),p=function(){function e(e){void 0===e&&(e=null),this.analyticsParameters=new l.AnalyticsParameters,this.api_parameters={},this.locale="",this.scope="AdobeID",this.client_id="",this.environment=s.IEnvironment.PROD,this.useLocalStorage=!1,this.onReady=null;var t=e||window[o.AdobeIdKey];if(!t)throw new Error("Please provide adobeId information");var r=t.api_parameters,i=t.client_id,n=t.locale,c=t.scope,d=t.ijt,h=t.environment,p=void 0===h?s.IEnvironment.PROD:h,f=t.redirect_uri,g=t.useLocalStorage,m=t.logsEnabled,v=t.onReady,y=t.rideRedirectUri;this.environment=p,this.api_parameters=r||{},this.client_id=i,this.locale=n||o.DEFAULT_LANGUAGE,this.scope=c?c.replace(/\s/gi,""):"",this.redirect_uri=f,this.ijt=d,this.useLocalStorage=g,m?u.default.enableLogging():u.default.disableLogging(),this.onReady=v||null,this.rideRedirectUri=y,this.fillAnalityticsParameters(t),a.default.loadEnvironment(p)}return e.prototype.fillAnalityticsParameters=function(e){var t=e.analytics,r=void 0===t?{}:t,i=r.appCode,n=void 0===i?"":i,o=r.appVersion,s=void 0===o?"":o,a=this.analyticsParameters;a.appCode=n,a.appVersion=s},e.prototype.createSocialProviderRedirectRequest=function(e,t,r,n,o){var s={idp_flow:"social.deep_link.web",provider_id:e},a=i(i({},t),s);return this.createRedirectRequest(a,r,n,o)},e.prototype.createReAuthenticateRedirectRequest=function(e,t,r,n,o){void 0===n&&(n=c.IReauth.check),void 0===o&&(o=d.IGrantTypes.token);var s={reauth:n},a=i(i({},e),s);return this.createRedirectRequest(a,t,r,o)},e.prototype.createSignUpRedirectRequest=function(e,t,r){var n=i(i({},e),{idp_flow:"create_account"});return this.createRedirectRequest(n,t,r,d.IGrantTypes.token)},e.prototype.createRedirectRequest=function(e,t,r,i){var n=this,o=this,s=o.api_parameters,a=void 0===s?{}:s,l=o.client_id,u=o.redirect_uri,c=void 0===u?"":u,p=o.scope,f=o.locale,g=this.createRedirectState(t,r),m={adobeIdRedirectUri:c,apiParameters:a,clientId:l,externalParameters:e,scope:p,locale:f,response_type:i,state:g};return i===d.IGrantTypes.token?Promise.resolve(m):(new h.CodeChallenge).createCodeChallenge(r).then((function(i){e.code_challenge=i.challenge,e.code_challenge_method="S256";var o=n.createRedirectState(t,r);return m.state=o,Promise.resolve(m)}))},e.prototype.createRedirectState=function(e,t){var r=this.analyticsParameters,i=r.appCode,n=void 0===i?"":i,o=r.appVersion,s=void 0===o?"":o,l=void 0===e?{}:{context:e};return n&&(l.ac=n),s&&(l.av=s),l.jslibver=a.default.jslibver,l.nonce=t,Object.keys(l).length?l:null},e.prototype.triggerOnReady=function(){this.onReady&&this.onReady(void 0)},e.prototype.computeRideRedirectUri=function(e){return this.rideRedirectUri?"string"==typeof this.rideRedirectUri?"DEFAULT"===this.rideRedirectUri?null:this.rideRedirectUri:this.rideRedirectUri(e):window.location.href},e}();t.AdobeIdThinData=p},163059:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnalyticsParameters=function(){this.appCode="",this.appVersion=""}},317712:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.IEnvironment||(t.IEnvironment={})).STAGE="stg1",r.PROD="prod"},539462:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.IErrorType||(t.IErrorType={})).INITIALIZE_ERROR="initialize_error",r.HTTP="http",r.FRAGMENT="fragment",r.CSRF="csrf",r.NOT_AUTHORIZE="not_authorize",r.PROFILE_EXCEPTION="profile_exception",r.TOKEN_EXPIRED="token_expired",r.SOCIAL_PROVIDERS="SOCIAL_PROVIDERS",r.RIDE_EXCEPTION="ride_exception"},327682:function(e,t,r){"use strict";r(936963);var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(88306),l=s(r(734148)),u=r(137455),c=r(979792),d=r(325740),h=r(683726),p=r(470573),f=r(834422),g=r(522295),m=r(835424),v=r(993685),y=s(r(746642)),b=s(r(205371)),_=r(539462),w=r(602346),P=r(149788),A=r(580421),S=s(r(773755)),x=r(344505),C=s(r(462913)),O=r(178069),k=r(663492),E=r(442736),I=function(){function e(e){var t=this;void 0===e&&(e=null),this.initialized=!1,this.onPopupMessage=function(e){return y.default.replaceUrl(e),t.initialize()},this.signIn=function(e,r,i){void 0===e&&(e={}),void 0===i&&(i=O.IGrantTypes.token),t.checkInitialized();var n=t,o=n.adobeIdData,s=n.csrfService.initialize();return o.createRedirectRequest(e,r,s,i).then((function(e){t.signInservice.signIn(e)}))},this.authorizeToken=function(e,r,i,n){void 0===e&&(e=""),void 0===r&&(r={}),void 0===n&&(n=O.IGrantTypes.token);var o=t,s=o.adobeIdData,a=o.csrfService.initialize();return s.createRedirectRequest(r,i,a,n).then((function(t){(new u.SignInService).authorizeToken(e,t)}))},this.reAuthenticate=function(e,r,i,n){void 0===e&&(e={}),void 0===r&&(r=f.IReauth.check),void 0===n&&(n=O.IGrantTypes.token),t.checkInitialized();var o=t,s=o.adobeIdData,a=o.csrfService.initialize();return s.createReAuthenticateRedirectRequest(e,i,a,r,n).then((function(e){t.signInservice.signIn(e)}))},this.signInWithSocialProvider=function(e,r,i,n){if(void 0===r&&(r={}),void 0===n&&(n=O.IGrantTypes.token),t.checkInitialized(),!e)throw new Error("please provide the provider name");var o=t,s=o.adobeIdData,a=o.csrfService.initialize();s.createSocialProviderRedirectRequest(e,r,i,a,n).then((function(e){t.signInservice.signIn(e)}))},this.signOut=function(e){void 0===e&&(e={}),t.checkInitialized(),t.tokenService.purge(),t.profileService.removeProfile();var r=t.adobeIdData,i=r.api_parameters,n=void 0===i?{}:i,o=r.client_id,s={adobeIdRedirectUri:r.redirect_uri,apiParameters:n,clientId:o,externalParameters:e};(new d.SignOutService).signOut(s)},this.refreshToken=function(e,r){if(void 0===e&&(e={}),void 0===r&&(r=!1),!r&&e.userInactiveSince){var i=e.userInactiveSince,n=Date.now()-1e3*i;n>S.default.lastUserInteraction&&(S.default.lastUserInteraction=n)}return t.tokenService.refreshToken(e).then((function(e){return t.onTokenProfileReceived(e)})).catch((function(e){return l.default.error("refresh token error",e),e instanceof A.HttpErrorResponse?Promise.reject(e):t.verifyRideErrorExceptionStrict(e)||(t.profileService.removeProfile(),t.onTokenExpired(),Promise.reject(e))}))},this.switchProfile=function(e,r){return void 0===r&&(r={}),e?t.tokenService.switchProfile(e,r).then((function(e){return t.onTokenProfileReceived(e)})).catch((function(e){return t.verifyRideErrorException(e)})):Promise.reject(new Error("Please provide the user id for switchProfile"))},this.triggerOnImsInstance=function(e){var r=document.createEvent("CustomEvent"),i={clientId:t.adobeIdData.client_id,instance:e};r.initCustomEvent(x.ON_IMSLIB_INSTANCE,!1,!1,i),window.dispatchEvent(r)},this.processInitializeException=function(e){void 0===e&&(e={});var r=t.adobeIdData.handlers;return l.default.warn("initialize",e),e instanceof k.ModalSignInEvent?t.notifyParentAboutModalSignIn(e):(t.restoreHash(),e instanceof w.TokenExpiredException&&r.triggerOnAccessTokenHasExpired(),Promise.reject(e))},this.verifyRideErrorException=function(e){return n(t,void 0,void 0,(function(){return o(this,(function(t){if(e instanceof P.RideException){if(this.adobeIdData.overrideErrorHandler&&!this.adobeIdData.overrideErrorHandler(e))return[2,Promise.reject(e)];e.isPbaExpiredIdleSessionWorkaround?this.signIn():e.jump&&y.default.replaceUrl(e.jump)}return[2,Promise.reject(e)]}))}))},this.verifyRideErrorExceptionStrict=function(e){return e instanceof P.RideException?t.verifyRideErrorException(e):null},this.verifyCsrfException=function(e){var r=e.type;return r&&r===_.IErrorType.CSRF&&t.signOut(),Promise.reject(e)},this.processTokenResponse=function(e){var r=t.adobeIdData.handlers,i=e.tokenFields,n=e.profile,o=i.tokenValue,s=i.state,a=i.expire,u=i.sid,c=i.user_id,d=i.other,h=void 0===d?{}:d,p=i.impersonatorId,f=i.isImpersonatedSession;l.default.info("token",o),h.from_ims&&y.default.setHash(h.old_hash||""),t.profileService.removeProfileIfOtherUser(c);var g={token:o,expire:a,sid:u,impersonatorId:p,isImpersonatedSession:f};return i.isReauth()?r.triggerOnReauthAccessToken(g):t.tokenReceived(g),n&&t.profileService.saveProfileToStorage(n),Promise.resolve(s)},this.exchangeIjt=function(e){var r=t.adobeIdData.ijt;return e||r?t.tokenService.exchangeIjt(e||r).then((function(e){return t.profileService.removeProfile(),Promise.resolve(e)})):Promise.reject(new Error("please set the adobeid.ijt value"))},this.adobeIdData=new h.AdobeIdData(e);var r=this.adobeIdData,s=r.api_parameters,g=void 0===s?{}:s,b=r.client_id,C=r.scope,E=r.useLocalStorage,I=r.autoValidateToken,T=r.modalMode,D=r.modalSettings;this.imsApis=new p.ImsApis(g),this.csrfService=new a.CsrfService(b),this.serviceRequest={clientId:b,scope:C,imsApis:this.imsApis},this.tokenService=new v.TokenService(i(i({},this.serviceRequest),{useLocalStorage:E,autoValidateToken:I}),this.csrfService),this.profileService=new m.ProfileService(this.serviceRequest),this.signInservice=T?new c.SignInModalService(this.onPopupMessage,D):new u.SignInService}return Object.defineProperty(e.prototype,"version",{get:function(){return C.default.jslibver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adobeid",{get:function(){return i({},this.adobeIdData)},enumerable:!0,configurable:!0}),e.prototype.enableLogging=function(){l.default.enableLogging()},e.prototype.disableLogging=function(){l.default.disableLogging()},e.prototype.checkInitialized=function(){this.initialized},e.prototype.signUp=function(e,t){var r=this;void 0===e&&(e={}),this.checkInitialized();var i=this.adobeIdData,n=this.csrfService;if(!i)throw new Error("no adobeId on reAuthenticate");var o=n.initialize();return i.createSignUpRedirectRequest(e,t,o).then((function(e){r.signInservice.signIn(e)}))},e.prototype.isSignedInUser=function(){return!(!this.getAccessToken()&&!this.getReauthAccessToken())},e.prototype.getProfile=function(){var e=this,t=this.profileService.getProfileFromStorage();if(t)return Promise.resolve(t);var r=this.getAccessToken()||this.getReauthAccessToken();return r?this.profileService.getProfile(r.token).then((function(e){return Promise.resolve(e)})).catch((function(t){return l.default.error("get profile exception ",t),t instanceof A.HttpErrorResponse?e.refreshToken().then((function(e){return Promise.resolve(e.profile)})):Promise.reject(new g.ProfileException(t.message||t))})):Promise.reject(new g.ProfileException("please login before getting the profile"))},e.prototype.avatarUrl=function(e){return this.imsApis.avatarUrl(e)},e.prototype.getReleaseFlags=function(e){return void 0===e&&(e=!1),e?this.tokenService.getDecodedReleaseFlags():this.tokenService.getReleaseFlags()},e.prototype.getAccessToken=function(){return this.getTokenFromStorage(!1)},e.prototype.getReauthAccessToken=function(){return this.getTokenFromStorage(!0)},e.prototype.getTokenFromStorage=function(e){var t=this.tokenService.getTokenFieldsFromStorage(e);return t?{token:t.tokenValue,expire:t.expire,sid:t.sid,impersonatorId:t.impersonatorId,isImpersonatedSession:t.isImpersonatedSession}:null},e.prototype.listSocialProviders=function(){var e=this;return new Promise((function(t,r){var i=e.adobeIdData.client_id;e.imsApis.listSocialProviders({client_id:i}).then((function(e){t(e)})).catch((function(e){r(e)}))}))},e.prototype.tokenReceived=function(e){this.adobeIdData.handlers.triggerOnAccessToken(e),S.default.startAutoRefreshFlow({expire:e.expire,refreshTokenMethod:this.refreshToken})},e.prototype.onTokenProfileReceived=function(e){var t=e.tokenInfo,r=e.profile;return l.default.info("token",t),this.tokenReceived(t),this.profileService.saveProfileToStorage(r),Promise.resolve(e)},e.prototype.validateToken=function(){var e=this;return this.tokenService.validateToken().then((function(){return Promise.resolve(!0)})).catch((function(t){return l.default.warn("validate token exception",t),t instanceof A.HttpErrorResponse||e.profileService.removeProfile(),Promise.reject(!1)}))},e.prototype.onTokenExpired=function(){var e=this.adobeIdData.handlers;this.tokenService.purge(),e.triggerOnAccessTokenHasExpired()},e.prototype.setStandAloneToken=function(e){return this.tokenService.setStandAloneToken(e)},e.prototype.initialize=function(){var e=this,t=this.adobeIdData,r=t.handlers,i=t.standalone,n=t.ijt,o=null;return i&&this.setStandAloneToken(i),(n?this.exchangeIjt:this.tokenService.getTokenAndProfile)().then(this.processTokenResponse,(function(t){return e.processInitializeException(t).catch((function(t){return e.verifyRideErrorException(t)})).catch((function(t){return e.verifyCsrfException(t).catch((function(e){return l.default.info("initialize exception ended",e)}))}))})).then((function(e){o=e})).finally((function(){return l.default.info("onReady initialization"),window.addEventListener(x.ASK_FOR_IMSLIB_INSTANCE_DOM_EVENT_NAME,(function(){e.triggerOnImsInstance(e)}),!1),r.triggerOnReady(o?o.context:null),e.triggerOnImsInstance(e),e.initialized=!0,Promise.resolve(o)}))},e.prototype.notifyParentAboutModalSignIn=function(e){var t=window.location.href.replace("imslibmodal","wasmodal");return window.opener?(window.opener.postMessage(t,window.location.origin),window.close()):window[""+e.wndRedirectPropName]=t,Promise.reject("popup")},e.prototype.restoreHash=function(){var e=b.default.fragmentToObject();e&&e.from_ims&&y.default.setHash(e.old_hash||"")},e.prototype.getTransitoryAuthorizationCode=function(e,t){return void 0===t&&(t={}),(e=e||{}).response_type=e.response_type||"code",e.target_client_id=e.target_client_id||this.adobeIdData.client_id,e.target_scope=e.target_scope||this.adobeIdData.scope,this.imsApis.getTransitoryAuthorizationCode(e,t,this.adobeIdData.client_id)},e.prototype.jumpToken=function(e,t){return void 0===t&&(t={}),e.target_client_id=e.target_client_id||this.adobeIdData.client_id,e.target_scope=e.target_scope||this.adobeIdData.scope,this.imsApis.jumpToken(e,t,this.adobeIdData.client_id)},e.prototype.getVerifierByKey=function(e){return(new E.CodeChallenge).getVerifierByKey(e)},e}();t.AdobeIMS=I},961872:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TokenProfileResponse=function(e,t){this.profile=null,this.tokenFields=e,this.profile=t}},88306:function(e,t,r){"use strict";r(595249),r(497814),r(28227);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(883517)),o=r(460161);t.ONE_HOUR=1296e4;var s=function(){function e(e){this.storageInstance=null,this.nonceStorageKey="",this.nonceStorageKey="nonce"+e}return Object.defineProperty(e.prototype,"storage",{get:function(){return this.storageInstance||(this.storageInstance=n.default.getAvailableStorage()),this.storageInstance},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){if(!this.isStorageAvailable())return"";var t=e.generateNonce(),r=this.getNonceFromStorage()||{};return r=this.clearOlderNonceKeys(r),this.addNonceToObject(r,t),this.saveNonceValuesToStorage(r),t.value},e.prototype.addNonceToObject=function(e,t){e[t.value]=t.expiry},e.prototype.clearOlderNonceKeys=function(e,r){void 0===r&&(r=t.ONE_HOUR);var i=Date.now()-r;return Object.keys(e).forEach((function(t){parseInt(e[t])<i&&delete e[t]})),e},e.prototype.verify=function(e){if(!this.isStorageAvailable())return!0;var t=this.getNonceFromStorage();if(!t)return!1;var r=this.clearOlderNonceKeys(t),i=null!==(r[e]||null);return i&&this.clearNonceValueFromStorage(r,e),i},e.prototype.clearNonceValueFromStorage=function(e,t){delete e[t],this.saveNonceValuesToStorage(e)},e.prototype.getNonceFromStorage=function(){var e=this.storage.getItem(this.nonceStorageKey);return e?JSON.parse(e):null},e.prototype.saveNonceValuesToStorage=function(e){this.storage.setItem(this.nonceStorageKey,JSON.stringify(e))},e.prototype.isStorageAvailable=function(){return!(this.storage instanceof o.MemoryStorage)},e.cryptoRndomString=function(){if(!window.crypto)return"";var e=new Uint32Array(3);return window.crypto.getRandomValues(e),e.join("").substr(0,16)},e.randomString=function(){var t=e.cryptoRndomString();if(t)return t;for(var r="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<16;n++)r+=i.charAt(Math.floor(Math.random()*i.length));return r},e.generateNonce=function(){return{value:e.randomString(),expiry:(new Date).getTime().toString()}},e}();t.CsrfService=s},462913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(317712),n=function(){function e(){this.baseUrlAdobe="",this.baseUrlServices="",this.jslibver="v2-v0.31.0-2-g1e8a8a8"}return e.prototype.loadEnvironment=function(e){if(e===i.IEnvironment.STAGE)return this.baseUrlAdobe="https://ims-na1-stg1.adobelogin.com",void(this.baseUrlServices="https://adobeid-na1-stg1.services.adobe.com");this.baseUrlAdobe="https://ims-na1.adobelogin.com",this.baseUrlServices="https://adobeid-na1.services.adobe.com"},e}();t.default=new n},178069:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.IGrantTypes||(t.IGrantTypes={})).token="token",r.code="code"},834422:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.IReauth||(t.IReauth={})).force="force",r.check="check"},668304:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(164438)),o=r(839510),s=function(){function e(){}return e.getInitialRedirectUri=function(e,t){var r=e.redirect_uri||t||window.location.href,i="function"==typeof r?r():r,n=i.indexOf("from_ims");return-1===n?i:("#"===i[n-1]&&n--,i.substr(0,n))},e.createDefaultRedirectUrl=function(e,t,r,i){var n=this.getInitialRedirectUri(r,e),o=this.createOldHash(n);return o.indexOf("?")>0?o+"&client_id="+t+"&api="+i:o+"?client_id="+t+"&api="+i},e.createRedirectUrl=function(e,t,r,i,n){void 0===n&&(n="");var o=this.createDefaultRedirectUrl(e,t,r,i);(n=n||r.scope||"")&&(o=o+"&scope="+n);var s=r.reauth||"";return s&&(o=o+"&reauth="+s),o},e.createOldHash=function(e){var t=e.indexOf("#");return t<0?e+"#old_hash=&from_ims=true":e.substring(0,t)+"#old_hash="+e.substring(t+1)+"&from_ims=true"},e.mergeApiParamsWithExternalParams=function(e,t,r){return o.merge(n.default.getCustomApiParameters(e,r),t)},e}();t.RedirectHelper=s},442736:function(e,t,r){"use strict";r(635397),r(595249),r(497814),r(28227);var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(883517));t.ONE_HOUR=1296e4;var a=function(){function e(){this.storage=s.default.getAvailableStorage()}return e.prototype.b64Uri=function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},e.prototype.createCodeChallenge=function(e,t){var r=this;void 0===t&&(t=43);for(var i=window.msCrypto||window.crypto,o=this.b64Uri(Array.prototype.map.call(i.getRandomValues(new Uint8Array(t)),(function(e){return String.fromCharCode(e)})).join("")).substring(0,t),s=new Uint8Array(o.length),a=0;a<o.length;a++)s[a]=o.charCodeAt(a);var l=i.subtle.digest("SHA-256",s);return new Promise((function(t,i){window.CryptoOperation?(l.onerror=function(e){return i(e)},l.oncomplete=function(i){var s=new Uint8Array(i.target.result),a=r.b64Uri(String.fromCharCode.apply(String,n(s)));return t(r.saveVerifierAndReturn(e,{verifier:o,challenge:a}))}):l.then((function(i){var s=new Uint8Array(i),a=r.b64Uri(String.fromCharCode.apply(String,n(s)));return t(r.saveVerifierAndReturn(e,{verifier:o,challenge:a}))}))}))},e.prototype.saveVerifierAndReturn=function(e,t){var r=this.getVerifierValuesFromStorage(),i={verifier:t.verifier||"",expiry:(new Date).getTime().toString()};return r[e]=i,this.storage.setItem("verifiers",JSON.stringify(r)),Promise.resolve(t)},e.prototype.getVerifierValuesFromStorage=function(){var e=this.storage.getItem("verifiers"),t=e?JSON.parse(e):{};return this.clearOlderVerifiers(t)},e.prototype.clearOlderVerifiers=function(e,r){void 0===r&&(r=t.ONE_HOUR);var i=Date.now()-r;return Object.keys(e).forEach((function(t){parseInt(e[t])<i&&delete e[t]})),e},e.prototype.getVerifierByKey=function(e){var t=this.getVerifierValuesFromStorage(),r=t?t[e]:{};return delete t[e],this.storage.setItem("verifiers",JSON.stringify(t)),r?r.verifier:""},e}();t.CodeChallenge=a},73140:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(746642)),s=n(r(462913)),a=r(668304),l=r(839510);t.BaseSignInService=function(){var e=this;this.composeRedirectUrl=function(e){var t="authorize",r=e.apiParameters,n=e.externalParameters,o=void 0===n?{}:n,u=e.adobeIdRedirectUri,c=void 0===u?"":u,d=e.clientId,h=e.locale,p=e.state,f=void 0===p?{}:p,g=e.scope,m=void 0===g?o.scope||r.scope||"":g,v=a.RedirectHelper.mergeApiParamsWithExternalParams(r,o,t);f&&(v.state=l.merge(v.state||{},f));var y=a.RedirectHelper.createRedirectUrl(c,d,v,t,m),b=o.locale||h||"",_=e.response_type,w=void 0===_?v.response_type||"":_;return i(i({},v),{client_id:d,scope:m,locale:b,response_type:w,jslVersion:s.default.jslibver,redirect_uri:y})},this.createRedirectUrl=function(t){var r=e.composeRedirectUrl(t),i=o.default.uriEncodeData(r);return s.default.baseUrlAdobe+"/ims/authorize/v1?"+i}}},855117:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var n=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/,o=["https://auth.services.adobe.com","https://auth-stg1.services.adobe.com","https://localhost.corp.adobe.com:9000"];t.default=new function(){var e=this;this.windowObjectReference=null,this.previousUrl="",this.openSignInWindow=function(t,r,i,n){e.onProcessLocation=n,e.allowOrigin=i.allowOrigin,e.timerId&&clearInterval(e.timerId),window.removeEventListener("message",e.receiveMessage),window.addEventListener("message",e.receiveMessage);var o="toolbar=no, menubar=no, width="+i.width+", height="+i.height+", top="+i.top+", left="+i.left;!e.windowObjectReference||e.windowObjectReference&&e.windowObjectReference.closed?e.windowObjectReference=window.open(t,i.title,o):e.previousUrl!==t?(e.windowObjectReference=window.open(t,i.title,o),e.windowObjectReference&&e.windowObjectReference.focus()):e.windowObjectReference.focus();var s=e.windowObjectReference||{};s.opener||(e.timerId=setInterval((function(){s[r]&&(clearInterval(e.timerId),e.onProcessLocation&&e.onProcessLocation(s[r]),delete s[r],e.windowObjectReference&&e.windowObjectReference.close())}),500)),e.previousUrl=t},this.receiveMessage=function(t){if(i(o,[e.allowOrigin]).includes(t.origin)){try{if(!n.test(t.data))return}catch(e){return}e.onProcessLocation&&e.onProcessLocation(t.data)}}}},311484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PopupSettings=function(e){void 0===e&&(e={}),this.title="Adobe ID",this.width=600,this.top=100,this.left=100;var t=e.title,r=void 0===t?"Adobe ID":t,i=e.width,n=void 0===i?600:i,o=e.height,s=void 0===o?700:o,a=e.top,l=void 0===a?100:a,u=e.left,c=void 0===u?100:u,d=e.allowedOrigin;this.title=r,this.width=n,this.height=s,this.top=l,this.left=c,this.allowOrigin=d}},979792:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(855117)),l=function(e){function t(t,r){var i=e.call(this)||this;return i.signIn=function(e){e.state=o(o({},e.state),{imslibmodal:!0});var t=e.state.nonce,r=i.createRedirectUrl(e);a.default.openSignInWindow(r,t,i.popupSettings,i.onPopupMessage)},i.onPopupMessage=t,i.popupSettings=r,i}return n(t,e),t}(r(73140).BaseSignInService);t.SignInModalService=l},137455:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(746642)),a=o(r(462913)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.signIn=function(e){var r=t.createRedirectUrl(e);s.default.setHrefUrl(r)},t.authorizeToken=function(e,r){var i=t.composeRedirectUrl(r);e&&(i.user_assertion=e,i.user_assertion_type="urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),t.createAuthorizeForm(i).submit()},t}return n(t,e),t.prototype.createAuthorizeForm=function(e){var t=a.default.baseUrlAdobe+"/ims/authorize/v1",r=document.createElement("form");r.style.display="none",r.setAttribute("method","post"),r.setAttribute("action",t);var i=null,n=null,o="";for(var s in e){if("object"==typeof(n=e[s])){if(0===Object.keys(n).length)continue;o=JSON.stringify(n)}else o=n;""!==o&&(i=this.createFormElement("input","text",s,o),r.appendChild(i))}return document.getElementsByTagName("body")[0].appendChild(r),r},t.prototype.createFormElement=function(e,t,r,i){var n=document.createElement(e);return n.setAttribute("type",t),n.setAttribute("name",r),n.setAttribute("value",i),n},t}(r(73140).BaseSignInService);t.SignInService=l},325740:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(668304),s=n(r(746642)),a=n(r(462913));t.SignOutService=function(){this.signOut=function(e){var t="logout",r=e.apiParameters,n=e.externalParameters,l=e.adobeIdRedirectUri,u=void 0===l?"":l,c=e.clientId,d=o.RedirectHelper.mergeApiParamsWithExternalParams(r,n,t),h=o.RedirectHelper.createDefaultRedirectUrl(u,c,d,t),p=i(i({},d),{client_id:c,redirect_uri:h,jslVersion:a.default.jslibver}),f=s.default.uriEncodeData(p),g=a.default.baseUrlAdobe+"/ims/logout/v1?"+f;s.default.replaceUrl(g)}}},773755:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(734148)),o=["keyup","mousemove"],s=function(){function e(){var e=this;this.lastUserInteraction=Date.now(),this.userActive=!1,this.userInteractionHandler=function(){e.lastUserInteraction=Date.now(),e.userActive=!0},this.initializeDomEvents=function(){o.forEach((function(t){return window.addEventListener(t,e.userInteractionHandler)}))},this.clearDomEvents=function(){o.forEach((function(t){return window.removeEventListener(t,e.userInteractionHandler)}))}}return e.prototype.startAutoRefreshFlow=function(e){var t,r=this;if(e&&e.expire&&e.refreshTokenMethod){this.refreshParameters=e,this.refreshTimerId&&(n.default.info("Auto-refresh timer already set, clearing"),clearTimeout(this.refreshTimerId)),this.clearDomEvents(),this.initializeDomEvents();var i=this.fromNowToNMinutesBeforeDate(null===(t=this.refreshParameters)||void 0===t?void 0:t.expire,1);n.default.info("Auto-refresh timer will run after (seconds)",i/1e3),this.refreshTimerId=setTimeout((function(){var e;if(r.userActive){var t=Math.floor((Date.now()-r.lastUserInteraction)/1e3);null===(e=r.refreshParameters)||void 0===e||e.refreshTokenMethod({userInactiveSince:t},!0),n.default.info("Auto-refresh performed, user was inactive for (seconds)",t)}else n.default.info("Auto-refresh skipped, user was never active")}),i)}else n.default.info("Won't schedule token auto-refresh",!e,!e.expire,!e.refreshTokenMethod)},e.prototype.fromNowToNMinutesBeforeDate=function(e,t){var r=e.getTime()-Date.now()-6e4*t;return r<=0?6e4*t:r},e}();t.default=new s},164438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(839510),n=function(){function e(){this.getCustomApiParameters=function(e,t){return e[t]||{}}}return e.prototype.mergeExternalParameters=function(e,t,r){return i.merge(this.getCustomApiParameters(t,r),e)},e.prototype.toJson=function(e){try{return"string"!=typeof e?e:JSON.parse(e)}catch(e){return null}},e}();t.default=new n},344505:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AdobeIdKey="adobeid",t.AdobeIMSKey="adobeIMS",t.AdobeImsFactory="adobeImsFactory",t.DEFAULT_LANGUAGE="en_US",(r=t.STORAGE_MODE||(t.STORAGE_MODE={})).LocalStorage="local",r.SessionStorage="session",r.MemoryStorage="memory",t.HEADERS={AUTHORIZATION:"Authorization",X_IMS_CLIENT_ID:"X-IMS-ClientId",RETRY_AFTER:"Retry-after"},t.PROFILE_STORAGE_KEY="adobeid_ims_profile",t.TOKEN_STORAGE_KEY="adobeid_ims_access_token",t.ON_IMSLIB_INSTANCE="onImsLibInstance",t.ASK_FOR_IMSLIB_INSTANCE_DOM_EVENT_NAME="getImsLibInstance"},297049:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.DEBOUNCE_TIME=1e3,this.cache={},this.storeApiResponse=function(t,r,i){void 0===t&&(t=""),void 0===r&&(r=""),e.cacheApiResponse(t,r,i)}}return e.prototype.getCachedApiResponse=function(e,t){void 0===t&&(t="");var r="string"==typeof t?t:JSON.stringify(t),i=this.cache[e];if(!i)return null;var n=i[r];return n?n.data:null},e.prototype.cacheApiResponse=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t="");var n=this.cache[e];n||(n={},this.cache[e]=n);var o=this.createClearCachedDataTimer(e,t);n[t]={timerId:o,data:r({},i)}},e.prototype.createClearCachedDataTimer=function(e,t){var r=this;return setTimeout((function(){var i=r.cache[e]||{},n=i[t];n&&n&&n.timerId&&(clearTimeout(n.timerId),delete i[t])}),this.DEBOUNCE_TIME)},e}();t.default=new i},543159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(717640),n=r(149788),o=r(580421),s=function(){function e(){this.adobeIdThinData=null}return e.prototype.verify=function(e,t){void 0===t&&(t="");var r=e.status,i=e.data;return r?401==r?new o.HttpErrorResponse({error:"unauthorized"}):this.parseTokenResponseForRideErrors(i,t)||(409==r?i:429==r?new o.HttpErrorResponse({error:"rate_limited",retryAfter:i.retryAfter?parseInt(i.retryAfter):10}):r.toString().match(/5\d{2}/g)?new o.HttpErrorResponse({error:"server_error"}):null):new o.HttpErrorResponse({error:"networkError",message:i||""})},e.prototype.parseTokenResponseForRideErrors=function(e,t){if(!e)return null;var r=e.error,i=e.jump;if(!r)return null;if(0!==r.indexOf("ride_"))return"token_expired"===r&&t.indexOf("check/v6/token")>=0?new n.RideException("ride_pba_idle_session","",!0):null;var o=this.addRedirectUriToJump(r,i);return new n.RideException(r,o)},e.prototype.addRedirectUriToJump=function(e,t){if(!t||"string"!=typeof t)return"";var r=t;this.adobeIdThinData||(this.adobeIdThinData=new i.AdobeIdThinData);var n=this.adobeIdThinData.computeRideRedirectUri(e);if(!n||0===n.length)return r;try{var o=new URL(r);return o.searchParams.append("redirect_uri",n),o.toString()}catch(e){return r}},e.prototype.isUnauthorizedException=function(e){var t=e.status;return 401===(void 0===t?0:t)},e}();t.default=new s},580421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HttpErrorResponse=function(e){var t=e.error,r=e.retryAfter,i=void 0===r?0:r,n=e.message,o=void 0===n?"":n;this.error=t,this.retryAfter=i,this.message=o}},470573:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(344505),s=n(r(746642)),a=n(r(164438)),l=n(r(462913)),u=n(r(240115)),c=function(){function e(e){void 0===e&&(e={}),this.CONTENT_FORM_ENCODED="application/x-www-form-urlencoded;charset=utf-8",this.apiParameters=e}return e.prototype.validateToken=function(e){var t=e.token,r=e.client_id,n=s.default.uriEncodeData(i(i({},a.default.getCustomApiParameters(this.apiParameters,"validate_token")),{type:"access_token",client_id:r,token:t})),o=l.default.baseUrlAdobe+"/ims/validate_token/v1?jslVersion="+l.default.jslibver;return u.default.post(o,n,this.formEncoded())},e.prototype.getProfile=function(e){var t=e.token,r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"profile")),o=this.createAuthorizationHeader(t),c=s.default.uriEncodeData(i({client_id:r},n)),d=l.default.baseUrlAdobe+"/ims/profile/v1?"+c+"&jslVersion="+l.default.jslibver;return u.default.get(d,o)},e.prototype.getUserInfo=function(e){var t=e.token,r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"userinfo")),o=this.createAuthorizationHeader(t),c=s.default.uriEncodeData(i({client_id:r},n)),d=l.default.baseUrlAdobe+"/ims/userinfo/v1?"+c+"&jslVersion="+l.default.jslibver;return u.default.get(d,o)},e.prototype.logoutToken=function(e){var t=e.client_id,r=e.token,n=i({},a.default.getCustomApiParameters(this.apiParameters,"logout_token")),o=l.default.baseUrlServices+"/ims/logout/v1?jslVersion="+l.default.jslibver;return u.default.post(o,i({client_id:t,access_token:r},n))},e.prototype.checkStatus=function(){var e=l.default.baseUrlServices+"/ims/check/v1/status";return u.default.get(e)},e.prototype.checkToken=function(e,t,r){var n=e.client_id,o=e.scope,c=i({},a.default.mergeExternalParameters(t,this.apiParameters,"check_token")),d=l.default.baseUrlServices+"/ims/check/v6/token?jslVersion="+l.default.jslibver,h=i(i({},c),{client_id:n,scope:o});r&&(h.user_id=r);var p=s.default.uriEncodeData(h);return u.default.post(d,p,this.formEncoded())},e.prototype.switchProfile=function(e,t,r){void 0===r&&(r="");var n=e.client_id,o=e.scope,c=void 0===o?"":o,d=i({},a.default.mergeExternalParameters(t,this.apiParameters,"check_token")),h=l.default.baseUrlServices+"/ims/check/v6/token?jslVersion="+l.default.jslibver,p=s.default.uriEncodeData(i(i({},d),{client_id:n,scope:c,user_id:r}));return u.default.post(h,p,this.formEncoded())},e.prototype.listSocialProviders=function(e){var t=e.client_id,r=i({},a.default.getCustomApiParameters(this.apiParameters,"providers")),n=s.default.uriEncodeData(i({client_id:t},r)),o=l.default.baseUrlServices+"/ims/social/v1/providers?"+n+"&jslVersion="+l.default.jslibver;return u.default.get(o)},e.prototype.exchangeIjt=function(e,t){var r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"ijt")),o=l.default.baseUrlServices+"/ims/jump/implicit/"+t,c=s.default.uriEncodeData(i({client_id:r},n)),d=o+"?"+c+"&jslVersion="+l.default.jslibver;return d.length>2048&&(delete n.redirect_uri,d=o+"?"+(c=s.default.uriEncodeData(n))),u.default.get(d)},e.prototype.avatarUrl=function(e){return l.default.baseUrlAdobe+"/ims/avatar/download/"+e},e.prototype.getReleaseFlags=function(e){var t=e.token,r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"fg_value")),o=this.createAuthorizationHeader(t),c=s.default.uriEncodeData(i({client_id:r},n)),d=l.default.baseUrlAdobe+"/ims/fg/value/v1?"+c+"&jslVersion="+l.default.jslibver;return u.default.get(d,o)},e.prototype.getTransitoryAuthorizationCode=function(e,t,r){void 0===t&&(t={});var n=i({},a.default.mergeExternalParameters(t,this.apiParameters,"check_token")),o=l.default.baseUrlServices+"/ims/check/v6/token?client_id="+r+"&jslVersion="+l.default.jslibver,c=s.default.uriEncodeData(i(i({},n),e));return u.default.post(o,c,this.formEncoded())},e.prototype.getTokenFromCode=function(e,t){void 0===t&&(t={});var r=i({},a.default.mergeExternalParameters(t,this.apiParameters,"token"));r.grant_type="authorization_code",delete e.other;var n=l.default.baseUrlServices+"/ims/token/v3?jslVersion="+l.default.jslibver,o=s.default.uriEncodeData(i(i({},r),e));return u.default.post(n,o,this.formEncoded())},e.prototype.jumpToken=function(e,t,r){void 0===t&&(t={});var n=i({},a.default.mergeExternalParameters(t,this.apiParameters,"jumptoken")),o=l.default.baseUrlServices+"/ims/jumptoken/v1?client_id="+r+"&jslVersion="+l.default.jslibver,c=s.default.uriEncodeData(i(i({},n),e));return u.default.post(o,c,this.formEncoded())},e.prototype.createAuthorizationHeader=function(e){var t={};return e&&(t[o.HEADERS.AUTHORIZATION]="Bearer "+e),t},e.prototype.formEncoded=function(e){return void 0===e&&(e={}),e["content-type"]=this.CONTENT_FORM_ENCODED,e},e}();t.ImsApis=c},894462:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.status=0,this.data="",this.status=e,this.data=this.toJson(t)}return e.prototype.toJson=function(e){try{return"string"!=typeof e?e:JSON.parse(e)}catch(t){return e}},e}();t.ApiResponse=r},240115:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(297049)),o=i(r(543159)),s=i(r(943319));t.default=new(function(){function e(){this.triggerOnError=null}return e.prototype.post=function(e,t,r){var i=this;void 0===r&&(r={});var o=n.default.getCachedApiResponse(e,t);if(o){var a=o.status,l=o.data;return 200===a?Promise.resolve(l):Promise.reject(l)}return s.default.post(e,t,r).then((function(r){return i.storeApiResponse(e,JSON.stringify(t),r)})).catch((function(r){return i.verifyError(e,JSON.stringify(t),r)}))},e.prototype.get=function(e,t){var r=this;void 0===t&&(t={});var i=n.default.getCachedApiResponse(e);if(i){var o=i.status,a=i.data;return 200===o?Promise.resolve(a):Promise.reject(a)}return s.default.get(e,t).then((function(t){return r.storeApiResponse(e,"",t)})).catch((function(t){return r.verifyError(e,"",t)}))},e.prototype.verifyError=function(e,t,r){this.storeApiResponse(e,t,r);var i=o.default.verify(r,e);return Promise.reject(i||r.data)},e.prototype.storeApiResponse=function(e,t,r){return void 0===t&&(t=""),n.default.storeApiResponse(e,t,r),Promise.resolve(r.data)},e}())},943319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(894462);t.default=new(function(){function e(){}return e.prototype.http=function(e){return new Promise((function(t,r){var n,o=new(0,window.XMLHttpRequest);o.withCredentials=!0,o.open(e.method,e.url,!0),o.onload=function(){return this.status>=200&&this.status<300?t(new i.ApiResponse(this.status,this.response)):r(new i.ApiResponse(this.status,this.response))},o.onerror=function(){var e=new i.ApiResponse(this.status,this.response);return r(e)},(n=e.headers)&&Object.keys(n).forEach((function(e){o.setRequestHeader(e,n[e])})),o.send(e.data)}))},e.prototype.post=function(e,t,r){return void 0===r&&(r={}),this.http({headers:r,method:"POST",url:e,data:t})},e.prototype.get=function(e,t){return void 0===t&&(t={}),this.http({headers:t,method:"GET",url:e})},e}())},734148:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.logEnabled=!1,this.print=function(t,r){e.logEnabled&&t.apply(void 0,i(r))},this.assert=function(t,r){e.print(console.assert,[t,r])},this.assertCondition=function(t,r){t()||e.print(console.error,[r])},this.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.error,t)},this.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.warn,t)},this.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.info,t)}}return e.prototype.enableLogging=function(){this.logEnabled=!0},e.prototype.disableLogging=function(){this.logEnabled=!1},e}();t.default=new n},522295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(539462);t.ProfileException=function(e){this.message=null,this.errorType=i.IErrorType.PROFILE_EXCEPTION,this.message=e}},835424:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(883517)),o=r(344505),s=r(522295),a=r(580421),l=r(283877),u=function(){function e(e){this.profileServiceRequest=e,this.storage=n.default.getStorageByName(o.STORAGE_MODE.SessionStorage)}return e.prototype.getProfile=function(e){var t=this,r=this.profileServiceRequest,i=r.clientId,n=r.imsApis,o=this.getProfileFromStorage();return o?Promise.resolve(o):n.getProfile({client_id:i,token:e}).then((function(e){if(!e)throw new s.ProfileException("NO profile response");if(0===Object.keys(e).length)throw new s.ProfileException("NO profile value");return t.saveProfileToStorage(e),Promise.resolve(e)})).catch((function(e){return e instanceof a.HttpErrorResponse||t.removeProfile(),Promise.reject(e)}))},e.prototype.getProfileStorageKey=function(e){void 0===e&&(e=!1);var t=this.profileServiceRequest,r=t.clientId,i=t.scope;return o.PROFILE_STORAGE_KEY+"/"+r+"/"+!1+"/"+(e?l.sortScopes(i):i)},e.prototype.getProfileFromStorage=function(){var e=this.getProfileStorageKey(),t=this.getProfileStorageKey(!0),r=this.storage.getItem(e);return r||(r=this.storage.getItem(t)),r&&JSON.parse(r)},e.prototype.saveProfileToStorage=function(e){var t=this.getProfileStorageKey(),r=this.getProfileStorageKey(!0);this.storage.setItem(t,JSON.stringify(e)),this.storage.setItem(r,JSON.stringify(e))},e.prototype.removeProfile=function(){var e=this.getProfileStorageKey(),t=this.getProfileStorageKey(!0);this.storage.removeItem(e),this.storage.removeItem(t)},e.prototype.removeProfileIfOtherUser=function(e){if(e){var t=this.getProfileFromStorage();t&&t.userId!==e&&this.removeProfile()}},e}();t.ProfileService=u},460161:(e,t,r)=>{"use strict";r(936963),Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.data={},this.length=0}return e.prototype.clear=function(){this.data={},this.length=0},e.prototype.getItem=function(e){return this.data[e]||null},e.prototype.removeItem=function(e){return!!this.data[e]&&(delete this.data[e],--this.length,!0)},e.prototype.setItem=function(e,t){this.data[e]||++this.length,this.data[e]=t},e.prototype.key=function(e){throw new Error("Method not implemented. "+e)},e}();t.MemoryStorage=i},883517:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(460161),o=r(344505),s=i(r(734148)),a=function(){function e(){this.memoryStorageInstance=null}return Object.defineProperty(e.prototype,"memoryStorage",{get:function(){return this.memoryStorageInstance||(this.memoryStorageInstance=new n.MemoryStorage),this.memoryStorageInstance},enumerable:!0,configurable:!0}),e.prototype.getStorageByName=function(e){var t=this.getStorageInstanceByName(e);return t&&this.verifyStorage(t)?t:this.memoryStorage},e.prototype.getStorageInstanceByName=function(e){if(e===o.STORAGE_MODE.MemoryStorage)return this.memoryStorage;try{return e===o.STORAGE_MODE.LocalStorage?window.localStorage:window.sessionStorage}catch(e){return s.default.warn("Please change your cookies settings in order to allow local data to be set"),null}},e.prototype.getAvailableStorage=function(){var e=this.getStorageByName(o.STORAGE_MODE.LocalStorage);return e instanceof n.MemoryStorage?this.getStorageByName(o.STORAGE_MODE.SessionStorage):e},e.prototype.verifyStorage=function(e){var t="test";try{return e.setItem(t,"true"),"true"===e.getItem(t)&&(e.removeItem(t),!0)}catch(e){return!1}},e}();t.default=new a},549867:function(e,t){"use strict";var r=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});t.AuthorizationCode=function(e){this.client_id="",this.scope="",this.code="",this.state=null,this.code_verifier="",this.other=null;var t=e.code,i=e.state,n=e.client_id,o=e.scope,s=e.verifier,a=r(e,["code","state","client_id","scope","verifier"]);this.state=i,this.client_id=n,this.code=t,this.scope=o,this.code_verifier=s,this.other=a}},727057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FragmentException=function(e,t){this.message="",this.type="",this.type=e,this.message=t}},373392:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.IFragmentExceptionType||(t.IFragmentExceptionType={})).FRAGMENT="fragment",r.CSRF="csrf",r.NOT_AUTHORIZE="not_authorize"},663492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ModalSignInEvent=function(e){this.wndRedirectPropName="",this.wndRedirectPropName=e}},149788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RideException=function(e,t,r){void 0===r&&(r=!1),this.jump="",this.code=e,this.jump=t,this.isPbaExpiredIdleSessionWorkaround=r}},830553:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.StandaloneToken=function(e){this.token="",this.sid="",this.expirems=0;var t=e.token,r=e.expirems;this.token=t,this.expirems=r}},602346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TokenExpiredException=function(e){this.exception=null,this.exception=e}},192828:function(e,t,r){"use strict";r(936963),r(635397);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(164438)),o=i(r(734148)),s=r(283877),a=function(){function e(e,t){var r=this;this.REAUTH_SCOPE="reauthenticated",this.valid=!1,this.isReauth=function(){return r.scope.indexOf(r.REAUTH_SCOPE)>=0},this.client_id="",this.scope="",this.expire=new Date,this.user_id="",this.tokenValue="",this.sid="",this.state=null,this.fromFragment=!1,this.impersonatorId="",this.isImpersonatedSession=!1;var i=e.valid,o=e.tokenValue,s=e.access_token,a=e.state,l=e.other,u=o||s,c=this.parseJwt(u);if(!c)throw new Error("token cannot be decoded "+u);this.state=n.default.toJson(a);var d=c.client_id,h=c.user_id,p=c.scope,f=c.sid,g=c.imp_id,m=c.imp_sid;this.client_id=d,this.expire=t,this.user_id=h,this.scope=p,this.valid=i,this.tokenValue=u,this.sid=f,this.other=l,this.impersonatorId=g||"",this.isImpersonatedSession=!!m}return e.prototype.parseJwt=function(e){if(!e)return null;try{return JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")))}catch(t){return o.default.error("error on decoding token ",e,t),null}},e.prototype.validate=function(e,t){var r=this,i=r.valid,n=r.client_id,a=r.scope,l=r.expire;return l<new Date?(o.default.error("token invalid  --\x3e expires_at",l),!1):null==i||i?n!==e?(o.default.error("token invalid  --\x3e client id",n,e),!1):!!s.validateScopeInclusion(t,a)||(o.default.error("token invalid  --\x3e scope"," token scope =",a,"vs adobeIdScope =",t,"."),!1):(o.default.error("token invalid  --\x3e valid"),!1)},e}();t.TokenFields=a},993685:function(e,t,r){"use strict";r(936963);var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(883517)),a=r(344505),l=r(192828),u=o(r(205371)),c=r(727057),d=r(373392),h=r(961872),p=r(149788),f=r(602346),g=o(r(734148)),m=r(580421),v=r(549867),y=r(663492),b=r(442736),_=r(283877),w=r(849043),P=function(){function e(e,t){var r=this;this.getTokenAndProfile=function(e){void 0===e&&(e={});var t=r.getTokenFields();return t instanceof y.ModalSignInEvent||t instanceof c.FragmentException?Promise.reject(t):t instanceof v.AuthorizationCode?r.tokenServiceRequest.imsApis.getTokenFromCode(t,e).then((function(e){var r=e.access_token,i=e.state,o=e.expires_in,s=e.scope,a=void 0===s?"":s,u=n(e,["access_token","state","expires_in","scope"]),c=new l.TokenFields({scope:a,tokenValue:r,valid:!0,state:i,other:t.other},new Date((new Date).getTime()+parseFloat(o)));return Promise.resolve(new h.TokenProfileResponse(c,u))})):t instanceof l.TokenFields?t.fromFragment||!r.tokenServiceRequest.autoValidateToken?Promise.resolve(new h.TokenProfileResponse(t,null)):r.callValidateTokenApi(t.tokenValue).then((function(){return new h.TokenProfileResponse(t,null)})).catch((function(){return r.callRefreshToken(e)})):r.callRefreshToken(e)};var i=e.useLocalStorage;this.csrfService=t,this.tokenServiceRequest=e,this.storage=s.default.getStorageByName(i?a.STORAGE_MODE.LocalStorage:a.STORAGE_MODE.SessionStorage)}return e.prototype.getTokenFields=function(){var e=this.tokenServiceRequest,t=e.clientId,r=e.scope,i=this.getTokenFromFragment();return i instanceof y.ModalSignInEvent||i instanceof c.FragmentException||i instanceof v.AuthorizationCode?i:i&&i.validate(t,r)?(i.fromFragment=!0,this.addTokenToStorage(i),i):this.getTokenFieldsFromStorage()},e.prototype.validateToken=function(){var e=this.getTokenFieldsFromStorage();return e?this.callValidateTokenApi(e.tokenValue):Promise.reject(null)},e.prototype.getReleaseFlags=function(){var e=this.tokenServiceRequest,t=e.clientId,r=e.imsApis,i=this.getTokenFieldsFromStorage();return i?r.getReleaseFlags({token:i.tokenValue,client_id:t}):Promise.reject(null)},e.prototype.getDecodedReleaseFlags=function(){return this.getReleaseFlags().then((function(e){return w.decodeToBitstring(e.releaseFlags,!0)}))},e.prototype.callValidateTokenApi=function(e){var t=this,r=this.tokenServiceRequest,n=r.clientId,o=r.scope;return r.imsApis.validateToken({client_id:n,token:e}).then((function(r){g.default.info("validateToken response",r);var s=new l.TokenFields(i(i({},r),{tokenValue:e}),new Date(parseFloat(r.expires_at)));if(s.validate(n,o))return t.addTokenToStorage(s),Promise.resolve(s);throw new Error("could not validate tokenFields")})).catch((function(e){return g.default.error("validateToken response",e),e instanceof m.HttpErrorResponse||t.removeTokenFromLocalStorage(),Promise.reject(e)}))},e.prototype.getTokenFromFragment=function(){var e=u.default.fragmentToObject();if(!e)return null;g.default.info("fragment value "+e);var t=e.access_token,r=e.scope,o=e.error,s=e.api,a=e.state,h=void 0===a?{}:a,p=e.expires_in,f=e.client_id,m=e.code,_=void 0===m?"":m,w=n(e,["access_token","scope","error","api","state","expires_in","client_id","code"]),P=h||{},A=P.imslibmodal,S=P.nonce;if(!0===A)return new y.ModalSignInEvent(S);if(!e.from_ims)return null;if(f!==this.tokenServiceRequest.clientId)return null;if(o)return new c.FragmentException(d.IFragmentExceptionType.FRAGMENT,o);if("authorize"!==s)return new c.FragmentException(d.IFragmentExceptionType.NOT_AUTHORIZE,"api should be authorize and "+s+" is used");if(!this.csrfService.verify(S))return new c.FragmentException(d.IFragmentExceptionType.CSRF,"CSRF exception");if(_){var x=(new b.CodeChallenge).getVerifierByKey(S);if(!x)throw new Error("no verifier value has been found");return new v.AuthorizationCode(i(i({},e),{verifier:x}))}return t?new l.TokenFields({scope:r,tokenValue:t,valid:!0,state:h,other:w},new Date((new Date).getTime()+parseFloat(p))):null},e.prototype.getDataFromStorageWithSortedScopesFallback=function(e){var t=this.getAccessTokenKey(e),r=this.storage.getItem(t);if(!r){var i=this.getAccessTokenKey(e,!0);r=this.storage.getItem(i)}return r},e.prototype.getStorageKeyValue=function(e){return this.storage.getItem(e)},e.prototype.getTokenFieldsFromStorage=function(e){void 0===e&&(e=!1);var t=this.tokenServiceRequest,r=t.clientId,i=t.scope,n=this.getDataFromStorageWithSortedScopesFallback(e);if(!n)return null;var o=JSON.parse(n),s=o.expire?new Date(Date.parse(o.expire)):new Date(o.expiresAtMilliseconds),a=new l.TokenFields(o,s);return a.validate(r,i)?a:null},e.prototype.getAccessTokenKey=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=this.tokenServiceRequest,i=r.clientId,n=r.scope;return a.TOKEN_STORAGE_KEY+"/"+i+"/"+e+"/"+(t?_.sortScopes(n):n)},e.prototype.addTokenToStorage=function(e){if(e){var t=e.isReauth(),r=this.getAccessTokenKey(t),n=this.getAccessTokenKey(t,!0),o=i({},e);o.state={},o.other="{}";var s=JSON.stringify(o);this.storage.setItem(r,s),this.storage.setItem(n,s)}},e.prototype.removeTokenFromLocalStorage=function(){var e=this.getAccessTokenKey(),t=this.getAccessTokenKey(!1,!0);this.storage.removeItem(e),this.storage.removeItem(t)},e.prototype.removeReauthTokenFromLocalStorage=function(){var e=this.getAccessTokenKey(!0),t=this.getAccessTokenKey(!0,!0);this.storage.removeItem(e),this.storage.removeItem(t)},e.prototype.refreshToken=function(e){var t=this;void 0===e&&(e={});var r=this.tokenServiceRequest,o=r.clientId,s=r.imsApis,a=r.scope,l=this.getTokenFieldsFromStorage(),u=l?l.user_id:"";return s.checkToken({client_id:o,scope:a},e,u).then((function(e){if(!e)throw new Error("refresh token --\x3e no response");var r=e.access_token,o=e.expires_in,s=e.token_type,a=e.error,l=e.error_description,u=void 0===l?"":l,c=e.sid,d=n(e,["access_token","expires_in","token_type","error","error_description","sid"]);if(a)throw new Error(a+" "+u);var h=Object.keys(d).length?d:null,p={token:r,expire:new Date(Date.now()+parseFloat(o)),token_type:s,sid:c},f=t.updateToken(p)||{},g={tokenInfo:i(i({},p),{impersonatorId:f.impersonatorId||"",isImpersonatedSession:f.isImpersonatedSession||!1}),profile:h};return Promise.resolve(g)})).catch((function(e){return void 0===e&&(e={}),e instanceof m.HttpErrorResponse||e instanceof p.RideException?Promise.reject(e):(t.removeTokenFromLocalStorage(),Promise.reject(new f.TokenExpiredException(e)))}))},e.prototype.switchProfile=function(e,t){var r=this;void 0===t&&(t={});var o=this.tokenServiceRequest,s=o.clientId,a=o.imsApis,l=o.scope;return a.switchProfile({client_id:s,scope:l},t,e).then((function(e){if(!e)throw new Error("refresh token --\x3e no response");var t=e.access_token,o=e.expires_in,s=e.token_type,a=e.error,l=e.error_description,u=void 0===l?"":l,c=e.sid,d=n(e,["access_token","expires_in","token_type","error","error_description","sid"]);if(a)throw new Error(a+" "+u);var h=Object.keys(d).length?d:null,p={token:t,expire:new Date(Date.now()+parseFloat(o)),token_type:s,sid:c},f=r.updateToken(p)||{},g={tokenInfo:i(i({},p),{impersonatorId:f.impersonatorId||"",isImpersonatedSession:f.isImpersonatedSession||!1}),profile:h};return Promise.resolve(g)})).catch((function(e){return void 0===e&&(e={}),Promise.reject(e)}))},e.prototype.callRefreshToken=function(e){return void 0===e&&(e={}),this.refreshToken(e).then((function(e){var t=e.tokenInfo,r=t.token,i=t.expire,n=e.profile,o=new l.TokenFields({valid:!0,tokenValue:r},i),s=new h.TokenProfileResponse(o,n);return Promise.resolve(s)})).catch((function(e){return Promise.reject(e)}))},e.prototype.updateToken=function(e){var t=e.token,r=e.expire,i=new l.TokenFields({tokenValue:t},r);return i?(i.tokenValue=t,this.addTokenToStorage(i),i):null},e.prototype.purge=function(){this.removeTokenFromLocalStorage(),this.removeReauthTokenFromLocalStorage()},e.prototype.setStandAloneToken=function(e){var t=e.token,r=e.sid,i=e.expirems,n=void 0===i?-1:i,o=this.tokenServiceRequest,s=o.clientId,a=o.scope,u=new Date((new Date).getTime()+n);if(!new l.TokenFields({valid:!0,tokenValue:t},u).validate(s,a))return!1;var c={expire:u,token:t,sid:r};return this.updateToken(c),!0},e.prototype.exchangeIjt=function(e){var t=this.tokenServiceRequest,r={client_id:t.clientId,scope:t.scope};return t.imsApis.exchangeIjt(r,e).then((function(e){var t=e.valid,r=e.access_token,i=e.expires_in;if(!1===t)return Promise.reject(e);var n=new Date(Date.now()+1e3*parseFloat(i)),o=new l.TokenFields({valid:!0,tokenValue:r},n),s=new h.TokenProfileResponse(o,null);return Promise.resolve(s)}))},e}();t.TokenService=P},205371:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(164438)),o=function(){function e(){}return e.prototype.fragmentToObject=function(){var e=this.getHashFromURL();if(!e)return null;var t=this.processHashUrl(e),r=this.getOldHash(t),i=r?t.slice(t.indexOf("old_hash")):t,o=this.removeOldHash(i),s=this.getQueryParamsAsMap(o);r&&(s.old_hash=r);var a=s.state;return a&&(s.state=n.default.toJson(a)),s},e.prototype.getOldHash=function(e){if(!e)return"";var t=e.match("old_hash=(.*?)&from_ims=true");return t?t[1]:""},e.prototype.removeOldHash=function(e){return e?e.replace(/old_hash=(.*?)&from_ims=true/gi,"from_ims=true"):e},e.prototype.getHashFromURL=function(e){void 0===e&&(e=window.location.href);var t=e.indexOf("#");return-1!==t?e.substring(t+1):""},e.prototype.getQueryParamsAsMap=function(e){if(!e)return{};var t={};return(e=e.replace(/^(#\/|\/|#|\?|&)/,"")).split("&").forEach((function(e){if(e.length){var r=e.split("=");t[r[0]]=decodeURIComponent(r[1])}})),t},e.prototype.processHashUrl=function(e){return e.replace("?error","#error").replace(/#/gi,"&").replace("from_ims=true?","from_ims=true&")},e}();t.default=new o},746642:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.uriEncodeData=function(e){if("object"!=typeof e)return"";var t,r=[],i="";for(var n in e)void 0!==(t=e[n])&&(i=this.encodeValue(t),r.push(encodeURIComponent(n)+"="+i));return r.join("&")},e.prototype.encodeValue=function(e){return null===e?"null":"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)},e.prototype.replaceUrl=function(e){e&&window.location.replace(e)},e.prototype.setHrefUrl=function(e){e&&(window.location.href=e)},e.prototype.setHash=function(e){void 0===e&&(e=""),window.location.hash=e},e}();t.default=new r},849043:(e,t,r)=>{"use strict";r(936963),Object.defineProperty(t,"__esModule",{value:!0});var i="abcdefghijklmnopqrstuvwxyz234567".split("").reduce((function(e,t,r){return e[t]=r,e}),{"=":0});t.decodeToBitstring=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("Data is not a string");var r=e.toLowerCase().split("");!function(e){if(e.length%8!=0)throw new Error("Data length is not a multiple of 8");e.forEach((function(e){if(!(e in i))throw new Error("Unknown encoded character "+e)}));var t=!1;e.forEach((function(e){if("="!==e&&t)throw new Error("Found padding char in the middle of the string");"="===e&&(t=!0)}))}(r);var n=function(e){for(var t=e.length-1,r=0;"="===e[t];)++r,--t;return r}(r),o=[];r.forEach((function(e){o.push(function(e){return t=e.toString(2),(r=5-t.length)>0&&(t=new Array(r+1).join("0")+t),t;var t,r}(i[e]))}));var s=o.join("");return n>0&&(s=s.slice(0,-5*n)),s.length%8!=0&&(s=s.slice(0,s.length%8*-1)),t?function(e){var t="";if(e.length%8!=0)throw new Error("Length must be a multiple of 8");for(var r=0,i=e.length;r<i;r+=8)t+=e.slice(r,r+8).split("").reverse().join("");return t}(s):s}},839510:(e,t)=>{"use strict";function r(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=r,t.merge=function e(t,i){if(null==t)return i;if(t===i)return t;if(!r(t))return t;var n=Object.assign({},t);return r(i)&&Object.keys(i).forEach((function(o){var s,a;r(i[o])?o in t?n[o]=e(t[o],i[o]):Object.assign(n,((s={})[o]=i[o],s)):Object.assign(n,((a={})[o]=i[o],a))})),n}},283877:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=",";t.sortScopes=function(e){return e.split(r).sort().join(r)},t.validateScopeInclusion=function(e,t){var i=(null==t?void 0:t.split(r))||[];return((null==e?void 0:e.split(r))||[]).every((function(e){return i.includes(e)}))}},760693:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(60860),n=r.n(i),o=r(573787),s=r.n(o)()(n());s.push([e.id,".ScrollBarInfo-xWYuQv1Wqb3j5A2y_Y_1 {\n\toverflow-y: scroll;\n\tvisibility: hidden;\n}\n",""]),s.locals={test_outer:"ScrollBarInfo-xWYuQv1Wqb3j5A2y_Y_1"};const a=s},713967:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(60860),n=r.n(i),o=r(573787),s=r.n(o)()(n());s.push([e.id,".packages-sdk-lr-importer-src-importer-api-LrImporterIFrame--lr-importer-container--UFyLV{position:absolute;top:0;left:0;right:0;bottom:0}.packages-sdk-lr-importer-src-importer-api-LrImporterIFrame--lr-importer-container--UFyLV iframe{position:relative;width:100%;height:100%;border:none}",""]),s.locals={"lr-importer-container":"packages-sdk-lr-importer-src-importer-api-LrImporterIFrame--lr-importer-container--UFyLV"};const a=s},573787:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",i=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),i&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),i&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,i,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);i&&s[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},60860:e=>{"use strict";e.exports=function(e){return e[1]}},537188:e=>{"use strict";var t=[];function r(e){for(var r=-1,i=0;i<t.length;i++)if(t[i].identifier===e){r=i;break}return r}function i(e,i){for(var o={},s=[],a=0;a<e.length;a++){var l=e[a],u=i.base?l[0]+i.base:l[0],c=o[u]||0,d="".concat(u," ").concat(c);o[u]=c+1;var h=r(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=n(p,i);i.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}s.push(d)}return s}function n(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,n){var o=i(e=e||[],n=n||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var a=r(o[s]);t[a].references--}for(var l=i(e,n),u=0;u<o.length;u++){var c=r(o[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},774154:e=>{"use strict";var t={};e.exports=function(e,r){var i=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(r)}},934809:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},811949:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},165764:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var i="";r.supports&&(i+="@supports (".concat(r.supports,") {")),r.media&&(i+="@media ".concat(r.media," {"));var n=void 0!==r.layer;n&&(i+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),i+=r.css,n&&(i+="}"),r.media&&(i+="}"),r.supports&&(i+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},12509:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},808795:e=>{function t(e,t){var r=e.toString();if(r.length<t){var i=[];i.length=t-r.length+1,r=i.join("0")+r}return r}function r(e,t){return Object.getOwnPropertyNames(t).forEach((function(i){if("object"==typeof t[i])"object"!=typeof e[i]&&(e[i]={}),r(e[i],t[i]);else{var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n)}})),e}function i(e,t,r){e.forEach((function(e){setTimeout((function(){e(t,r)}))}))}var n={prod:"cc-api-data.adobe.io",stage:"cc-api-data-stage.adobe.io",dev:"cc-api-data-dev.adobe.io"},o="/ingest",s={ENVIRONMENT:"prod",ALLOW_NO_TOKEN:!1,ANALYTICS_INGEST_TYPE:"dunamis",ANALYTICS_MAX_QUEUED_EVENTS:50,ANALYTICS_DEBOUNCE:1e4,ANALYTICS_API_KEY:null,ANALYTICS_X_PRODUCT:null,ANALYTICS_X_PRODUCT_LOCATION:void 0,ANALYTICS_PROJECT:null,ANALYTICS_USER_REGION:"UNKNOWN",TIMESTAMP_PROPERTY_NAME:"event.dts_end"},a=["ANALYTICS_API_KEY","ANALYTICS_X_PRODUCT","ANALYTICS_PROJECT"];function l(e,t){e=e||{},t=t||{};var i=e=>{throw this._log(e),new Error("ERROR: "+e)};this._queuedEvents=[],this._queuedCallbacks=[],this._lastSendTime=0,this._isEnabled=!1,this._dependencies=r({},e),e.getAccessToken&&"function"==typeof e.getAccessToken||i("Missing dependency: getAccessToken"),this._options={},Object.keys(s).forEach((e=>{this._options[e]=t[e]||s[e]})),a.forEach((e=>{this._options[e]||i("Missing option: "+e)})),"undefined"==typeof fetch&&i("Ingest requires fetch - if in a node environment, set 'global.fetch = require('node-fetch');'")}l.prototype._log=function(e){var t=this._dependencies.log;t&&t("Ingest :: "+e)},l.prototype._getAgent=function(e,t){this._dependencies.getAgent?this._dependencies.getAgent(e,t):t(null,{})},l.prototype._getAccessToken=function(e){this._dependencies.getAccessToken(e)},l.prototype._clearAccessToken=function(){this._dependencies.clearAccessToken&&this._dependencies.clearAccessToken()},l.prototype._getEnvironment=function(){return n[this._options.ENVIRONMENT]?this._options.ENVIRONMENT:"prod"},l.prototype._getAnalyticsHost=function(){return n[this._getEnvironment()]},l.prototype._formatTimestamp=function(e){var r=e.getFullYear(),i=t(e.getMonth()+1,2),n=t(e.getDate(),2),o=t(e.getHours(),2),s=t(e.getMinutes(),2),a=t(e.getSeconds(),2),l=t(e.getMilliseconds(),3),u=e.getTimezoneOffset(),c=u<0?"+":"-",d=Math.floor(Math.abs(u)/60),h=Math.abs(u)%60;return r+"-"+i+"-"+n+"T"+o+":"+s+":"+a+"."+l+(c+t(d,2)+t(h,2))},l.prototype._updateDebounce=function(e){var t=e&&(e["retry-after"]||e["Retry-After"]),r=0;if(t){var i;try{i=parseInt(t,10)}catch(e){}if(i)r=Math.max(0,i);else{var n=Date.parse(t);if(n){var o=(new Date).valueOf();r=Math.max(0,n-o)/1e3+Math.floor(10*Math.random())}}}this._options.ANALYTICS_DEBOUNCE=Math.max(1e3*r,this._options.ANALYTICS_DEBOUNCE)},l.prototype._queueEvent=function(e){this._queuedEvents.length>=this._options.ANALYTICS_MAX_QUEUED_EVENTS&&this._queuedEvents.shift(),this._queuedEvents.push(e)},l.prototype._requeueEvents=function(e){this._queuedEvents=e.concat(this._queuedEvents),this._queuedEvents=function(e,t){var r=e;if(e&&e.length>t&&t>0){var i=e.length-t;r=e.slice(i,e.length)}return r}(this._queuedEvents,this._options.ANALYTICS_MAX_QUEUED_EVENTS)},l.prototype._sendAnalytics=function(e,t,n){if(n=n||0,t&&this._queuedCallbacks.push(t),!this._isEnabled||0===this._queuedEvents.length){var s=this._queuedCallbacks;return this._queuedCallbacks=[],void(this._isEnabled?i(s,null,0):i(s,new Error("Analytics Disabled")))}var a=this._options.ANALYTICS_DEBOUNCE;if(e&&(a=0,clearTimeout(this._pendingSendAnalyticsTimeout),this._pendingSendAnalyticsTimeout=void 0),this._sendingEvents||this._pendingSendAnalyticsTimeout)e&&(this._fastFollow=!0);else{var l=(new Date).valueOf();if(l-this._lastSendTime<a)this._pendingSendAnalyticsTimeout=setTimeout((()=>{this._pendingSendAnalyticsTimeout=void 0,this._sendAnalytics()}),a);else{this._lastSendTime=l,this._sendingEvents=this._queuedEvents,this._sendingCallbacks=this._queuedCallbacks,this._queuedEvents=[],this._queuedCallbacks=[];var u,c=(u=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)})()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u(),d="["+c+"] ",h={events:this._sendingEvents},p=e=>{var t=this._queuedEvents?this._queuedEvents.length:0;if(this._sendingEvents){var r=this._sendingEvents.length;e?(this._requeueEvents(this._sendingEvents),this._log(d+"Error sending "+r+" events: "+e)):this._log(d+"Success sending "+r+" events: "+JSON.stringify(this._sendingEvents)),delete this._sendingEvents;var n=this._sendingCallbacks;delete this._sendingCallbacks,e?i(n,e):i(n,null,r)}t>0&&this._sendAnalytics(this._fastFollow),this._fastFollow=!1},f=(e,t)=>{if(this._updateDebounce(t),401===e&&0===n)return this._clearAccessToken(),this._requeueEvents(this._sendingEvents),delete this._sendingEvents,this._queuedCallbacks=this._sendingCallbacks.concat(this._queuedCallbacks),delete this._sendingCallbacks,this._log(d+"Access token is expired. Retry one more time."),void this._sendAnalytics(!0,void 0,n+1);200===e?p():p(new Error("Unexpected Response: "+e))};this._getAccessToken(((e,t)=>{if(e&&!this._options.ALLOW_NO_TOKEN)return void p(e);if(!(t&&0!==t.length||this._options.ALLOW_NO_TOKEN))return void p(new Error("No access token"));var i="https://"+this._getAnalyticsHost();this._log(d+"Sending analytics to "+i+o);const n={"x-api-key":this._options.ANALYTICS_API_KEY,"X-Product":this._options.ANALYTICS_X_PRODUCT,"User-Agent":this._options.ANALYTICS_USER_AGENT||this._options.ANALYTICS_API_KEY,"X-Request-Id":c,"Content-Type":"application/json"};t&&(n.Authorization="Bearer "+t),this._options.ANALYTICS_X_PRODUCT_LOCATION&&(n["X-Product-Location"]=this._options.ANALYTICS_X_PRODUCT_LOCATION),this._getAgent(i,((e,t)=>{const s={method:"POST",headers:n,body:JSON.stringify(h)};t&&t.agent?s.agent=t&&t.agent:r(s,t||{}),fetch(i+o,s).then((e=>{f(e.status,e.headers)}),p)}))}))}}},l.prototype.enable=function(e){this._isEnabled=e,e&&this._sendAnalytics(!0)},l.prototype.postEvent=function(e,t,r){var n=r||{},o="event.dts_start",s="event.coll_dts",a=n.TIMESTAMP_PROPERTY_NAME||this._options.TIMESTAMP_PROPERTY_NAME,l=n.ANALYTICS_PROJECT||this._options.ANALYTICS_PROJECT,u=n.ANALYTICS_INGEST_TYPE||this._options.ANALYTICS_INGEST_TYPE;e[s]&&e[s]instanceof Date&&(e[s]=this._formatTimestamp(e[s])),e[o]&&e[o]instanceof Date&&(e[o]=this._formatTimestamp(e[o])),e[a]||(e[a]=this._formatTimestamp(new Date)),e[a]instanceof Date&&(e[a]=this._formatTimestamp(e[a]));var c={time:e[a],project:l,environment:this._getEnvironment(),ingesttype:u,data:e};e.simulate?(this._log("event sim:"+JSON.stringify(c)),t&&i([t],null,0)):(this._queueEvent(c),this._sendAnalytics(!1,t))},l.prototype.flush=function(e,t){this._sendAnalytics(e,t)},e.exports=l},978746:()=>{!function(){"use strict";var e,t,r=document,i=Object.defineProperty,n="replace",o=function(e){return e[n](/%2523access_token%253D.*?%2526/gim,"%2526")[n](/%23access_token%3D.*?%26/gim,"%26")[n](/#access_token=.*?&/gim,"&")[n](/information=[^\&]+/,"")[n](/puser=[^\&]+/,"")[n](/fnuser=[^\&]+/,"")[n](/lnuser=[^\&]+/,"")};try{var s="referrer",a=r[s],l=o(a);l!==a&&i(r,s,{configurable:!0,value:l})}catch(e){}e=window,t=function(){function e(e,t){h.add(e,t),d||(d=b(h.drain))}function t(e){var t,r=m(e);return null==e||r!=f&&r!=p||(t=e.then),m(t)==p&&t}function r(){for(var e=0;e<this.chain.length;e++)i(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function i(e,r,i){var n,o;try{!1===r?i.reject(e.msg):(n=!0===r?e.msg:r.call(void 0,e.msg))===i.promise?i.reject(v("Promise-chain cycle")):(o=t(n))?o.call(n,i.resolve,i.reject):i.resolve(n)}catch(e){i.reject(e)}}function n(i){var s,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(s=t(i))?e((function(){var e=new a(l);try{s.call(i,(function(){n.apply(e,arguments)}),(function(){o.apply(e,arguments)}))}catch(t){o.call(e,t)}})):(l.msg=i,l.state=1,l.chain.length>0&&e(r,l))}catch(e){o.call(new a(l),e)}}}function o(t){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=t,i.state=2,i.chain.length>0&&e(r,i))}function s(e,t,r,i){for(var n=0;n<t.length;n++)!function(n){e.resolve(t[n]).then((function(e){r(n,e)}),i)}(n)}function a(e){this.def=e,this.triggered=!1}function l(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(t){if(m(t)!=p)throw v(g);if(0!==this.__NPO__)throw v("Not a promise");this.__NPO__=1;var i=new l(this);this.then=function(t,n){var o={success:m(t)!=p||t,failure:m(n)==p&&n};return o.promise=new this.constructor((function(e,t){if(m(e)!=p||m(t)!=p)throw v(g);o.resolve=e,o.reject=t})),i.chain.push(o),0!==i.state&&e(r,i),o.promise},this.catch=function(e){return this.then(void 0,e)};try{t.call(void 0,(function(e){n.call(i,e)}),(function(e){o.call(i,e)}))}catch(e){o.call(i,e)}}var c,d,h,p="function",f="object",g="Not a "+p,m=function(e){return typeof e},v=TypeError,y=Object.prototype.toString,b="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;c=function(e,t,r,i){return Object.defineProperty(e,t,{value:r,writable:!0,configurable:!1!==i})},h=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,r,i;return{add:function(n,o){i=new e(n,o),r?r.next=i:t=i,r=i,i=void 0},drain:function(){var e=t;for(t=r=d=void 0;e;)e.fn.call(e.self),e=e.next}}}();var _=c({},"constructor",u,!1);return u.prototype=_,c(_,"__NPO__",0,!1),c(u,"resolve",(function(e){return e&&m(e)==f&&1===e.__NPO__?e:new this((function(t,r){if(m(t)!=p||m(r)!=p)throw v(g);t(e)}))})),c(u,"reject",(function(e){return new this((function(t,r){if(m(t)!=p||m(r)!=p)throw v(g);r(e)}))})),c(u,"all",(function(e){var t=this;return"[object Array]"!=y.call(e)?t.reject(v("Not an array")):0===e.length?t.resolve([]):new t((function(r,i){if(m(r)!=p||m(i)!=p)throw v(g);var n=e.length,o=Array(n),a=0;s(t,e,(function(e,t){o[e]=t,++a===n&&r(o)}),i)}))})),c(u,"race",(function(e){var t=this;return"[object Array]"!=y.call(e)?t.reject(v("Not an array")):new t((function(r,i){if(m(r)!=p||m(i)!=p)throw v(g);s(t,e,(function(e,t){r(t)}),i)}))})),u},"undefined"==typeof Promise&&(e.Promise=t());var u=window,c=u.console.log;function d(e){throw Error(e)}var h,p,f,g,m,v,y,b,_,w=u.__satelliteEmbedCode,P=u.marketingtech,A="digitalData",S=A+".",x="object",C="array",O="function",k="sub-object not ",E=k+x,I=k+C,T=/^(.+?)((?:\[(?:n|\d+)\])+?)$/,D=/n|\d+/g,R=Array.isArray,j=0,Z=P&&P.digitalData&&P.digitalData.debug;if(b=function(e){return typeof e},_=function(e,t){return e.hasOwnProperty(t)},(f=(p=function(e,t){var r,n=this;if(i(n,"_id",{value:++j}),Z&&c(n._id+": CREATED"),i(n,"_pending",{value:{}}),i(n,"_listeners",{value:{}}),e&&n._set(A,e),t)for(r in t)_(t,r)&&n._set(r,t[r])}).prototype)._merge=g=function(e,t,r,i){var n,o,s,a,l;for(n in i=i||"",t)_(t,n)&&(o=e[n],null!=(s=t[n])&&(null==o?e[n]=s:(a=R(o)?C:b(o),l=R(s)?C:b(s),a===x||l===x?a===l&&(e[n]=g(o,s,r,i+"  ")):r||(a!==C&&(o=[o]),l===C?o=o.concat(s):o.push(s),e[n]=o))));return e},f._flatten=m=function(e,t,r,i){var n,o,s,a,l,u,c={},d={};for(e=e||this,e=JSON.parse(JSON.stringify(e)),n=0,o=(a=R(e)?e:Object.keys(e)).length;n<o;n++)l=R(e)?n:a[n],s=t?(R(e),t+"."+l):l+"",u=e[l],b(u)===x&&null!==u?c=g(c,m(u,s,r,i),!0):b(u)!==O&&(i?b(i)===x?R(i)?-1!==i.indexOf(s)&&(c[s]=u):i[s]&&(c[s]=u):b(i)===O?i(s)&&(c[s]=u):c[s]=u:c[s]=u);if(!R(e)||!r)return c;for(n=0,o=a.length;n<o;n++)u=e[l=n],b(u)===x&&(d=g(d,u));return c=g(c,m(d,s=t?t+".__collapsed":"__collapsed",r,i),!0),c=g(c,m(v(d,"|","|","|"),s,r,i),!0),c=g(c,m(d,s=t?t+".__joined":"__joined",r,i),!0),g(c,m(v(d,","),s,r,i),!0)},f._collapse=v=function(e,t,r,i){var n,o,s,a={};for(n in t=t||",",r=r||"",i=i||"",e)_(e,n)&&(o=e[n],s=R(o)?C:b(o),a[n]=s===C?r+o.join(t)+i:s===x?v(o,t,r,i):o);return a},f._recurse=y=function(e,t,r,i){var n,o,s,a,l,u;if(e&&b(e)===x)for(n=0,o=(a=R(e)?e:Object.keys(e)).length;n<o;n++)R(e)?(s=n,l=t+"[n]"):l=t+"."+(s=a[n]),u=e[s],r&&r({path:l,property:s,value:u},{path:t,value:e}),u&&b(u)===x&&y(u,l,r,i),i&&i({path:l,property:s,value:u},{path:t,value:e})},f._get=function(e){var t,r,i,n,o,s,a,l,u,d,h=this,p=h;if(Z&&c(h._id+': GET "'+e+'"'),!e||e===A)return h;for(0!==e.indexOf(A)&&(e=S+e),(t=e.split(".")).shift(),o=0,s=t.length;o<s;o++){if(u=o===s-1,n=(r=t[o]).match(T)){if(r=n[1],n=n[2].match(D),p=p[r],!R(p))return;for(a=0,l=n.length;a<l;a++)if(d=a===l-1,p=p[i="n"===(i=n[a])?p.length-1:parseInt(i)],!d&&!R(p))return}else p=p[r];if(!p||u)return p}},f._set=function(e,t){var r,i,n,o,s,a,l,u,h,p,f,g,m,v,w,P=this,C=P,k=[],j=P._pending;if(Z&&c(P._id+': SET "'+e+'" '+JSON.stringify(t)),e||(e=A),0!==e.indexOf(A)&&(e=S+e),e!==A||t!==P){if(j[e]&&(j[e].cancelled=!0,delete j[e]),null!=t&&(b(t)===x||b(t)===O)&&b(t.then)===O){if((i=t.then((function(t){return i.cancelled||P._set(e,t),t}),(function(){i.cancelled||delete j[e]}))).cancelled=!1,j[e]=i,!_(t,"unresolved"))return;r=t,t=t.unresolved,delete r.unresolved}if(e===A){if(b(t)!==x)return;for(l in y(P,A,(function(e){j[e.path]&&(j[e.path].cancelled=!0,delete j[e.path]),k.push(e.path)})),P)_(t,l)&&t[l]&&t[l]!==P[l]&&delete P[l];for(l in t)_(t,l)&&(P[l]=t[l])}else for((p=e.split(".")).shift(),n=0,o=p.length;n<o;n++)if(u=n===o-1,m=(f=p[n]).match(T))for(f=m[1],m=m[2].match(D),C=C[f]=C[f]||[],R(C)||d(I),s=0,a=m.length;s<a;s++)h=s===a-1,g="n"===(g=m[s])?C.length:parseInt(g),h?u?C[g]=t:(C=C[g]=C[g]||{},b(C)!==x&&d(E)):(C=C[g]=C[g]||[],R(C)||d(I));else u?C[f]=t:(C=C[f]=C[f]||{},b(C)!==x&&d(E));if(e===A)k.push(e);else for(v=[],n=0,o=(p=e.split(".")).length;n<o;n++)(m=(f=p[n]).match(T))&&(f=m[1],f+=m=m[2].replace(D,"n")),v.push(f),k.push(v.join("."));for(y(t,e,(function(e){j[e.path]&&(j[e.path].cancelled=!0,delete j[e.path]),-1===k.indexOf(e.path)&&k.push(e.path)})),n=k.length-1;n>=0;n--)w=k[n],P._trigger(w)}},f._unset=f._delete=function(e){return Z&&c(this._id+': DELETE "'+e+'"'),this._set(e,void 0)},f._on=function(e,t){var r;if(""===e)e=A;else if(!e)return!1;0!==e.indexOf(A)&&(e=S+e),(r=this._listeners[e])||(r=this._listeners[e]=[]),r.push(t)},f._off=function(e,t){var r,i;if(""===e)e=A;else if(!e)return!1;return 0!==e.indexOf(A)&&(e=S+e),!!(i=this._listeners[e])&&-1!==(r=i.indexOf(t))&&(i.splice(r,1),!0)},f._trigger=function(e){var t,r,i,n;if(""===e)e=A;else if(!e)return!1;if(0!==e.indexOf(A)&&(e=S+e),!(n=this._listeners[e]))return!1;for(t=0,r=n.length;t<r;t++)if(i=n[t])try{i(this._get(e))}catch(e){}},f._resolved=function(){var e,t=[],r=this._pending;for(e in r)_(r,e)&&t.push(r[e]);return Promise.all(t)},f._snapshot=f._copy=function(){return new p(JSON.parse(JSON.stringify(this)),this._pending)},u.DigitalData=p,!w){if(h=new p,u.digitalData){h._set(A,u.digitalData);try{delete u.digitalData}catch(e){}}i(u,A,{enumerable:!0,get:function(){return h},set:function(e){h._set(A,e)}})}var F=h,N=r.getElementsByTagName("head")[0],L=u.performance,M=decodeURIComponent;function U(e){var t,i,n,o;for(i=0,n=(t=r.cookie?r.cookie.split("; "):[]).length;i<n;i++)if(o=t[i],M(o.substr(0,o.indexOf("=")))===e)return M(o.substr(o.indexOf("=")+1))}var $,z,q,H="at-body-style",J="targetGlobalSettings",V="bodyHidingEnabled",B=U("OptanonConsent"),W=U("OptanonChoice"),G=u.location.search;if($=P&&P.adobe&&P.adobe.target,z=u[J]=u[J]||{},q=r.getElementById(H),w||!$||V in z&&!z[V]||-1!==G.indexOf("mboxDisable=1")||-1!==r.cookie.indexOf("adobe_optout")||W&&B&&-1!==B.indexOf("C0002:0"))q&&q.parentNode&&q.parentNode.removeChild(q);else{if(!q){(q=r.createElement("style")).id=H,q.innerHTML="body{opacity:0.01 !important}";try{L.mark("targetBodyHide"),N.appendChild(q)}catch(e){}}setTimeout((function(){z[V]=!1;try{N.removeChild(r.getElementById(H))}catch(e){}}),3e3)}function X(e,t){u.addEventListener(e,t)}var K=encodeURIComponent;function Y(e,t,i,n){var o="";t=t||"",o+=n?e+"="+t:K(e)+"="+K(t),i.path&&(o+="; path="+i.path),i.expires&&(o+="; expires="+i.expires.toUTCString()),i.domain&&(o+="; domain="+i.domain),i.samesite&&(o+="; samesite="+i.samesite),r.cookie=o}var Q,ee,te,re,ie,ne,oe,se="",ae=[],le="adobePrivacy:Privacy",ue="OptanonChoice",ce=new Date,de={domain:function(){if(se)return se;var e=u.location.hostname.toLowerCase().split("."),t=[],r="",i=null,n=!1,o="sat_domain";for(r=e.pop(),t.unshift(r);e.length>0;){r=e.pop(),t.unshift(r),(i=new Date).setTime(i.getTime()+1e3);try{Y(o,"A",{expires:i,domain:t.join(".")})}catch(e){break}if("A"===U(o)){n=!0,se=t.join(".");break}}return n?se:""}(),path:"/",samesite:"Lax",expires:(ce.setFullYear(ce.getFullYear()+1),ce)};function he(e){var t=JSON.parse(JSON.stringify(e.location));return t.href=o(t.href),t.hash=o(t.hash),t.search=o(t.search),t}Q=function(e){re?e(u._satellite):ae.push(e)},ee=new Promise((function(e){Q(e)})),te=function(){var e,t,r;for(re=!0,e=0,t=ae.length;e<t;e++){r=ae[e];try{r(u._satellite)}catch(e){}}},u.__satelliteLoadedCallback=Q,u.__satelliteLoadedPromise=ee,ne=function(e){r.write('<script src="'+e+'"><\/script>')},X(le+"Consent",(function(){Y(ue,1,de)})),X(le+"Reject",(function(){Y(ue,2,de)})),X(le+"Custom",(function(){Y(ue,3,de)})),X(le+"Consent",(function(){var e,t=le+"Consent:DTM";"function"==typeof u.CustomEvent?e=new CustomEvent(t):(e=r.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,void 0),Q((function(){"complete"===r.readyState?r.body.dispatchEvent(e):X("load",(function(){r.body.dispatchEvent(e)}))}))})),w?(ne(w),(ie=function(){u._satellite&&u._satellite.initialized?te():setTimeout(ie,100)})()):(oe=function(){!function(e,t){var i,n,o=r.createElement("script"),s=!1;o.src=e,o.async=!0,t&&(o.onload=o.onreadystatechange=function(e){var r=this.readyState;s||r&&"complete"!==r&&"loaded"!==r||(s=!0,t(e))}),(i=r.getElementsByTagName("script")[0])&&i.parentNode?(n=i.parentNode).insertBefore(o,i):(n=N)?n.appendChild(o):r.body?(n=r.body).appendChild(o):d("no script parent")}(function(e,t){var r,i,n,o,s,a=u.location,l="https://assets.adobedtm.com/",c=l+"launch-",d="d4d114c60e50/a7f0c794cf07/launch-",h={globalDev:"EN9a7b3bd7db454856b44f27730f263fa0",globalStage:"EN2731bb0857084837b7142cd2017286bb",globalProd:"EN919758db9a654a17bac7d184b99c4820",ucDev:"ENed7cfab651fa4714a57bf937efb0cd23-development",ucStage:"EN1450794db7d0411a8b3f3b08dd706d00-staging",ucProd:"ENd6b040128459463bad781a5daa85ce0f",videoDev:"EN2d7bf2d8326b4ff1aa5335189a385023-development",videoStage:"EN60e5086def0d48e9ae2195234cb1b389-staging",videoProd:"EN58452fb8d9534cacbb8aeac0c8e15215",minimalDev:"EN876eeadff442464cb438819d695e077d-development",minimalStage:"ENa9d6ac46ca57441784434d28ceb9ddba-staging",minimalProd:"EN08637acac77f4e20b9e413aeb86f610e",editBillingDev:d+"f8f2a9a7669b-development",editBillingStage:d+"4f62e3c9406b-staging",editBillingProd:d+"247b8615afc6"};return r=t||a.hostname,s=function(e){return-1!==r.indexOf(e)},P&&P.adobe&&P.adobe.launch&&(P.adobe.launch.embedCode||P.adobe.launch.environment||P.adobe.launch.property)?(i=P.adobe.launch.embedCode,n=P.adobe.launch.property,o=P.adobe.launch.environment,i?0===i.indexOf("EN")?c+=i:c=l+i:function(e){"video analytics"==e&&(e="video"),"unified checkout"==e&&(e="uc"),"Payment Info Editor"==e&&(e="editBilling",c=l),"dev"===o?c+=h[e+"Dev"]:"stage"===o?c+=h[e+"Stage"]:"production"===o?c+=h[e+"Prod"]:(c+=h[e+"Prod"],console.warn('marketingtech.adobe.launch.environment invalid. Falling back to "production".'))}(n||"global")):s("localhost.account.adobe.com")||s("prestage1.account.adobe.com")||s("prestage2.account.adobe.com")?c+=h.globalDev:s("stage.account.adobe.com")||s("prod-inactive.account.adobe.com")||s("prod-active.account.adobe.com")?c+=h.globalStage:s("account.adobe.com")?c+=h.globalProd:(s("localhost.")||console.error("unrecognized domain. Please email marketingtech@adobe.com."),c+=h.globalDev),e&&(c+=".min"),c+".js"}(!0),te)},P&&P.adobe&&P.adobe.launch&&P.adobe.launch.load?P.adobe.launch.load(oe):oe());var pe,fe="initialPage.pageInfo.location",ge="message",me=u.top;function ve(e,t){try{e._set(t,he(me))}catch(r){X(ge,(function(r){r.data.n===fe&&e._set(t,r.data.v)})),me.postMessage({n:fe},"*")}}u===me&&(pe=he(u),X(ge,(function(e){var t,r=e.origin,i=r.length;((t=function(e){return r.substring(i-e.length,i)===e})(".adobe.com")||t("//adobe.com"))&&e.data.n===fe&&e.source.postMessage({n:fe,v:pe},"*")})));var ye=[];u._satellite=u._satellite||{},u._satellite.track=function(e,t){var r;(t=t||{})._beforeSatelliteLoaded=!0,w||((r=t.digitalData=t.digitalData||u.digitalData._snapshot())._set("page.pageInfo.location",he(u)),ve(r,"page.topFrameInfo.location")),ye.push([e,t])},u.__satelliteLoadedCallback((function(){var e,t,r;for(e=0,t=ye.length;e<t;e++)r=ye[e],u._satellite.track(r[0],r[1])})),w||(F._set("marketingtech.bootstrap.version","0.20.0"),F._set("initialPage.pageInfo.location",he(u)),ve(F,"initialPage.topFrameInfo.location"))}()},396517:(e,t,r)=>{"use strict";var i=r(56007),n=r(852224),o=n(i("String.prototype.indexOf"));e.exports=function(e,t){var r=i(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?n(r):r}},852224:(e,t,r)=>{"use strict";var i=r(771712),n=r(56007),o=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||i.call(s,o),l=n("%Object.getOwnPropertyDescriptor%",!0),u=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=a(i,s,arguments);if(l&&u){var r=l(t,"length");r.configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var d=function(){return a(i,o,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d},267519:(e,t)=>{"use strict";t.Q=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var i={},o=t||{},a=e.split(n),l=o.decode||r,u=0;u<a.length;u++){var c=a[u],d=c.indexOf("=");if(!(d<0)){var h=c.substr(0,d).trim(),p=c.substr(++d,c.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),null==i[h]&&(i[h]=s(p,l))}}return i},t.q=function(e,t,r){var n=r||{},s=n.encode||i;if("function"!=typeof s)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var a=s(t);if(a&&!o.test(a))throw new TypeError("argument val is invalid");var l=e+"="+a;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(u)}if(n.domain){if(!o.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!o.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return l};var r=decodeURIComponent,i=encodeURIComponent,n=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function s(e,t){try{return t(e)}catch(t){return e}}},100194:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,i=Object.prototype.toString,n="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||i.call(o)!==n)throw new TypeError(t+o);for(var s,a=r.call(arguments,1),l=function(){if(this instanceof s){var t=o.apply(this,a.concat(r.call(arguments)));return Object(t)===t?t:this}return o.apply(e,a.concat(r.call(arguments)))},u=Math.max(0,o.length-a.length),c=[],d=0;d<u;d++)c.push("$"+d);if(s=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),o.prototype){var h=function(){};h.prototype=o.prototype,s.prototype=new h,h.prototype=null}return s}},771712:(e,t,r)=>{"use strict";var i=r(100194);e.exports=Function.prototype.bind||i},56007:(e,t,r)=>{"use strict";var i,n=SyntaxError,o=Function,s=TypeError,a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var u=function(){throw new s},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(e){return u}}}():u,d=r(233352)(),h=Object.getPrototypeOf||function(e){return e.__proto__},p={},f="undefined"==typeof Uint8Array?i:h(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":d?h([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?h(h([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?h((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?h((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?h(""[Symbol.iterator]()):i,"%Symbol%":d?Symbol:i,"%SyntaxError%":n,"%ThrowTypeError%":c,"%TypedArray%":f,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet},m=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&(r=h(n.prototype))}return g[t]=r,r},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=r(771712),b=r(270343),_=y.call(Function.call,Array.prototype.concat),w=y.call(Function.apply,Array.prototype.splice),P=y.call(Function.call,String.prototype.replace),A=y.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,x=/\\(\\)?/g,C=function(e){var t=A(e,0,1),r=A(e,-1);if("%"===t&&"%"!==r)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new n("invalid intrinsic syntax, expected opening `%`");var i=[];return P(e,S,(function(e,t,r,n){i[i.length]=r?P(n,x,"$1"):t||e})),i},O=function(e,t){var r,i=e;if(b(v,i)&&(i="%"+(r=v[i])[0]+"%"),b(g,i)){var o=g[i];if(o===p&&(o=m(i)),void 0===o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:o}}throw new n("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');var r=C(e),i=r.length>0?r[0]:"",o=O("%"+i+"%",t),a=o.name,u=o.value,c=!1,d=o.alias;d&&(i=d[0],w(r,_([0,1],d)));for(var h=1,p=!0;h<r.length;h+=1){var f=r[h],m=A(f,0,1),v=A(f,-1);if(('"'===m||"'"===m||"`"===m||'"'===v||"'"===v||"`"===v)&&m!==v)throw new n("property names with quotes must have matching quotes");if("constructor"!==f&&p||(c=!0),b(g,a="%"+(i+="."+f)+"%"))u=g[a];else if(null!=u){if(!(f in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&h+1>=r.length){var y=l(u,f);u=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:u[f]}else p=b(u,f),u=u[f];p&&!c&&(g[a]=u)}}return u}},270343:(e,t,r)=>{"use strict";var i=r(771712);e.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},233352:(e,t,r)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,n=r(906562);e.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&n()}},906562:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(e,t);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},784090:(e,t)=>{var r,i,n;i="undefined"!=typeof window?window:this,n=function(i,n){var o=[],s=o.slice,a=o.concat,l=o.push,u=o.indexOf,c={},d=c.toString,h=c.hasOwnProperty,p={},f=i.document,g="2.1.3",m=function(e,t){return new m.fn.init(e,t)},v=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,y=/^-ms-/,b=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()};function w(e){var t=e.length,r=m.type(e);return"function"!==r&&!m.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}m.fn=m.prototype={jquery:g,constructor:m,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return m.each(this,e,t)},map:function(e){return this.pushStack(m.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:o.sort,splice:o.splice},m.extend=m.fn.extend=function(){var e,t,r,i,n,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||m.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=s[t],s!==(i=e[t])&&(u&&i&&(m.isPlainObject(i)||(n=m.isArray(i)))?(n?(n=!1,o=r&&m.isArray(r)?r:[]):o=r&&m.isPlainObject(r)?r:{},s[t]=m.extend(u,o,i)):void 0!==i&&(s[t]=i));return s},m.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!m.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return!("object"!==m.type(e)||e.nodeType||m.isWindow(e)||e.constructor&&!h.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[d.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;(e=m.trim(e))&&(1===e.indexOf("use strict")?((t=f.createElement("script")).text=e,f.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(y,"ms-").replace(b,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i=0,n=e.length,o=w(e);if(r){if(o)for(;i<n&&!1!==t.apply(e[i],r);i++);else for(i in e)if(!1===t.apply(e[i],r))break}else if(o)for(;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(v,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(w(Object(e))?m.merge(r,"string"==typeof e?[e]:e):l.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:u.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;i<r;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i=[],n=0,o=e.length,s=!r;n<o;n++)!t(e[n],n)!==s&&i.push(e[n]);return i},map:function(e,t,r){var i,n=0,o=e.length,s=[];if(w(e))for(;n<o;n++)null!=(i=t(e[n],n,r))&&s.push(i);else for(n in e)null!=(i=t(e[n],n,r))&&s.push(i);return a.apply([],s)},guid:1,proxy:function(e,t){var r,i,n;if("string"==typeof t&&(r=e[t],t=e,e=r),m.isFunction(e))return i=s.call(arguments,2),n=function(){return e.apply(t||this,i.concat(s.call(arguments)))},n.guid=e.guid=e.guid||m.guid++,n},now:Date.now,support:p}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){c["[object "+t+"]"]=t.toLowerCase()}));var P=function(e){var t,r,i,n,o,s,a,l,u,c,d,h,p,f,g,m,v,y,b,_="sizzle"+1*new Date,w=e.document,P=0,A=0,S=se(),x=se(),C=se(),O=function(e,t){return e===t&&(d=!0),0},k=1<<31,E={}.hasOwnProperty,I=[],T=I.pop,D=I.push,R=I.push,j=I.slice,Z=function(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),U="\\[[\\x20\\t\\r\\n\\f]*("+L+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+N+"*\\]",$=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",z=new RegExp(N+"+","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),J=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),B=new RegExp($),W=new RegExp("^"+M+"$"),G={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,re=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),ie=function(e,t,r){var i="0x"+t-65536;return i!=i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ne=function(){h()};try{R.apply(I=j.call(w.childNodes),w.childNodes),I[w.childNodes.length].nodeType}catch(e){R={apply:I.length?function(e,t){D.apply(e,j.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}function oe(e,t,i,n){var o,a,u,c,d,f,v,y,P,A;if((t?t.ownerDocument||t:w)!==p&&h(t),i=i||[],c=(t=t||p).nodeType,"string"!=typeof e||!e||1!==c&&9!==c&&11!==c)return i;if(!n&&g){if(11!==c&&(o=Q.exec(e)))if(u=o[1]){if(9===c){if(!(a=t.getElementById(u))||!a.parentNode)return i;if(a.id===u)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(u))&&b(t,a)&&a.id===u)return i.push(a),i}else{if(o[2])return R.apply(i,t.getElementsByTagName(e)),i;if((u=o[3])&&r.getElementsByClassName)return R.apply(i,t.getElementsByClassName(u)),i}if(r.qsa&&(!m||!m.test(e))){if(y=v=_,P=t,A=1!==c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(f=s(e),(v=t.getAttribute("id"))?y=v.replace(te,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",d=f.length;d--;)f[d]=y+me(f[d]);P=ee.test(e)&&fe(t.parentNode)||t,A=f.join(",")}if(A)try{return R.apply(i,P.querySelectorAll(A)),i}catch(e){}finally{v||t.removeAttribute("id")}}}return l(e.replace(q,"$1"),t,i,n)}function se(){var e=[];return function t(r,n){return e.push(r+" ")>i.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function ae(e){return e[_]=!0,e}function le(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var r=e.split("|"),n=e.length;n--;)i.attrHandle[r[n]]=t}function ce(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function pe(e){return ae((function(t){return t=+t,ae((function(r,i){for(var n,o=e([],r.length,t),s=o.length;s--;)r[n=o[s]]&&(r[n]=!(i[n]=r[n]))}))}))}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=oe.setDocument=function(e){var t,n,s=e?e.ownerDocument||e:w;return s!==p&&9===s.nodeType&&s.documentElement?(p=s,f=s.documentElement,(n=s.defaultView)&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ne,!1):n.attachEvent&&n.attachEvent("onunload",ne)),g=!o(s),r.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=le((function(e){return e.appendChild(s.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=Y.test(s.getElementsByClassName),r.getById=le((function(e){return f.appendChild(e).id=_,!s.getElementsByName||!s.getElementsByName(_).length})),r.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},i.filter.ID=function(e){var t=e.replace(re,ie);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(re,ie);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),i.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[n++];)1===r.nodeType&&i.push(r);return i}return o},i.find.CLASS=r.getElementsByClassName&&function(e,t){if(g)return t.getElementsByClassName(e)},v=[],m=[],(r.qsa=Y.test(s.querySelectorAll))&&(le((function(e){f.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+F+")"),e.querySelectorAll("[id~="+_+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]")})),le((function(e){var t=s.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(r.matchesSelector=Y.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le((function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",$)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Y.test(f.compareDocumentPosition),b=t||Y.test(f.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===s||e.ownerDocument===w&&b(w,e)?-1:t===s||t.ownerDocument===w&&b(w,t)?1:c?Z(c,e)-Z(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var r,i=0,n=e.parentNode,o=t.parentNode,a=[e],l=[t];if(!n||!o)return e===s?-1:t===s?1:n?-1:o?1:c?Z(c,e)-Z(c,t):0;if(n===o)return ce(e,t);for(r=e;r=r.parentNode;)a.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;a[i]===l[i];)i++;return i?ce(a[i],l[i]):a[i]===w?-1:l[i]===w?1:0},s):p},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),r.matchesSelector&&g&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var i=y.call(e,t);if(i||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return oe(t,p,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var n=i.attrHandle[t.toLowerCase()],o=n&&E.call(i.attrHandle,t.toLowerCase())?n(e,t,!g):void 0;return void 0!==o?o:r.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],n=0,o=0;if(d=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(O),d){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return c=null,e},n=oe.getText=function(e){var t,r="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=n(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)r+=n(t);return r},i=oe.selectors={cacheLength:50,createPseudo:ae,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(re,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(re,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&B.test(r)&&(t=s(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(re,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+N+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(i){var n=oe.attr(i,e);return null==n?"!="===t:!t||(n+="","="===t?n===r:"!="===t?n!==r:"^="===t?r&&0===n.indexOf(r):"*="===t?r&&n.indexOf(r)>-1:"$="===t?r&&n.slice(-r.length)===r:"~="===t?(" "+n.replace(z," ")+" ").indexOf(r)>-1:"|="===t&&(n===r||n.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,i,n){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,l){var u,c,d,h,p,f,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(p=(u=(c=m[_]||(m[_]={}))[e]||[])[0]===P&&u[1],h=u[0]===P&&u[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){c[e]=[P,p,h];break}}else if(y&&(u=(t[_]||(t[_]={}))[e])&&u[0]===P)h=u[1];else for(;(d=++p&&d&&d[g]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[_]||(d[_]={}))[e]=[P,h]),d!==t)););return(h-=n)===i||h%i==0&&h/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return n[_]?n(t):n.length>1?(r=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ae((function(e,r){for(var i,o=n(e,t),s=o.length;s--;)e[i=Z(e,o[s])]=!(r[i]=o[s])})):function(e){return n(e,0,r)}):n}},pseudos:{not:ae((function(e){var t=[],r=[],i=a(e.replace(q,"$1"));return i[_]?ae((function(e,t,r,n){for(var o,s=i(e,null,n,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,n,o){return t[0]=e,i(t,null,o,r),t[0]=null,!r.pop()}})),has:ae((function(e){return function(t){return oe(e,t).length>0}})),contains:ae((function(e){return e=e.replace(re,ie),function(t){return(t.textContent||t.innerText||n(t)).indexOf(e)>-1}})),lang:ae((function(e){return W.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(re,ie).toLowerCase(),function(t){var r;do{if(r=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe((function(){return[0]})),last:pe((function(e,t){return[t-1]})),eq:pe((function(e,t,r){return[r<0?r+t:r]})),even:pe((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:pe((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:pe((function(e,t,r){for(var i=r<0?r+t:r;--i>=0;)e.push(i);return e})),gt:pe((function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=he(t);function ge(){}function me(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function ve(e,t,r){var i=t.dir,n=r&&"parentNode"===i,o=A++;return t.first?function(t,r,o){for(;t=t[i];)if(1===t.nodeType||n)return e(t,r,o)}:function(t,r,s){var a,l,u=[P,o];if(s){for(;t=t[i];)if((1===t.nodeType||n)&&e(t,r,s))return!0}else for(;t=t[i];)if(1===t.nodeType||n){if((a=(l=t[_]||(t[_]={}))[i])&&a[0]===P&&a[1]===o)return u[2]=a[2];if(l[i]=u,u[2]=e(t,r,s))return!0}}}function ye(e){return e.length>1?function(t,r,i){for(var n=e.length;n--;)if(!e[n](t,r,i))return!1;return!0}:e[0]}function be(e,t,r,i,n){for(var o,s=[],a=0,l=e.length,u=null!=t;a<l;a++)(o=e[a])&&(r&&!r(o,i,n)||(s.push(o),u&&t.push(a)));return s}function _e(e,t,r,i,n,o){return i&&!i[_]&&(i=_e(i)),n&&!n[_]&&(n=_e(n,o)),ae((function(o,s,a,l){var u,c,d,h=[],p=[],f=s.length,g=o||function(e,t,r){for(var i=0,n=t.length;i<n;i++)oe(e,t[i],r);return r}(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:be(g,h,e,a,l),v=r?n||(o?e:f||i)?[]:s:m;if(r&&r(m,v,a,l),i)for(u=be(v,p),i(u,[],a,l),c=u.length;c--;)(d=u[c])&&(v[p[c]]=!(m[p[c]]=d));if(o){if(n||e){if(n){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(m[c]=d);n(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&(u=n?Z(o,d):h[c])>-1&&(o[u]=!(s[u]=d))}}else v=be(v===s?v.splice(f,v.length):v),n?n(null,s,v,l):R.apply(s,v)}))}function we(e){for(var t,r,n,o=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],l=s?1:0,c=ve((function(e){return e===t}),a,!0),d=ve((function(e){return Z(t,e)>-1}),a,!0),h=[function(e,r,i){var n=!s&&(i||r!==u)||((t=r).nodeType?c(e,r,i):d(e,r,i));return t=null,n}];l<o;l++)if(r=i.relative[e[l].type])h=[ve(ye(h),r)];else{if((r=i.filter[e[l].type].apply(null,e[l].matches))[_]){for(n=++l;n<o&&!i.relative[e[n].type];n++);return _e(l>1&&ye(h),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(q,"$1"),r,l<n&&we(e.slice(l,n)),n<o&&we(e=e.slice(n)),n<o&&me(e))}h.push(r)}return ye(h)}return ge.prototype=i.filters=i.pseudos,i.setFilters=new ge,s=oe.tokenize=function(e,t){var r,n,o,s,a,l,u,c=x[e+" "];if(c)return t?0:c.slice(0);for(a=e,l=[],u=i.preFilter;a;){for(s in r&&!(n=H.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(o=[])),r=!1,(n=J.exec(a))&&(r=n.shift(),o.push({value:r,type:n[0].replace(q," ")}),a=a.slice(r.length)),i.filter)!(n=G[s].exec(a))||u[s]&&!(n=u[s](n))||(r=n.shift(),o.push({value:r,type:s,matches:n}),a=a.slice(r.length));if(!r)break}return t?a.length:a?oe.error(e):x(e,l).slice(0)},a=oe.compile=function(e,t){var r,n=[],o=[],a=C[e+" "];if(!a){for(t||(t=s(e)),r=t.length;r--;)(a=we(t[r]))[_]?n.push(a):o.push(a);a=C(e,function(e,t){var r=t.length>0,n=e.length>0,o=function(o,s,a,l,c){var d,h,f,g=0,m="0",v=o&&[],y=[],b=u,_=o||n&&i.find.TAG("*",c),w=P+=null==b?1:Math.random()||.1,A=_.length;for(c&&(u=s!==p&&s);m!==A&&null!=(d=_[m]);m++){if(n&&d){for(h=0;f=e[h++];)if(f(d,s,a)){l.push(d);break}c&&(P=w)}r&&((d=!f&&d)&&g--,o&&v.push(d))}if(g+=m,r&&m!==g){for(h=0;f=t[h++];)f(v,y,s,a);if(o){if(g>0)for(;m--;)v[m]||y[m]||(y[m]=T.call(l));y=be(y)}R.apply(l,y),c&&!o&&y.length>0&&g+t.length>1&&oe.uniqueSort(l)}return c&&(P=w,u=b),v};return r?ae(o):o}(o,n)),a.selector=e}return a},l=oe.select=function(e,t,n,o){var l,u,c,d,h,p="function"==typeof e&&e,f=!o&&s(e=p.selector||e);if(n=n||[],1===f.length){if((u=f[0]=f[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&r.getById&&9===t.nodeType&&g&&i.relative[u[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(re,ie),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(l=G.needsContext.test(e)?0:u.length;l--&&(c=u[l],!i.relative[d=c.type]);)if((h=i.find[d])&&(o=h(c.matches[0].replace(re,ie),ee.test(u[0].type)&&fe(t.parentNode)||t))){if(u.splice(l,1),!(e=o.length&&me(u)))return R.apply(n,o),n;break}}return(p||a(e,f))(o,t,!g,n,ee.test(e)&&fe(t.parentNode)||t),n},r.sortStable=_.split("").sort(O).join("")===_,r.detectDuplicates=!!d,h(),r.sortDetached=le((function(e){return 1&e.compareDocumentPosition(p.createElement("div"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||ue(F,(function(e,t,r){var i;if(!r)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),oe}(i);m.find=P,m.expr=P.selectors,m.expr[":"]=m.expr.pseudos,m.unique=P.uniqueSort,m.text=P.getText,m.isXMLDoc=P.isXML,m.contains=P.contains;var A=m.expr.match.needsContext,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,x=/^.[^:#\[\.,]*$/;function C(e,t,r){if(m.isFunction(t))return m.grep(e,(function(e,i){return!!t.call(e,i,e)!==r}));if(t.nodeType)return m.grep(e,(function(e){return e===t!==r}));if("string"==typeof t){if(x.test(t))return m.filter(t,e,r);t=m.filter(t,e)}return m.grep(e,(function(e){return u.call(t,e)>=0!==r}))}m.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?m.find.matchesSelector(i,e)?[i]:[]:m.find.matches(e,m.grep(t,(function(e){return 1===e.nodeType})))},m.fn.extend({find:function(e){var t,r=this.length,i=[],n=this;if("string"!=typeof e)return this.pushStack(m(e).filter((function(){for(t=0;t<r;t++)if(m.contains(n[t],this))return!0})));for(t=0;t<r;t++)m.find(e,n[t],i);return(i=this.pushStack(r>1?m.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&A.test(e)?m(e):e||[],!1).length}});var O,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:k.exec(e))||!r[1]&&t)return!t||t.jquery?(t||O).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:f,!0)),S.test(r[1])&&m.isPlainObject(t))for(r in t)m.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=f.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=f,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?void 0!==O.ready?O.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,O=m(f);var E=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function T(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}m.extend({dir:function(e,t,r){for(var i=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&m(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}}),m.fn.extend({has:function(e){var t=m(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(m.contains(this,t[e]))return!0}))},closest:function(e,t){for(var r,i=0,n=this.length,o=[],s=A.test(e)||"string"!=typeof e?m(e,t||this.context):0;i<n;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&m.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?m.unique(o):o)},index:function(e){return e?"string"==typeof e?u.call(m(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(m.unique(m.merge(this.get(),m(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),m.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return m.dir(e,"parentNode")},parentsUntil:function(e,t,r){return m.dir(e,"parentNode",r)},next:function(e){return T(e,"nextSibling")},prev:function(e){return T(e,"previousSibling")},nextAll:function(e){return m.dir(e,"nextSibling")},prevAll:function(e){return m.dir(e,"previousSibling")},nextUntil:function(e,t,r){return m.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return m.dir(e,"previousSibling",r)},siblings:function(e){return m.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return m.sibling(e.firstChild)},contents:function(e){return e.contentDocument||m.merge([],e.childNodes)}},(function(e,t){m.fn[e]=function(r,i){var n=m.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(n=m.filter(i,n)),this.length>1&&(I[e]||m.unique(n),E.test(e)&&n.reverse()),this.pushStack(n)}}));var D,R=/\S+/g,j={};function Z(){f.removeEventListener("DOMContentLoaded",Z,!1),i.removeEventListener("load",Z,!1),m.ready()}m.Callbacks=function(e){e="string"==typeof e?j[e]||function(e){var t=j[e]={};return m.each(e.match(R)||[],(function(e,r){t[r]=!0})),t}(e):m.extend({},e);var t,r,i,n,o,s,a=[],l=!e.once&&[],u=function(d){for(t=e.memory&&d,r=!0,s=n||0,n=0,o=a.length,i=!0;a&&s<o;s++)if(!1===a[s].apply(d[0],d[1])&&e.stopOnFalse){t=!1;break}i=!1,a&&(l?l.length&&u(l.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function t(r){m.each(r,(function(r,i){var n=m.type(i);"function"===n?e.unique&&c.has(i)||a.push(i):i&&i.length&&"string"!==n&&t(i)}))}(arguments),i?o=a.length:t&&(n=r,u(t))}return this},remove:function(){return a&&m.each(arguments,(function(e,t){for(var r;(r=m.inArray(t,a,r))>-1;)a.splice(r,1),i&&(r<=o&&o--,r<=s&&s--)})),this},has:function(e){return e?m.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],o=0,this},disable:function(){return a=l=t=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,t||c.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!a||r&&!l||(t=[e,(t=t||[]).slice?t.slice():t],i?l.push(t):u(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred((function(r){m.each(t,(function(t,o){var s=m.isFunction(e[t])&&e[t];n[o[1]]((function(){var e=s&&s.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,s?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?m.extend(e,i):i}},n={};return i.pipe=i.then,m.each(t,(function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add((function(){r=a}),t[1^e][2].disable,t[2][2].lock),n[o[0]]=function(){return n[o[0]+"With"](this===n?i:this,arguments),this},n[o[0]+"With"]=s.fireWith})),i.promise(n),e&&e.call(n,n),n},when:function(e){var t,r,i,n=0,o=s.call(arguments),a=o.length,l=1!==a||e&&m.isFunction(e.promise)?a:0,u=1===l?e:m.Deferred(),c=function(e,r,i){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,i===t?u.notifyWith(r,i):--l||u.resolveWith(r,i)}};if(a>1)for(t=new Array(a),r=new Array(a),i=new Array(a);n<a;n++)o[n]&&m.isFunction(o[n].promise)?o[n].promise().done(c(n,i,o)).fail(u.reject).progress(c(n,r,t)):--l;return l||u.resolveWith(i,o),u.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){(!0===e?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==e&&--m.readyWait>0||(D.resolveWith(f,[m]),m.fn.triggerHandler&&(m(f).triggerHandler("ready"),m(f).off("ready"))))}}),m.ready.promise=function(e){return D||(D=m.Deferred(),"complete"===f.readyState?setTimeout(m.ready):(f.addEventListener("DOMContentLoaded",Z,!1),i.addEventListener("load",Z,!1))),D.promise(e)},m.ready.promise();var F=m.access=function(e,t,r,i,n,o,s){var a=0,l=e.length,u=null==r;if("object"===m.type(r))for(a in n=!0,r)m.access(e,t,a,r[a],!0,o,s);else if(void 0!==i&&(n=!0,m.isFunction(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,r){return u.call(m(e),r)})),t))for(;a<l;a++)t(e[a],r,s?i:i.call(e[a],a,t(e[a],r)));return n?e:u?t.call(e):l?t(e[0],r):o};function N(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=m.expando+N.uid++}m.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},N.uid=1,N.accepts=m.acceptData,N.prototype={key:function(e){if(!N.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=N.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,m.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,n=this.key(e),o=this.cache[n];if("string"==typeof t)o[t]=r;else if(m.isEmptyObject(o))m.extend(this.cache[n],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var r=this.cache[this.key(e)];return void 0===t?r:r[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?void 0!==(i=this.get(e,t))?i:this.get(e,m.camelCase(t)):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,n,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{m.isArray(t)?i=t.concat(t.map(m.camelCase)):(n=m.camelCase(t),i=t in s?[t,n]:(i=n)in s?[i]:i.match(R)||[]),r=i.length;for(;r--;)delete s[i[r]]}},hasData:function(e){return!m.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new N,M=new N,U=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$=/([A-Z])/g;function z(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace($,"-$1").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:U.test(r)?m.parseJSON(r):r)}catch(e){}M.set(e,t,r)}else r=void 0;return r}m.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,r){return M.access(e,t,r)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,r){return L.access(e,t,r)},_removeData:function(e,t){L.remove(e,t)}}),m.fn.extend({data:function(e,t){var r,i,n,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(n=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){for(r=s.length;r--;)s[r]&&0===(i=s[r].name).indexOf("data-")&&(i=m.camelCase(i.slice(5)),z(o,i,n[i]));L.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each((function(){M.set(this,e)})):F(this,(function(t){var r,i=m.camelCase(e);if(o&&void 0===t)return void 0!==(r=M.get(o,e))||void 0!==(r=M.get(o,i))||void 0!==(r=z(o,i,void 0))?r:void 0;this.each((function(){var r=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==r&&M.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){M.remove(this,e)}))}}),m.extend({queue:function(e,t,r){var i;if(e)return t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||m.isArray(r)?i=L.access(e,t,m.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=m.queue(e,t),i=r.length,n=r.shift(),o=m._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),i--),n&&("fx"===t&&r.unshift("inprogress"),delete o.stop,n.call(e,(function(){m.dequeue(e,t)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:m.Callbacks("once memory").add((function(){L.remove(e,[t+"queue",r])}))})}}),m.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?m.queue(this[0],e):void 0===t?this:this.each((function(){var r=m.queue(this,e,t);m._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&m.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){m.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=m.Deferred(),o=this,s=this.length,a=function(){--i||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=L.get(o[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(a));return a(),n.promise(t)}});var q,H,J=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=["Top","Right","Bottom","Left"],B=function(e,t){return e=t||e,"none"===m.css(e,"display")||!m.contains(e.ownerDocument,e)},W=/^(?:checkbox|radio)$/i;q=f.createDocumentFragment().appendChild(f.createElement("div")),(H=f.createElement("input")).setAttribute("type","radio"),H.setAttribute("checked","checked"),H.setAttribute("name","t"),q.appendChild(H),p.checkClone=q.cloneNode(!0).cloneNode(!0).lastChild.checked,q.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!q.cloneNode(!0).lastChild.defaultValue;var G="undefined";p.focusinBubbles="onfocusin"in i;var X=/^key/,K=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Q=/^([^.]*)(?:\.(.+)|)$/;function ee(){return!0}function te(){return!1}function re(){try{return f.activeElement}catch(e){}}m.event={global:{},add:function(e,t,r,i,n){var o,s,a,l,u,c,d,h,p,f,g,v=L.get(e);if(v)for(r.handler&&(r=(o=r).handler,n=o.selector),r.guid||(r.guid=m.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(t){return typeof m!==G&&m.event.triggered!==t.type?m.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(R)||[""]).length;u--;)p=g=(a=Q.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=m.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,d=m.event.special[p]||{},c=m.extend({type:p,origType:g,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&m.expr.match.needsContext.test(n),namespace:f.join(".")},o),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(p,s,!1)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),n?h.splice(h.delegateCount++,0,c):h.push(c),m.event.global[p]=!0)},remove:function(e,t,r,i,n){var o,s,a,l,u,c,d,h,p,f,g,v=L.hasData(e)&&L.get(e);if(v&&(l=v.events)){for(u=(t=(t||"").match(R)||[""]).length;u--;)if(p=g=(a=Q.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=m.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)c=h[o],!n&&g!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,v.handle)||m.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)m.event.remove(e,p+t[u],r,i,!0);m.isEmptyObject(l)&&(delete v.handle,L.remove(e,"events"))}},trigger:function(e,t,r,n){var o,s,a,l,u,c,d,p=[r||f],g=h.call(e,"type")?e.type:e,v=h.call(e,"namespace")?e.namespace.split("."):[];if(s=a=r=r||f,3!==r.nodeType&&8!==r.nodeType&&!Y.test(g+m.event.triggered)&&(g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),u=g.indexOf(":")<0&&"on"+g,(e=e[m.expando]?e:new m.Event(g,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=v.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:m.makeArray(t,[e]),d=m.event.special[g]||{},n||!d.trigger||!1!==d.trigger.apply(r,t))){if(!n&&!d.noBubble&&!m.isWindow(r)){for(l=d.delegateType||g,Y.test(l+g)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||f)&&p.push(a.defaultView||a.parentWindow||i)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)e.type=o>1?l:d.bindType||g,(c=(L.get(s,"events")||{})[e.type]&&L.get(s,"handle"))&&c.apply(s,t),(c=u&&s[u])&&c.apply&&m.acceptData(s)&&(e.result=c.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,n||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),t)||!m.acceptData(r)||u&&m.isFunction(r[g])&&!m.isWindow(r)&&((a=r[u])&&(r[u]=null),m.event.triggered=g,r[g](),m.event.triggered=void 0,a&&(r[u]=a)),e.result}},dispatch:function(e){e=m.event.fix(e);var t,r,i,n,o,a=[],l=s.call(arguments),u=(L.get(this,"events")||{})[e.type]||[],c=m.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(a=m.event.handlers.call(this,e,u),t=0;(n=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=n.elem,r=0;(o=n.handlers[r++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(i=((m.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,n,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(i=[],r=0;r<a;r++)void 0===i[n=(o=t[r]).selector+" "]&&(i[n]=o.needsContext?m(n,this).index(l)>=0:m.find(n,this,null,[l]).length),i[n]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,i,n,o=t.button;return null==e.pageX&&null!=t.clientX&&(i=(r=e.target.ownerDocument||f).documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[m.expando])return e;var t,r,i,n=e.type,o=e,s=this.fixHooks[n];for(s||(this.fixHooks[n]=s=K.test(n)?this.mouseHooks:X.test(n)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new m.Event(o),t=i.length;t--;)e[r=i[t]]=o[r];return e.target||(e.target=f),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==re()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===re()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var n=m.extend(new m.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?m.event.trigger(n,null,t):m.event.dispatch.call(t,n),n.isDefaultPrevented()&&r.preventDefault()}},m.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},m.Event=function(e,t){if(!(this instanceof m.Event))return new m.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ee:te):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),this[m.expando]=!0},m.Event.prototype={isDefaultPrevented:te,isPropagationStopped:te,isImmediatePropagationStopped:te,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ee,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ee,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ee,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){m.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,n=e.relatedTarget,o=e.handleObj;return n&&(n===i||m.contains(i,n))||(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}})),p.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){m.event.simulate(t,e.target,m.event.fix(e),!0)};m.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=L.access(i,t);n||i.addEventListener(e,r,!0),L.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=L.access(i,t)-1;n?L.access(i,t,n):(i.removeEventListener(e,r,!0),L.remove(i,t))}}})),m.fn.extend({on:function(e,t,r,i,n){var o,s;if("object"==typeof e){for(s in"string"!=typeof t&&(r=r||t,t=void 0),e)this.on(s,t,r,e[s],n);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),!1===i)i=te;else if(!i)return this;return 1===n&&(o=i,i=function(e){return m().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=m.guid++)),this.each((function(){m.event.add(this,e,i,r,t)}))},one:function(e,t,r,i){return this.on(e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,m(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=te),this.each((function(){m.event.remove(this,e,r,t)}))},trigger:function(e,t){return this.each((function(){m.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return m.event.trigger(e,t,r,!0)}});var ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ne=/<([\w:]+)/,oe=/<|&#?\w+;/,se=/<(?:script|style|link)/i,ae=/checked\s*(?:[^=]|=\s*.checked.)/i,le=/^$|\/(?:java|ecma)script/i,ue=/^true\/(.*)/,ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function he(e,t){return m.nodeName(e,"table")&&m.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function fe(e){var t=ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ge(e,t){for(var r=0,i=e.length;r<i;r++)L.set(e[r],"globalEval",!t||L.get(t[r],"globalEval"))}function me(e,t){var r,i,n,o,s,a,l,u;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),s=L.set(t,o),u=o.events))for(n in delete s.handle,s.events={},u)for(r=0,i=u[n].length;r<i;r++)m.event.add(t,n,u[n][r]);M.hasData(e)&&(a=M.access(e),l=m.extend({},a),M.set(t,l))}}function ve(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&m.nodeName(e,t)?m.merge([e],r):r}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td,m.extend({clone:function(e,t,r){var i,n,o,s,a,l,u,c=e.cloneNode(!0),d=m.contains(e.ownerDocument,e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||m.isXMLDoc(e)))for(s=ve(c),i=0,n=(o=ve(e)).length;i<n;i++)a=o[i],void 0,"input"===(u=(l=s[i]).nodeName.toLowerCase())&&W.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(t)if(r)for(o=o||ve(e),s=s||ve(c),i=0,n=o.length;i<n;i++)me(o[i],s[i]);else me(e,c);return(s=ve(c,"script")).length>0&&ge(s,!d&&ve(e,"script")),c},buildFragment:function(e,t,r,i){for(var n,o,s,a,l,u,c=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((n=e[h])||0===n)if("object"===m.type(n))m.merge(d,n.nodeType?[n]:n);else if(oe.test(n)){for(o=o||c.appendChild(t.createElement("div")),s=(ne.exec(n)||["",""])[1].toLowerCase(),a=de[s]||de._default,o.innerHTML=a[1]+n.replace(ie,"<$1></$2>")+a[2],u=a[0];u--;)o=o.lastChild;m.merge(d,o.childNodes),(o=c.firstChild).textContent=""}else d.push(t.createTextNode(n));for(c.textContent="",h=0;n=d[h++];)if((!i||-1===m.inArray(n,i))&&(l=m.contains(n.ownerDocument,n),o=ve(c.appendChild(n),"script"),l&&ge(o),r))for(u=0;n=o[u++];)le.test(n.type||"")&&r.push(n);return c},cleanData:function(e){for(var t,r,i,n,o=m.event.special,s=0;void 0!==(r=e[s]);s++){if(m.acceptData(r)&&(n=r[L.expando])&&(t=L.cache[n])){if(t.events)for(i in t.events)o[i]?m.event.remove(r,i):m.removeEvent(r,i,t.handle);L.cache[n]&&delete L.cache[n]}delete M.cache[r[M.expando]]}}}),m.fn.extend({text:function(e){return F(this,(function(e){return void 0===e?m.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return this.domManip(arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||he(this,e).appendChild(e)}))},prepend:function(){return this.domManip(arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=he(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},remove:function(e,t){for(var r,i=e?m.filter(e,this):this,n=0;null!=(r=i[n]);n++)t||1!==r.nodeType||m.cleanData(ve(r)),r.parentNode&&(t&&m.contains(r.ownerDocument,r)&&ge(ve(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(m.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return m.clone(this,e,t)}))},html:function(e){return F(this,(function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!se.test(e)&&!de[(ne.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ie,"<$1></$2>");try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(m.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,(function(t){e=this.parentNode,m.cleanData(ve(this)),e&&e.replaceChild(t,this)})),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=a.apply([],e);var r,i,n,o,s,l,u=0,c=this.length,d=this,h=c-1,f=e[0],g=m.isFunction(f);if(g||c>1&&"string"==typeof f&&!p.checkClone&&ae.test(f))return this.each((function(r){var i=d.eq(r);g&&(e[0]=f.call(this,r,i.html())),i.domManip(e,t)}));if(c&&(i=(r=m.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===r.childNodes.length&&(r=i),i)){for(o=(n=m.map(ve(r,"script"),pe)).length;u<c;u++)s=r,u!==h&&(s=m.clone(s,!0,!0),o&&m.merge(n,ve(s,"script"))),t.call(this[u],s,u);if(o)for(l=n[n.length-1].ownerDocument,m.map(n,fe),u=0;u<o;u++)s=n[u],le.test(s.type||"")&&!L.access(s,"globalEval")&&m.contains(l,s)&&(s.src?m._evalUrl&&m._evalUrl(s.src):m.globalEval(s.textContent.replace(ce,"")))}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){m.fn[e]=function(e){for(var r,i=[],n=m(e),o=n.length-1,s=0;s<=o;s++)r=s===o?this:this.clone(!0),m(n[s])[t](r),l.apply(i,r.get());return this.pushStack(i)}}));var ye,be={};function _e(e,t){var r,n=m(t.createElement(e)).appendTo(t.body),o=i.getDefaultComputedStyle&&(r=i.getDefaultComputedStyle(n[0]))?r.display:m.css(n[0],"display");return n.detach(),o}function we(e){var t=f,r=be[e];return r||("none"!==(r=_e(e,t))&&r||((t=(ye=(ye||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),r=_e(e,t),ye.detach()),be[e]=r),r}var Pe=/^margin/,Ae=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),Se=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):i.getComputedStyle(e,null)};function xe(e,t,r){var i,n,o,s,a=e.style;return(r=r||Se(e))&&(s=r.getPropertyValue(t)||r[t]),r&&(""!==s||m.contains(e.ownerDocument,e)||(s=m.style(e,t)),Ae.test(s)&&Pe.test(t)&&(i=a.width,n=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=r.width,a.width=i,a.minWidth=n,a.maxWidth=o)),void 0!==s?s+"":s}function Ce(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,r=f.documentElement,n=f.createElement("div"),o=f.createElement("div");function s(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(n);var s=i.getComputedStyle(o,null);e="1%"!==s.top,t="4px"===s.width,r.removeChild(n)}o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===o.style.backgroundClip,n.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",n.appendChild(o),i.getComputedStyle&&m.extend(p,{pixelPosition:function(){return s(),e},boxSizingReliable:function(){return null==t&&s(),t},reliableMarginRight:function(){var e,t=o.appendChild(f.createElement("div"));return t.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",o.style.width="1px",r.appendChild(n),e=!parseFloat(i.getComputedStyle(t,null).marginRight),r.removeChild(n),o.removeChild(t),e}}))}(),m.swap=function(e,t,r,i){var n,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in n=r.apply(e,i||[]),t)e.style[o]=s[o];return n};var Oe=/^(none|table(?!-c[ea]).+)/,ke=new RegExp("^("+J+")(.*)$","i"),Ee=new RegExp("^([+-])=("+J+")","i"),Ie={position:"absolute",visibility:"hidden",display:"block"},Te={letterSpacing:"0",fontWeight:"400"},De=["Webkit","O","Moz","ms"];function Re(e,t){if(t in e)return t;for(var r=t[0].toUpperCase()+t.slice(1),i=t,n=De.length;n--;)if((t=De[n]+r)in e)return t;return i}function je(e,t,r){var i=ke.exec(t);return i?Math.max(0,i[1]-(r||0))+(i[2]||"px"):t}function Ze(e,t,r,i,n){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===r&&(s+=m.css(e,r+V[o],!0,n)),i?("content"===r&&(s-=m.css(e,"padding"+V[o],!0,n)),"margin"!==r&&(s-=m.css(e,"border"+V[o]+"Width",!0,n))):(s+=m.css(e,"padding"+V[o],!0,n),"padding"!==r&&(s+=m.css(e,"border"+V[o]+"Width",!0,n)));return s}function Fe(e,t,r){var i=!0,n="width"===t?e.offsetWidth:e.offsetHeight,o=Se(e),s="border-box"===m.css(e,"boxSizing",!1,o);if(n<=0||null==n){if(((n=xe(e,t,o))<0||null==n)&&(n=e.style[t]),Ae.test(n))return n;i=s&&(p.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+Ze(e,t,r||(s?"border":"content"),i,o)+"px"}function Ne(e,t){for(var r,i,n,o=[],s=0,a=e.length;s<a;s++)(i=e[s]).style&&(o[s]=L.get(i,"olddisplay"),r=i.style.display,t?(o[s]||"none"!==r||(i.style.display=""),""===i.style.display&&B(i)&&(o[s]=L.access(i,"olddisplay",we(i.nodeName)))):(n=B(i),"none"===r&&n||L.set(i,"olddisplay",n?r:m.css(i,"display"))));for(s=0;s<a;s++)(i=e[s]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function Le(e,t,r,i,n){return new Le.prototype.init(e,t,r,i,n)}m.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=xe(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,s,a=m.camelCase(t),l=e.style;if(t=m.cssProps[a]||(m.cssProps[a]=Re(l,a)),s=m.cssHooks[t]||m.cssHooks[a],void 0===r)return s&&"get"in s&&void 0!==(n=s.get(e,!1,i))?n:l[t];"string"==(o=typeof r)&&(n=Ee.exec(r))&&(r=(n[1]+1)*n[2]+parseFloat(m.css(e,t)),o="number"),null!=r&&r==r&&("number"!==o||m.cssNumber[a]||(r+="px"),p.clearCloneStyle||""!==r||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(r=s.set(e,r,i))||(l[t]=r))}},css:function(e,t,r,i){var n,o,s,a=m.camelCase(t);return t=m.cssProps[a]||(m.cssProps[a]=Re(e.style,a)),(s=m.cssHooks[t]||m.cssHooks[a])&&"get"in s&&(n=s.get(e,!0,r)),void 0===n&&(n=xe(e,t,i)),"normal"===n&&t in Te&&(n=Te[t]),""===r||r?(o=parseFloat(n),!0===r||m.isNumeric(o)?o||0:n):n}}),m.each(["height","width"],(function(e,t){m.cssHooks[t]={get:function(e,r,i){if(r)return Oe.test(m.css(e,"display"))&&0===e.offsetWidth?m.swap(e,Ie,(function(){return Fe(e,t,i)})):Fe(e,t,i)},set:function(e,r,i){var n=i&&Se(e);return je(0,r,i?Ze(e,t,i,"border-box"===m.css(e,"boxSizing",!1,n),n):0)}}})),m.cssHooks.marginRight=Ce(p.reliableMarginRight,(function(e,t){if(t)return m.swap(e,{display:"inline-block"},xe,[e,"marginRight"])})),m.each({margin:"",padding:"",border:"Width"},(function(e,t){m.cssHooks[e+t]={expand:function(r){for(var i=0,n={},o="string"==typeof r?r.split(" "):[r];i<4;i++)n[e+V[i]+t]=o[i]||o[i-2]||o[0];return n}},Pe.test(e)||(m.cssHooks[e+t].set=je)})),m.fn.extend({css:function(e,t){return F(this,(function(e,t,r){var i,n,o={},s=0;if(m.isArray(t)){for(i=Se(e),n=t.length;s<n;s++)o[t[s]]=m.css(e,t[s],!1,i);return o}return void 0!==r?m.style(e,t,r):m.css(e,t)}),e,t,arguments.length>1)},show:function(){return Ne(this,!0)},hide:function(){return Ne(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){B(this)?m(this).show():m(this).hide()}))}}),m.Tween=Le,Le.prototype={constructor:Le,init:function(e,t,r,i,n,o){this.elem=e,this.prop=r,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(m.cssNumber[r]?"":"px")},cur:function(){var e=Le.propHooks[this.prop];return e&&e.get?e.get(this):Le.propHooks._default.get(this)},run:function(e){var t,r=Le.propHooks[this.prop];return this.options.duration?this.pos=t=m.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Le.propHooks._default.set(this),this}},Le.prototype.init.prototype=Le.prototype,Le.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=m.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){m.fx.step[e.prop]?m.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[m.cssProps[e.prop]]||m.cssHooks[e.prop])?m.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Le.propHooks.scrollTop=Le.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},m.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},m.fx=Le.prototype.init,m.fx.step={};var Me,Ue,$e=/^(?:toggle|show|hide)$/,ze=new RegExp("^(?:([+-])=|)("+J+")([a-z%]*)$","i"),qe=/queueHooks$/,He=[function(e,t,r){var i,n,o,s,a,l,u,c=this,d={},h=e.style,p=e.nodeType&&B(e),f=L.get(e,"fxshow");for(i in r.queue||(null==(a=m._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always((function(){c.always((function(){a.unqueued--,m.queue(e,"fx").length||a.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(u=m.css(e,"display"))?L.get(e,"olddisplay")||we(e.nodeName):u)&&"none"===m.css(e,"float")&&(h.display="inline-block")),r.overflow&&(h.overflow="hidden",c.always((function(){h.overflow=r.overflow[0],h.overflowX=r.overflow[1],h.overflowY=r.overflow[2]}))),t)if(n=t[i],$e.exec(n)){if(delete t[i],o=o||"toggle"===n,n===(p?"hide":"show")){if("show"!==n||!f||void 0===f[i])continue;p=!0}d[i]=f&&f[i]||m.style(e,i)}else u=void 0;if(m.isEmptyObject(d))"inline"===("none"===u?we(e.nodeName):u)&&(h.display=u);else for(i in f?"hidden"in f&&(p=f.hidden):f=L.access(e,"fxshow",{}),o&&(f.hidden=!p),p?m(e).show():c.done((function(){m(e).hide()})),c.done((function(){var t;for(t in L.remove(e,"fxshow"),d)m.style(e,t,d[t])})),d)s=We(p?f[i]:0,i,c),i in f||(f[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],Je={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),n=ze.exec(t),o=n&&n[3]||(m.cssNumber[e]?"":"px"),s=(m.cssNumber[e]||"px"!==o&&+i)&&ze.exec(m.css(r.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],n=n||[],s=+i||1;do{s/=a=a||".5",m.style(r.elem,e,s+o)}while(a!==(a=r.cur()/i)&&1!==a&&--l)}return n&&(s=r.start=+s||+i||0,r.unit=o,r.end=n[1]?s+(n[1]+1)*n[2]:+n[2]),r}]};function Ve(){return setTimeout((function(){Me=void 0})),Me=m.now()}function Be(e,t){var r,i=0,n={height:e};for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=V[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function We(e,t,r){for(var i,n=(Je[t]||[]).concat(Je["*"]),o=0,s=n.length;o<s;o++)if(i=n[o].call(r,t,e))return i}function Ge(e,t,r){var i,n,o=0,s=He.length,a=m.Deferred().always((function(){delete l.elem})),l=function(){if(n)return!1;for(var t=Me||Ve(),r=Math.max(0,u.startTime+u.duration-t),i=1-(r/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(i);return a.notifyWith(e,[u,i,r]),i<1&&s?r:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:m.extend({},t),opts:m.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Me||Ve(),duration:r.duration,tweens:[],createTween:function(t,r){var i=m.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var r=0,i=t?u.tweens.length:0;if(n)return this;for(n=!0;r<i;r++)u.tweens[r].run(1);return t?a.resolveWith(e,[u,t]):a.rejectWith(e,[u,t]),this}}),c=u.props;for(function(e,t){var r,i,n,o,s;for(r in e)if(n=t[i=m.camelCase(r)],o=e[r],m.isArray(o)&&(n=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),(s=m.cssHooks[i])&&"expand"in s)for(r in o=s.expand(o),delete e[i],o)r in e||(e[r]=o[r],t[r]=n);else t[i]=n}(c,u.opts.specialEasing);o<s;o++)if(i=He[o].call(u,e,c,u.opts))return i;return m.map(c,We,u),m.isFunction(u.opts.start)&&u.opts.start.call(e,u),m.fx.timer(m.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}m.Animation=m.extend(Ge,{tweener:function(e,t){m.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,n=e.length;i<n;i++)r=e[i],Je[r]=Je[r]||[],Je[r].unshift(t)},prefilter:function(e,t){t?He.unshift(e):He.push(e)}}),m.speed=function(e,t,r){var i=e&&"object"==typeof e?m.extend({},e):{complete:r||!r&&t||m.isFunction(e)&&e,duration:e,easing:r&&t||t&&!m.isFunction(t)&&t};return i.duration=m.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in m.fx.speeds?m.fx.speeds[i.duration]:m.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){m.isFunction(i.old)&&i.old.call(this),i.queue&&m.dequeue(this,i.queue)},i},m.fn.extend({fadeTo:function(e,t,r,i){return this.filter(B).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=m.isEmptyObject(e),o=m.speed(t,r,i),s=function(){var t=Ge(this,m.extend({},e),o);(n||L.get(this,"finish"))&&t.stop(!0)};return s.finish=s,n||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",o=m.timers,s=L.get(this);if(n)s[n]&&s[n].stop&&i(s[n]);else for(n in s)s[n]&&s[n].stop&&qe.test(n)&&i(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));!t&&r||m.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=L.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],o=m.timers,s=i?i.length:0;for(r.finish=!0,m.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish}))}}),m.each(["toggle","show","hide"],(function(e,t){var r=m.fn[t];m.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Be(t,!0),e,i,n)}})),m.each({slideDown:Be("show"),slideUp:Be("hide"),slideToggle:Be("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){m.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}})),m.timers=[],m.fx.tick=function(){var e,t=0,r=m.timers;for(Me=m.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||m.fx.stop(),Me=void 0},m.fx.timer=function(e){m.timers.push(e),e()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){Ue||(Ue=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(Ue),Ue=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(e,t){return e=m.fx&&m.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=setTimeout(t,e);r.stop=function(){clearTimeout(i)}}))},function(){var e=f.createElement("input"),t=f.createElement("select"),r=t.appendChild(f.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=r.selected,t.disabled=!0,p.optDisabled=!r.disabled,(e=f.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var Xe,Ke=m.expr.attrHandle;m.fn.extend({attr:function(e,t){return F(this,m.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){m.removeAttr(this,e)}))}}),m.extend({attr:function(e,t,r){var i,n,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===G?m.prop(e,t,r):(1===o&&m.isXMLDoc(e)||(t=t.toLowerCase(),i=m.attrHooks[t]||(m.expr.match.bool.test(t)?Xe:void 0)),void 0===r?i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=m.find.attr(e,t))?void 0:n:null!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):void m.removeAttr(e,t))},removeAttr:function(e,t){var r,i,n=0,o=t&&t.match(R);if(o&&1===e.nodeType)for(;r=o[n++];)i=m.propFix[r]||r,m.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&m.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Xe={set:function(e,t,r){return!1===t?m.removeAttr(e,r):e.setAttribute(r,r),r}},m.each(m.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=Ke[t]||m.find.attr;Ke[t]=function(e,t,i){var n,o;return i||(o=Ke[t],Ke[t]=n,n=null!=r(e,t,i)?t.toLowerCase():null,Ke[t]=o),n}}));var Ye=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(e,t){return F(this,m.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[m.propFix[e]||e]}))}}),m.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,r){var i,n,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!m.isXMLDoc(e))&&(t=m.propFix[t]||t,n=m.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Ye.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),p.optSelected||(m.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){m.propFix[this.toLowerCase()]=this}));var Qe=/[\t\r\n\f]/g;m.fn.extend({addClass:function(e){var t,r,i,n,o,s,a="string"==typeof e&&e,l=0,u=this.length;if(m.isFunction(e))return this.each((function(t){m(this).addClass(e.call(this,t,this.className))}));if(a)for(t=(e||"").match(R)||[];l<u;l++)if(i=1===(r=this[l]).nodeType&&(r.className?(" "+r.className+" ").replace(Qe," "):" ")){for(o=0;n=t[o++];)i.indexOf(" "+n+" ")<0&&(i+=n+" ");s=m.trim(i),r.className!==s&&(r.className=s)}return this},removeClass:function(e){var t,r,i,n,o,s,a=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(m.isFunction(e))return this.each((function(t){m(this).removeClass(e.call(this,t,this.className))}));if(a)for(t=(e||"").match(R)||[];l<u;l++)if(i=1===(r=this[l]).nodeType&&(r.className?(" "+r.className+" ").replace(Qe," "):"")){for(o=0;n=t[o++];)for(;i.indexOf(" "+n+" ")>=0;)i=i.replace(" "+n+" "," ");s=e?m.trim(i):"",r.className!==s&&(r.className=s)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):m.isFunction(e)?this.each((function(r){m(this).toggleClass(e.call(this,r,this.className,t),t)})):this.each((function(){if("string"===r)for(var t,i=0,n=m(this),o=e.match(R)||[];t=o[i++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else r!==G&&"boolean"!==r||(this.className&&L.set(this,"__className__",this.className),this.className=this.className||!1===e?"":L.get(this,"__className__")||"")}))},hasClass:function(e){for(var t=" "+e+" ",r=0,i=this.length;r<i;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(Qe," ").indexOf(t)>=0)return!0;return!1}});var et=/\r/g;m.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=m.isFunction(e),this.each((function(r){var n;1===this.nodeType&&(null==(n=i?e.call(this,r,m(this).val()):e)?n="":"number"==typeof n?n+="":m.isArray(n)&&(n=m.map(n,(function(e){return null==e?"":e+""}))),(t=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):n?(t=m.valHooks[n.type]||m.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(et,""):null==r?"":r:void 0}}),m.extend({valHooks:{option:{get:function(e){var t=m.find.attr(e,"value");return null!=t?t:m.trim(m.text(e))}},select:{get:function(e){for(var t,r,i=e.options,n=e.selectedIndex,o="select-one"===e.type||n<0,s=o?null:[],a=o?n+1:i.length,l=n<0?a:o?n:0;l<a;l++)if(((r=i[l]).selected||l===n)&&(p.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!m.nodeName(r.parentNode,"optgroup"))){if(t=m(r).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var r,i,n=e.options,o=m.makeArray(t),s=n.length;s--;)((i=n[s]).selected=m.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),m.each(["radio","checkbox"],(function(){m.valHooks[this]={set:function(e,t){if(m.isArray(t))return e.checked=m.inArray(m(e).val(),t)>=0}},p.checkOn||(m.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){m.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}})),m.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var tt=m.now(),rt=/\?/;m.parseJSON=function(e){return JSON.parse(e+"")},m.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+e),t};var it=/#.*$/,nt=/([?&])_=[^&]*/,ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,st=/^(?:GET|HEAD)$/,at=/^\/\//,lt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ut={},ct={},dt="*/".concat("*"),ht=i.location.href,pt=lt.exec(ht.toLowerCase())||[];function ft(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,n=0,o=t.toLowerCase().match(R)||[];if(m.isFunction(r))for(;i=o[n++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function gt(e,t,r,i){var n={},o=e===ct;function s(a){var l;return n[a]=!0,m.each(e[a]||[],(function(e,a){var u=a(t,r,i);return"string"!=typeof u||o||n[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)})),l}return s(t.dataTypes[0])||!n["*"]&&s("*")}function mt(e,t){var r,i,n=m.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&m.extend(!0,e,i),e}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ht,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":dt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?mt(mt(e,m.ajaxSettings),t):mt(m.ajaxSettings,e)},ajaxPrefilter:ft(ut),ajaxTransport:ft(ct),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,n,o,s,a,l,u,c=m.ajaxSetup({},t),d=c.context||c,h=c.context&&(d.nodeType||d.jquery)?m(d):m.event,p=m.Deferred(),f=m.Callbacks("once memory"),g=c.statusCode||{},v={},y={},b=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o)for(o={};t=ot.exec(n);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?n:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return b||(e=y[r]=y[r]||e,v[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return r&&r.abort(t),P(0,t),this}};if(p.promise(w).complete=f.add,w.success=w.done,w.error=w.fail,c.url=((e||c.url||ht)+"").replace(it,"").replace(at,pt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=m.trim(c.dataType||"*").toLowerCase().match(R)||[""],null==c.crossDomain&&(a=lt.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pt[1]&&a[2]===pt[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pt[3]||("http:"===pt[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=m.param(c.data,c.traditional)),gt(ut,c,t,w),2===b)return w;for(u in(l=m.event&&c.global)&&0==m.active++&&m.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!st.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(rt.test(i)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=nt.test(i)?i.replace(nt,"$1_="+tt++):i+(rt.test(i)?"&":"?")+"_="+tt++)),c.ifModified&&(m.lastModified[i]&&w.setRequestHeader("If-Modified-Since",m.lastModified[i]),m.etag[i]&&w.setRequestHeader("If-None-Match",m.etag[i])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&w.setRequestHeader("Content-Type",c.contentType),w.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+dt+"; q=0.01":""):c.accepts["*"]),c.headers)w.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(!1===c.beforeSend.call(d,w,c)||2===b))return w.abort();for(u in _="abort",{success:1,error:1,complete:1})w[u](c[u]);if(r=gt(ct,c,t,w)){w.readyState=1,l&&h.trigger("ajaxSend",[w,c]),c.async&&c.timeout>0&&(s=setTimeout((function(){w.abort("timeout")}),c.timeout));try{b=1,r.send(v,P)}catch(e){if(!(b<2))throw e;P(-1,e)}}else P(-1,"No Transport");function P(e,t,o,a){var u,v,y,_,P,A=t;2!==b&&(b=2,s&&clearTimeout(s),r=void 0,n=a||"",w.readyState=e>0?4:0,u=e>=200&&e<300||304===e,o&&(_=function(e,t,r){for(var i,n,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(n in a)if(a[n]&&a[n].test(i)){l.unshift(n);break}if(l[0]in r)o=l[0];else{for(n in r){if(!l[0]||e.converters[n+" "+l[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),r[o]}(c,w,o)),_=function(e,t,r,i){var n,o,s,a,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(n in u)if((a=n.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[n]:!0!==u[n]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(c,_,w,u),u?(c.ifModified&&((P=w.getResponseHeader("Last-Modified"))&&(m.lastModified[i]=P),(P=w.getResponseHeader("etag"))&&(m.etag[i]=P)),204===e||"HEAD"===c.type?A="nocontent":304===e?A="notmodified":(A=_.state,v=_.data,u=!(y=_.error))):(y=A,!e&&A||(A="error",e<0&&(e=0))),w.status=e,w.statusText=(t||A)+"",u?p.resolveWith(d,[v,A,w]):p.rejectWith(d,[w,A,y]),w.statusCode(g),g=void 0,l&&h.trigger(u?"ajaxSuccess":"ajaxError",[w,c,u?v:y]),f.fireWith(d,[w,A]),l&&(h.trigger("ajaxComplete",[w,c]),--m.active||m.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,r){return m.get(e,t,r,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],(function(e,t){m[t]=function(e,r,i,n){return m.isFunction(r)&&(n=n||i,i=r,r=void 0),m.ajax({url:e,type:t,dataType:n,data:r,success:i})}})),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(e){var t;return m.isFunction(e)?this.each((function(t){m(this).wrapAll(e.call(this,t))})):(this[0]&&(t=m(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return m.isFunction(e)?this.each((function(t){m(this).wrapInner(e.call(this,t))})):this.each((function(){var t=m(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m.isFunction(e);return this.each((function(r){m(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(){return this.parent().each((function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)})).end()}}),m.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},m.expr.filters.visible=function(e){return!m.expr.filters.hidden(e)};var vt=/%20/g,yt=/\[\]$/,bt=/\r?\n/g,_t=/^(?:submit|button|image|reset|file)$/i,wt=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,r,i){var n;if(m.isArray(t))m.each(t,(function(t,n){r||yt.test(e)?i(e,n):Pt(e+"["+("object"==typeof n?t:"")+"]",n,r,i)}));else if(r||"object"!==m.type(t))i(e,t);else for(n in t)Pt(e+"["+n+"]",t[n],r,i)}m.param=function(e,t){var r,i=[],n=function(e,t){t=m.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(e)||e.jquery&&!m.isPlainObject(e))m.each(e,(function(){n(this.name,this.value)}));else for(r in e)Pt(r,e[r],t,n);return i.join("&").replace(vt,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&wt.test(this.nodeName)&&!_t.test(e)&&(this.checked||!W.test(e))})).map((function(e,t){var r=m(this).val();return null==r?null:m.isArray(r)?m.map(r,(function(e){return{name:t.name,value:e.replace(bt,"\r\n")}})):{name:t.name,value:r.replace(bt,"\r\n")}})).get()}}),m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var At=0,St={},xt={0:200,1223:204},Ct=m.ajaxSettings.xhr();i.attachEvent&&i.attachEvent("onunload",(function(){for(var e in St)St[e]()})),p.cors=!!Ct&&"withCredentials"in Ct,p.ajax=Ct=!!Ct,m.ajaxTransport((function(e){var t;if(p.cors||Ct&&!e.crossDomain)return{send:function(r,i){var n,o=e.xhr(),s=++At;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(n in e.xhrFields)o[n]=e.xhrFields[n];for(n in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(n,r[n]);t=function(e){return function(){t&&(delete St[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(xt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=St[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return m.globalEval(e),e}}}),m.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),m.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain)return{send:function(i,n){t=m("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&n("error"===e.type?404:200,e.type)}),f.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Ot=[],kt=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ot.pop()||m.expando+"_"+tt++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",(function(e,t,r){var n,o,s,a=!1!==e.jsonp&&(kt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=m.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(kt,"$1"+n):!1!==e.jsonp&&(e.url+=(rt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return s||m.error(n+" was not called"),s[0]},e.dataTypes[0]="json",o=i[n],i[n]=function(){s=arguments},r.always((function(){i[n]=o,e[n]&&(e.jsonpCallback=t.jsonpCallback,Ot.push(n)),s&&m.isFunction(o)&&o(s[0]),s=o=void 0})),"script"})),m.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||f;var i=S.exec(e),n=!r&&[];return i?[t.createElement(i[1])]:(i=m.buildFragment([e],t,n),n&&n.length&&m(n).remove(),m.merge([],i.childNodes))};var Et=m.fn.load;m.fn.load=function(e,t,r){if("string"!=typeof e&&Et)return Et.apply(this,arguments);var i,n,o,s=this,a=e.indexOf(" ");return a>=0&&(i=m.trim(e.slice(a)),e=e.slice(0,a)),m.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),s.length>0&&m.ajax({url:e,type:n,dataType:"html",data:t}).done((function(e){o=arguments,s.html(i?m("<div>").append(m.parseHTML(e)).find(i):e)})).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){m.fn[t]=function(e){return this.on(t,e)}})),m.expr.filters.animated=function(e){return m.grep(m.timers,(function(t){return e===t.elem})).length};var It=i.document.documentElement;function Tt(e){return m.isWindow(e)?e:9===e.nodeType&&e.defaultView}m.offset={setOffset:function(e,t,r){var i,n,o,s,a,l,u=m.css(e,"position"),c=m(e),d={};"static"===u&&(e.style.position="relative"),a=c.offset(),o=m.css(e,"top"),l=m.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(s=(i=c.position()).top,n=i.left):(s=parseFloat(o)||0,n=parseFloat(l)||0),m.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+n),"using"in t?t.using.call(e,d):c.css(d)}},m.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){m.offset.setOffset(this,e,t)}));var t,r,i=this[0],n={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,m.contains(t,i)?(typeof i.getBoundingClientRect!==G&&(n=i.getBoundingClientRect()),r=Tt(o),{top:n.top+r.pageYOffset-t.clientTop,left:n.left+r.pageXOffset-t.clientLeft}):n):void 0},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===m.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),m.nodeName(e[0],"html")||(i=e.offset()),i.top+=m.css(e[0],"borderTopWidth",!0),i.left+=m.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-m.css(r,"marginTop",!0),left:t.left-i.left-m.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||It;e&&!m.nodeName(e,"html")&&"static"===m.css(e,"position");)e=e.offsetParent;return e||It}))}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;m.fn[e]=function(n){return F(this,(function(e,n,o){var s=Tt(e);if(void 0===o)return s?s[t]:e[n];s?s.scrollTo(r?i.pageXOffset:o,r?o:i.pageYOffset):e[n]=o}),e,n,arguments.length,null)}})),m.each(["top","left"],(function(e,t){m.cssHooks[t]=Ce(p.pixelPosition,(function(e,r){if(r)return r=xe(e,t),Ae.test(r)?m(e).position()[t]+"px":r}))})),m.each({Height:"height",Width:"width"},(function(e,t){m.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,i){m.fn[i]=function(i,n){var o=arguments.length&&(r||"boolean"!=typeof i),s=r||(!0===i||!0===n?"margin":"border");return F(this,(function(t,r,i){var n;return m.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===i?m.css(t,r,s):m.style(t,r,i,s)}),t,o?i:void 0,o,null)}}))})),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,void 0===(r=function(){return m}.apply(t,[]))||(e.exports=r);var Dt=i.jQuery,Rt=i.$;return m.noConflict=function(e){return i.$===m&&(i.$=Rt),e&&i.jQuery===m&&(i.jQuery=Dt),m},typeof n===G&&(i.jQuery=i.$=m),m},"object"==typeof e.exports?e.exports=i.document?n(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(i)},285397:(e,t,r)=>{var i="undefined"!=typeof JSON?JSON:r(324307);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var s,a="boolean"==typeof t.cycles&&t.cycles,l=t.replacer||function(e,t){return t},u=t.cmp&&(s=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},n={key:r,value:e[r]};return s(i,n)}}),c=[];return function e(t,s,d,h){var p=r?"\n"+new Array(h+1).join(r):"",f=r?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=l.call(t,s,d))){if("object"!=typeof d||null===d)return i.stringify(d);if(n(d)){for(var g=[],m=0;m<d.length;m++){var v=e(d,m,d[m],h+1)||i.stringify(null);g.push(p+r+v)}return"["+g.join(",")+p+"]"}if(-1!==c.indexOf(d)){if(a)return i.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(d);var y=o(d).sort(u&&u(d));for(g=[],m=0;m<y.length;m++){var b=e(d,s=y[m],d[s],h+1);if(b){var _=i.stringify(s)+f+b;g.push(p+r+_)}}return c.splice(c.indexOf(d),1),"{"+g.join(",")+p+"}"}}({"":e},"",e,0)};var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var i in e)t.call(e,i)&&r.push(i);return r}},324307:(e,t,r)=>{t.parse=r(510517),t.stringify=r(349530)},510517:e=>{var t,r,i,n,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},s=function(e){throw{name:"SyntaxError",message:e,at:t,text:i}},a=function(e){return e&&e!==r&&s("Expected '"+e+"' instead of '"+r+"'"),r=i.charAt(t),t+=1,r},l=function(){var e,t="";for("-"===r&&(t="-",a("-"));r>="0"&&r<="9";)t+=r,a();if("."===r)for(t+=".";a()&&r>="0"&&r<="9";)t+=r;if("e"===r||"E"===r)for(t+=r,a(),"-"!==r&&"+"!==r||(t+=r,a());r>="0"&&r<="9";)t+=r,a();if(e=+t,isFinite(e))return e;s("Bad number")},u=function(){var e,t,i,n="";if('"'===r)for(;a();){if('"'===r)return a(),n;if("\\"===r)if(a(),"u"===r){for(i=0,t=0;t<4&&(e=parseInt(a(),16),isFinite(e));t+=1)i=16*i+e;n+=String.fromCharCode(i)}else{if("string"!=typeof o[r])break;n+=o[r]}else n+=r}s("Bad string")},c=function(){for(;r&&r<=" ";)a()};n=function(){switch(c(),r){case"{":return function(){var e,t={};if("{"===r){if(a("{"),c(),"}"===r)return a("}"),t;for(;r;){if(e=u(),c(),a(":"),Object.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=n(),c(),"}"===r)return a("}"),t;a(","),c()}}s("Bad object")}();case"[":return function(){var e=[];if("["===r){if(a("["),c(),"]"===r)return a("]"),e;for(;r;){if(e.push(n()),c(),"]"===r)return a("]"),e;a(","),c()}}s("Bad array")}();case'"':return u();case"-":return l();default:return r>="0"&&r<="9"?l():function(){switch(r){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}s("Unexpected '"+r+"'")}()}},e.exports=function(e,o){var a;return i=e,t=0,r=" ",a=n(),c(),r&&s("Syntax error"),"function"==typeof o?function e(t,r){var i,n,s=t[r];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(void 0!==(n=e(s,i))?s[i]=n:delete s[i]);return o.call(t,r,s)}({"":a},""):a}},349530:e=>{var t,r,i,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(e){return n.lastIndex=0,n.test(e)?'"'+e.replace(n,(function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function a(e,n){var o,l,u,c,d,h=t,p=n[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof i&&(p=i.call(n,e,p)),typeof p){case"string":return s(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(t+=r,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(c=p.length,o=0;o<c;o+=1)d[o]=a(o,p)||"null";return u=0===d.length?"[]":t?"[\n"+t+d.join(",\n"+t)+"\n"+h+"]":"["+d.join(",")+"]",t=h,u}if(i&&"object"==typeof i)for(c=i.length,o=0;o<c;o+=1)"string"==typeof(l=i[o])&&(u=a(l,p))&&d.push(s(l)+(t?": ":":")+u);else for(l in p)Object.prototype.hasOwnProperty.call(p,l)&&(u=a(l,p))&&d.push(s(l)+(t?": ":":")+u);return u=0===d.length?"{}":t?"{\n"+t+d.join(",\n"+t)+"\n"+h+"}":"{"+d.join(",")+"}",t=h,u}}e.exports=function(e,n,o){var s;if(t="",r="","number"==typeof o)for(s=0;s<o;s+=1)r+=" ";else"string"==typeof o&&(r=o);if(i=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return a("",{"":e})}},642062:e=>{var t=1e3,r=60*t,i=60*r,n=24*i;function o(e,t,r,i){var n=t>=1.5*r;return Math.round(e/r)+" "+i+(n?"s":"")}e.exports=function(e,s){s=s||{};var a,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*n;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return s.long?(a=e,(l=Math.abs(a))>=n?o(a,l,n,"day"):l>=i?o(a,l,i,"hour"):l>=r?o(a,l,r,"minute"):l>=t?o(a,l,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=n?Math.round(e/n)+"d":o>=i?Math.round(e/i)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},13583:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var s,a,l=n(e),u=1;u<arguments.length;u++){for(var c in s=Object(arguments[u]))r.call(s,c)&&(l[c]=s[c]);if(t){a=t(s);for(var d=0;d<a.length;d++)i.call(s,a[d])&&(l[a[d]]=s[a[d]])}}return l}},718433:(e,t,r)=>{var i="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=i&&n&&"function"==typeof n.get?n.get:null,s=i&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&l&&"function"==typeof l.get?l.get:null,c=a&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,g=Object.prototype.toString,m=Function.prototype.toString,v=String.prototype.match,y=String.prototype.slice,b=String.prototype.replace,_=String.prototype.toUpperCase,w=String.prototype.toLowerCase,P=RegExp.prototype.test,A=Array.prototype.concat,S=Array.prototype.join,x=Array.prototype.slice,C=Math.floor,O="function"==typeof BigInt?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,I="function"==typeof Symbol&&"object"==typeof Symbol.iterator,T="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,D=Object.prototype.propertyIsEnumerable,R=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function j(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||P.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var i=e<0?-C(-e):C(e);if(i!==e){var n=String(i),o=y.call(t,n.length+1);return b.call(n,r,"$&_")+"."+b.call(b.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var Z=r(514632).custom,F=Z&&U(Z)?Z:null;function N(e,t,r){var i="double"===(r.quoteStyle||t)?'"':"'";return i+e+i}function L(e){return b.call(String(e),/"/g,"&quot;")}function M(e){return!("[object Array]"!==q(e)||T&&"object"==typeof e&&T in e)}function U(e){if(I)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!E)return!1;try{return E.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,i,n){var a=r||{};if(z(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(z(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!z(a,"customInspect")||a.customInspect;if("boolean"!=typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(z(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(z(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var g=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return J(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var _=String(t);return g?j(t,_):_}if("bigint"==typeof t){var P=String(t)+"n";return g?j(t,P):P}var C=void 0===a.depth?5:a.depth;if(void 0===i&&(i=0),i>=C&&C>0&&"object"==typeof t)return M(t)?"[Array]":"[Object]";var k,Z=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=S.call(Array(e.indent+1)," ")}return{base:r,prev:S.call(Array(t+1),r)}}(a,i);if(void 0===n)n=[];else if(H(n,t)>=0)return"[Circular]";function $(t,r,o){if(r&&(n=x.call(n)).push(r),o){var s={depth:a.depth};return z(a,"quoteStyle")&&(s.quoteStyle=a.quoteStyle),e(t,s,i+1,n)}return e(t,a,i+1,n)}if("function"==typeof t){var V=function(e){if(e.name)return e.name;var t=v.call(m.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),Y=K(t,$);return"[Function"+(V?": "+V:" (anonymous)")+"]"+(Y.length>0?" { "+S.call(Y,", ")+" }":"")}if(U(t)){var Q=I?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):E.call(t);return"object"!=typeof t||I?Q:B(Q)}if((k=t)&&"object"==typeof k&&("undefined"!=typeof HTMLElement&&k instanceof HTMLElement||"string"==typeof k.nodeName&&"function"==typeof k.getAttribute)){for(var ee="<"+w.call(String(t.nodeName)),te=t.attributes||[],re=0;re<te.length;re++)ee+=" "+te[re].name+"="+N(L(te[re].value),"double",a);return ee+=">",t.childNodes&&t.childNodes.length&&(ee+="..."),ee+"</"+w.call(String(t.nodeName))+">"}if(M(t)){if(0===t.length)return"[]";var ie=K(t,$);return Z&&!function(e){for(var t=0;t<e.length;t++)if(H(e[t],"\n")>=0)return!1;return!0}(ie)?"["+X(ie,Z)+"]":"[ "+S.call(ie,", ")+" ]"}if(function(e){return!("[object Error]"!==q(e)||T&&"object"==typeof e&&T in e)}(t)){var ne=K(t,$);return"cause"in t&&!D.call(t,"cause")?"{ ["+String(t)+"] "+S.call(A.call("[cause]: "+$(t.cause),ne),", ")+" }":0===ne.length?"["+String(t)+"]":"{ ["+String(t)+"] "+S.call(ne,", ")+" }"}if("object"==typeof t&&l){if(F&&"function"==typeof t[F])return t[F]();if("symbol"!==l&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var oe=[];return s.call(t,(function(e,r){oe.push($(r,t,!0)+" => "+$(e,t))})),G("Map",o.call(t),oe,Z)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var se=[];return c.call(t,(function(e){se.push($(e,t))})),G("Set",u.call(t),se,Z)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return W("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return W("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return W("WeakRef");if(function(e){return!("[object Number]"!==q(e)||T&&"object"==typeof e&&T in e)}(t))return B($(Number(t)));if(function(e){if(!e||"object"!=typeof e||!O)return!1;try{return O.call(e),!0}catch(e){}return!1}(t))return B($(O.call(t)));if(function(e){return!("[object Boolean]"!==q(e)||T&&"object"==typeof e&&T in e)}(t))return B(f.call(t));if(function(e){return!("[object String]"!==q(e)||T&&"object"==typeof e&&T in e)}(t))return B($(String(t)));if(!function(e){return!("[object Date]"!==q(e)||T&&"object"==typeof e&&T in e)}(t)&&!function(e){return!("[object RegExp]"!==q(e)||T&&"object"==typeof e&&T in e)}(t)){var ae=K(t,$),le=R?R(t)===Object.prototype:t instanceof Object||t.constructor===Object,ue=t instanceof Object?"":"null prototype",ce=!le&&T&&Object(t)===t&&T in t?y.call(q(t),8,-1):ue?"Object":"",de=(le||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ce||ue?"["+S.call(A.call([],ce||[],ue||[]),": ")+"] ":"");return 0===ae.length?de+"{}":Z?de+"{"+X(ae,Z)+"}":de+"{ "+S.call(ae,", ")+" }"}return String(t)};var $=Object.prototype.hasOwnProperty||function(e){return e in this};function z(e,t){return $.call(e,t)}function q(e){return g.call(e)}function H(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function J(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return J(y.call(e,0,t.maxStringLength),t)+i}return N(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,V),"single",t)}function V(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+_.call(t.toString(16))}function B(e){return"Object("+e+")"}function W(e){return e+" { ? }"}function G(e,t,r,i){return e+" ("+t+") {"+(i?X(r,i):S.call(r,", "))+"}"}function X(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+S.call(e,","+r)+"\n"+t.prev}function K(e,t){var r=M(e),i=[];if(r){i.length=e.length;for(var n=0;n<e.length;n++)i[n]=z(e,n)?t(e[n],e):""}var o,s="function"==typeof k?k(e):[];if(I){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in e)z(e,l)&&(r&&String(Number(l))===l&&l<e.length||I&&o["$"+l]instanceof Symbol||(P.call(/[^\w$]/,l)?i.push(t(l,e)+": "+t(e[l],e)):i.push(l+": "+t(e[l],e))));if("function"==typeof k)for(var u=0;u<s.length;u++)D.call(e,s[u])&&i.push("["+t(s[u])+"]: "+t(e[s[u]],e));return i}},456174:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:i}},291100:(e,t,r)=>{"use strict";var i=r(574855),n=r(966838),o=r(456174);e.exports={formats:o,parse:n,stringify:i}},966838:(e,t,r)=>{"use strict";var i=r(397780),n=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,i){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(o),u=a?o.slice(0,a.index):o,c=[];if(u){if(!r.plainObjects&&n.call(Object.prototype,u)&&!r.allowPrototypes)return;c.push(u)}for(var d=0;r.depth>0&&null!==(a=s.exec(o))&&d<r.depth;){if(d+=1,!r.plainObjects&&n.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+o.slice(a.index)+"]"),function(e,t,r,i){for(var n=i?t:l(t,r),o=e.length-1;o>=0;--o){var s,a=e[o];if("[]"===a&&r.parseArrays)s=[].concat(n);else{s=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(u,10);r.parseArrays||""!==u?!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[])[c]=n:s[u]=n:s={0:n}}n=s}return n}(c,t,r,i)}};e.exports=function(e,t){var r=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var r,u={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,h=c.split(t.delimiter,d),p=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<h.length;++r)0===h[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[r]?f="utf-8":"utf8=%26%2310003%3B"===h[r]&&(f="iso-8859-1"),p=r,r=h.length);for(r=0;r<h.length;++r)if(r!==p){var g,m,v=h[r],y=v.indexOf("]="),b=-1===y?v.indexOf("="):y+1;-1===b?(g=t.decoder(v,s.decoder,f,"key"),m=t.strictNullHandling?null:""):(g=t.decoder(v.slice(0,b),s.decoder,f,"key"),m=i.maybeMap(l(v.slice(b+1),t),(function(e){return t.decoder(e,s.decoder,f,"value")}))),m&&t.interpretNumericEntities&&"iso-8859-1"===f&&(m=a(m)),v.indexOf("[]=")>-1&&(m=o(m)?[m]:m),n.call(u,g)?u[g]=i.combine(u[g],m):u[g]=m}return u}(e,r):e,d=r.plainObjects?Object.create(null):{},h=Object.keys(c),p=0;p<h.length;++p){var f=h[p],g=u(f,c[f],r,"string"==typeof e);d=i.merge(d,g,r)}return!0===r.allowSparse?d:i.compact(d)}},574855:(e,t,r)=>{"use strict";var i=r(793386),n=r(397780),o=r(456174),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,l(t)?t:[t])},d=Date.prototype.toISOString,h=o.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:h,formatter:o.formatters[h],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},f=function e(t,r,o,s,a,u,d,h,f,g,m,v,y,b,_){var w,P=t;if(_.has(t))throw new RangeError("Cyclic object value");if("function"==typeof d?P=d(r,P):P instanceof Date?P=g(P):"comma"===o&&l(P)&&(P=n.maybeMap(P,(function(e){return e instanceof Date?g(e):e}))),null===P){if(s)return u&&!y?u(r,p.encoder,b,"key",m):r;P=""}if("string"==typeof(w=P)||"number"==typeof w||"boolean"==typeof w||"symbol"==typeof w||"bigint"==typeof w||n.isBuffer(P))return u?[v(y?r:u(r,p.encoder,b,"key",m))+"="+v(u(P,p.encoder,b,"value",m))]:[v(r)+"="+v(String(P))];var A,S=[];if(void 0===P)return S;if("comma"===o&&l(P))A=[{value:P.length>0?P.join(",")||null:void 0}];else if(l(d))A=d;else{var x=Object.keys(P);A=h?x.sort(h):x}for(var C=0;C<A.length;++C){var O=A[C],k="object"==typeof O&&void 0!==O.value?O.value:P[O];if(!a||null!==k){var E=l(P)?"function"==typeof o?o(r,O):r:r+(f?"."+O:"["+O+"]");_.set(t,!0);var I=i();c(S,e(k,E,o,s,a,u,d,h,f,g,m,v,y,b,I))}}return S};e.exports=function(e,t){var r,n=e,u=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!s.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=o.formatters[r],n=p.filter;return("function"==typeof e.filter||l(e.filter))&&(n=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:n,format:r,formatter:i,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?n=(0,u.filter)("",n):l(u.filter)&&(r=u.filter);var d,h=[];if("object"!=typeof n||null===n)return"";d=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var g=a[d];r||(r=Object.keys(n)),u.sort&&r.sort(u.sort);for(var m=i(),v=0;v<r.length;++v){var y=r[v];u.skipNulls&&null===n[y]||c(h,f(n[y],y,g,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,m))}var b=h.join(u.delimiter),_=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),b.length>0?_+b:""}},397780:(e,t,r)=>{"use strict";var i=r(456174),n=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)void 0!==e[i]&&(r[i]=e[i]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var n=t[i],s=n.obj[n.prop],a=Object.keys(s),l=0;l<a.length;++l){var u=a[l],c=s[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:s,prop:u}),r.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var i=[],n=0;n<r.length;++n)void 0!==r[n]&&i.push(r[n]);t.obj[t.prop]=i}}}(t),e},decode:function(e,t,r){var i=e.replace(/\+/g," ");if("iso-8859-1"===r)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(e){return i}},encode:function(e,t,r,n,o){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var l="",u=0;u<a.length;++u){var c=a.charCodeAt(u);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===i.RFC1738&&(40===c||41===c)?l+=a.charAt(u):c<128?l+=s[c]:c<2048?l+=s[192|c>>6]+s[128|63&c]:c<55296||c>=57344?l+=s[224|c>>12]+s[128|c>>6&63]+s[128|63&c]:(u+=1,c=65536+((1023&c)<<10|1023&a.charCodeAt(u)),l+=s[240|c>>18]+s[128|c>>12&63]+s[128|c>>6&63]+s[128|63&c])}return l},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return o(t)&&!o(r)&&(s=a(t,i)),o(t)&&o(r)?(r.forEach((function(r,o){if(n.call(t,o)){var s=t[o];s&&"object"==typeof s&&r&&"object"==typeof r?t[o]=e(s,r,i):t.push(r)}else t[o]=r})),t):Object.keys(r).reduce((function(t,o){var s=r[o];return n.call(t,o)?t[o]=e(t[o],s,i):t[o]=s,t}),s)}}},793386:(e,t,r)=>{"use strict";var i=r(56007),n=r(396517),o=r(718433),s=i("%TypeError%"),a=i("%WeakMap%",!0),l=i("%Map%",!0),u=n("WeakMap.prototype.get",!0),c=n("WeakMap.prototype.set",!0),d=n("WeakMap.prototype.has",!0),h=n("Map.prototype.get",!0),p=n("Map.prototype.set",!0),f=n("Map.prototype.has",!0),g=function(e,t){for(var r,i=e;null!==(r=i.next);i=r)if(r.key===t)return i.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,i={assert:function(e){if(!i.has(e))throw new s("Side channel does not contain "+o(e))},get:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(e)return u(e,i)}else if(l){if(t)return h(t,i)}else if(r)return function(e,t){var r=g(e,t);return r&&r.value}(r,i)},has:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(e)return d(e,i)}else if(l){if(t)return f(t,i)}else if(r)return function(e,t){return!!g(e,t)}(r,i);return!1},set:function(i,n){a&&i&&("object"==typeof i||"function"==typeof i)?(e||(e=new a),c(e,i,n)):l?(t||(t=new l),p(t,i,n)):(r||(r={key:{},next:null}),function(e,t,r){var i=g(e,t);i?i.value=r:e.next={key:t,next:e.next,value:r}}(r,i,n))}};return i}},772280:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(267519);function n(e,t){void 0===t&&(t={});var r=function(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(r,t.doNotParse))try{return JSON.parse(r)}catch(e){}return e}var o=r(13583);const s=function(){function e(e,t){var r=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?i.Q(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){r.HAS_DOCUMENT_COOKIE=!0})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=i.Q(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,r){return void 0===t&&(t={}),this._updateBrowserValues(r),n(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var r={};for(var i in this.cookies)r[i]=n(this.cookies[i],e);return r},e.prototype.set=function(e,t,r){var n;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=o({},this.cookies,((n={})[e]=t,n)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=i.q(e,t,r)),this._emitChange({name:e,value:t,options:r})},e.prototype.remove=function(e,t){var r=t=o({},t,{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=o({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=i.q(e,"",r)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}()},443099:(e,t,r)=>{"use strict";r.d(t,{Wy:()=>i,C6:()=>n});const i=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),n=()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))},833593:(e,t,r)=>{var i=r(233167),n=r(4413),o=r(378802),s=i.TypeError;e.exports=function(e){if(n(e))return e;throw s(o(e)+" is not a function")}},72832:(e,t,r)=>{var i=r(233167),n=r(4413),o=i.String,s=i.TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw s("Can't set "+o(e)+" as a prototype")}},916286:(e,t,r)=>{var i=r(762081),n=r(132693),o=r(846850),s=i("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:n(null)}),e.exports=function(e){a[s][e]=!0}},814519:(e,t,r)=>{var i=r(233167),n=r(921460),o=i.TypeError;e.exports=function(e,t){if(n(t,e))return e;throw o("Incorrect invocation")}},52548:(e,t,r)=>{var i=r(233167),n=r(25327),o=i.String,s=i.TypeError;e.exports=function(e){if(n(e))return e;throw s(o(e)+" is not an object")}},488210:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},919944:(e,t,r)=>{"use strict";var i,n,o,s=r(488210),a=r(474040),l=r(233167),u=r(4413),c=r(25327),d=r(838263),h=r(936340),p=r(378802),f=r(881303),g=r(78083),m=r(846850).f,v=r(921460),y=r(490824),b=r(348946),_=r(762081),w=r(775563),P=l.Int8Array,A=P&&P.prototype,S=l.Uint8ClampedArray,x=S&&S.prototype,C=P&&y(P),O=A&&y(A),k=Object.prototype,E=l.TypeError,I=_("toStringTag"),T=w("TYPED_ARRAY_TAG"),D=w("TYPED_ARRAY_CONSTRUCTOR"),R=s&&!!b&&"Opera"!==h(l.opera),j=!1,Z={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},N=function(e){if(!c(e))return!1;var t=h(e);return d(Z,t)||d(F,t)};for(i in Z)(o=(n=l[i])&&n.prototype)?f(o,D,n):R=!1;for(i in F)(o=(n=l[i])&&n.prototype)&&f(o,D,n);if((!R||!u(C)||C===Function.prototype)&&(C=function(){throw E("Incorrect invocation")},R))for(i in Z)l[i]&&b(l[i],C);if((!R||!O||O===k)&&(O=C.prototype,R))for(i in Z)l[i]&&b(l[i].prototype,O);if(R&&y(x)!==O&&b(x,O),a&&!d(O,I))for(i in j=!0,m(O,I,{get:function(){return c(this)?this[T]:void 0}}),Z)l[i]&&f(l[i],T,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:R,TYPED_ARRAY_CONSTRUCTOR:D,TYPED_ARRAY_TAG:j&&T,aTypedArray:function(e){if(N(e))return e;throw E("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!b||v(C,e)))return e;throw E(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,i){if(a){if(r)for(var n in Z){var o=l[n];if(o&&d(o.prototype,e))try{delete o.prototype[e]}catch(r){try{o.prototype[e]=t}catch(e){}}}O[e]&&!r||g(O,e,r?t:R&&A[e]||t,i)}},exportTypedArrayStaticMethod:function(e,t,r){var i,n;if(a){if(b){if(r)for(i in Z)if((n=l[i])&&d(n,e))try{delete n[e]}catch(e){}if(C[e]&&!r)return;try{return g(C,e,r?t:R&&C[e]||t)}catch(e){}}for(i in Z)!(n=l[i])||n[e]&&!r||g(n,e,t)}},isView:function(e){if(!c(e))return!1;var t=h(e);return"DataView"===t||d(Z,t)||d(F,t)},isTypedArray:N,TypedArray:C,TypedArrayPrototype:O}},69595:(e,t,r)=>{var i=r(109350),n=r(321416),o=r(427830),s=function(e){return function(t,r,s){var a,l=i(t),u=o(l),c=n(s,u);if(e&&r!=r){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},294674:(e,t,r)=>{var i=r(233167),n=r(321416),o=r(427830),s=r(641380),a=i.Array,l=Math.max;e.exports=function(e,t,r){for(var i=o(e),u=n(t,i),c=n(void 0===r?i:r,i),d=a(l(c-u,0)),h=0;u<c;u++,h++)s(d,h,e[u]);return d.length=h,d}},432031:(e,t,r)=>{var i=r(294674),n=Math.floor,o=function(e,t){var r=e.length,l=n(r/2);return r<8?s(e,t):a(e,o(i(e,0,l),t),o(i(e,l),t),t)},s=function(e,t){for(var r,i,n=e.length,o=1;o<n;){for(i=o,r=e[o];i&&t(e[i-1],r)>0;)e[i]=e[--i];i!==o++&&(e[i]=r)}return e},a=function(e,t,r,i){for(var n=t.length,o=r.length,s=0,a=0;s<n||a<o;)e[s+a]=s<n&&a<o?i(t[s],r[a])<=0?t[s++]:r[a++]:s<n?t[s++]:r[a++];return e};e.exports=o},907937:(e,t,r)=>{var i=r(903057),n=i({}.toString),o=i("".slice);e.exports=function(e){return o(n(e),8,-1)}},936340:(e,t,r)=>{var i=r(233167),n=r(128601),o=r(4413),s=r(907937),a=r(762081)("toStringTag"),l=i.Object,u="Arguments"==s(function(){return arguments}());e.exports=n?s:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=l(e),a))?r:u?s(t):"Object"==(i=s(t))&&o(t.callee)?"Arguments":i}},692203:(e,t,r)=>{var i=r(903057)("".replace),n=String(Error("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,s=o.test(n);e.exports=function(e,t){if(s&&"string"==typeof e)for(;t--;)e=i(e,o,"");return e}},38372:(e,t,r)=>{var i=r(838263),n=r(680049),o=r(927266),s=r(846850);e.exports=function(e,t,r){for(var a=n(t),l=s.f,u=o.f,c=0;c<a.length;c++){var d=a[c];i(e,d)||r&&i(r,d)||l(e,d,u(t,d))}}},278287:(e,t,r)=>{var i=r(573012);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},881303:(e,t,r)=>{var i=r(474040),n=r(846850),o=r(319493);e.exports=i?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},319493:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},641380:(e,t,r)=>{"use strict";var i=r(351899),n=r(846850),o=r(319493);e.exports=function(e,t,r){var s=i(t);s in e?n.f(e,s,o(0,r)):e[s]=r}},474040:(e,t,r)=>{var i=r(573012);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},7180:(e,t,r)=>{var i=r(233167),n=r(25327),o=i.document,s=n(o)&&n(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},363652:e=>{e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},747804:(e,t,r)=>{var i=r(91089).match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},209254:(e,t,r)=>{var i=r(91089);e.exports=/MSIE|Trident/.test(i)},91089:(e,t,r)=>{var i=r(840982);e.exports=i("navigator","userAgent")||""},162211:(e,t,r)=>{var i,n,o=r(233167),s=r(91089),a=o.process,l=o.Deno,u=a&&a.versions||l&&l.version,c=u&&u.v8;c&&(n=(i=c.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!n&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(n=+i[1]),e.exports=n},179859:(e,t,r)=>{var i=r(91089).match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},315163:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},975546:(e,t,r)=>{var i=r(573012),n=r(319493);e.exports=!i((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",n(1,7)),7!==e.stack)}))},145630:(e,t,r)=>{var i=r(233167),n=r(927266).f,o=r(881303),s=r(78083),a=r(282024),l=r(38372),u=r(719944);e.exports=function(e,t){var r,c,d,h,p,f=e.target,g=e.global,m=e.stat;if(r=g?i:m?i[f]||a(f,{}):(i[f]||{}).prototype)for(c in t){if(h=t[c],d=e.noTargetGet?(p=n(r,c))&&p.value:r[c],!u(g?c:f+(m?".":"#")+c,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),s(r,c,h,e)}}},573012:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},22583:(e,t,r)=>{var i=r(248955),n=Function.prototype,o=n.apply,s=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?s.bind(o):function(){return s.apply(o,arguments)})},248955:(e,t,r)=>{var i=r(573012);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},211254:(e,t,r)=>{var i=r(248955),n=Function.prototype.call;e.exports=i?n.bind(n):function(){return n.apply(n,arguments)}},273145:(e,t,r)=>{var i=r(474040),n=r(838263),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=n(o,"name"),l=a&&"something"===function(){}.name,u=a&&(!i||i&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:u}},903057:(e,t,r)=>{var i=r(248955),n=Function.prototype,o=n.bind,s=n.call,a=i&&o.bind(s,s);e.exports=i?function(e){return e&&a(e)}:function(e){return e&&function(){return s.apply(e,arguments)}}},840982:(e,t,r)=>{var i=r(233167),n=r(4413),o=function(e){return n(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(i[e]):i[e]&&i[e][t]}},240767:(e,t,r)=>{var i=r(833593);e.exports=function(e,t){var r=e[t];return null==r?void 0:i(r)}},233167:(e,t,r)=>{var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i(window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},838263:(e,t,r)=>{var i=r(903057),n=r(200856),o=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(n(e),t)}},33582:e=>{e.exports={}},522069:(e,t,r)=>{var i=r(840982);e.exports=i("document","documentElement")},323423:(e,t,r)=>{var i=r(474040),n=r(573012),o=r(7180);e.exports=!i&&!n((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},831164:(e,t,r)=>{var i=r(233167),n=r(903057),o=r(573012),s=r(907937),a=i.Object,l=n("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?l(e,""):a(e)}:a},950341:(e,t,r)=>{var i=r(4413),n=r(25327),o=r(348946);e.exports=function(e,t,r){var s,a;return o&&i(s=t.constructor)&&s!==r&&n(a=s.prototype)&&a!==r.prototype&&o(e,a),e}},509411:(e,t,r)=>{var i=r(903057),n=r(4413),o=r(75754),s=i(Function.toString);n(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},675316:(e,t,r)=>{var i=r(25327),n=r(881303);e.exports=function(e,t){i(t)&&"cause"in t&&n(e,"cause",t.cause)}},590718:(e,t,r)=>{var i,n,o,s=r(642046),a=r(233167),l=r(903057),u=r(25327),c=r(881303),d=r(838263),h=r(75754),p=r(990067),f=r(33582),g="Object already initialized",m=a.TypeError,v=a.WeakMap;if(s||h.state){var y=h.state||(h.state=new v),b=l(y.get),_=l(y.has),w=l(y.set);i=function(e,t){if(_(y,e))throw new m(g);return t.facade=e,w(y,e,t),t},n=function(e){return b(y,e)||{}},o=function(e){return _(y,e)}}else{var P=p("state");f[P]=!0,i=function(e,t){if(d(e,P))throw new m(g);return t.facade=e,c(e,P,t),t},n=function(e){return d(e,P)?e[P]:{}},o=function(e){return d(e,P)}}e.exports={set:i,get:n,has:o,enforce:function(e){return o(e)?n(e):i(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=n(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return r}}}},4413:e=>{e.exports=function(e){return"function"==typeof e}},719944:(e,t,r)=>{var i=r(573012),n=r(4413),o=/#|\.prototype\./,s=function(e,t){var r=l[a(e)];return r==c||r!=u&&(n(t)?i(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=s.data={},u=s.NATIVE="N",c=s.POLYFILL="P";e.exports=s},25327:(e,t,r)=>{var i=r(4413);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},895240:e=>{e.exports=!1},513462:(e,t,r)=>{var i=r(233167),n=r(840982),o=r(4413),s=r(921460),a=r(378271),l=i.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&s(t.prototype,l(e))}},427830:(e,t,r)=>{var i=r(645750);e.exports=function(e){return i(e.length)}},359640:(e,t,r)=>{var i=r(162211),n=r(573012);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},642046:(e,t,r)=>{var i=r(233167),n=r(4413),o=r(509411),s=i.WeakMap;e.exports=n(s)&&/native code/.test(o(s))},403822:(e,t,r)=>{var i=r(993504);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},132693:(e,t,r)=>{var i,n=r(52548),o=r(295161),s=r(315163),a=r(33582),l=r(522069),u=r(7180),c=r(990067)("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},p=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t;p=document.domain&&i?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var r=s.length;r--;)delete p.prototype[s[r]];return p()};a[c]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(d.prototype=n(e),r=new d,d.prototype=null,r[c]=e):r=p(),void 0===t?r:o.f(r,t)}},295161:(e,t,r)=>{var i=r(474040),n=r(518917),o=r(846850),s=r(52548),a=r(109350),l=r(174467);t.f=i&&!n?Object.defineProperties:function(e,t){s(e);for(var r,i=a(t),n=l(t),u=n.length,c=0;u>c;)o.f(e,r=n[c++],i[r]);return e}},846850:(e,t,r)=>{var i=r(233167),n=r(474040),o=r(323423),s=r(518917),a=r(52548),l=r(351899),u=i.TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor;t.f=n?s?function(e,t,r){if(a(e),t=l(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable){var i=d(e,t);i&&i.writable&&(e[t]=r.value,r={configurable:"configurable"in r?r.configurable:i.configurable,enumerable:"enumerable"in r?r.enumerable:i.enumerable,writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(a(e),t=l(t),a(r),o)try{return c(e,t,r)}catch(e){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},927266:(e,t,r)=>{var i=r(474040),n=r(211254),o=r(356350),s=r(319493),a=r(109350),l=r(351899),u=r(838263),c=r(323423),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=a(e),t=l(t),c)try{return d(e,t)}catch(e){}if(u(e,t))return s(!n(o.f,e,t),e[t])}},125071:(e,t,r)=>{var i=r(608443),n=r(315163).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},393119:(e,t)=>{t.f=Object.getOwnPropertySymbols},490824:(e,t,r)=>{var i=r(233167),n=r(838263),o=r(4413),s=r(200856),a=r(990067),l=r(278287),u=a("IE_PROTO"),c=i.Object,d=c.prototype;e.exports=l?c.getPrototypeOf:function(e){var t=s(e);if(n(t,u))return t[u];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof c?d:null}},921460:(e,t,r)=>{var i=r(903057);e.exports=i({}.isPrototypeOf)},608443:(e,t,r)=>{var i=r(903057),n=r(838263),o=r(109350),s=r(69595).indexOf,a=r(33582),l=i([].push);e.exports=function(e,t){var r,i=o(e),u=0,c=[];for(r in i)!n(a,r)&&n(i,r)&&l(c,r);for(;t.length>u;)n(i,r=t[u++])&&(~s(c,r)||l(c,r));return c}},174467:(e,t,r)=>{var i=r(608443),n=r(315163);e.exports=Object.keys||function(e){return i(e,n)}},356350:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!r.call({1:2},1);t.f=n?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},348946:(e,t,r)=>{var i=r(903057),n=r(52548),o=r(72832);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),o(i),t?e(r,i):r.__proto__=i,r}}():void 0)},208883:(e,t,r)=>{var i=r(233167),n=r(211254),o=r(4413),s=r(25327),a=i.TypeError;e.exports=function(e,t){var r,i;if("string"===t&&o(r=e.toString)&&!s(i=n(r,e)))return i;if(o(r=e.valueOf)&&!s(i=n(r,e)))return i;if("string"!==t&&o(r=e.toString)&&!s(i=n(r,e)))return i;throw a("Can't convert object to primitive value")}},680049:(e,t,r)=>{var i=r(840982),n=r(903057),o=r(125071),s=r(393119),a=r(52548),l=n([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=s.f;return r?l(t,r(e)):t}},78083:(e,t,r)=>{var i=r(233167),n=r(4413),o=r(838263),s=r(881303),a=r(282024),l=r(509411),u=r(590718),c=r(273145).CONFIGURABLE,d=u.get,h=u.enforce,p=String(String).split("String");(e.exports=function(e,t,r,l){var u,d=!!l&&!!l.unsafe,f=!!l&&!!l.enumerable,g=!!l&&!!l.noTargetGet,m=l&&void 0!==l.name?l.name:t;n(r)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(r,"name")||c&&r.name!==m)&&s(r,"name",m),(u=h(r)).source||(u.source=p.join("string"==typeof m?m:""))),e!==i?(d?!g&&e[t]&&(f=!0):delete e[t],f?e[t]=r:s(e,t,r)):f?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return n(this)&&d(this).source||l(this)}))},956991:(e,t,r)=>{var i=r(233167).TypeError;e.exports=function(e){if(null==e)throw i("Can't call method on "+e);return e}},282024:(e,t,r)=>{var i=r(233167),n=Object.defineProperty;e.exports=function(e,t){try{n(i,e,{value:t,configurable:!0,writable:!0})}catch(r){i[e]=t}return t}},990067:(e,t,r)=>{var i=r(683731),n=r(775563),o=i("keys");e.exports=function(e){return o[e]||(o[e]=n(e))}},75754:(e,t,r)=>{var i=r(233167),n=r(282024),o="__core-js_shared__",s=i[o]||n(o,{});e.exports=s},683731:(e,t,r)=>{var i=r(895240),n=r(75754);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:i?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},321416:(e,t,r)=>{var i=r(847674),n=Math.max,o=Math.min;e.exports=function(e,t){var r=i(e);return r<0?n(r+t,0):o(r,t)}},109350:(e,t,r)=>{var i=r(831164),n=r(956991);e.exports=function(e){return i(n(e))}},847674:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){var i=+e;return i!=i||0===i?0:(i>0?r:t)(i)}},645750:(e,t,r)=>{var i=r(847674),n=Math.min;e.exports=function(e){return e>0?n(i(e),9007199254740991):0}},200856:(e,t,r)=>{var i=r(233167),n=r(956991),o=i.Object;e.exports=function(e){return o(n(e))}},483578:(e,t,r)=>{var i=r(233167),n=r(34151),o=i.RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw o("Wrong offset");return r}},34151:(e,t,r)=>{var i=r(233167),n=r(847674),o=i.RangeError;e.exports=function(e){var t=n(e);if(t<0)throw o("The argument can't be less than 0");return t}},310338:(e,t,r)=>{var i=r(233167),n=r(211254),o=r(25327),s=r(513462),a=r(240767),l=r(208883),u=r(762081),c=i.TypeError,d=u("toPrimitive");e.exports=function(e,t){if(!o(e)||s(e))return e;var r,i=a(e,d);if(i){if(void 0===t&&(t="default"),r=n(i,e,t),!o(r)||s(r))return r;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},351899:(e,t,r)=>{var i=r(310338),n=r(513462);e.exports=function(e){var t=i(e,"string");return n(t)?t:t+""}},128601:(e,t,r)=>{var i={};i[r(762081)("toStringTag")]="z",e.exports="[object z]"===String(i)},993504:(e,t,r)=>{var i=r(233167),n=r(936340),o=i.String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},378802:(e,t,r)=>{var i=r(233167).String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},775563:(e,t,r)=>{var i=r(903057),n=0,o=Math.random(),s=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++n+o,36)}},378271:(e,t,r)=>{var i=r(359640);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},518917:(e,t,r)=>{var i=r(474040),n=r(573012);e.exports=i&&n((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},762081:(e,t,r)=>{var i=r(233167),n=r(683731),o=r(838263),s=r(775563),a=r(359640),l=r(378271),u=n("wks"),c=i.Symbol,d=c&&c.for,h=l?c:c&&c.withoutSetter||s;e.exports=function(e){if(!o(u,e)||!a&&"string"!=typeof u[e]){var t="Symbol."+e;a&&o(c,e)?u[e]=c[e]:u[e]=l&&d?d(t):h(t)}return u[e]}},962685:(e,t,r)=>{"use strict";var i=r(840982),n=r(838263),o=r(881303),s=r(921460),a=r(348946),l=r(38372),u=r(950341),c=r(403822),d=r(675316),h=r(692203),p=r(975546),f=r(895240);e.exports=function(e,t,r,g){var m=g?2:1,v=e.split("."),y=v[v.length-1],b=i.apply(null,v);if(b){var _=b.prototype;if(!f&&n(_,"cause")&&delete _.cause,!r)return b;var w=i("Error"),P=t((function(e,t){var r=c(g?t:e,void 0),i=g?new b(e):new b;return void 0!==r&&o(i,"message",r),p&&o(i,"stack",h(i.stack,2)),this&&s(_,this)&&u(i,this,P),arguments.length>m&&d(i,arguments[m]),i}));if(P.prototype=_,"Error"!==y&&(a?a(P,w):l(P,w,{name:!0})),l(P,b),!f)try{_.name!==y&&o(_,"name",y),_.constructor=P}catch(e){}return P}}},470373:(e,t,r)=>{"use strict";var i=r(145630),n=r(200856),o=r(427830),s=r(847674),a=r(916286);i({target:"Array",proto:!0},{at:function(e){var t=n(this),r=o(t),i=s(e),a=i>=0?i:r+i;return a<0||a>=r?void 0:t[a]}}),a("at")},936963:(e,t,r)=>{var i=r(145630),n=r(233167),o=r(22583),s=r(962685),a=n.WebAssembly,l=7!==Error("e",{cause:7}).cause,u=function(e,t){var r={};r[e]=s(e,t,l),i({global:!0,forced:l},r)},c=function(e,t){if(a&&a[e]){var r={};r[e]=s("WebAssembly."+e,t,l),i({target:"WebAssembly",stat:!0,forced:l},r)}};u("Error",(function(e){return function(t){return o(e,this,arguments)}})),u("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),u("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),u("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),u("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),u("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),u("URIError",(function(e){return function(t){return o(e,this,arguments)}})),c("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),c("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),c("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},19067:(e,t,r)=>{"use strict";var i=r(145630),n=r(903057),o=r(956991),s=r(847674),a=r(993504),l=r(573012),u=n("".charAt);i({target:"String",proto:!0,forced:l((function(){return"\ud842"!=="𠮷".at(-2)}))},{at:function(e){var t=a(o(this)),r=t.length,i=s(e),n=i>=0?i:r+i;return n<0||n>=r?void 0:u(t,n)}})},595249:(e,t,r)=>{"use strict";var i=r(919944),n=r(427830),o=r(847674),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("at",(function(e){var t=s(this),r=n(t),i=o(e),a=i>=0?i:r+i;return a<0||a>=r?void 0:t[a]}))},497814:(e,t,r)=>{"use strict";var i=r(233167),n=r(211254),o=r(919944),s=r(427830),a=r(483578),l=r(200856),u=r(573012),c=i.RangeError,d=i.Int8Array,h=d&&d.prototype,p=h&&h.set,f=o.aTypedArray,g=o.exportTypedArrayMethod,m=!u((function(){var e=new Uint8ClampedArray(2);return n(p,e,{length:1,0:3},1),3!==e[1]})),v=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));g("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=l(e);if(m)return n(p,this,r,t);var i=this.length,o=s(r),u=0;if(o+t>i)throw c("Wrong length");for(;u<o;)this[t+u]=r[u++]}),!m||v)},28227:(e,t,r)=>{"use strict";var i=r(233167),n=r(903057),o=r(573012),s=r(833593),a=r(432031),l=r(919944),u=r(747804),c=r(209254),d=r(162211),h=r(179859),p=i.Array,f=l.aTypedArray,g=l.exportTypedArrayMethod,m=i.Uint16Array,v=m&&n(m.prototype.sort),y=!(!v||o((function(){v(new m(2),null)}))&&o((function(){v(new m(2),{})}))),b=!!v&&!o((function(){if(d)return d<74;if(u)return u<67;if(c)return!0;if(h)return h<602;var e,t,r=new m(516),i=p(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,i[e]=e-2*t+3;for(v(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==i[e])return!0}));g("sort",(function(e){return void 0!==e&&s(e),b?v(this,e):a(f(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!b||y)},635397:(e,t,r)=>{"use strict";var i=r(145630),n=r(840982),o=r(319493),s=r(846850).f,a=r(838263),l=r(814519),u=r(950341),c=r(403822),d=r(363652),h=r(692203),p=r(895240),f="DOMException",g=n("Error"),m=n(f),v=function(){l(this,y);var e=arguments.length,t=c(e<1?void 0:arguments[0]),r=c(e<2?void 0:arguments[1],"Error"),i=new m(t,r),n=g(t);return n.name=f,s(i,"stack",o(1,h(n.stack,1))),u(i,this,v),i},y=v.prototype=m.prototype,b="stack"in g(f),_="stack"in new m(1,2),w=b&&!_;i({global:!0,forced:p||w},{DOMException:w?v:m});var P=n(f),A=P.prototype;if(A.constructor!==P)for(var S in p||s(A,"constructor",o(1,P)),d)if(a(d,S)){var x=d[S],C=x.s;a(P,C)||s(P,C,o(6,x.c))}},869831:(e,t,r)=>{"use strict";e=r.nmd(e);var i=function(e,t){return e<t};function n(e){if(!(this instanceof n))return new n(e);this.array=[],this.size=0,this.compare=e||i}n.prototype.add=function(e){var t,r,i=this.size;for(this.array[this.size]=e,this.size+=1;i>0&&(t=i-1>>1,r=this.array[t],this.compare(e,r));)this.array[i]=r,i=t;this.array[i]=e},n.prototype.heapify=function(e){var t;for(this.array=e,this.size=e.length,t=this.size>>1;t>=0;t--)this._percolateDown(t)},n.prototype._percolateUp=function(e){for(var t,r,i=this.array[e];e>0&&(t=e-1>>1,r=this.array[t],this.compare(i,r));)this.array[e]=r,e=t;this.array[e]=i},n.prototype._percolateDown=function(e){for(var t,r,i,n=this.size,o=this.size>>>1,s=this.array[e];e<o&&(r=1+(t=1+(e<<1)),i=this.array[t],r<n&&this.compare(this.array[r],i)&&(t=r,i=this.array[r]),this.compare(i,s));)this.array[e]=i,e=t;this.array[e]=s},n.prototype.peek=function(){if(0!=this.size)return this.array[0]},n.prototype.poll=function(){if(0!=this.size){var e=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,e}},n.prototype.replaceTop=function(e){if(0!=this.size){var t=this.array[0];return this.array[0]=e,this._percolateDown(0),t}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return 0===this.size},r.c[r.s]===e&&function(){var e=new n((function(e,t){return e<t}));for(e.add(1),e.add(0),e.add(5),e.add(4),e.add(3);!e.isEmpty();)console.log(e.poll())}(),e.exports=n},148178:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i,n=r(48377),o=r(625178),s=r(160813),a=(r(936963),r(972490)),l=r(70726);e=r.hmd(e);const u=a.Z.recordEvent,c=a.Z.recordChange;let d=(0,n.Z)((0,s.Z)("UIComponent"),e,"UIComponent")(i=class extends o.Z{})||i;function h(e,t,r){if(!r.get)throw new Error("@Cache can only be applied on getters.");if("function"==typeof e)throw new Error("@Cache cannot be used with static getters.");if(!(e instanceof l.Z||e instanceof d.__proto__))throw new Error("@Cache can only be used on a Disposable class.");const i="_"+t,n="_binder_"+t,o=function(){if(a.Z.mutator){const e=this[i],r=this[n].get();if(e===r)return;return this[i]=r,void c(this,t,r,e)}c(this,t)},s=r.get;r.get=function(){a.Z.active&&u(this,t);let e=this[n];if(!e){const t=s.bind(this);e=this.link(new a.Z(t,void 0,!0,o.bind(this),void 0,this)),this[n]=e,this[i]=e.previousValue}return e.dirty&&(this[i]=e.get()),this[i]}}},578710:e=>{function t(e,t){for(let r=0,i=this.length;r<i;r++){const i=this[r];if(e.call(t,i,r))return i}}function r(e,r,i){if(e)return(Array.prototype.find||t).call(e,r,i)}r.polyfill=function(){Array.prototype.find||(Array.prototype.find=t)},e.exports=r},536734:e=>{const t=(e,t)=>t.toUpperCase();e.exports=function(e){return e.replace(/-+([^-]?)/g,t)}},592478:(e,t,r)=>{e.exports=r(318449).deepClone},25828:(e,t,r)=>{r(595249),r(497814),r(28227);const i=[Array,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];function n(e){return null==e}"undefined"!=typeof Uint8ClampedArray&&i.push(Uint8ClampedArray),e.exports=function e(t,r){if(t===r)return!0;if(n(t)||n(r))return!1;if(typeof t!=typeof r)return!1;if(t instanceof Date&&r instanceof Date)return t.getTime()===r.getTime();if(t instanceof RegExp&&r instanceof RegExp)return t.toString()===r.toString();if(t instanceof ArrayBuffer&&r instanceof ArrayBuffer)return e(new Uint8Array(t),new Uint8Array(r));if(t instanceof Map&&r instanceof Map||t instanceof Set&&r instanceof Set)return e(Array.from(t),Array.from(r));if(function(e,t){return i.some((r=>e instanceof r&&t instanceof r))}(t,r)){const i=!Array.isArray(t);if(t.length!==r.length)return!1;for(let n=0,o=t.length;n<o;n++)if(i){if(t[n]!==r[n])return!1}else if(!e(t[n],r[n]))return!1;return!0}if("object"==typeof t&&"object"==typeof r){let i=Object.keys(t),n=Object.keys(r);return i.sort(),n.sort(),e(i,n)&&i.every((i=>e(t[i],r[i])))}return!1}},793600:(e,t,r)=>{e.exports=r(850213).defaults},233599:e=>{e.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},280468:e=>{function t(e,r,i){if(r===e);else if(Array.isArray(r)&&Array.isArray(e))for(let n=0,o=r.length;n<o;n++)e[n]=t(e[n],r[n],i);else if("object"==typeof r&&"object"==typeof e)for(let n in r){let o=i&&i(e[n],r[n],n);void 0===o&&(o=t(e[n],r[n],i)),e[n]=o}else void 0===r&&void 0!==e||(e=r);return e}e.exports=function(e){const r=Array.prototype.slice.call(arguments,1);let i;"function"==typeof r[r.length-1]&&(i=r.pop());for(let n=0,o=r.length;n<o;n++)e=t(e,r[n],i);return e}},991576:(e,t,r)=>{e.exports=r(318449).shallowClone},318449:(e,t,r)=>{function i(e,t,r){"object"==typeof t&&(r=t.depth,t=t.circular);var i=[],n=[];return void 0===t&&(t=!0),void 0===r&&(r=1/0),function e(r,o){if(null===r)return null;if(0===o)return r;var s,a,l;if("object"!=typeof r)return r;if(r instanceof Map)s=new Map;else if(r instanceof Set)s=new Set;else if(r instanceof Promise)s=new Promise((function(t,i){r.then((function(r){t(e(r,o-1))}),(function(t){i(e(t,o-1))}))}));else if(Array.isArray(r))s=[];else{if((l=r)instanceof ArrayBuffer||l instanceof Int8Array||l instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)return r.slice(0);r instanceof RegExp?(s=new RegExp(r.source,(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")),r.lastIndex&&(s.lastIndex=r.lastIndex)):r instanceof Date?s=new Date(r.getTime()):r instanceof Error?s=Object.create(r):(a=Object.getPrototypeOf(r),s=Object.create(a))}if(t){var u=i.indexOf(r);if(-1!==u)return n[u];i.push(r),n.push(s)}r instanceof Map&&r.forEach((function(t,r){var i=e(r,o-1),n=e(t,o-1);s.set(i,n)})),r instanceof Set&&r.forEach((function(t){var r=e(t,o-1);s.add(r)}));for(let t in r){var c;a&&(c=Object.getOwnPropertyDescriptor(a,t)),c&&null===c.set||(s[t]=e(r[t],o-1))}if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(let t=0;t<d.length;t++){var h=d[t],p=Object.getOwnPropertyDescriptor(r,h);p&&!p.enumerable||(s[h]=e(r[h],o-1),p.enumerable||Object.defineProperty(s,h,{enumerable:!1}))}}return s}(e,r)}r(595249),r(497814),r(28227),r(936963),e.exports={shallowClone:e=>i(e,!0,1),deepClone:e=>i(e,!0)}},850213:e=>{const t=Object.prototype,r=t.hasOwnProperty;e.exports={defaults:function(e){e=Object(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return n.forEach((i=>{if(null!==i){i=Object(i);for(const n in i){const o=e[n];(void 0===o||o===t[n]&&!r.call(e,n))&&(e[n]=i[n])}}})),e}}},79675:e=>{let t=0;e.exports=function(e){return(e||"")+ ++t}},972490:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var i,n,o=r(468089),s=(r(936963),r(929558)),a=r(270984),l=r(254415),u=r(624338),c=r(70726),d=r(745268),h=r(722292),p=a.Z.filter,f={},g=[],m=!1;const v=function(){};let y=(0,o.Z)({FirstExecutionMarker:f})((n=class e extends c.Z{static pushMutator(t){e.mutatorsStack.push(e.mutator),e.mutator=t}static popMutator(t){e.mutator===t?e.mutator=e.mutatorsStack.pop():console.error("Trying to pop a mutator that is not in the top of the stack")}static run(t,r,i){var n=e.active;e.active=t;var o=i&&i.track;o&&(t.track=i,h.Z.groupStart("Running "+(i.name||"bindings")));try{return r.call(i)}finally{o&&(h.Z.groupEnd("Running "+(i.name||"binder")),t.track=null),e.active=n}}static recordEvent(t,r){var i=e.active;if(i){if(i.track){let e=(0,d.Z)(t)+"-"+(t.constructor?t.constructor.name:"Anonymous");h.Z.log("Recording",e,r)}i.push({obj:t,eventName:r})}}static recordChange(t,r,i,n){s.Z.trigger(t,r);var o=e.mutator;o&&o.record(t,r,i,n)}constructor(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.Z,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;var a;if(super(),this.previousValue=f,this.bindings=[],this.dirty=!!i,this.disposableParent=s,this.valueGetter="function"==typeof(a=t)?a:"object"==typeof a&&"function"==typeof a.get?a.get:v,this.set=function(e){return"object"==typeof e&&"function"==typeof e.set?e.set:v}(t),this.callback=r||v,n&&n instanceof u.Z){var c=n,d=this.apply.bind(this);n=()=>c.push(d,o)}this.invalidate=()=>{if(e.active!==this){if(this.track){var t=new Error;Error.captureStackTrace(t),h.Z.log("change detected",window._signal,t.stack)}n?(this.dirty=!0,n()):this.compute()}},i?this.get():this.compute()}removeBindings(){var e=this.bindings;if(e){for(var t=this.invalidate,r=0,i=e.length;r<i;++r){var n=e[r];n.ref.remove(t),n.dispose&&n.dispose()}this.bindings=null}}dispose(){this.removeBindings(),super.dispose()}update(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r=this.previousValue;if(r===f||r!==e)return this.previousValue=e,t&&this.callback(e),!0}apply(){if(!this.isDisposed&&this.dirty)return this.compute()}_computeInnerValue(){this.dirty=!1,this.removeBindings();var t=this.disposableParent;if(!t||!t.isDisposed){m&&(g=[]),m=!0;var r=g,i=e.run(r,this.valueGetter,this);if(i=p(r,i),m=!1,!r.length)return i;g=[];var n=this.invalidate;for(let e=0,t=r.length;e<t;++e){let t=r[e];t.ref=s.Z.on(t.obj,t.eventName,n)}return this.bindings=r,i}}compute(){var e=this._computeInnerValue();return this.update(e,!0)}get(){var e=this._computeInnerValue();return this.update(e,!1),e}},n.mutatorsStack=[],n.active=null,n.mutator=null,i=n))||i},807834:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i,n=r(590447),o=r(256622),s=r(200164),a=r(972490),l=r(929558);let u=(i=class extends a.Z{update(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{previousValue:r}=this;return r===e?!!this.lengthChanged&&(this.lengthChanged=!1,t&&this.invokeCallback(e),!0):(r===this.FirstExecutionMarker?this.previousValue=e:r&&"object"==typeof r&&l.Z.stopListening(this,r),this.lengthChanged=!1,e&&"object"==typeof e&&l.Z.listenTo(this,e,"change",this.onLengthChanged),t&&this.invokeCallback(e),!0)}onLengthChanged(){this.lengthChanged=!0,this.invalidate()}invokeCallback(e){e instanceof s.Z?this.callback(e.base):this.callback(e)}},(0,n.Z)(i.prototype,"onLengthChanged",[o.Z],Object.getOwnPropertyDescriptor(i.prototype,"onLengthChanged"),i.prototype),i)},270984:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=[r(167032).Z],n=1;const o={add(e){i.push(e),n=i.length},remove(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1),n=i.length},filter(e,t){for(var r=0,o=n;r<o;++r){var s=i[r](e,t);if(s)return s.value}return t}}},200164:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{}},167032:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(233599),n=r.n(i);function o(e,t){if(n()(t)){var r=t._torq_binding;if(r)return r.resolved||e.push({eventName:"update",obj:r}),r}}},929558:(e,t,r)=>{"use strict";r.d(t,{e:()=>i,Z:()=>s});var i="_signals";const n=Symbol("owner"),o=function(e){return null!==e};class s{constructor(e){this[n]=void 0,this[n]=e,this.handlers=[],this.nullHandlers=0}add(e){this.handlers.push(e)}remove(e){var t=this.handlers,r=t.indexOf(e);-1!==r&&(t[r]=null,this.nullHandlers++,this.nullHandlers>t.length/4&&(this.handlers=t.filter(o),this.nullHandlers=0))}trigger(){for(var e=this.handlers.slice(),t=this[n],r=0,i=e.length;r<i;++r){var o=e[r];o&&o.apply(t,arguments)}}triggerNoArgs(){for(var e=this.handlers.slice(),t=this[n],r=0,i=e.length;r<i;++r){var o=e[r];o&&o.call(t)}}triggerWithArray(e){for(var t=this.handlers.slice(),r=this[n],i=0,o=t.length;i<o;++i){var s=t[i];s&&s.apply(r,e)}}static trigger(e,t){var r=e._signals;if(r&&r[n]===e){var i=r[t];if(i)return i.triggerWithArray(Array.prototype.slice.call(arguments,2)),i}}static triggerNoArgs(e,t){var r=e._signals;if(r&&r[n]===e){var i=r[t];if(i)return i.triggerNoArgs(),i}}static on(e,t,r){var o=e._signals;o&&o[n]===e||((o={})[n]=e,Object.defineProperty(e,i,{enumerable:!1,configurable:!1,value:o}));var a=o[t];return a||(a=o[t]=new s(e)),a.handlers.push(r),a}static off(e,t,r){var i=e._signals;if(i&&i[n]===e){var o=i[t];o&&o.remove(r)}}static listenTo(e,t,r,i){var n=e._listening;n||(e._listening=n=[]);var o=function(){i.apply(e,arguments)};n.push({obj:t,name:r,method:i,handler:o}),s.on(t,r,o)}static stopListening(e,t,r,i){var n=e._listening;if(n)for(var o=0,a=n.length;o<a;){var l=n[o];t&&l.obj!==t||r&&l.name!==r||i&&l.method!==i?++o:(s.off(l.obj,l.name,l.handler),n.splice(o,1),--a)}}}},821687:(e,t,r)=>{"use strict";function i(e,t,r){"function"==typeof r.get?r.get=function(){throw new Error(`Abstract getter ${t} called on ${e.constructor.name}`)}:"function"==typeof r.set?r.set=function(){throw new Error(`Abstract setter ${t} called on ${e.constructor.name}`)}:(r.writable=!0,r.value=function(){throw new Error(`Abstract method ${t} called on ${e.constructor.name}`)})}r.d(t,{Z:()=>i}),r(936963)},256622:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n}),r(936963);var i=r(125276);function n(e,t,r){const n=i.Z.getInitialValue(r);if("function"!=typeof n)throw new Error(`@Bind can only be applied to a function. (property: ${t})`);delete r.value,delete r.writable,r.get=function(){if(e===this)return n;const r=n.bind(this);return Object.defineProperty(this,t,{configurable:!0,enumerable:!1,value:r}),r}}},160813:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=r(125276).Z.makeClassDecorator(((e,t,r)=>{if(t&&(e.prototype._xrayClassName=t),r){const t=e.prototype.events;Object.assign(e.prototype,r),r.events&&t&&(e.prototype.events=t.concat(r.events))}}))},125276:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r(936963);class i{static _isDirectClassInvocation(e){return 1===e.length&&"function"==typeof e[0]}static _isDirectPropertyInvocation(e){return 3===e.length&&e[2]&&Object.prototype.hasOwnProperty.call(e[2],"configurable")}static wrapPropertyDecorator(e,t,r){const n=i.getInitialValue(r);return delete r.value,delete r.writable,r.get=function(){if(e===this)return n;const r=i.makePropertyDecorator(n.bind(this));return Object.defineProperty(this,t,{configurable:!0,enumerable:!1,value:r}),r},r}static makePropertyDecorator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(i._isDirectPropertyInvocation(n))return e.apply(this,n);if(t.throwOnClassInvocation&&i._isDirectClassInvocation(n))throw new Error(t.throwOnClassInvocation);return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.apply(this,r.concat(n))}}}static makeClassDecorator(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i._isDirectClassInvocation(r)?e.apply(this,r):function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(this,i.concat(r))}}}static getInitialValue(e){return e.initializer?e.initializer():e.value}}},48377:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(929558),n=r(143037);function o(e){this.name=e,this.signal=new i.Z}function s(e,t,r){return function(i){var s=e(i)||i,a=t.hot;if(a){var l="component"+r,u=a.data&&a.data[l];a.accept(),a.dispose((e=>e[l]=u)),u?(u.instance=s,n.Z.push((()=>u.signal.triggerNoArgs()))):u=new o(r),s.hotReloader=u}return s}}},175476:(e,t,r)=>{"use strict";function i(e,t,r){var i="_"+t,n=r.get;if(!n)throw new Error("@Memoize can only be applied on getters.");r.get=function(){if(Object.prototype.hasOwnProperty.call(this,i))return this[i];var e=n.call(this);return this[i]=e,Object.defineProperty(this,t,{configurable:!0,value:e}),e}}r.d(t,{Z:()=>i}),r(936963)},741712:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(972490);const n=i.Z.recordEvent,o=i.Z.recordChange,s={defaultValue:!0};function a(e,t,r){const a="_"+t,l=r.initializer;if(l)Object.defineProperty(e,a,{configurable:!0,enumerable:!1,writable:!0,value:s});else if(e[a]===s)return{configurable:!0,enumerable:!1,get(){return delete e[t],this[t]},set(r){delete e[t],this[t]=r}};var u=e.definedObservables;return Object.prototype.hasOwnProperty.call(e,"definedObservables")||(u=u?Object.assign({},u):{},Object.defineProperty(e,"definedObservables",{configurable:!0,enumerable:!1,writable:!0,value:u})),u[t]=!0,{configurable:!0,enumerable:!1,get(){i.Z.active&&n(this,t);var e=this[a];return e===s&&(e=this[a]=l.call(this)),e},set(e){var r=this[a];r===s&&(r=this[a]=l.call(this)),r!==e&&(this[a]=e,o(this,t,e,r))}}}},468089:(e,t,r)=>{"use strict";function i(e){return function(t){e&&Object.assign(t.prototype,e)}}r.d(t,{Z:()=>i})},232959:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(254415),n=r(125276);const o=n.Z.makePropertyDecorator(((e,t,r,o,s)=>{"number"==typeof o?(s=o,o=i.Z):(o||(o=i.Z),"number"!=typeof s&&(s=0));let a=n.Z.getInitialValue(r),l="_task_"+t;delete r.value,delete r.writable,r.get=function(){if(e===this)return a;let r,i=this[l];if(i)return i;let n=()=>{this.isDisposed||a.apply(this,r)};return i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r=t,o.push(n,s)},i.cancel=()=>{o.remove(n)},Object.defineProperty(this,l,{value:i,enumerable:!1}),Object.defineProperty(this,t,{value:i,enumerable:!1}),i}}))},625178:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_}),r(936963);var i=r(536734),n=r.n(i);const o=/^(?:(.+?):)?(on-)?(.*)$/,s=function(){};class a{constructor(e,t){this.isEvent=t,this.configurable=!0,this.enumerable=!1,e.get?(this.get=e.get,this.set=e.set||s):this.value=e.value;const r=o.exec(e.original||e.name||"");this.namespace=r[1],this.name=r[3],this.normalizedName=a.normalizeName(r[3]),this.isEvent=this.isEvent||!!r[2]}static normalizeName(e){return n()(e)}isValid(){return!!this.name}toChildAttribute(e,t){let r=t&&this.namespace?this.namespace+":":"";return this.isEvent?{name:r+"on-"+this.name,value:this.value.bind(e)}:this.get?{name:r+this.name,get:this.get.bind(e),set:this.set.bind(e)}:{name:r+this.name,value:this.value}}matchesNamespace(e){return!e||e===this.namespace}static forEachSpread(e,t,r){for(let i of t){const t=i(e);if(t instanceof Array)for(let e of t){const t=new a(e);t.isValid()&&r(t)}else if("object"==typeof t)for(let e in t){let i=t[e];if(Object.prototype.hasOwnProperty.call(t,e)){let t;i&&(Object.prototype.hasOwnProperty.call(i,"value")||Object.prototype.hasOwnProperty.call(i,"get"))?(i.name=e,t=i):t={name:e,value:i};const n=new a(t);n.isValid()&&r(n)}}}}}var l=r(282684),u=r(781255),c=r(722292),d=r(79675),h=r.n(d),p=null,f={};const g=Symbol("addToChildAttributes"),m=Symbol("shouldPropagateChildAttribute"),v=Symbol("attachSpreads"),y=Symbol("getChildTemplate"),b=Symbol("renderChildTemplate");class _ extends u.Z{constructor(){if(super(),p){var{scope:e,factory:t,data:r,spreads:i}=p;r.$_component=this,this.scope=e,this.$_depth=t.depth,this.$_factory=t,this.$_view=r,i&&this[v](i)}}attached(){}detached(){}[y](e){if(this.childrenBlocks)return this.childrenBlocks[e]||this.childrenBlocks[e.replace(/:/g,"_")]}[b](e,t){let r={template:e,$_parent:this.$_view};return t&&(r.$_injectScope=e=>{for(var r=0,i=t.length;r<i;++r)e[`v${r}`]=t[r]}),r}renderChildren(e,t){if(e=e||"children",!t&&e instanceof Array&&(t=e,e="children"),t&&!(t instanceof Array))throw new Error("args parameter to renderChildren() must be an array");let r=this[y](e);return r?this[b](r,t):null}hasChildren(e){return e=e||"children",void 0!==this[y](e)}get children(){return this.renderChildren()}[m](e){if(e.isEvent){if(this.events&&(this.events.indexOf(e.name)>-1||this.events.indexOf(e.normalizedName)>-1))return!1}else if(this.definedAttributes&&this.definedAttributes[e.normalizedName])return!1;return!0}[g](e,t,r){t.matchesNamespace(r)&&this[m](t)&&e.push(t.toChildAttribute(this,!r))}undeclaredAttributes(e){const t=[];if(this.sourceAttributes)for(let r of this.sourceAttributes)this[g](t,new a(r),e);if(this.spreadAttributes&&a.forEachSpread(this.$_view,this.spreadAttributes,(r=>{this[g](t,r,e)})),this.eventAttributes)for(let r of this.eventAttributes)this[g](t,new a(r,!0),e);return t}static attachAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return t;for(var i=0,n=e.length;i<n;++i){const n=new a(e[i]),o=n.normalizedName,s=t.definedAttributes&&t.definedAttributes[o];if(!s){const e=o in t;if(t.definedObservables&&t.definedObservables[o])console.warn(`WARNING: The JSX attribute "${o}" was passed to a component declaring an @Observable of the same name. The JSX attribute will be ignored in a future Torq release. Use the @Attribute decorator to declare JSX attributes.`);else{if(e){console.warn(`ERROR: The JSX attribute "${o}" was passed to a component declaring a property of the same name. Ignoring the JSX attribute.`);continue}if(r)continue}}Object.defineProperty(t,s||o,n)}return t}[v](e){const t=this.events,r=this.definedAttributes;(r||t)&&a.forEachSpread(this.$_view,e,(e=>{const i=e.name,n=e.normalizedName,o=r&&r[n];o?Object.defineProperty(this,o,e):e.isEvent&&t&&t.indexOf(i)>-1&&!e.namespace&&e.value&&this.on(i,e.value)}))}static getBlockTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children";if(e)for(var r=0,i=e.length;r<i;++r){var n=e[r];if(n.name===t)return n.template}}static attachBlockTemplates(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e)for(var r=0,i=e.length;r<i;++r){var n=e[r];t[n.name]=n.template}return t}static make(e){var t,r,i,n,o,s,u,d,h,g,{attributes:m,spreads:v,blocks:y,init:b,events:w}=e||{};C(this);var P,A,S,x=l.ZP.make({render:function(e,t){var s=p;p=f||{},f=null,p.scope=i?e.scope.fork():e.scope,p.data=t,p.factory=e,p.spreads=v,p.definedAttributes=h;var a=new r;p.scope=null,p.data=null,f=p,p=s,b&&b(t,a),d&&O(a);var u,c=e.pushScope(a.scope),{parentNode:g,nextNode:m}=e,y=n&&n.call(a);y&&y.template?((u=y.template.make(e)).$_parent=t,u.$_scope=y):u=l.ZP.EmptyTemplate.make(e),e.parentNode=g,e.nextNode=m,t.$_view=u,u.template.run(e,u),e.restoreScope(c),o&&o.call(a),P&&(t.$_hotReloadFactory=e,t.$_hotReloadScope=e.scope,t.$_hotReloadNext=A,A&&(A.$_hotReloadPrevious=t),A=t)},reuse:k,dispose:E,move:function(e,t){var r=t.$_view;r.template.move(e,r)},firstChild:function(e,t){var r=t.$_view;return r.template.firstChild(e,r)},lastChild:function(e,t){var r=t.$_view;return r.template.lastChild(e,r)}});return(P=t.hotReloader)&&(S=new Set,P.signal.add((()=>{c.Z.log("[HMR] Patching component",P.name);let e=0;for(let t=A;t;t=t.$_hotReloadNext)++e,E(t.$_hotReloadFactory,t,!0);c.Z.log("[HMR] Disposed ",e," instances of ",P.name),C(P.instance),S.forEach((e=>x.releaseCache(e))),e=0;for(let t=A;t;t=t.$_hotReloadNext){++e;let r=t.$_hotReloadFactory,i=r.pushScope(t.$_hotReloadScope);k(r,t,!0),r.restoreScope(i)}c.Z.log("[HMR] Updated ",e," instances of ",P.name)}))),x;function C(e){if(t=e,r=class extends t{},_.attachAttributes(m,r.prototype,!0),r.prototype.childrenBlocks=_.attachBlockTemplates(y),r.prototype.sourceAttributes=m,r.prototype.spreadAttributes=v,r.prototype.eventAttributes=w,i=r.prototype.fork,n=r.prototype.render,o=r.prototype.attached,s=r.prototype.detached,o===_.prototype.attached&&(o=null),s===_.prototype.detached&&(s=null),u=r.prototype.dispose,h=r.prototype.definedAttributes,(g=r.prototype.events)&&w){d=[];for(let e=0,t=w.length;e<t;++e){const t=w[e];if(g.indexOf(t.name)>-1)d.push(t);else{var l=a.normalizeName(t.name);g.indexOf(l)>-1&&(t.name=l,d.push(t))}}}}function O(e){for(var t=0,r=d.length;t<r;++t){var i=d[t];e.on(i.name,i.value)}}function k(e,t,s){var a=p;p=f||{},f=null,p.scope=i?e.scope.fork():e.scope,p.data=t,p.factory=e,p.spreads=v,p.definedAttributes=h;var u=new r;p.scope=null,p.data=null,f=p,p=a,b&&b(t,u),d&&O(u);var c=e.pushScope(u.scope);e.gotoAfterView(t.$_view),t.$_view.template.cache(e,t.$_view);var g,{parentNode:m,nextNode:y}=e,_=n&&n.call(u);_&&_.template?((g=_.template.make(e)).$_parent=t,g.$_scope=_):g=l.ZP.EmptyTemplate.make(e),e.parentNode=m,e.nextNode=y,t.$_view=g,g.template.run(e,g),e.restoreScope(c),o&&o.call(u),!s&&P&&(t.$_hotReloadFactory=e,t.$_hotReloadScope=e.scope,t.$_hotReloadNext=A,A&&(A.$_hotReloadPrevious=t),A=t)}function E(e,t,r){var i=t.$_component;!r&&P&&(t.$_hotReloadFactory=e,A===t&&(A=t.$_hotReloadNext),t.$_hotReloadNext&&(t.$_hotReloadNext.$_hotReloadPrevious=t.$_hotReloadPrevious),t.$_hotReloadPrevious&&(t.$_hotReloadPrevious.$_hotReloadNext=t.$_hotReloadNext),t.$_hotReloadScope=null,t.$_hotReloadNext=null,t.$_hotReloadPrevious=null,t.$_hotReloadFactory=null,S.add(e)),s&&s.call(i);var n=t.$_view;n.template.dispose(e,n),d&&function(e){for(var t=0,r=d.length;t<r;++t){var i=d[t];e.off(i.name,i.value)}}(i),b&&b(t,null),u&&u.call(i),n.$_parent=null,n.$_scope=null,n.$_factory=null,i.scope=null,i.$_view=null,t.$_component=null}}static makeDynamic(e){var t=h()("_dynamicTemplate");return{make(r,i){if(!i)return l.ZP.EmptyTemplate;var n=i[t];return n&&n.$_base===i||((n=i[t]=r.makeComponent(i,e)).$_base=i),n}}}}},282684:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>a}),r(936963);var i=r(793600),n=r.n(i);const o={render(){},init(){},dispose(){},move(){},reuse(){}};var s=0;class a{static make(e){if(!e.firstChild)return console.warn("Template didn't provide a first child method, so we cannot use it. Switching to EmptyTemplate.",e),a.EmptyTemplate;e.lastChild||(e.lastChild=e.firstChild);var t=++s;const r=!1!==e.cache;var i=n()(e,o),{render:l,init:u,dispose:c,move:d,reuse:h,prepare:p}=i,f={};return i.render=function(e,t){++e.depth,l(e,t),u(e,t),--e.depth},i.dispose=function(e,t){if(t.$_disposed)throw new Error("Invalid dispose on disposed template.");var{parentNode:r,nextNode:i}=e;c(e,t),t.$_disposed=!0,e.parentNode=r,e.nextNode=i},i.reuse=function(e,t){if(!t.$_disposed)throw new Error("Invalid reuse on live template.");t.$_disposed=!1;var{parentNode:r,nextNode:i}=e;++e.depth,h(e,t),u(e,t),--e.depth,e.parentNode=r,e.nextNode=i},i.cache=function(e,i){var n=e.parentNode,o=e.nextNode;i.$_disposed||(i.$_disposed=!0,c(e,i)),i.$_cache||(e.parentNode=i.$_cache=e.makeFragment(),e.nextNode=null,d(e,i),r&&e.templates.put(t,i)),e.parentNode=n,e.nextNode=o},i.run=function(e,t){if(!t.$_cache)return++e.depth,l(e,t),u(e,t),void--e.depth;e.pushNode(t.$_cache),t.$_cache=null,t.$_disposed=!1;var{parentNode:r,nextNode:i}=e;++e.depth,h(e,t),u(e,t),--e.depth,e.parentNode=r,e.nextNode=i},i.make=function(e){if(f[e.id]||(p&&p(e),f[e.id]=!0,r&&e.templates.init(t)),r){var n=e.templates.take(t);if(n)return n}return{template:i,$_cache:null,$_disposed:!1}},i.releaseCache=function(e){e.templates.removeAll(t)},i}}a.EmptyTemplate=a.make({render(e,t){t.comment=e.pushCommentNode("empty template")},move(e,t){e.pushNode(t.comment)},firstChild:(e,t)=>t.comment})},254415:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(706544),n=r(143037);const o=new i.Z(n.Z,"UI Task Queue",100)},369628:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(908611);class n{constructor(){this.promise=new i.Z(((e,t)=>this._deferredApi={resolve:e,reject:t}))}resolve(e){this._deferredApi.resolve(e)}reject(e){this._deferredApi.reject(e)}}},70726:(e,t,r)=>{"use strict";function i(e){e.dispose?e.dispose():"function"==typeof e&&e()}r.d(t,{Z:()=>n});class n{link(e){var t=this._disposables;return t||(t=this._disposables=[]),t.push(e),e}unlink(e){var t=this._disposables;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}}disposeLink(e){this.unlink(e),i(e)}dispose(){this.isDisposed=!0;var e=this._disposables;if(e){this._disposables=null;for(var t=e.length-1;t>=0;--t)i(e[t])}}}},143653:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=window},722292:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static log(){console.log.apply(console,arguments)}static assert(){console.assert.apply(console,arguments)}static table(){console.table.apply(console,arguments)}static groupStart(){console.group.apply(console,arguments)}static groupEnd(){console.groupEnd.apply(console,arguments)}}},706544:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i,n=r(590447),o=r(256622),s=r(624338);let a=(i=class extends s.Z{constructor(e,t,r){super(),this.parent=e,this.name=t,this.priority=r}enqueue(){this.parent.push(this.run,this.priority)}register(e){e?this.parent.after.push(this.enqueue):this.enqueue()}},(0,n.Z)(i.prototype,"enqueue",[o.Z],Object.getOwnPropertyDescriptor(i.prototype,"enqueue"),i.prototype),i)},745268:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=0,n="__object_id__";function o(e){if(!e||"number"==typeof e||"string"==typeof e)return e;if(!Object.prototype.hasOwnProperty.call(e,n)){var t="_"+ ++i;return Object.defineProperty(e,n,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}return e[n]}o.set=function(e,t){Object.defineProperty(e,n,{enumerable:!1,configurable:!1,writable:!1,value:t})};const s=o},908611:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(929558);class n extends Promise{constructor(e){var t={resolved:!1,value:void 0};t.obj=t,super(((r,n)=>{const o=e=>{t.resolved=!0,t.value=e,i.Z.trigger(t,"update")};e((e=>{o(e),r(e)}),(e=>{o(null),n(e)}))})),this._torq_binding=t}}},522810:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s}),r(936963);var i=r(929558),n=r(972490),o=r(200164);class s extends o.Z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;super(),this._swapItems(e)}_swapItems(e){if(e instanceof Set)this.base=e;else{if("function"!=typeof e[Symbol.iterator])throw new Error("ObservableSet expects either a Set object or an iterable object.");this.base=new Set(e)}}swapItems(e){this._swapItems(e),i.Z.trigger(this,"change")}get size(){return n.Z.active&&n.Z.recordEvent(this,"change"),this.base.size}get length(){return this.size}[Symbol.iterator](){return this.base.values()}}var a=Set.prototype,l=s.prototype,u=["add","clear","delete"];function c(e,t){return t?function(){var t=e.apply(this.base,arguments);return i.Z.trigger(this,"change"),t}:function(){return n.Z.active&&n.Z.recordEvent(this,"change"),e.apply(this.base,arguments)}}for(var d=Object.getOwnPropertyNames(a),h=0,p=d.length;h<p;++h){var f=d[h];Object.prototype.hasOwnProperty.call(l,f)||(l[f]=c(a[f],-1!==u.indexOf(f)))}},781255:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(70726),n=r(929558),o=r(972490),s=r(807834),a=r(254415);const l=function(){};class u extends i.Z{watch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.Z,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new o.Z(e,t,r,i,n,this))}watchCollection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.Z,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new s.Z(e,t,r,i,n,this))}multiWatch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.Z,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new o.Z((()=>e.map((e=>e()))),(e=>t.apply(null,e)),r,i,n,this))}defineObservable(e,t){if(Object.prototype.hasOwnProperty.call(this,e))this[e]=t;else{var r="_"+e;this[r]=t;var i=this;Object.defineProperty(this,e,{configurable:!0,enumerable:!1,get:()=>(o.Z.active&&o.Z.recordEvent(i,e),i[r]),set(t){var n=i[r];n!==t&&(i[r]=t,o.Z.recordChange(i,e,t,n))}})}}dispose(){this.stopListening(),super.dispose()}trigger(e){if(Object.prototype.hasOwnProperty.call(this,n.e)){var t=this[n.e][e];if(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t.trigger.apply(t,i)}}}on(e,t){return n.Z.on(this,e,t)}off(e,t){return n.Z.off(this,e,t)}listenTo(e,t,r){return n.Z.listenTo(this,e,t,r)}stopListening(e,t,r){return n.Z.stopListening(this,e,t,r)}}},624338:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i,n=r(590447),o=r(256622),s=r(821687),a=r(745268);let l=(i=class{constructor(){this.running=!1,this.registered=!1,this.itemMap={},this.maxBucket=-1,this.buckets=[],this.bucketMap={}}register(){}push(e,t,r){var i=(0,a.Z)(e);t=Number(t)||0;var n=this.itemMap[i];if(n){if(n.lateBinder=r,n.cancel=!1,n.priority!==t){var o=n.bucket.items,s=o.indexOf(n);o[s]=null,n.priority=t}else if(!n.executed)return;n.executed=!1}else n={callback:e,priority:t,cancel:!1,executed:!1,lateBinder:r},this.itemMap[i]=n;var l=this.bucketMap[t]||this._makeBucket(t);this.maxBucket=Math.max(this.maxBucket,l.index),n.bucket=l,l.items.push(n),this.registerIfNeeded()}_makeBucket(e){for(var t=this.buckets,r=0,i=t.length-1;r<=i;){var n=Math.round((r+i)/2);t[n].priority<e?i=n-1:r=n+1}var o=this.bucketMap[e]={priority:e,items:[],index:r};this.buckets.splice(r,0,o),r<=this.maxBucket&&++this.maxBucket;for(var s=t.length;r<s;++r)t[r].index=r;return o}wrap(e,t,r){return()=>this.push(e,t||0,r)}registerIfNeeded(){this.registered||(this.registered=!0,this.register(this.inAfterCall))}get after(){var e=this._after;return e||(e=this._after=new u(this)),e}remove(e){var t=(0,a.Z)(e),r=this.itemMap[t];r&&(r.executed=!1,r.cancel=!0)}execHoisted(e){for(;e.length;){var t=e.pop();t.cancel||(t.executed=!0,t.callback())}}execCallbacks(e){for(var t=this.buckets;this.maxBucket>=0;){var r=t[this.maxBucket].items;if(r.length){var i=r.pop();i&&!i.cancel&&(i.lateBinder?e?e.push(i):e=[i]:(i.executed=!0,i.callback()))}else--this.maxBucket}return e}run(){if(this.maxBucket>=0){this.running=!0;for(var e=null;this.maxBucket>=0||e;)try{for(;this.maxBucket>=0||e;)(e=this.execCallbacks(e))&&(this.execHoisted(e),e=null)}catch(e){console.error(e),console.error(e.stack)}this.running=!1}this.itemMap={},this.registered=!1;var t=this._after;t&&(this.inAfterCall=!0,t.run(),this.inAfterCall=!1)}quickRun(){if(this.maxBucket>=0){this.running=!0;for(var e=null;this.maxBucket>=0||e;)(e=this.execCallbacks(e))&&(this.execHoisted(e),e=null);this.running=!1}this.itemMap={},this.registered=!1;var t=this._after;t&&(this.inAfterCall=!0,t.run(),this.inAfterCall=!1)}},(0,n.Z)(i.prototype,"register",[s.Z],Object.getOwnPropertyDescriptor(i.prototype,"register"),i.prototype),(0,n.Z)(i.prototype,"run",[o.Z],Object.getOwnPropertyDescriptor(i.prototype,"run"),i.prototype),(0,n.Z)(i.prototype,"quickRun",[o.Z],Object.getOwnPropertyDescriptor(i.prototype,"quickRun"),i.prototype),i);class u extends l{constructor(e){super(),this.parent=e}register(){this.parent.registerIfNeeded()}}},16344:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(143653);const n=i.Z.performance&&i.Z.performance.now?()=>performance.now():Date.now?()=>Date.now():()=>(new Date).getTime()},143037:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i,n=r(590447),o=r(256622),s=r(624338),a=r(143653),l=r(16344),u=function(e){setTimeout(e,0)},c=a.Z.requestAnimationFrame||a.Z.webkitRequestAnimationFrame||a.Z.mozRequestAnimationFrame||u,d=c;const h=new(i=class extends s.Z{constructor(){super(...arguments),this.tickTime=(0,l.Z)()}get background(){return d===u}set background(e){d=e?u:c}register(){d.call(a.Z,this.run)}request(e){d.call(a.Z,e)}wrapAll(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach((t=>e[t]=this.wrap(e[t].bind(e))))}wrap(e){return()=>this.push(e)}tick(){(0,l.Z)()-this.tickTime>=5&&this.run()}run(){this.tickTime=(0,l.Z)(),super.run.call(this)}},(0,n.Z)(i.prototype,"run",[o.Z],Object.getOwnPropertyDescriptor(i.prototype,"run"),i.prototype),i)},715560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b,zt:()=>y});var i=r(301254),n=r(590447),o=r(955528),s=r(175476),a=r(741712),l=r(956508),u=r(972490),c=r(781255),d=r(369628);let h;if(window.ZString){var p,f,g,m;const e=window.ZString;e._callbacks||(e._callbacks=[],e._locale=e.locale,e._translations=e.translations,Object.defineProperty(e,"locale",{configurable:!0,enumerable:!0,get:()=>e._locale,set(t){if(t!==e._locale){e._locale=t;for(const r of e._callbacks)r.locale(t)}}}),Object.defineProperty(e,"translations",{configurable:!0,enumerable:!0,get:()=>e._translations,set(t){if(t!==e._translations){e._translations=t;for(const r of e._callbacks)r.translations(t)}}}));let t=(0,o.Z)({prototype:e})(p=class extends c.Z{})||p;f=class extends t{get locale(){return this._locale}set locale(t){e.locale=t}get translations(){return this._translations}set translations(t){e.translations=t}translate(){return u.Z.recordEvent(this,"_translations"),u.Z.recordEvent(this,"_locale"),super.translate(...arguments)}constructor(){super(),(0,i.Z)(this,"_locale",g,this),(0,i.Z)(this,"_translations",m,this),this._readyDeferred=new d.Z,this._isReady=!1,this.watch((()=>this.locale),(e=>{null==e||this._isReady||(this._isReady=!0,this._readyDeferred.resolve())})),e._callbacks.push({locale:e=>{this._locale=e},translations:e=>{this._translations=e}})}get readyJP(){return this._readyDeferred.promise}get language_display_name(){return this.locale_hash[this.locale]}get locale_hash(){const e={};for(const t of l.supported){const r=l.display_names[t];r&&(e[t]=r)}return e}},g=(0,n.Z)(f.prototype,"_locale",[a.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.locale}}),m=(0,n.Z)(f.prototype,"_translations",[a.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.translations}}),(0,n.Z)(f.prototype,"locale_hash",[s.Z],Object.getOwnPropertyDescriptor(f.prototype,"locale_hash"),f.prototype),h=f}else h=r(710799).Z;const v=new h;for(let[e,t]of Object.entries(l.urls))Object.defineProperty(v,e,{get(){const{locale:r}=this,i=l.adobecom_language_codes[r],n=i?`${i}/`:"",o=(5===r.length?r.split("-",2)[1]:r).toLowerCase();if("string"!=typeof t)if(t.locales)t=t.locales[r]||t.locales.default;else if(t.hostnames)t=t.hostnames[window.location.hostname]||t.hostnames.default;else{if(!t.environments||"undefined"==typeof env)throw e;t=t.environments[env]||t.environments.default}return t.replace("${adobecom_country_fragment}",n).replace("${locale}",r).replace("${country_code_downcase}",o)}});const y=v.translate.bind(v),b=v},595734:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const i={app:!0,shareType:null};window.siteCheck=()=>{console.log("Entry.app",i.app),console.log("Entry.embed",i.embed),console.log("Entry.site",i.site),console.log("Entry.sdk",i.sdk),console.log("Entry.shareType",i.shareType)};const n=i},396842:(e,t,r)=>{"use strict";var i=r(595734);delete i.default.app,i.default.sdk=!0},565777:(e,t,r)=>{"use strict";var i=r(590447),n=r(196731),o=r(125276);const s=o.Z.makePropertyDecorator(((e,t,r,i)=>{n.Z.is_enabled(i)&&Object.defineProperty(e,t,r)}));r(470373),r(19067),r(936963),r(396842);var a,l,u,c,d,h=r(745651),p=(r(595249),r(497814),r(28227),r(781255)),f=r(772280),g=r(590200);n.Z.is_enabled("debug")?(c=new f.Z,u={},d={usedLrMobile:{enabled:!1,value:!1},usedLrDesktop:{enabled:!1,value:!1},accountStatus:{enabled:!1,value:"trial"},debugDialogTab:"Account"},window.Debug=a={enabled:!0,overrides:c.get("debug_overrides")||g.Z.extend(!0,{},d),saveOverrides:function(){var e;return(e=new Date).setFullYear(e.getFullYear()+1),c.set("debug_overrides",JSON.stringify(a.overrides),{path:"/",expires:e})},clearOverrides:function(){return a.overrides=g.Z.extend(!0,{},d),c.remove("debug_overrides",{path:"/"})}},a.overrides=g.Z.extend(!0,{},d,a.overrides),window.DebugManager=l={set:function(e,t,r){return u[e]=t,a[e]=r},remove:function(e){return delete a[e],delete u[e]}},l.set("help","list available commands",(function(){var e,t,r;for(t in r="",u)e=u[t],r+=`\n${t}:${Array(15-t.length).join(" ")}${e}`;return r}))):(window.Debug=a={},window.DebugManager=l={set:function(){},remove:function(){}});const m={shouldOverrideLrDesktopUsage:function(){return n.Z.is_enabled("debug")&&a.overrides.usedLrDesktop.enabled},getLrDesktopUsageOverride:function(){return a.overrides.usedLrDesktop.value},setLrDesktopUsageOverride:function(e,t){return a.overrides.usedLrDesktop.enabled=e,a.overrides.usedLrDesktop.value=t},shouldOverrideLrMobileUsage:function(){return n.Z.is_enabled("debug")&&a.overrides.usedLrMobile.enabled},getLrMobileUsageOverride:function(){return a.overrides.usedLrMobile.value},setLrMobileUsageOverride:function(e,t){return a.overrides.usedLrMobile.enabled=e,a.overrides.usedLrMobile.value=t},getDebugDialogTab:function(){return a.overrides.debugDialogTab},setDebugDialogTab:function(e){return a.overrides.debugDialogTab=e},doRandomFailure:function(e,t){var r;return!(null!=(r=n.Z.is_enabled("debug_random_failures")&&Math.random()<t)&&!r||(console.log(`Randomly failing ${e}`),0))},setDoFailureFeedDashboard:function(e){return a.overrides.failFeedDashboard=e},getDoFailureFeedDashboard:function(){return a.overrides.failFeedDashboard}};var v,y=r(715560),b=r(637598),_=r(760298);v={app:null,appController:null,keyboardController:null,scrollableDocument:!1},_.q.enabled&&(_.q.AppGlobals=v),a.enabled&&(a.AppGlobals=v);var w=r(666222),P=r(301254);function A(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return function(r,n,s){const a=o.Z.getInitialValue(s),l=n+"__Safari_workaround";if(t){const e=n+t;Object.defineProperty(r,e,{value:a})}delete s.value,delete s.writable,s.get=function(){if(r===this)return a;let t=this[l];if(t)return t;t=e(a,...i);const o={value:t,enumerable:!1,configurable:!0};return Object.defineProperty(this,n,o),Object.defineProperty(this,l,o),t}}}function S(e,t,r){let i,n,o,s,a,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){const r=i,o=n;return i=n=void 0,u=t,s=e.apply(o,r),s}function f(e){return u=e,a=setTimeout(m,t),c?p(e):s}function g(e){const r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=o}function m(){const e=Date.now();if(g(e))return v(e);a=setTimeout(m,function(e){const r=e-u,i=t-(e-l);return d?Math.min(i,o-r):i}(e))}function v(e){return a=void 0,h&&i?p(e):(i=n=void 0,s)}function y(){const e=Date.now(),r=g(e);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];if(i=u,n=this,l=e,r){if(void 0===a)return f(l);if(d)return a=setTimeout(m,t),p(l)}return void 0===a&&(a=setTimeout(m,t)),s}return t=+t||0,"object"==typeof r&&(c=!!r.leading,d="maxWait"in r,o=d?Math.max(+r.maxWait||0,t):o,h="trailing"in r?!!r.trailing:h),y.cancel=function(){void 0!==a&&clearTimeout(a),u=0,i=l=n=a=void 0},y.flush=function(){return void 0===a?s:v(Date.now())},y}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return A(S,"Now",e,t)}var C,O,k,E,I,T=r(741712),D=r(928160),R=r(555399);let j=null,Z=null,F=[],N=(C=class{constructor(e){(0,P.Z)(this,"serviceDown",O,this),(0,P.Z)(this,"statusCheckHref",k,this),this.statusCheckHref=e,this.polling=!1,this.downCycleCount=0}},O=(0,i.Z)(C.prototype,"serviceDown",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=(0,i.Z)(C.prototype,"statusCheckHref",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C);F={oz:new N(`${R.Z.hostOverride}/v2/version`)},R.Z.watch((e=>{F.oz.statusCheckHref=`${e.hostOverride}/v2/version`}));const L=()=>{var e;return null===(e=Z)||void 0===e?void 0:e.networkStatusChanged()};let M=!navigator.onLine;const U=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];null!=F[e]&&F[e].serviceDown!==t&&(F[e].serviceDown=t,r&&L())};window.addEventListener("DOMContentLoaded",(()=>{D.Z.mobile||(window.addEventListener("offline",(()=>{M||(M=!0,L())})),window.addEventListener("online",(()=>{if(M){M=!1;for(const e in F)"oz"!==e&&U(e,!1);Z.checkService("oz"),L()}})))}));let $=(E=x(5e3),I=class extends p.Z{constructor(){super(),this._requestsActive=!1,this.setRequestsActive(!0)}makingRequest(){this.setRequestsActive(!0),this._waitForIdle()}_waitForIdle(){this.setRequestsActive(!1)}setRequestsActive(e){this._requestsActive&&!e?(n.Z.is_enabled("debug")&&console.log("[[ Service Requests Idle ]]"),this.trigger("requests-idle")):!this._requestsActive&&e&&(n.Z.is_enabled("debug")&&console.log("[[ Service Requests Active ]]"),this.trigger("requests-active")),this._requestsActive=e}registerApp(e){j=e}isServiceUnreliable(e){return this.isServiceDown(e)||this.isPollingService(e)}isServiceDown(e){return!!M||"base"!==e&&(null!=F[e]?F[e].serviceDown:((n.Z.is_enabled("debug")||n.Z.is_enabled("automation"))&&alert(`Tried to get status for unknown service [${e}]`),!1))}debugSetServiceDown(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];F[e].serviceDown=t,L()}isNetworkDown(){return M}isPollingService(e){return!0===F[e].polling}reset(){for(const e of Object.values(F))e.polling=!1,e.serviceDown=!1}checkService(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("base"===e)return;const r=F[e];t?r.downCycleCount=0:r.serviceDown||r.downCycleCount++,r.downCycleCount>=3?r.polling||r.serviceDown||(r.serviceDown=!0,L()):function(e){if(!M&&null!=F[e]&&!F[e].polling){F[e].polling=!0;let r=0;var t=()=>{(e=>new Promise(((t,r)=>{const i=F[e],n=i.statusCheckHref,o=new XMLHttpRequest;o.onload=function(){!1===i.polling&&!1===i.serviceDown||(i.polling=!1,U(e,!1,!1),L(),t())},o.onerror=function(){U(e,!0),r()},o.open("GET",n),o.setRequestHeader("X-LrWeb-Check","status"),o.send()})))(e).catch((()=>{if(M)return F[e].polling=!1,void L();10==++r?(F[e].polling=!1,L()):setTimeout((()=>{t()}),5e3)}))};t(),L()}}(e)}networkStatusChanged(){var e;null===(e=j)||void 0===e||e.networkStatusChanged(),this.trigger("network-status-changed")}whenServiceAvailableP(e){return this.isServiceDown(e)?new Promise(((t,r)=>{var i=()=>{this.isServiceDown(e)||(this.off("network-status-changed",i),t())};this.on("network-status-changed",i)})):Promise.resolve()}},(0,i.Z)(I.prototype,"_waitForIdle",[E],Object.getOwnPropertyDescriptor(I.prototype,"_waitForIdle"),I.prototype),I);Z=new $,n.Z.is_enabled("debug")&&(window.ServiceStatus=Z);const z=Z;var q=r(784090);class H extends p.Z{_onAuthError(){}_onOzMaintenanceError(){window.location.href.includes("redirect")||window.location.reload(),b.Z.report("ozMaintenanceInApp")}_isAuthError(e,t,r){return 401===t}_isOzMaintenanceError(e,t,r){return 503===t&&"MaintenanceError"===(null==e?void 0:e.code)}constructor(e){super(),this.href=e}createUuid(){let e,t="";const r=window.crypto||window.msCrypto;if(null!=(null==r?void 0:r.getRandomValues)){const i=new Uint8Array(16);r.getRandomValues(i),i[6]=15&i[6]|64,i[8]=63&i[8]|128;for(const r of i)e=r.toString(16),1===e.length?t+="0"+e:t+=e}else{const r=new Array(4),i=(0,w.r)().uint32;for(let e=0;e<=3;e++)r[e]=i();r[1]=(4294905855&r[1]|16384)>>>0,r[2]=(1073741823&r[2]|2147483648)>>>0;for(const i of r){for(e=i.toString(16);e.length<8;)e="0"+e;t+=e}}return t}requestWithRetryP(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0;const s=q.Deferred();var a=function(){return o>n?s.reject(...arguments):(0!==o&&b.Z.report("retryRequestP"),this.requestP(e,t,r,i).done((function(){return s.resolve(...arguments)})).fail((()=>(++o,a()))))}.bind(this);return a(),s.promise()}safeToJSPromise(e){return new Promise(((t,r)=>e.done((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t(r)})).fail((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(t)}))))}requestJP(){return this.safeToJSPromise(this.requestP(...arguments))}requestP(e,t,r){let i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=!1;if(n.Z.is_enabled("debug")&&H._forceFailNextRequest||null!=m&&m.doRandomFailure(t))return H._forceFailNextRequest=!1,console.error(t),q.Deferred().reject("debugForcedFailure",-1).promise();if(z.isServiceDown(this.serviceKey))return i=q.Deferred(),setTimeout((()=>i.reject()),0),i.promise();{let n,l,{headers:u,contentType:c,async:d,responseType:h,cancelPromise:p}=o;null==d&&(d=!0);const f=!h||""===h||"text"===h;f&&!o.hasOwnProperty("contentType")&&null==c&&(c="application/json;charset=utf-8"),i=q.Deferred();const g=new XMLHttpRequest;g.open(e,t||this.href,!0===d),null!=h&&(g.responseType=h),g.setRequestHeader("X-Requested-With","XMLHttpRequest");for(const e in u){const t=u[e];null!=t&&g.setRequestHeader(e,t)}if(null!=window.FormData&&r instanceof window.FormData||r instanceof Blob?(l=e=>i.notify(e),g.upload.addEventListener("progress",l),r instanceof Blob&&g.setRequestHeader("Content-Type",c)):null!=c&&g.setRequestHeader("Content-Type",c),z.makingRequest(),g.send(r),null!=p&&p.then((()=>(s=!0,g.abort(),i.reject("aborted")))),window.ActiveXObject){const e=function(){if(g.onreadystatechange=null,4!==g.readyState)return g.abort()};n=function(){return g.onreadystatechange=null,null!=l&&g.upload.removeEventListener("progress",l),q(window).off("unload",e)},q(window).on("unload",e)}var a=()=>{if(null!=a&&4===g.readyState){var e;let o;a=null,null===(e=n)||void 0===e||e();const{status:l}=g,u=l>=200&&l<300||304===l;if(f&&"string"==typeof g.responseText)try{r="application/rdf+xml"===g.getResponseHeader("Content-Type")?g.responseText:q.parseJSON(g.responseText.replace("while (1) {}",""))}catch(e){}else r=g.response;if(u)o=i.resolve;else{if(null!=g){const e=g.getResponseHeader("x-request-id");l>=400&&l<500?null!=e&&e.length>0&&console.warn(`${l} request id: ${e} (4xx responses are common for some API calls, especially when polling for renditions or attempting to add duplicate photos)`):null!=e&&e.length>0&&console.error(`Failed request id: ${e}`)}o=i.reject}if(o(r,l,g),this._isAuthError(r,l,g)&&this._onAuthError(),this._isOzMaintenanceError(r,l,g)){if(null==t&&({href:t}=this),t.includes("sdk"))return i.reject({code:r.code});if(!t.includes("v2/spaces"))return this._onOzMaintenanceError()}else if((l>=500||0===l)&&!s)return z.checkService(this.serviceKey)}};return d?4===g.readyState?setTimeout(a):g.onreadystatechange=a:a(),i.promise()}}}H.debugForceFailNextRequest=function(){n.Z.is_enabled("debug")&&(H._forceFailNextRequest=!0)},H.prototype.serviceKey="base";const J=H;var V;V={lex64Encoding:"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",invalidRegExp:new RegExp("[^a-zA-Z0-9_-]","g"),maxLength:1024,nearStepEncodingWidth:4,MIDPOINT:"Uzzz",insertBefore:function(e,t){if(!this.invalidRegExp.test(e))return this.tryCatch("InsertBefore",(()=>this._insertBefore(e,t)))},insertBetween:function(e,t,r){if(!this.invalidRegExp.test(e)&&!this.invalidRegExp.test(t))return this.tryCatch("InsertBetween",(()=>this._insertBetween(e,t,r)))},insertAfter:function(e,t){if(!this.invalidRegExp.test(e))return this.tryCatch("InsertAfter",(()=>this._insertAfter(e,t)))},tryCatch:function(e,t){var r;try{if(!0===this._debugForceReindexNextOrder)throw this._debugForceReindexNextOrder=!1,"Forced Lex64 Error";return t()}catch(t){return r=t,n.Z.is_enabled("debug")&&console.log(`${e} Exception: ${r}`),void b.Z.reportFailure("assetOrderLex64Error",{errorDescription:r})}},_insertBefore:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var i,n,o,s,a;return null===r&&(r=e),n=this.lex64Encoding,"high"===t?(a=n.slice(-1),e[0]===a&&e[1]===a?(r=e,this._insertBefore(e.substring(1),t,r.substring(1))):([s,i]=this.copyAndFill(e),this.nextOrderString(i,-1))):(o=n[0],this._insertBetween(o,e,t))},_insertBetween:function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";var n,o,s,a,l;if(n=e.charCodeAt(0),s=t.charCodeAt(0),i.length>this.maxLength)throw"Buffer Exhausted";if(o=this.decode[n],a=this.decode[s],o>this.maxDecodeValue||a>this.maxDecodeValue)throw"Invalid Character";if(o===a)return i+=this.encode[o],0!==n&&(e=e.substring(1)),0!==s&&(t=t.substring(1)),this._insertBetween(e,t,r,i);if(a<o)throw"Parameters out of Order";return o+1<a?(l=this.getCharBetween(o,a,r),i+this.encode[l]):(i+=this.encode[o],0!==n&&(e=e.substring(1)),this._insertAfter(e,r,i))},_insertAfter:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"middle",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var i,n,o,s;if((n=this.decode[e.charCodeAt(0)])===this.maxDecodeValue&&("low"!==t||e[1]===e[0]))return r+=this.encode[n],e=e.substring(1),this._insertAfter(e,t,r);if("low"===t?([o,i]=this.copyAndFill(e),r+=this.nextOrderString(i,1)):(s=this.getCharBetween(n,this.maxDecodeValue+1,t),r+=this.encode[s]),r.length>this.maxLength)throw"Buffer Exhausted";return r},getCharBetween:function(e,t,r){if(t<=e+1)throw"Invalid values";if(t===e+2)return e+1;switch(r){case"low":return e+1;case"high":return t-1;default:return Math.floor(e+(t-e)/2)}},copyAndFill:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxLength,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.encode[0];var i,n,o,s,a,l;for(s=t<=this.nearStepEncodingWidth?t-1:this.nearStepEncodingWidth,l=Array(t+1),i=n=0,a=s;n<a&&(o=e[i],!(i>=e.length));i=n+=1){if(this.decode[o.charCodeAt(0)]>this.maxDecodeValue)return[t+1,l];l[i]=o}for(;i<s;)l[i]=r,i++;if((l=l.join("")).length>this.maxLength)throw"Buffer Exhausted";return[s,l]},nextOrderString:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;var i,n,o,s,a,l;if(i=this.encode[0],s=this.maxDecodeValue,o=e.length,"string"==typeof e&&(e=e.split("")),1!==t&&-1!==t)throw"Invalid Arguments";if(n=o,a=e[--n],(l=this.decode[a.charCodeAt(0)])>this.maxDecodeValue)throw"Invalid Character";if(l===s){if(0===n)return r;e[n]=i}else e[n]=this.encode[l+t],n=0;for(;0!==n;){if(a=e[--n],(l=this.decode[a.charCodeAt(0)])>this.maxDecodeValue)throw"Invalid Character";if(l!==s){e[n]=this.encode[l+t];break}if(0===n)return r;e[n]=i}return 0===this.decode[e[o-1].charCodeAt(0)]?this.nextOrderString(e,t,r):e.join("").trim()},setupEncoding:function(){var e,t,r,i,n;for(this.decode=Array([256]),this.encode=this.lex64Encoding,t=r=0;r<=255;t=++r)this.decode[t]=255;for(this.decode[0]=0,this.maxDecodeValue=this.encode.length-1,t=i=0,n=this.encode.length;i<n;t=i+=1)e=this.encode.charCodeAt(t),this.decode[e]=t;return this.decode[void 0]=this.decode[0],this.decode.NaN=this.decode[0]}},V.setupEncoding();const B=V;var W=r(375029),G=r(280468),X=r.n(G);const{LrSDK:K}=window;let Y={getJSONContentP:e=>new Promise((function(t,r){var i=new XMLHttpRequest;i.open("GET",e),i.setRequestHeader("x-api-key",W.Z.clientId),i.setRequestHeader("Authorization",`Bearer ${W.Z.token}`),i.onload=function(){if(200<=i.status&&i.status<300){var e=i.getResponseHeader("content-type");if("application/json"===e||"application/json;charset=utf-8"===e){var n=JSON.parse(i.responseText.replace(/^while\s*\(\s*1\s*\)\s*{\s*}\s*/,""));t(n)}else r("Unrecognized response content type")}else{var o=`XHR load failed with status ${i.status}`;r(o)}},i.onerror=()=>{var e=`XHR call failed with status ${i.status}`;r(e)},i.send()})),getPagedJSONContentP:e=>new Promise((function(t,r){var i=[];!function e(n){Y.getJSONContentP(n).then((function(r){i=i.concat(r.resources),r.links&&r.links.next?e(r.base+r.links.next.href):(r.resources=i,t(r))}),r)}(e)})),putJSONContentP:(e,t)=>new Promise((function(r,i){var n=new XMLHttpRequest;n.open("PUT",e),n.setRequestHeader("x-api-key",W.Z.clientId),n.setRequestHeader("Authorization",`Bearer ${W.Z.token}`),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","application/json;charset=utf-8"),n.onload=function(){if(200<=n.status&&n.status<300)r();else{var e=`XHR PUT failed with status ${n.status}`;i(e)}},n.onerror=()=>{var e=`XHR PUT failed with status ${n.status}`;i(e)},n.send(JSON.stringify(t))})),postJSONContentP:(e,t)=>new Promise((function(r,i){var n=new XMLHttpRequest;n.open("POST",e),n.setRequestHeader("x-api-key",W.Z.clientId),n.setRequestHeader("Authorization",`Bearer ${W.Z.token}`),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","application/json;charset=utf-8"),n.onload=function(){if(200<=n.status&&n.status<300)r();else{var e=`XHR POST failed with status ${n.status}`;i(e)}},n.onerror=()=>{var e=`XHR POST failed with status ${n.status}`;i(e)},n.send(JSON.stringify(t))})),deleteJSONContentP:e=>new Promise((function(t,r){var i=new XMLHttpRequest;i.open("DELETE",e),i.setRequestHeader("x-api-key",W.Z.clientId),i.setRequestHeader("Authorization",`Bearer ${W.Z.token}`),i.onload=function(){if(200<=i.status&&i.status<300)t();else{var e=`XHR POST failed with status ${i.status}`;r(e)}},i.onerror=()=>{var e=`XHR POST failed with status ${i.status}`;r(e)},i.send()}))},Q={getLinksP:e=>Y.getJSONContentP(e),getAccountP(e){var t=e.base+e.links["/rels/account"].href;return Y.getJSONContentP(t)},getCatalogP(e){var t=e.base+e.links["/rels/catalogs"].href;return Y.getPagedJSONContentP(t).then((function(e){if(e.resources.length<=0)return Promise.reject("no catalog");let t=e.resources[0];return t.base=e.base,t}))},getAlbumsP:function(e,t){var r=e.base+e.links["/rels/subtyped_albums"].href.replace("{subtype}",t);return Y.getPagedJSONContentP(r)},async createAlbumP(e,t,r){var i=e.base+e.links.self.href+"/albums/"+J.prototype.createUuid();return await Y.putJSONContentP(i,{subtype:t,payload:r}),Y.getJSONContentP(i)},updateAlbumP(e,t){var r=e.base+e.links.self.href;return Y.postJSONContentP(r,{payload:t})},deleteAlbumP(e){var t=e.base+e.links.self.href;return Y.deleteJSONContentP(t)},getChildAlbumsP(e){var t=e.base+e.links["/rels/child_albums"].href;return Y.getPagedJSONContentP(t)},getAlbumAssetsP(e){var t=e.base+e.links.self.href+"/assets?order_after=-";return Y.getPagedJSONContentP(t)},async addAssetsWithIdsToAlbumP(e,t){if(t.length<1)return;let r=(new Date).toISOString(),i=[];for(let e=0,n=B.MIDPOINT;e<t.length;e++)if(i.push({id:t[e],payload:{userCreated:r,userUpdated:r,order:n}}),n=B.insertAfter(n,"low"),!n)return Promise.reject("failed to order assets");var n=e.base+e.links.self.href+"/assets";for(let e=i.length,t=0;t<e;t+=50){const e=i.slice(t,t+50);await Y.putJSONContentP(n,{resources:e})}},async deleteAllAlbumAssetsP(e){let t=(await Q.getAlbumAssetsP(e)).resources.map((e=>e.asset.id));var r=e.base+e.links.self.href+"/assets";for(let e=t.length,i=0;i<e;i+=100){const e=t.slice(i,i+100);await Y.deleteJSONContentP(r+"?asset_ids="+e.join("%3B"),"")}}};class ee{constructor(e,t,r,i){for(var n=0;n<i.resources.length;n++)i.resources[n].base=i.base;this._catalog=e,this._collections=t,this._serviceId=r,this._projects=i.resources,this._response=i}async getDeepCopyOfProjectListP(){return JSON.parse(JSON.stringify(this._response)).resources.forEach((e=>{delete e.base})),this._response}async getDeepCopyOfProjectWithIdP(e){let t=this._projects.find((t=>t.id===e));return t?JSON.parse(JSON.stringify(t)):Promise.reject("no matching project")}async _getProjectWithIdP(e){return this._projects.find((t=>t.id===e))||Promise.reject("no matching project")}async _getCollectionWithIdP(e){return this._collections.find((t=>t.id===e))||Promise.reject("failed to find collection")}async _createProjectP(e,t){let r=await Q.createAlbumP(this._catalog,"project",e);return this._projects.push(r),await Q.addAssetsWithIdsToAlbumP(r,t),r.id}async _getProjectWithSourceAlbumIdP(e){return this._projects.find((t=>{let r=t.payload.sourceAlbum;return r&&r.id===e}))}getUncachedProjectWithIdP(e){var t=this._response.base+this._response.links["/rels/album"].href.replace("{album_id}",e);return Y.getJSONContentP(t)}async getUncachedProjectsP(){let e=await Q.getAlbumsP(this._catalog,"project");return e.resources=e.resources.filter((e=>{var t=e.payload.publishInfo;return t&&t.serviceId===this._serviceId})),e}createProjectWithAssetIdsP(e,t){let r=(new Date).toISOString(),i={userCreated:r,userUpdated:r,name:e||r,publishInfo:{version:2,serviceId:this._serviceId}};return this._createProjectP(i,t||[])}async createProjectFromCollectionWithIdP(e){let t=await this._getCollectionWithIdP(e),r=(await Q.getAlbumAssetsP(t)).resources.map((e=>e.asset.id)),i=(new Date).toISOString(),n={userCreated:i,userUpdated:i,name:t.payload.name||t.id,sourceAlbum:{id:t.id},publishInfo:{version:2,serviceId:this._serviceId}},o=t.payload.cover;return o&&(n.cover={id:o.id}),this._createProjectP(n,r)}async resetProjectWithIdFromSourceCollectionP(e){let t=await this._getProjectWithIdP(e);if(!t.payload.sourceAlbum)return;let r=this._collections.find((e=>e.id===t.payload.sourceAlbum.id));if(!r)return;let i=(await Q.getAlbumAssetsP(r)).resources.map((e=>e.asset.id));return await Q.deleteAllAlbumAssetsP(t),Q.addAssetsWithIdsToAlbumP(t,i)}async updateProjectWithIdP(e,t){if(!t.userUpdated)return Promise.reject("missing userUpdated field");let r=await this._getProjectWithIdP(e),i=await Q.updateAlbumP(r,t);return X()(r.payload,t),i}async deleteProjectWithIdP(e){let t=await this._getProjectWithIdP(e);if("project"!==t.subtype)return Promise.reject("missing project");let r=await Q.deleteAlbumP(t),i=this._projects.findIndex((t=>t.id===e));return i>=0&&this._projects.splice(i,1),r}async getAssetsOfProjectWithIdP(e){let t=await this._getProjectWithIdP(e);return Q.getAlbumAssetsP(t)}async deleteChildAlbumsOfProjectWithIdP(e){let t=await this._getProjectWithIdP(e);if("project"!==t.subtype)return Promise.reject("missing project");let r=await Q.getChildAlbumsP(t),i=[];return r.resources.forEach((e=>{e.base=r.base,i.push(Q.deleteAlbumP(e))})),Promise.all(i)}}class te{constructor(e,t,r){this._managers={},this._catalog=e,this._collections=t,this._response=r}_responseForService(e){let t=this._response.resources.filter((t=>{var r=t.payload.publishInfo;return r&&r.serviceId===e}));return{base:this._response.base,resources:t,links:this._response.links}}projectManagerForService(e){if(!this._managers[e]){let t=this._responseForService(e);this._managers[e]=new ee(this._catalog,this._collections,e,t)}return this._managers[e]}}const re=new class{constructor(){this._linksPromise=null,this._accountPromise=null,this._catalogPromise=null,this._collectionsPromise=null,this._managerFactoryPromise=null,this._rootURL="https://photos.adobe.io/v2/"}_getCollectionsP(){return this._collectionsPromise||(this._collectionsPromise=this.getCatalogP().then((e=>Q.getAlbumsP(e,"collection").then((e=>{let t=e.resources;return t.forEach((t=>{t.base=e.base})),t}))))),this._collectionsPromise}_getProjectManagerFactoryP(){return this._managerFactoryPromise||(this._managerFactoryPromise=this.getCatalogP().then((e=>this._getCollectionsP().then((t=>Q.getAlbumsP(e,"project").then((r=>new te(e,t,r)))))))),this._managerFactoryPromise}getLinksP(){if(!this._linksPromise){let e="stage"===K.environment?"https://photos-stage.adobe.io/v2/":"https://photos.adobe.io/v2/";this._linksPromise=Q.getLinksP(e)}return this._linksPromise}getAccountP(){return this._accountPromise||(this._accountPromise=this.getLinksP().then(Q.getAccountP)),this._accountPromise}getCatalogP(){return this._catalogPromise||(this._catalogPromise=this.getLinksP().then(Q.getCatalogP)),this._catalogPromise}async getCollectionWithIdP(e){return(await this._getCollectionsP()).find((t=>t.id===e))||Promise.reject("no matching collection")}async getAssetsOfCollectionWithIdP(e){let t=await this.getCollectionWithIdP(e);return Q.getAlbumAssetsP(t)}async getProjectManagerForServiceIdP(e){return(await this._getProjectManagerFactoryP()).projectManagerForService(e)}getProjectManagerP(){let e=W.Z.clientId;return this.getProjectManagerForServiceIdP(e)}};var ie=r(546156),ne=r(25828),oe=r.n(ne);const{LrSDK:se}=window,ae=new class{checkCachedProjectsP(){return Promise.all([se.catalog.getProjectsP(),se.catalog.getUncachedProjectsP()]).then((function(e){return e[0].resources.length!==e[1].resources.length?Promise.reject("FAILED: count"):e[0].resources.length}))}checkCachedProjectWithIdP(e){return Promise.all([se.catalog.getProjectWithIdP(e),se.catalog.getUncachedProjectWithIdP(e)]).then((function(e){if(!oe()(e[0].payload,e[1].payload))return Promise.reject("FAILED: cached not equal to uncached")}))}checkProjectMetadataP(e,t){return Promise.all([se.catalog.getProjectWithIdP(e),se.catalog.getCollectionWithIdP(t)]).then((function(t){let r=t[0],i=t[1];return r.payload.name!==i.payload.name?Promise.reject("FAILED: name"):i.payload.cover&&r.payload.cover.id!==i.payload.cover.id?Promise.reject("FAILED: cover"):r.id!==e?Promise.reject("FAILED: id"):r.payload.publishInfo?2!==r.payload.publishInfo.version?Promise.reject("FAILED: version"):r.payload.publishInfo.serviceId!==W.Z.clientId?Promise.reject("FAILED: serviceId"):void 0:Promise.reject("FAILED: publishInfo")}))}checkProjectAssetsP(e,t){return Promise.all([se.catalog.getAssetsOfProjectWithIdP(e),se.catalog.getAssetsOfCollectionWithIdP(t)]).then((function(e){let t=e[0].resources,r=e[1].resources;if(r.length!==t.length)return Promise.reject("FAILED: asset count");for(let e=r.length,i=0;i<e;i++){let e=r[i],n=t[i];if(e.asset.id!==n.asset.id)return Promise.reject("FAILED: asset id")}}))}checkCreateProjectFromCollectionWithIdP(e,t){return Promise.all([this.checkCachedProjectWithIdP(e),this.checkProjectMetadataP(e,t),this.checkProjectAssetsP(e,t)])}async checkUpdatePayloadP(e,t){if(!function e(t,r,i){if(t!==Object(t)||r!==Object(r))i=i&&t===r;else for(let n in r)i=e(t[n],r[n],i);return i}((await se.catalog.getProjectWithIdP(e)).payload,t,!0))return Promise.reject("FAILED: payload")}checkUpdateProjectWithIdP(e,t){return Promise.all([this.checkCachedProjectWithIdP(e),this.checkUpdatePayloadP(e,t)])}async testCollectionWithIdP(e){let t=await se.catalog.createProjectFromCollectionWithIdP(e);await this.checkCreateProjectFromCollectionWithIdP(t,e),console.log("PASSED: createProjectFromCollectionWithIdP");let r=(new Date).toISOString(),i={userUpdated:r,name:"cool new name",publishInfo:{created:r,updated:r,remoteId:"servic3-specific"}};return await se.catalog.updateProjectWithIdP(t,i),await this.checkUpdateProjectWithIdP(t,i),console.log("PASSED: updateProjectWithIdP"),await se.catalog.resetProjectWithIdFromSourceCollectionP(t),console.log("PASSED: resetProjectWithIdFromSourceCollectionP"),t}async runP(e){if(!e||!e.resources||!e.resources[0])return Promise.reject("malformed collection list");let t=e.resources,r=await this.checkCachedProjectsP();console.log("initial project count:",r);let i=[];t.forEach((e=>{i.push(this.testCollectionWithIdP(e.id))}));let n=await Promise.all(i),o=await this.checkCachedProjectsP();return o!==r+t.length?Promise.reject("FAILED: bad count"):(console.log("PASSED: test collections"),i=[],n.forEach((e=>{i.push(se.catalog.deleteProjectWithIdP(e))})),await Promise.all(i),o=await this.checkCachedProjectsP(),o!==r?Promise.reject("FAILED: bad count"):(console.log("PASSED: deleteProjectWithIdP"),"PASSED"))}};var le=r(56851);const ue="0000-00-00T00:00:00",ce="9999-12-31T23:59:59";class de extends J{constructor(){super(...arguments),this.serviceKey="oz",this.handleAuthErrors=!0}static setAuthHeaders(e,t){const r={Authorization:`Bearer ${e}`,"x-api-key":t};n.Z.is_enabled("jigsaw")?this.prototype.authHeaders=r:this.authHeaders=r}_onAuthError(){var e;return!!this.handleAuthErrors&&(null===(e=R.Z.authErrorCallback)||void 0===e?void 0:e.call(R.Z))}_isAuthError(e,t,r){return 401===t}reportOzFailure(e,t,r,i){let n,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n=null!=t?JSON.stringify(t).substr(0,200):"unknown error";const s=Object.assign({errorCode:null!=r?r:"undefined",errorDescription:n},o);if(null!=i){const e=i.getResponseHeader("x-request-id");null!=e&&e.length>0&&(s.requestId=e)}b.Z.reportFailure(e,s)}requestP(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{authHeaders:o}=n.Z.is_enabled("jigsaw")?this:de;return null!=o&&(i=Object.assign({},i),i.headers=Object.assign({},o,i.headers)),super.requestP(e,t,r,i)}}var he,pe,fe,ge,me;({expireCookie:he,getCookie:pe,hasCookie:fe,setSecureSiteCookie:ge,setSiteCookie:me}=window);var ve=r(972490);const ye=class{constructor(e){var t;null!=R.Z.hostOverride?this.hostUrl=R.Z.hostOverride:this.hostUrl="",t=null!=e?e.indexOf("/",8):-1,this.basePath=-1===t?"":e.substr(t)}fullPath(e){if(null!=e)return 0===e.indexOf("http://")||0===e.indexOf("https://")||"/"===e[0]?e:`${this.basePath}${e}`}fullHref(e){if(null!=e)return 0===e.indexOf("http://")||0===e.indexOf("https://")?e:"/"===e[0]?`${this.hostUrl}${e}`:`${this.hostUrl}${this.basePath}${e}`}};var be=r(256622),_e=r(929558),we=r(991576),Pe=r.n(we);function Ae(e,t,r,i,n,o,s){var a=o[t],l=s&&s[n],u=void 0!==l?l:e.defaultValue,c=e.fromJSON.call(o,u),d=_e.Z.triggerNoArgs;if(a!==c){o[t]=c;var h=o[r];h?h.triggerNoArgs():o[r]=d(o,i)}}class Se{constructor(e){var t=e&&e.exportables;this.properties=t?Pe()(t.properties):[],this.aliases=t?Pe()(t.aliases):{},this.prototype=e}alias(e,t){var r=this.aliases;r||(r=this.aliases={}),r[t]=e}getJsonName(e){var t=this.aliases;return t&&t.hasOwnProperty(e)?t[e]:e}add(e,t,r,i,n){var o="_"+e;return this.properties.push({name:e,key:o,toJSON:r,fromJSON:t,defaultValue:i,config:n}),{enumerable:!0,configurable:!1,get(){return ve.Z.active&&ve.Z.recordEvent(this,e),this[o]},set(t){var r=this[o];r!==t&&(this[o]=t,ve.Z.recordChange(this,e,t,r))}}}computeJSONMethod(){for(var e=[],t=this.properties,r=0,i=t.length;r<i;++r){var n=t[r],o=n.name,s=this.getJsonName(n.name),a=n.key,l=n.key+"_signal";e.push(Ae.bind(this,n,a,l,o,s))}this.fromJSON=(t,r)=>(e.forEach((e=>e(t,r))),t)}fromJSON(e,t){return this.computeJSONMethod(),this.fromJSON(e,t)}toJSON(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r={},i=this.properties,n=0,o=i.length;n<o;++n){var s=i[n];ve.Z.active&&ve.Z.recordEvent(e,s.name);var a=s.toJSON.call(e,e[s.key],t);!t&&oe()(a,s.defaultValue)||(r[this.getJsonName(s.name)]=a)}return r}}var xe=r(200164),Ce=r(578710),Oe=r.n(Ce);class ke extends xe.Z{constructor(e){super(),this.base=e||[]}at(e){return ve.Z.active&&ve.Z.recordEvent(this,"change"),this.base[e]}setAt(e,t){_e.Z.trigger(this,"change"),this.base[e]=t}toArray(){return ve.Z.active&&ve.Z.recordEvent(this,"change"),this.base.slice()}get length(){return ve.Z.active&&ve.Z.recordEvent(this,"change"),this.base.length}set length(e){this.base.length!==e&&(this.base.length=e,_e.Z.trigger(this,"change"))}swapItems(e){this.base=e,_e.Z.trigger(this,"change")}removeItem(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)}concat(){ve.Z.active&&ve.Z.recordEvent(this,"change");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new ke(this.base.concat(...t.map((e=>e instanceof ke?(ve.Z.active&&ve.Z.recordEvent(e,"change"),e.base):e))))}concatToArray(){return this.concat.apply(this,arguments).base}spliceToArray(){return this.splice.apply(this,arguments).base}sliceToArray(){return this.slice.apply(this,arguments).base}mapToArray(){return this.map.apply(this,arguments).base}filterToArray(){return this.filter.apply(this,arguments).base}[Symbol.iterator](){return this.base.values()}}Oe().polyfill();var Ee=Array.prototype,Ie=ke.prototype,Te=["fill","pop","push","reverse","shift","unshift","splice","sort","copyWithin"];function De(e,t){return e instanceof Array?t.base===e?t:new ke(e):e}function Re(e,t){return t?function(){var t=e.apply(this.base,arguments);return _e.Z.trigger(this,"change"),De(t,this)}:function(){return ve.Z.active&&ve.Z.recordEvent(this,"change"),De(e.apply(this.base,arguments),this)}}for(var je=Object.getOwnPropertyNames(Ee),Ze=0,Fe=je.length;Ze<Fe;++Ze){var Ne=je[Ze];Object.prototype.hasOwnProperty.call(Ie,Ne)||(Ie[Ne]=Re(Ee[Ne],-1!==Te.indexOf(Ne)))}class Le extends xe.Z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;super(),this._swapItems(e)}_swapItems(e){if(e instanceof Map)this.base=e;else{this.base=new Map;for(let t in e)this.base.set(t,e[t])}}swapItems(e){this._swapItems(e),_e.Z.trigger(this,"change")}has(e){return ve.Z.active&&(ve.Z.recordEvent(this,""+e),ve.Z.recordEvent(this,"change")),this.base.has(e)}get(e){return ve.Z.active&&(ve.Z.recordEvent(this,""+e),ve.Z.recordEvent(this,"change")),this.base.get(e)}set(e,t){if(this.base.get(e)!==t)return this.base.set(e,t),_e.Z.trigger(this,""+e),_e.Z.trigger(this,"change"),this}clear(){var e=[];this.base.forEach(((t,r)=>e.push(r))),this.base.clear(),e.forEach((e=>_e.Z.trigger(this,""+e))),_e.Z.trigger(this,"change")}delete(e){let t=this.base.delete(e);return _e.Z.trigger(this,""+e),_e.Z.trigger(this,"change"),t}get size(){return ve.Z.active&&ve.Z.recordEvent(this,"change"),this.base.size}get length(){return this.size}[Symbol.iterator](){return this.base.entries()}}var Me=Map.prototype,Ue=Le.prototype;function $e(e){return function(){return ve.Z.active&&ve.Z.recordEvent(this,"change"),e.apply(this.base,arguments)}}for(var ze,qe,He,Je,Ve,Be,We,Ge,Xe,Ke,Ye,Qe,et,tt,rt,it=Object.getOwnPropertyNames(Me),nt=0,ot=it.length;nt<ot;++nt){var st=it[nt];Object.prototype.hasOwnProperty.call(Ue,st)||(Ue[st]=$e(Me[st]))}function at(e){return"false"!==e&&Boolean(e)}function lt(e){return e}function ut(e){return e&&e.toArray?e.toArray():e&&e.slice&&e.slice()}let ct=(ze=o.Z.wrapPropertyDecorator,qe=o.Z.wrapPropertyDecorator,He=o.Z.wrapPropertyDecorator,Je=o.Z.wrapPropertyDecorator,Ve=o.Z.wrapPropertyDecorator,Be=o.Z.wrapPropertyDecorator,We=o.Z.wrapPropertyDecorator,Ge=o.Z.wrapPropertyDecorator,Xe=o.Z.wrapPropertyDecorator,Ke=o.Z.wrapPropertyDecorator,Ye=o.Z.wrapPropertyDecorator,Qe=o.Z.wrapPropertyDecorator,et=o.Z.wrapPropertyDecorator,tt=o.Z.wrapPropertyDecorator,rt=class{constructor(e){this._jsonPropertiesType=Se,this._arrayType=ke,this._mapType=Le,this._loggedWarning={},this._name=e}wrapArray(e){return new this._arrayType(e)}wrapMap(e){return new this._mapType(e)}exportables(e){return e.hasOwnProperty("exportables")||(e.exportables=new this._jsonPropertiesType(e)),e.exportables}byVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,Pe(),Pe(),o.Z.getInitialValue(r),i)}byBooleanVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,at,Boolean,o.Z.getInitialValue(r),i)}byNumberVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,Number,Number,o.Z.getInitialValue(r),i)}bySimpleVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,lt,lt,o.Z.getInitialValue(r),i)}byCustomVal(e,t,r,i,n){return this.exportables(e).add(t,(function(e){return i.parse(void 0!==e?e:n,this,t)}),(function(e){return i.serialize(e,this,t)}),o.Z.getInitialValue(r))}byRef(e,t,r,i){return this.exportables(e).add(t,(e=>{var t=new i;return t.fromJSON(e||{}),t}),((e,t)=>e?e.toJSON(t):null),o.Z.getInitialValue(r))}byOptionalRef(e,t,r,i){return this.exportables(e).add(t,(e=>{if(null==e)return e;var t=new i;return t.fromJSON(e),t}),((e,t)=>null==e?e:e.toJSON(t)),o.Z.getInitialValue(r))}byCustomRef(e,t,r,i){return this.exportables(e).add(t,(function(e){var t=i(e,this);if(!t)return null;var r="function"==typeof t?new t:t;return e&&r.fromJSON(e),r}),((e,t)=>e?e.toJSON(t):null),o.Z.getInitialValue(r))}byArray(e,t,r,i){var n=this.wrapArray;return this.exportables(e).add(t,(function(e){var r=ut(e)||[];return i?r:n(r,this,t)}),ut,o.Z.getInitialValue(r))}byRefArray(e,t,r,i,n){var s=this.wrapArray;return this.exportables(e).add(t,(function(e){var r=[];if(e&&e instanceof Array)for(var o=0,a=e.length;o<a;++o){var l=new i;l.fromJSON(e[o]||{}),r.push(l)}return n?r:s(r,this,t)}),((e,t)=>{var r=e?e.map((e=>e?e.toJSON(t):null)):[];return r.base||r}),o.Z.getInitialValue(r))}byCustomRefArray(e,t,r,i,n){var s=this.wrapArray;return this.exportables(e).add(t,(function(e){var r=[];if(e&&e.length)for(var o=0,a=e.length;o<a;++o){var l=e[o],u=i(l,this);if(u){var c="function"==typeof u?new u:u;l&&c.fromJSON(l),r.push(c)}}return n?r:s(r,this,t)}),((e,t)=>{var r=e?e.map((e=>e?e.toJSON(t):null)):[];return r.base||r}),o.Z.getInitialValue(r))}byMap(e,t,r,i){var n=this._mapType,s=this.wrapMap;return this.exportables(e).add(t,(function(e){let r=Object.assign({},e);return i?r:s(r,this,t)}),(e=>{let t={};if(e instanceof n)for(let r of e.keys())t[r]=e.get(r);else e&&Object.assign(t,e);return t}),o.Z.getInitialValue(r))}byRefMap(e,t,r,i,n){var s=this._mapType,a=this.wrapMap;return this.exportables(e).add(t,(function(e){let r={};for(let t in e){let n=e[t],o=new i;n&&o.fromJSON(n),r[t]=o}return n?r:a(r,this,t)}),((e,t)=>{let r={};if(e instanceof s)for(let i of e.keys()){let n=e.get(i);r[i]=n?n.toJSON(t):null}else if(e)for(let i in e){let n=e[i];r[i]=n?n.toJSON(t):null}return r}),o.Z.getInitialValue(r))}alias(e,t,r,i){this.exportables(e).alias(i,t)}},(0,i.Z)(rt.prototype,"wrapArray",[be.Z],Object.getOwnPropertyDescriptor(rt.prototype,"wrapArray"),rt.prototype),(0,i.Z)(rt.prototype,"wrapMap",[be.Z],Object.getOwnPropertyDescriptor(rt.prototype,"wrapMap"),rt.prototype),(0,i.Z)(rt.prototype,"byVal",[ze],Object.getOwnPropertyDescriptor(rt.prototype,"byVal"),rt.prototype),(0,i.Z)(rt.prototype,"byBooleanVal",[qe],Object.getOwnPropertyDescriptor(rt.prototype,"byBooleanVal"),rt.prototype),(0,i.Z)(rt.prototype,"byNumberVal",[He],Object.getOwnPropertyDescriptor(rt.prototype,"byNumberVal"),rt.prototype),(0,i.Z)(rt.prototype,"bySimpleVal",[Je],Object.getOwnPropertyDescriptor(rt.prototype,"bySimpleVal"),rt.prototype),(0,i.Z)(rt.prototype,"byCustomVal",[Ve],Object.getOwnPropertyDescriptor(rt.prototype,"byCustomVal"),rt.prototype),(0,i.Z)(rt.prototype,"byRef",[Be],Object.getOwnPropertyDescriptor(rt.prototype,"byRef"),rt.prototype),(0,i.Z)(rt.prototype,"byOptionalRef",[We],Object.getOwnPropertyDescriptor(rt.prototype,"byOptionalRef"),rt.prototype),(0,i.Z)(rt.prototype,"byCustomRef",[Ge],Object.getOwnPropertyDescriptor(rt.prototype,"byCustomRef"),rt.prototype),(0,i.Z)(rt.prototype,"byArray",[Xe],Object.getOwnPropertyDescriptor(rt.prototype,"byArray"),rt.prototype),(0,i.Z)(rt.prototype,"byRefArray",[Ke],Object.getOwnPropertyDescriptor(rt.prototype,"byRefArray"),rt.prototype),(0,i.Z)(rt.prototype,"byCustomRefArray",[Ye],Object.getOwnPropertyDescriptor(rt.prototype,"byCustomRefArray"),rt.prototype),(0,i.Z)(rt.prototype,"byMap",[Qe],Object.getOwnPropertyDescriptor(rt.prototype,"byMap"),rt.prototype),(0,i.Z)(rt.prototype,"byRefMap",[et],Object.getOwnPropertyDescriptor(rt.prototype,"byRefMap"),rt.prototype),(0,i.Z)(rt.prototype,"alias",[tt],Object.getOwnPropertyDescriptor(rt.prototype,"alias"),rt.prototype),rt);const dt=new ct("Json");var ht,pt,ft,gt,mt,vt,yt,bt,_t,wt,Pt,At,St,xt,Ct,Ot,kt,Et,It,Tt,Dt,Rt,jt,Zt,Ft,Nt,Lt,Mt,Ut,$t,zt,qt,Ht,Jt,Vt=r(592478),Bt=r.n(Vt);class Wt extends p.Z{toJSON(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.exportables?this.exportables.toJSON(this,e):{}}fromJSON(e){return this.exportables?this.exportables.fromJSON(this,e):this}}Wt.prototype.properties=new Se;class Gt extends Wt{toJSON(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return X()(Bt()(this._originalSourceJson),super.toJSON(e))}fromJSON(e){return this._originalSourceJson=e,Object.assign(this,e),this.exportables.fromJSON(this,e),this}}let Xt=(ht=dt.byVal,pt=dt.byVal,ft=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"author",gt,this),(0,P.Z)(this,"description",mt,this)}},gt=(0,i.Z)(ft.prototype,"author",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=(0,i.Z)(ft.prototype,"description",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft),Kt=(vt=dt.byVal,yt=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"flags",bt,this)}},bt=(0,i.Z)(yt.prototype,"flags",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt),Yt=(_t=dt.byVal,wt=dt.byVal,Pt=dt.byVal,At=dt.byVal,St=dt.byVal,xt=dt.byVal,Ct=dt.byRef(Xt),Ot=dt.byRef(Kt),kt=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"private",Et,this),(0,P.Z)(this,"download",It,this),(0,P.Z)(this,"metadata",Tt,this),(0,P.Z)(this,"location",Dt,this),(0,P.Z)(this,"favorites_disabled",Rt,this),(0,P.Z)(this,"comments_disabled",jt,this),(0,P.Z)(this,"profile_info",Zt,this),(0,P.Z)(this,"filters",Ft,this)}},Et=(0,i.Z)(kt.prototype,"private",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=(0,i.Z)(kt.prototype,"download",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=(0,i.Z)(kt.prototype,"metadata",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt=(0,i.Z)(kt.prototype,"location",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=(0,i.Z)(kt.prototype,"favorites_disabled",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=(0,i.Z)(kt.prototype,"comments_disabled",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zt=(0,i.Z)(kt.prototype,"profile_info",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=(0,i.Z)(kt.prototype,"filters",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt),Qt=(Nt=dt.byVal,Lt=dt.byVal,Mt=dt.byVal,Ut=dt.byRef(Yt),$t=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"id",zt,this),(0,P.Z)(this,"created",qt,this),(0,P.Z)(this,"updated",Ht,this),(0,P.Z)(this,"payload",Jt,this)}},zt=(0,i.Z)($t.prototype,"id",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qt=(0,i.Z)($t.prototype,"created",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=(0,i.Z)($t.prototype,"updated",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jt=(0,i.Z)($t.prototype,"payload",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t);var er=r(784090);class tr extends de{constructor(e){"string"==typeof e||e instanceof String?(super(e),this._initPromise=this.refreshP()):(super(),this.setAttributes(e),this.href=this.linkHref("self"))}initializedP(){return null!=this._initPromise?this._initPromise.then((()=>this)):er.Deferred().resolve(this).promise()}initializedJP(){return this.safeToJSPromise(this.initializedP(...arguments))}get store(){return this.constructor.store}get storeId(){return this.id}aquire(){return this.store&&n.Z.is_enabled("asset_store")&&this.store.aquireItem(this),this}dispose(){super.dispose(),this.store&&n.Z.is_enabled("asset_store")&&this.store.releaseItem(this)}cloneAttributes(){return this.attributes.toJSON()}linkHref(e){var t,r;const i=null===(t=this.attributes.links)||void 0===t||null===(r=t[e])||void 0===r?void 0:r.href;return this._linkBase.fullHref(i)}linkFullPath(e){var t,r;const i=null===(t=this.attributes.links)||void 0===t||null===(r=t[e])||void 0===r?void 0:r.href;return this._linkBase.fullPath(i)}hasLink(e){var t,r;return null!=(null===(t=this.attributes.links)||void 0===t||null===(r=t[e])||void 0===r?void 0:r.href)}getAttribute(e){return this.attributes[e]}_getAttributeClass(){return this.attributeClass||Qt}_createAttributes(e){var t;const r=this._getAttributeClass(),i=null!==(t=this._attributes)&&void 0!==t?t:new r;return i.fromJSON(e),i}get attributes(){return ve.Z.recordEvent(this,"attributes"),this._attributes}set attributes(e){this._attributes=this._createAttributes(e),ve.Z.recordChange(this,"attributes")}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.attributes=e,this.id=this.attributes.id,this._linkBase=new ye(this.attributes.base),this}setAttribute(e,t){this.attributes[e]=t}refreshJP(){return this.safeToJSPromise(this.refreshP())}refreshP(){return this._refreshP()}_refreshP(e){return this.requestP("GET",e).done((e=>this.setAttributes(e))).promise()}updateAttributesP(e,t){return null==t.payload&&(t.payload={}),t.payload.userUpdated=(new Date).toISOString(),this._updateAttributesP(t,e)}_updateAttributesP(e,t){let r;const i=er.extend(!0,{},this.attributes.toJSON()),n=()=>this.attributes=er.extend(!0,this.attributes.toJSON(),e);return n(),null!=this.updating?(this.updatingApplyList.push(n),r=this.updating.then((()=>this._doUpdateP(t,e,i)))):(this.updatingApplyList=[n],r=this._doUpdateP(t,e,i)),this.updating=r,this.updating.always((()=>{var e;null===(e=R.Z.catalogContext)||void 0===e||e.assetUpdated(),r===this.updating&&(this.updating=null)}))}_doUpdateP(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n.Z.is_enabled("debug")&&J._forceFailNextRequest&&(i=2),this.requestP("POST",this.href,JSON.stringify(t)).then((()=>(null!=e&&b.Z.report(e),this.updatingApplyList.shift(),this.refreshP().then((()=>this.updatingApplyList.map((e=>e())))))),((n,o,s)=>{const a=i<2&&(0===o||o>=500);return a?null!=e&&b.Z.report(`${e}Retry`):(null!=e&&this.reportOzFailure(`${e}Failure`,n,o,s),this.updatingApplyList.shift()),this.refreshP().then((()=>a?this._doUpdateP(e,t,r,i+1):er.Deferred().reject(n,o,s)),(()=>{this.attributes=r}))}))}getOzCreatedDate(){const{created:e}=this.attributes;return e===ue?null:new Date(Date.parse(e))}getOzUpdatedDate(){const{updated:e}=this.attributes;return e===ue?null:new Date(Date.parse(e))}getUserCreatedDate(){var e;const t=null===(e=this.attributes.payload)||void 0===e?void 0:e.userCreated;return null==t||t===ue?null:new Date(Date.parse(t))}getUserUpdatedDate(){var e;const t=null===(e=this.attributes.payload)||void 0===e?void 0:e.userUpdated;return null==t||t===ue?null:new Date(Date.parse(t))}getBestCreatedDate(){var e;return null!==(e=this.getUserCreatedDate())&&void 0!==e?e:this.getOzCreatedDate()}getBestUpdatedDate(){var e;return null!==(e=this.getUserUpdatedDate())&&void 0!==e?e:this.getOzUpdatedDate()}getBestCreatedDateAttribute(){var e,t;return null!==(e=null===(t=this.attributes.payload)||void 0===t?void 0:t.userCreated)&&void 0!==e?e:this.attributes.created}getMostRecentDate(){return new Date(Math.max(this.getBestCreatedDate(),this.getBestUpdatedDate()))}getBestUpdatedDateAttribute(){var e,t;return null!==(e=null===(t=this.attributes.payload)||void 0===t?void 0:t.userUpdated)&&void 0!==e?e:this.attributes.updated}}var rr=r(784090);const ir=function(){class e extends tr{getAccountFirstLaunch(){return this.getApp().first_launch}async setAccountFirstLaunchJP(){if(!this.getApp().first_launch)return await this.updateAppP({first_launch:!0})}async debugClearAccountFirstLaunchJP(){return await this.updateAppP({first_launch:null})}getAccountSawPLG_P0(){return this.getApp().plg_p0}async setAccountSawPLG_P0_JP(){if(!this.getApp().plg_p0)return await this.updateAppP({plg_p0:!0})}getTipShown(e){var t;return!0===(null!=(t=this.getApp().tips_shown)?t[e]:void 0)}setTipShownP(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r;if(this.getTipShown(e)!==t)return(r={})[e]=t,this.updateAppP({tips_shown:r})}async setTipShownJP(e,t){return await this.setTipShownP(e,t)}clearTipShownP(e){var t,r,i;for(Array.isArray(e)||(e=[e]),i={},t=0,r=e.length;t<r;t++)i[e[t]]=null;return this.updateAppP({tips_shown:i})}async clearTipShownJP(e){return await this.clearTipShownP(e)}getPreferredLocale(){return this.getUniversal()[this.COMMUNICATION_PREF_KEY]}setPreferredLocaleJP(e){return this._updateUniversalP({[`${this.COMMUNICATION_PREF_KEY}`]:e})}clearPreferredLocaleJP(){return this._updateUniversalP({[`${this.COMMUNICATION_PREF_KEY}`]:null})}getDefaultShareAuthor(){return this.getUniversal()[this.DEFAULT_SHARE_AUTHOR_KEY]}setDefaultShareAuthorP(e){return this._updateUniversalP({[`${this.DEFAULT_SHARE_AUTHOR_KEY}`]:e})}clearDefaultAuthorP(){return this._updateUniversalP({[`${this.DEFAULT_SHARE_AUTHOR_KEY}`]:null})}getTipData(e){var t;return null!=(t=this.getApp().tips_data)?t[e]:void 0}setTipDataP(e,t){var r;return(r={})[e]=t,this.updateAppP({tips_data:r})}getEnabledSneaks(){var e;return null!=(e=this.getApp().enabled_sneaks)?e:[]}setEnabledSneaksP(e){return this.updateAppP({enabled_sneaks:e})}clearAppP(){var e,t;for(t in e={},this.getApp())"similarity_data_ready"!==t&&(e[t]=null);return this.updateAppP(e)}clearTipsP(){return this.updateAppP({tips_shown:null,tips_data:null})}getSimilarityDataProcessed(){var e;return null!=(e=this.getApp().similarity_data_ready)?e:e=!1}debugDeleteSimilarityDataProcessedP(){return this.updateAppP({similarity_data_ready:null})}getHavePromptedProofingFeedback(){var e;return null!=(e=this.getApp().prompted_proofing_feedback)?e:e=!1}setHavePromptedProofingFeedbackP(e){return this.updateAppP({prompted_proofing_feedback:e})}getHaveRestoredPreviously(){var e;return null!=(e=this.getApp().restored_previously)?e:e=!1}setHaveRestoredPreviously(e){return this.updateAppP({restored_previously:e})}getApp(){var e;return null!=(e=this.attributes.lightroom_web)?e:{}}getUniversal(){var e;return null!=(e=this.attributes.universal)?e:{}}updateAppP(e){var t;return t={lightroom_web:e},this._updateAttributesP(t)}_updateUniversalP(e){var t;return t={universal:e},this._updateAttributesP(t)}getSearchIndexingDate(){return new Date(this.getApp().search_indexing_enabled_date)}setSearchIndexingDateP(e){return this.updateAppP({search_indexing_enabled_date:e.toISOString()})}refreshP(){return this._refreshP(this._linkBase.fullPath(""))}setAttributes(e){var t,r,i,n;return t="",e.base&&(null!=(i=e.links)&&null!=(n=i.self)?n.href:void 0)&&(t+=e.base.replace(/\/$/,"")+e.links.self.href+"/"),r={self:{href:"settings"}},e.payload?super.setAttributes(rr.extend({base:t,links:r},e.payload)):super.setAttributes({base:t,links:r})}}return e.prototype.DEFAULT_SHARE_AUTHOR_KEY="share_author_default",e.prototype.COMMUNICATION_PREF_KEY="communication_preference",e}.call(void 0);var nr,or,sr,ar=r(784090),lr=[].indexOf;or=0,sr=0,nr={CHUNK_THRESHOLD:209715200,VIDEO_EXTENSIONS:["3gp","3gpp","avi","dxo","m2ts","m4v","mov","mp4","mpe","mpeg","mpg","mpg4","mts","qt"],ALL_VIDEO_EXTENSIONS:["264","3g2","3gp","3gpp","3gpp2","asf","avc","avi","divx","dv","flv","m1v","m2p","m2t","m2ts","m2v","m4v","mkv","mov","mp4","mpe","mpeg","mpg","mpg4","mpv","mts","ogg","ogv","ps","qt","tod","ts","vob","webm","wmv"],RAW_EXTENSIONS:["3fr","arq","arw","cr2","cr3","crw","dcr","dng","erf","fff","gpr","iiq","kdc","mef","mfw","mos","mrw","nef","nrw","orf","pef","psd","raf","raw","rw2","rwl","sr2","srf","srw","x3f"],JPEG_EXTENSIONS:["jfif","jpe","jpg","jpeg"],PNG_EXTENSIONS:["png"],TIFF_EXTENSIONS:["tif","tiff"],HEIF_EXTENSIONS:["heif","heic"],GIF_EXTENSIONS:["gif"],downloadAssetP:function(e,t){var r,i;return 0===(r=(r=e.getFileName()).replace(/[;\/?:@=&"<>#%{}\|\\^~\]`]/g,"")).length&&(r=this.getDefaultFilename(e)),i=t?`${e.getMasterHref(!1)}/filename/${r}`:`${e.getDownload2048Href()}/filename/${r=r.replace(/\.[^.]+$/,".jpg")}`,window.location.href=i,ar.Deferred().resolve().promise()},getDefaultFilename:function(e){return e.isVideo()?this.defaultVideoFilename():this.defaultPhotoFilename()},defaultPhotoFilename:function(){return(0,y.zt)("$$$/js/viewer/download/no_filename=photo.jpg")},defaultVideoFilename:function(){return(0,y.zt)("$$$/js/viewer/download/no_filename_video=video.mp4")},isSupportedUploadType:function(e){return this.isImage(e)||this.isVideo(e)},isSupportedBehanceProfileImageType:function(e){var t;return null!=(t=this.extName(e))&&(lr.call(this.JPEG_EXTENSIONS,t)>=0||lr.call(this.PNG_EXTENSIONS,t)>=0||lr.call(this.GIF_EXTENSIONS,t)>=0)},isUploadSupportedFormat:function(e){return this.isImage(e)||this.isVideo(e)},isUploadSupported:function(e){var t,r,i,o;return!!n.Z.is_enabled("debug_upload_anything")||(t=this.isImage(e),r=this.isVideo(e),!(!t&&!r)&&(t?0<(i=e.size)&&i<1073741824:0<(o=e.size)&&o<4294967296))},isVideo:function(e){var t;return null!=(t=this.extName(e))&&lr.call(this.ALL_VIDEO_EXTENSIONS,t)>=0},isImage:function(e){var t;return null!=(t=this.extName(e))&&(lr.call(this.JPEG_EXTENSIONS,t)>=0||lr.call(this.PNG_EXTENSIONS,t)>=0||lr.call(this.TIFF_EXTENSIONS,t)>=0||lr.call(this.RAW_EXTENSIONS,t)>=0||lr.call(this.HEIF_EXTENSIONS,t)>=0)},_extensionInList:function(e,t){var r;return null!=(r=this.extName(e))&&lr.call(t,r)>=0},isJpeg:function(e){return this._extensionInList(e,this.JPEG_EXTENSIONS)},isRaw:function(e){return this._extensionInList(e,this.RAW_EXTENSIONS)},isPng:function(e){return this._extensionInList(e,this.PNG_EXTENSIONS)},isTiff:function(e){return this._extensionInList(e,this.TIFF_EXTENSIONS)},isXmp:function(e){return"xmp"===this.extName(e)},contentTypeForUpload:function(e){return this.isVideo(e)?"video/*":this.isJpeg(e)?"image/jpeg":this.isPng(e)?"image/png":this.isTiff(e)?"image/tiff":"application/octet-stream"},ozSubtype:function(e){return this.isVideo(e)?"video":!!this.isImage(e)&&"image"},extName:function(e){var t;if(t=e.name)return this.getFileExtension(t)},getFileExtension:function(e){var t;return-1!==(t=e.lastIndexOf("."))?e.substr(t+1).toLowerCase():""},browserCanLoadImage:function(e){var t;return null!=(t=this.getFileExtension(e))&&("jpg"===t||"jpeg"===t)},isDigestReliable:function(){return 0===sr?!(or>2):!(or>sr+2)},digestP:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var i;return r>0?(i=ar.Deferred(),nr._digestP(e,t).done((function(){return i.resolve(...arguments)})).fail((()=>nr.digestP(e,t,r-1).done((function(){return i.resolve(...arguments)})).fail((function(){return i.reject(...arguments)})))),i.promise()):nr._digestP(e,t)},_digestP:function(e,t){var r,i,n,o,s,a,l,u,c,d,h;return i=ar.Deferred(),n="unknown",h=t?Math.min(1e4,Math.max(e.size/4,2e3)):6e4,d=setTimeout((()=>{if(or++,i.reject(`${n}: timeout`),null!=a&&2!==a.readyState)return a.abort()}),h),m.doRandomFailure(`digestP for ${e.name}`,.25)?i.promise():(o=e=>{if("pending"===i.state())return or++,clearTimeout(d),i.reject(`${n}: ${e}`)},s=e=>{if("pending"===i.state())return sr++,i.resolve(e),clearTimeout(d)},(r=null!=(l=window.crypto)?l:window.msCrypto)&&(c=null!=(u=r.subtle)?u:r.webkitSubtle)?(n="filereader",(a=new FileReader).onload=function(){var e,t;return e=a.result,window.msCrypto?(n="msCrypto",(t=window.msCrypto.subtle.digest({name:"SHA-256"},e)).oncomplete=function(e){return s(e.target.result)},t.onerror=function(e){var t;return o(null!=e&&null!=(t=e.toString())?t.substr(0,100):void 0)}):(n="crypto",c.digest({name:"SHA-256"},e).then((function(e){return s(e)})).catch((function(e){var t;return"string"!=typeof(t=(null!=e?e.name:void 0)||(null!=e?e.toString().substr(0,100):void 0))&&(t="unknown"),o(t)})))},a.onerror=function(e){var t;return e instanceof ProgressEvent?t=e.lengthComputable?`progressevent as error ${e.loaded} / ${e.total}`:"progressevent as error, not computable":"string"!=typeof(t=(null!=e?e.name:void 0)||(null!=e?e.toString().substr(0,100):void 0))&&(t="unknown"),o(t)},a.readAsArrayBuffer(e),i.then((function(e){var t,r,i,n,o;if(e instanceof ArrayBuffer){for(o="",r=0,i=(n=new Uint8Array(e)).length;r<i;r++)1===(t=n[r].toString(16)).length?o+="0"+t:o+=t;return o}return e}))):i.reject())}};const ur=nr,cr="ontouchstart"in document||navigator.maxTouchPoints>0;var dr,hr;const pr={COMPACT_SIZE:668,MINIMAL_SIZE:320,touch:cr,gesture:"GestureEvent"in window,mouse:!cr||D.Z.win,hover:window.matchMedia("(hover: hover)").matches,geolocation:null!=navigator.geolocation,pixelDensity:null!=(dr=window.devicePixelRatio)?dr:1,wasm:null!=window.WebAssembly,webgl:null!=((hr=document.createElement("canvas")).getContext("webgl")||hr.getContext("experimental-webgl")),hasLocalStorage:function(){try{return localStorage.setItem("dummy_key","dummy_key"),localStorage.removeItem("dummy_key"),!0}catch(e){return!1}}(),viewportWidth:function(){return document.documentElement.clientWidth},viewportHeight:function(){return document.documentElement.clientHeight},isCompact:function(e,t){return this.isCompactWidth(e)||this.isCompactHeight(t)},isCompactWidth:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportWidth();return e<=this.COMPACT_SIZE},isCompactHeight:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportHeight();return e<=this.COMPACT_SIZE},isCompactScreen:function(){return screen.width<=this.COMPACT_SIZE||screen.height<=this.COMPACT_SIZE},isMinimal:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportWidth(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.viewportHeight();return e<=this.MINIMAL_SIZE||t<=this.MINIMAL_SIZE},isFullscreen:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},isFullscreenEnabled:function(){return!D.Z.silk&&(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled)},isVideoSupported:function(){try{return null!=document.createElement("video").canPlayType}catch(e){return!1}}},fr={_isBetter:(e,t)=>e<0?t<0&&e>t:t<0||e<t,getBestHrefForSize(e,t){let r=-1/0,i="";t*=pr.pixelDensity;for(const n in e){const o=e[n],s=n-t;this._isBetter(s,r)&&(i=o,r=s)}return i}};var gr,mr,vr=r(784090);let yr=(gr=class extends tr{constructor(){super(...arguments),(0,P.Z)(this,"pollingForOzAvatar",mr,this)}setAttributes(e){return null!=this.attributes&&(this.attributes.avatar=void 0),super.setAttributes(e)}getInitials(){var e;return null!==(e=this.attributes.first_name)&&void 0!==e&&e.length?this.attributes.last_name?this.attributes.first_name[0]+this.attributes.last_name[0]:this.attributes.first_name[0]:null}getFullName(){var e;return null!==(e=this.attributes.full_name)&&void 0!==e?e:""}hackCacheableLinkHref(e){if(null!=e)return e.replace("/v2/","/v2c/")}getAvatarUrl(e){const t={};for(const e in this.attributes.links){const r=this.attributes.links[e];if("/rels/avatars/"===e.substr(0,14)){const{href:e,size:i}=r;null!=e&&null!=i&&(t[i]=e)}}const r=fr.getBestHrefForSize(t,e);return this.hackCacheableLinkHref(this._linkBase.fullHref(r))}hasPlaceholderAvatar(){var e;return!0===(null===(e=this.attributes.avatar)||void 0===e?void 0:e.placeholder)}_getBehancePublicProfileP(){const e=`https://${window.__adobe_behance_api_host}/v2/users/${R.Z.account.getWCDGuid()}?api_key=${window.__adobe_behance_api_key}`;return J.prototype.requestP("GET",e)}_getBehanceUserP(){return this._getBehancePublicProfileP().then((e=>e.user)).fail(((e,t)=>{b.Z.reportFailure("getBehanceUserFailure")}))}getBehanceAvatarP(e){return this._getBehanceUserP().then((t=>fr.getBestHrefForSize(t.images,e)))}async getBehanceHasPlaceholderJP(){const e=await this._getBehancePublicProfileP();return null!=e.valid&&0===e.valid||1===e.user.has_default_image}updateBehanceAvatarP(e){let t,r;if(ur.isImage(e))return r=ur.getFileExtension(e.name),t=`extension=${r}`,this.avatarRequest(t,e);{r=e.getFileExtension(),t=`extension=${r}`;const i=e.getRenditionHref("2048");return this.ozImageP=de.prototype.requestP("GET",i,null,{responseType:"arraybuffer",cancelPromise:this._cancelDeferred}),this.ozImageP.fail((()=>this._deferred.reject())),this.ozImageP.then(((e,r,i)=>this.avatarRequest(t,e)))}}avatarRequest(e,t){const r={contentType:"application/x-www-form-urlencoded"};let i=`${this._linkBase.hostUrl}/behance_presigned_url/v2/project/editor/auto_sign_request?api_key=${window.__adobe_behance_api_key}`;return J.prototype.requestP("POST",i,e,r).then((e=>{const n=e.uri.replace(/^(https:\/\/s3.amazonaws.com)/g,`${this._linkBase.hostUrl}/aws_s3`);return J.prototype.requestP("PUT",n,t).then((()=>{i=`${this._linkBase.hostUrl}/behance_change_avatar/v2/profile/avatar?api_key=${window.__adobe_behance_api_key}`;const t=`source_url=${e.object.location}`;return J.prototype.requestP("POST",i,t,r).then((e=>(b.Z.report("galleryEditAvatar"),this.updateOzAvatarP())),(()=>{b.Z.reportFailure("updateBehanceAvatarFailure")}))}),((e,t)=>{b.Z.reportFailure("putScratchBehanceAvatarFailure")}))}),((e,t)=>{b.Z.reportFailure("getPreSignedBehanceUrlFailure")}))}async deleteBehanceAvatarJP(){if(!n.Z.is_enabled("debug"))return;const e={contentType:"application/x-www-form-urlencoded"},t=`${this._linkBase.hostUrl}/behance_change_avatar/v2/profile/avatar?api_key=${window.__adobe_behance_api_key}`;try{await J.prototype.requestP("DELETE",t,{},e),await this.updateOzAvatarP(),console.log("Avatar deleted")}catch(e){console.log("Failed to delete avatar")}}haveAvatarLinksChanged(){for(const e in this.attributes.links){const t=this.attributes.links[e];if(-1!==e.indexOf("avatars")&&null!=t.href&&t.href!==this.oldLinks[e].href)return!0}return!1}updateOzAvatarP(){this.pollingForOzAvatar=!0,this.oldLinks=vr.extend(!0,{},this.attributes.links);const e=this._linkBase.fullHref(`v2/avatars/${this.id}`);return this.requestP("POST",e,JSON.stringify({refresh:!0})).then((()=>this._pollForOzAvatarUpdateP()),(()=>b.Z.reportFailure("updateAvatarFailure"))).always((()=>this.pollingForOzAvatar=!1))}_pollForOzAvatarUpdateP(){const e=vr.Deferred();if(this.haveAvatarLinksChanged())e.resolve();else{let r=0;const i=6,n=1e3;var t=()=>{r++,this.refreshP().done((()=>{!this.haveAvatarLinksChanged()&&r<i?setTimeout(t,n):this.haveAvatarLinksChanged()?e.resolve():(b.Z.reportFailure("pollForAvatarUpdateFailure"),e.reject())})).fail((()=>{e.reject()}))};t()}return e.promise()}},mr=(0,i.Z)(gr.prototype,"pollingForOzAvatar",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gr);var br,_r,wr,Pr,Ar,Sr,xr,Cr,Or,kr,Er,Ir,Tr,Dr,Rr;let jr=(br=dt.byVal,_r=dt.byVal,wr=dt.byVal,Pr=dt.byVal,Ar=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"used",Sr,this),(0,P.Z)(this,"limit",xr,this),(0,P.Z)(this,"display_limit",Cr,this),(0,P.Z)(this,"warn",Or,this)}},Sr=(0,i.Z)(Ar.prototype,"used",[br],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr=(0,i.Z)(Ar.prototype,"limit",[_r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cr=(0,i.Z)(Ar.prototype,"display_limit",[wr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Or=(0,i.Z)(Ar.prototype,"warn",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ar),Zr=(kr=dt.byRef(jr),Er=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"storage",Ir,this)}},Ir=(0,i.Z)(Er.prototype,"storage",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Er),Fr=(Tr=dt.byRef(Zr),Dr=class extends Qt{constructor(){super(...arguments),(0,P.Z)(this,"entitlement",Rr,this)}},Rr=(0,i.Z)(Dr.prototype,"entitlement",[Tr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dr);var Nr,Lr=r(595734).default,Mr=[].indexOf;const Ur=Nr=function(){var e,t,r;let o=(e=x(2e3),t=class extends yr{constructor(){super(...arguments),(0,P.Z)(this,"pollingForSubscription",r,this)}setAttributes(e){return super.setAttributes(e),this.settings=new ir(e),this.configuredPreferredLocale(),n.Z.is_enabled("debug")&&this.debugLogLocaleState(),this}debugLogLocaleState(){var e,t;if(!Lr.sdk)return console.group("Locale State"),t=y.Z.is_default_locale_fallback?"(auto)":"(setting)",console.log("Current locale: ",y.Z.locale,t),console.log("1. ‘locale‘ cookie:",pe("locale")),console.log("2. ‘locale_pass‘ cookie:",pe("locale_pass")),e=null!=y.Z.browser_locale?"(The first one we support)":"(We don‘t support any)",console.log("3. Browser-requested locale:",y.Z.browser_locale,e),console.log("Account communication preference: ",this.getPreferredLocale()),console.groupEnd()}getStatus(){return n.Z.is_enabled("debug_account_sub_expired")?"subscription_expired":n.Z.is_enabled("debug_account_trial_expired")?"trial_expired":this.attributes.entitlement.status}isSubscriber(){return"subscriber"===this.getStatus()}subscriptionStartDate(){var e,t;return null!=(t=null!=(e=this.attributes.entitlement.current_subs)?e.purchase_date:void 0)?Date.parse(t):void 0}isTrialExpired(){var e;return"trial_expired"===this.getStatus()||"trial"===this.getStatus()&&(new Date).getTime()>Date.parse(null!=(e=this.attributes.entitlement.trial)?e.end:void 0)}trialDaysRemaining(){var e,t,r,i;if("trial"===this.getStatus()&&(e=(i=Date.parse(null!=(r=this.attributes.entitlement.trial)?r.end:void 0))-(t=(new Date).getTime()),null!=i&&null!=t&&e>0))return Math.ceil(e/864e5)}isSubscriptionExpired(){return"subscription_expired"===this.getStatus()}sendFirstLaunchMetric(){if(this.settings.getAccountFirstLaunch())return!1;try{if(Date.parse(this.getOzCreatedDate())>Date.parse("2022-07-26T00:00:00Z"))return this.isFirstLaunch=!0,!0}catch(e){console.error("error parsing account created date"),b.Z.reportFailure("Failure parsing oz account created date for sendFirstLaunchMetric")}return this.settings.setAccountFirstLaunchJP(),!1}toggleOzFeature(e,t){var r;return r=`${this.href}/feature_classes/${e}`,t?this.requestP("PUT",r,"{}"):this.requestP("DELETE",r,"{}")}pollForSubscriptionStatusJP(e){var t;return 6e4,t=new Date,this._pollForSubscriptionStatusJP(6e4,1e3).catch((()=>("function"==typeof e&&e(),this._pollForSubscriptionStatusJP(54e4,1e3).catch((e=>{var r,i,n,o,s;i=new Date,[r,n,s]=e,o=i-t>=66e4,this.reportOzFailure("processingPurchaseFailed",r,n,s,{timeout:o})})))))}_pollForSubscriptionStatusJP(e,t){return this.pollingForSubscription=!0,new Promise(((r,i)=>{var n;return setTimeout((()=>{if(this.pollingForSubscription)return i()}),e),(n=()=>this.refreshJP().then((()=>{if(this.pollingForSubscription)return"subscriber"===this.getStatus()?r():setTimeout((()=>n()),t)}),(e=>{var r;if(this.pollingForSubscription)return e instanceof Array?(r=e[1])>=400&&r<500?i(e):setTimeout((()=>n()),t):i()})))()})).finally((()=>this.pollingForSubscription=!1))}getWCDGuid(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||-1!==this.attributes.wcd_guid.indexOf("@")?this.attributes.wcd_guid:`${this.attributes.wcd_guid}@AdobeID`}getFullName(){return this.attributes.full_name}getFirstName(){return this.attributes.first_name}getLastName(){return this.attributes.last_name}getEmail(){return this.attributes.email}getCountry(){return this.attributes.country}isSearchIndexed(){var e;return null!=(e=this.attributes.config.search_index)&&e}debugResetBestPhotosP(){return this.settings.debugDeleteSimilarityDataProcessedP().then((()=>{var e;return e=this.getClusterFlagHref(),this.requestP("DELETE",e)}))}clearDefaultAuthor(){return this.settings.clearDefaultAuthorP()}setPreferredLocaleJP(e){var t;if(!Lr.sdk)return t=Object.keys(y.Z.locale_hash),Mr.call(t,e)<0?Promise.reject():e===this.getPreferredLocale()?Promise.resolve():this.settings.setPreferredLocaleJP(e)}getPreferredLocale(){return this.settings.getPreferredLocale()}clearPreferredLocaleJP(){return this.settings.clearPreferredLocaleJP()}configuredPreferredLocale(){var e,t,r;if(!Lr.sdk&&!((null!=(t=this.getPreferredLocale())?t.length:void 0)>0||(e=Object.keys(y.Z.locale_hash),y.Z.is_default_locale_fallback||(r=y.Z.locale,Mr.call(e,r)<0))))return b.Z.report("localeConfigSetCommunicationPref",{locale:y.Z.locale}),this.setPreferredLocaleJP(y.Z.locale)}checkAccountLocale(){var e,t;if(!Lr.sdk&&(null!=(e=this.getPreferredLocale())?e.length:void 0)>0&&(null!=(t=y.Z.locale)?t.length:void 0)>0)return this.getPreferredLocale().toLowerCase()!==y.Z.locale.toLowerCase()?b.Z.report("localeMismatchBrowserVsAccount",{locale:this.getPreferredLocale(),browserLocale:y.Z.locale}):void 0}setDefaultShareAuthor(e){return e===this.getFullName()?this.clearDefaultAuthor():this.settings.setDefaultShareAuthorP(e)}getDefaultShareAuthor(){var e;return null!=(e=this.settings.getDefaultShareAuthor())?e:this.getFullName()}getAppsP(){var e;return e=this.linkHref("/rels/apps"),this.requestP("GET",e).done((e=>{this.appsData=e}))}hasTriedLrD(){var e,t,r;if(m.shouldOverrideLrDesktopUsage())return m.getLrDesktopUsageOverride();for(e=0,t=(r=this.appsData.apps).length;e<t;e++)if("AdobeLightroom"===r[e].client_app)return!0;return!1}hasTriedLrM(){var e,t,r;if(m.shouldOverrideLrMobileUsage())return m.getLrMobileUsageOverride();for(e=0,t=(r=this.appsData.apps).length;e<t;e++)if("LrMobile"===r[e].client_app)return!0;return!1}getEnforcedMaxStorageLimit(){return n.Z.is_enabled("debug_0_storage_limit")?0:this.attributes.entitlement.storage.limit}getAdvertizedMaxStorageLimit(){return n.Z.is_enabled("debug_0_storage_limit")?0:this.attributes.entitlement.storage.display_limit}isStorageAtLimit(){return this.getUsedStorage()>=this.getAdvertizedMaxStorageLimit()}isStorageAtWarn(){return!this.isStorageAtLimit()&&this.getUsedStorage()>=this.getWarnStorageLimit()}getWarnStorageLimit(){return this.attributes.entitlement.storage.warn}getUsedStorage(){return this.attributes.entitlement.storage.used}getUsedStoragePercent(){var e;return 0===this.getAdvertizedMaxStorageLimit()?100:(e=.01*this.getAdvertizedMaxStorageLimit(),Math.min(100,Math.max(this.getUsedStorage(),e)/this.getAdvertizedMaxStorageLimit()*100))}getUsedStorageRatio(){return 0===this.getAdvertizedMaxStorageLimit()?1:Math.min(1,this.getUsedStorage()/this.getAdvertizedMaxStorageLimit())}isSimilarityDataProcessed(){return!n.Z.is_enabled("best_photos_no_similarity_data")&&this.settings.getSimilarityDataProcessed()}},r=(0,i.Z)(t.prototype,"pollingForSubscription",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.Z)(t.prototype,"debugLogLocaleState",[e],Object.getOwnPropertyDescriptor(t.prototype,"debugLogLocaleState"),t.prototype),t);return o.prototype.attributeClass=Fr,o.prototype.FIND_SELF_ID="00000000000000000000000000000000",o.prototype.FIND_SELF_PATH="/v2/accounts/00000000000000000000000000000000",o.prototype.handleAuthErrors=!1,o.prototype.isFirstLaunch=!1,o}.call(void 0);Nr.getCurrentP=function(){return new Nr(`${R.Z.hostOverride}/v2/accounts/00000000000000000000000000000000`).initializedP()};var $r=r(285397),zr=r.n($r),qr=r(784090);class Hr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.requestQueue=[],this.runningRequests=0,this.finished=!1,this.failed=!1,this.deferred=null,this.maxParallelRequests=e,this.deferred=qr.Deferred()}promise(){return this.deferred.promise()}empty(){this.requestQueue=[]}enqueuePromise(e){if(this.finished)throw"Enqueued on a finished RequestQueue";this.requestQueue.push(e),this._requestMore()}_requestMore(){if(0===this.requestQueue.length&&0===this.runningRequests&&!this.failed)return this.deferred.resolve(),void(this.finished=!0);for(;this.requestQueue.length>0&&this.runningRequests<this.maxParallelRequests;){const e=this.requestQueue.shift();this.runningRequests+=1,e().always((()=>{this.runningRequests-=1,this.deferred.notify(this.requestQueue.length)})).done((()=>this._requestMore())).fail((()=>{this.finished=!0,this.failed=!0,this.deferred.reject()}))}}}var Jr,Vr,Br,Wr,Gr,Xr,Kr=r(891218),Yr=r(784090);Xr=0,Jr=class{constructor(e){(0,P.Z)(this,"loadTime",Vr,this),this.href=e.href,this._deferred=Yr.Deferred(),this.requestCount=1,this.requestOrderId=Xr++,this.isLoaded=!1,this.loadedP=this._deferred.promise()}loadP(e){var t,r,i;return e.startImageLoad(),r=new Date,t=e.batchStartTime,i=()=>{if(e.batchStartTime===t)return e.finishImageLoad(r)},this.image=new Image,this.image.onload=()=>(this.isLoaded=!0,this.loadTime=new Date-r,i(),this._deferred.resolve()),this.image.onerror=()=>(this.isLoaded=!1,e.cancelImageLoad(),this._deferred.reject()),this.image.src=this.href,this.loadedP}},Vr=(0,i.Z)(Jr.prototype,"loadTime",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Br=class{constructor(){(0,P.Z)(this,"loadCount",Wr,this),(0,P.Z)(this,"totalLoadTimeMs",Gr,this),this.batchOpenRequests=0,this.batchCompletedCount=0}get thumbLoadAvgMs(){return 0===this.loadCount?0:this.totalLoadTimeMs/this.loadCount}startBatch(){return this.batchStartTime=new Date,this.lastEndTime=this.batchStartTime,this.batchOpenRequests=1}startImageLoad(){return null!=this.batchStartTime?this.batchOpenRequests++:this.startBatch()}cancelImageLoad(){return this.batchOpenRequests--}finishImageLoad(e){var t,r;return t=(r=new Date)-this.lastEndTime,this.totalLoadTimeMs+=t,this.loadCount++,this.batchOpenRequests--,this.batchOpenRequests<=0?(this.batchStartTime=null,this.batchOpenRequests<0?console.warn(`Negative open requests: ${this.batchOpenRequests}`):void 0):this.lastEndTime=r}},Wr=(0,i.Z)(Br.prototype,"loadCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gr=(0,i.Z)(Br.prototype,"totalLoadTimeMs",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}});var Qr,ei,ti,ri,ii,ni,oi,si,ai,li,ui,ci=r(869831),di=r.n(ci),hi=r(784090),pi=[].indexOf;li=["thumbnail2x","640","1280","2048","panorama"],ui=0,si=function(){var e,t,r,n,o,s;let a=(e=class{constructor(e,i,a,l){var u,c;(0,P.Z)(this,"loadTime",t,this),(0,P.Z)(this,"loadEndTime",r,this),(0,P.Z)(this,"priority",n,this),(0,P.Z)(this,"requestOrderId",o,this),(0,P.Z)(this,"loadedHref",s,this),this.priority=e,this.asset=i,this.rendition=a,this.href=l,this._deferred=hi.Deferred(),this._cancelDeferred=hi.Deferred(),this.requestCount=1,this.isLoaded=!1,this.isQueued=!1,[c,u]=this.asset.getRenditionDimensions(this.rendition),this.megaPixels=c*u/1048576,this.ozImageP=null,this.loadedP=this._deferred.promise(),this.loadedJP=new Promise(((e,t)=>this.loadedP.done((()=>e())).fail((()=>t))))}async loadJP(e){return null!=this.image?this.loadedJP:await this.loadP(e)}loadP(e){var t,r,i;if(null!=this.image)return this.loadedP;if(this.isQueued=!1,this.requestOrderId=ui++,e.startImageLoad(),r=new Date,t=e.batchStartTime,i=()=>{if(e.batchStartTime===t)return e.finishImageLoad(this,r)},this.image=new Image,this.image.onload=()=>(this.isLoaded=!0,this.loadedHref=this.image.src,this.loadEndTime=new Date,this.loadTime=this.loadEndTime-r,i(),this._deferred.resolve()),this.image.onerror=()=>(this.isLoaded=!1,e.cancelImageLoad(this,r),this._deferred.reject()),this.useOzCredentials){if(null!=this.ozImageP)return;this.ozImageP=de.prototype.requestP("GET",this.href,null,{responseType:"arraybuffer",cancelPromise:this._cancelDeferred}),this.ozImageP.fail((()=>(this._deferred.reject(),e.cancelImageLoad(this,r)))),this.ozImageP.then(((e,t,r)=>{var i;return i=new Blob([new Uint8Array(e)],{type:r.getResponseHeader("Content-Type")}),this.image.src=URL.createObjectURL(i)}))}else this.image.src=this.href;return this.loadedP}cancel(){var e;return this.useOzCredentials?this._cancelDeferred.resolve():null!=(e=this.image)?e.src="":void 0}dispose(){var e;if(null!=(null!=(e=this.image)?e.src:void 0)&&this.useOzCredentials)return URL.revokeObjectURL(this.image.src)}},t=(0,i.Z)(e.prototype,"loadTime",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=(0,i.Z)(e.prototype,"loadEndTime",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n=(0,i.Z)(e.prototype,"priority",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,i.Z)(e.prototype,"requestOrderId",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,i.Z)(e.prototype,"loadedHref",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e);return a.useOzCredentials=!1,a}.call(void 0),Qr=class{constructor(){(0,P.Z)(this,"loadCount",ei,this),(0,P.Z)(this,"loadTimeMs",ti,this),(0,P.Z)(this,"megaPixelsLoaded",ri,this),(0,P.Z)(this,"cancelledCount",ii,this),(0,P.Z)(this,"megaPixelsCancelled",ni,this)}get megaPixelsPerSecond(){return 0===this.loadCount?0:this.megaPixelsLoaded/(this.loadTimeMs/1e3)}get errorAdjustedMegaPixelsPerSecond(){return 0===this.loadCount?0:(this.megaPixelsLoaded+this.megaPixelsCancelled/2)/(this.loadTimeMs/1e3)}update(e,t){return this.loadCount++,this.loadTimeMs+=e,this.megaPixelsLoaded+=t}updateCancelled(e,t){return this.cancelledCount++,this.loadTimeMs+=e,this.megaPixelsCancelled+=t}},ei=(0,i.Z)(Qr.prototype,"loadCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ti=(0,i.Z)(Qr.prototype,"loadTimeMs",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ri=(0,i.Z)(Qr.prototype,"megaPixelsLoaded",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ii=(0,i.Z)(Qr.prototype,"cancelledCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ni=(0,i.Z)(Qr.prototype,"megaPixelsCancelled",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ai=Qr,oi=class{constructor(){this.timingInfo=new ai,this.batchOpenRequests=0,this.batchCompletedCount=0,this.recentTimingInfo=[]}startBatch(){return this.batchStartTime=new Date,this.lastEndTime=this.batchStartTime,this.lastErrorEndTime=this.batchStartTime,this.batchTiming=new ai,this.batchOpenRequests=1}startImageLoad(){return null!=this.batchStartTime?this.batchOpenRequests++:this.startBatch()}cancelImageLoad(e,t){return this._finish(e,t,!1)}finishImageLoad(e,t){return this._finish(e,t,!0)}_finish(e,t,r){var i,n;if(i=(n=new Date)-this.lastEndTime,this.lastEndTime=n,r?(this.timingInfo.update(i,e.megaPixels),this.batchTiming.update(i,e.megaPixels)):(this.timingInfo.updateCancelled(i,e.megaPixels),this.batchTiming.updateCancelled(i,e.megaPixels)),this.batchOpenRequests--,this.batchOpenRequests<=0&&(this.batchStartTime=null,this.batchOpenRequests<0))return console.warn(`ImageCache: Negative open requests: ${this.batchOpenRequests}`)}};const fi=function(){class e{constructor(){var e;this.queuedRequests=new(di())(((e,t)=>e.priority>t.priority)),this.usePixelDensityMultiplier,this.maxRequestCount=20,this.stats=new oi,e=pr.isCompactScreen()?2:5,this.caches={thumbnail2x:new Kr.LRUCache(1e3*e),640:new Kr.LRUCache(1e3*e),1280:new Kr.LRUCache(200*e),2048:new Kr.LRUCache(100*e),panorama:new Kr.LRUCache(100*e)}}setUseOzCredentials(e){return si.prototype.useOzCredentials=e}check(e,t,r){var i;return i=e.getBestRenditionTypeForSize(t,r,!0),this.caches[i].get(e.getRenditionHref(i))}checkAssetHref(e,t){var r,i,n,o;for(r=0,n=li.length;r<n;r++)if(o=li[r],(null!=(i=this.caches[o].get(t))?i.asset:void 0)===e)return i;return null}get(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var o;return o=t.getBestRenditionTypeForSize(r,i,!0),this.getRendition(e,t,o,n)}stop(e){if(null!=e&&!e.isLoaded)return e.requestCount--,0===e.requestCount?(this.caches[e.rendition].remove(e.href),e.cancel()):void 0}getFastPreview(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2048",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n,o,s;for(s=li.indexOf(r);s>=0;){if(o=li[s],null!=(n=this.caches[o].get(t.getRenditionHref(o)))?n.isLoaded:void 0)return n;s--}return this.getRendition(e,t,"thumbnail2x",i)}getRendition(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var o,s,a;return n.Z.is_enabled("debug")&&pi.call(li,r)<0&&console.warn(`Unexpected rendition type ${r}`),null==(s=t.getRenditionHref(r))?null:(null==(a=(o=this.caches[r]).get(s))||a.isLoaded||i||a.requestCount++,i||(null!=a?a.isQueued&&e!==a.priority&&(a.priority=e,this._queueRequest(a)):(a=new si(e,t,r,s),o.set(s,a),this.stats.batchOpenRequests<this.maxRequestCount?a.loadP(this.stats).always((()=>window.requestAnimationFrame((()=>this._checkQueue())))):this._queueRequest(a))),a)}_queueRequest(e){return e.isQueued=!0,this.queuedRequests.add({priority:e.priority,imageInfo:e})}_checkQueue(){var e,t;if(this.stats.batchOpenRequests<this.maxRequestCount)for(;this.queuedRequests.size>0;)if((t=this.queuedRequests.poll()).priority===t.imageInfo.priority&&(e=t.imageInfo).isQueued&&e.requestCount>0)return void e.loadP(this.stats).always((()=>window.requestAnimationFrame((()=>this._checkQueue()))))}}return e.IMMEDIATE_PRIORITY=999999999,e}.call(void 0);var gi,mi,vi,yi,bi,_i,wi,Pi,Ai,Si=r(784090);gi=class{constructor(){(0,P.Z)(this,"_state",mi,this),(0,P.Z)(this,"uploadStatus",vi,this),(0,P.Z)(this,"currentSpace",yi,this),(0,P.Z)(this,"publicGallery",bi,this),(0,P.Z)(this,"publicGalleryLoaded",_i,this),(0,P.Z)(this,"shareSidebarAlbums",wi,this),(0,P.Z)(this,"pageJustLoaded",Pi,this),this.libraryPages=!1,this.newUser=!1,this.catalogs=null,this.spaces=null,this.embedded=null,this.recentAlbumsAndAdhocs=new Array,this.deletedAssets={},this.stateIsDirty=!1,this.firstAppState=!0,this.imageCache=new fi,this.showFirstEditTip=!1}get state(){return this._state}set state(e){return null!=this._state&&(this.firstAppState=!1),this._state=e}get catalog(){return R.Z.catalogContext}get space(){return this.currentSpace||R.Z.spaceContext}get account(){return R.Z.account}setSpaceContext(e){this.currentSpace=e}get ownedLibraryView(){var e;return!!this.libraryPages&&!(null!=(e=this.state)?e.isSharedWithYouGrid():void 0)}get nonFreemiumLibraryPages(){return this.libraryPages&&null!=this.catalog}loadPublicGalleryP(){return this.libraryPages?this.catalog.gallerySpaces.allP().done((e=>(e.length>0&&(this.publicGallery=e[0]),this.publicGalleryLoaded=!0))):Si.Deferred().reject()}addRecentAlbumsAndAdhocs(e){if(this.hasRecentAlbum(e)?e.id!==this.recentAlbumsAndAdhocs[this.recentAlbumsAndAdhocs.length-1].id&&(this.recentAlbumsAndAdhocs.splice(this.recentAlbumsAndAdhocs.indexOf(this.findInRecentAlbum(e)),1),this.recentAlbumsAndAdhocs.push(e)):this.recentAlbumsAndAdhocs.push(e),this.recentAlbumsAndAdhocs.length>3)return this.recentAlbumsAndAdhocs.shift()}deleteRecentAlbumsAndAdhocs(e){if(this.hasRecentAlbum(e))return this.recentAlbumsAndAdhocs.splice(this.recentAlbumsAndAdhocs.indexOf(e),1)}hasRecentAlbum(e){return this.recentAlbumsAndAdhocs.filter((function(t){return t.id===(null!=e?e.id:void 0)})).length>0}findInRecentAlbum(e){return this.recentAlbumsAndAdhocs.find((function(t){return t.id===(null!=e?e.id:void 0)}))}assetIdsDeleted(e){var t,r,i,n;for(n=[],t=0,i=e.length;t<i;t++)r=e[t],n.push(this.deletedAssets[r]=!0);return n}assetIdsRestored(e){var t,r,i,n;for(n=[],t=0,i=e.length;t<i;t++)r=e[t],n.push(this.deletedAssets[r]=!1);return n}isAssetIdDeleted(e){return!0===this.deletedAssets[e]}},mi=(0,i.Z)(gi.prototype,"_state",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi=(0,i.Z)(gi.prototype,"uploadStatus",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yi=(0,i.Z)(gi.prototype,"currentSpace",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bi=(0,i.Z)(gi.prototype,"publicGallery",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i=(0,i.Z)(gi.prototype,"publicGalleryLoaded",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wi=(0,i.Z)(gi.prototype,"shareSidebarAlbums",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pi=(0,i.Z)(gi.prototype,"pageJustLoaded",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ai=new(Ai=gi),_.q.enabled&&(_.q.AppData=Ai),a.enabled&&(a.AppData=Ai);const xi=Ai;var Ci,Oi,ki,Ei,Ii,Ti=r(784090);const Di=(Ci=class extends de{constructor(){super(...arguments),(0,P.Z)(this,"finished",Oi,this),(0,P.Z)(this,"length",ki,this),(0,P.Z)(this,"totalCount",Ei,this),(0,P.Z)(this,"_models",Ii,this)}markDirty(){return this._dirty=!0,this.trigger("dirty"),this}isDirty(){return this._dirty}_add(e){if(null==this.indices[e.id])return this._push(e)}_push(e){return this._models.push(e),this.indices[e.id]=this.length++,this.trigger("modelIndexChanged")}_reindex(e){var t,r,i,n,o;for(null==e&&(this.indices={},e=0),n=this.models,r=this.indices,t=i=e,o=n.length-1;i<=o;t=i+=1)r[n[t].id]=t;return this.length=n.length,this.trigger("modelIndexChanged")}get models(){return this._models.base}get modelsBindable(){return this._models}isEmpty(){return 0===this._models.length}async isEmptyJP(){return!!this.isEmpty()&&(!!this.finished||(await this.fetchP(),this.isEmpty()))}isKnownEmpty(){return this.isEmpty()&&this.finished}async fetchJP(){return await this.safeToJSPromise(this.fetchP())}async allJP(){return await this.allP()}allP(){return this.finished?Ti.Deferred().resolve(this.models.slice(0)).promise():this.fetchP().then((()=>this.allP()))}at(e){return this._models.at(e)}atP(e){return e<this._models.length?Ti.Deferred().resolve(this.at(e)).promise():this.fetchP().then((()=>this.atP(e)))}atJP(e){return e<this._models.length?Promise.resolve(this.at(e)):this.fetchJP().then((()=>this.atJP(e)))}firstP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<this._models.length?Ti.Deferred().resolve(this.at(e)).promise():Ti.Deferred().reject().promise()}range(e,t){var r,i;return r=Math.max(0,e),i=null!=this.totalCount?Math.min(this.totalCount,t+1):t+1,this._models.sliceToArray(r,i)}rangeP(e,t){var r;return t<this._models.length||this.finished?(r=this.range(e,t),Ti.Deferred().resolve(r).promise()):this.fetchP().then((()=>this.rangeP(e,t)))}get(e){var t;return t=this.index(e),this.at(t)}getP(e){return this.indexP(e).then((e=>this.at(e)))}getJP(e){return this.indexJP(e).then((e=>this.at(e)))}index(e){return this.indices[e]}indexP(e){var t;return e?null!=(t=this.index(e))?Ti.Deferred().resolve(t).promise():this.fetchP().then((()=>this.indexP(e))):Ti.Deferred().reject()}indexJP(e){var t;return e?null!=(t=this.index(e))?Promise.resolve(t):this.fetchJP().then((()=>this.indexJP(e))):Promise.reject()}isPageLoaded(e){var t;return t=this.pageSize*e+this.pageSize,this.length>t||this.finished}isPagePastEnd(e){var t;return t=this.pageSize*e,this.finished&&e>0&&t>=this.length}pageP(e){return this.pagesP(e,e+1)}pageJP(e){return this.pagesJP(e,e+1)}pages(e,t){var r,i;return r=this.pageSize*e,i=this.pageSize*t,this._models.sliceToArray(r,i)}pagesP(e,t){var r,i,n;return n=(i=this.pageSize*t)<=this.length,r=this.finished&&i>=this.length,n||r?Ti.Deferred().resolve(this.pages(e,t),r).promise():this.fetchP().then((()=>this.pagesP(e,t)))}async pagesJP(e,t){return await this.pagesP(e,t)}totalCountP(){return null!=this.totalCount?Ti.Deferred().resolve(this.totalCount).promise():Ti.Deferred().reject()}pagesLoaded(){return this.finished?Math.ceil(this.length/this.pageSize):Math.floor(this.length/this.pageSize)}deleteLocally(e){return this._deleteMany(e)}_deleteMany(e){var t,r,i,n,o,s,a,l,u;for(n=[],o=0,a=e.length;o<a;o++)r=e[o],null!=(i=this.index(r))&&n.push(i);for(n.sort((function(e,t){return e-t})),u=0,t=s=0,l=n.length;s<l;t=++s)i=n[t],this._models.splice(i-u++,1);if(null!=this.totalCount&&(this.totalCount-=e.length),n.length>0)return this._reindex()}getDisplayIndex(e){return null==e?null:this._models.filter((function(e){return!e.isLayoutSegment()})).findIndex((function(t){return t.id===e.id}))}sortByCustomJP(e,t){return this.customSortPropPath=t,new Promise(((t,r)=>(this._models.sort(e),this._reindex(),this.markDirty(),t())))}get isCustomSorted(){return null!=this.customSortPropPath}reverseCustomSort(){return this._models.reverse(),this._reindex()}includesLayoutSegments(){var e,t;return(null!=(e=this.options)&&null!=(t=e.subtype)?t.indexOf("layout_segment"):void 0)>=0}},Oi=(0,i.Z)(Ci.prototype,"finished",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ki=(0,i.Z)(Ci.prototype,"length",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ei=(0,i.Z)(Ci.prototype,"totalCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ii=(0,i.Z)(Ci.prototype,"_models",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ci);var Ri,ji=r(955528),Zi=r(232959),Fi=r(745268);const Ni=(Ri=class e{constructor(e,t){var r;this.model=e,this.urlTemplate=t,this.activeItems={},this.toBeReleased=new Set,this.mergeFn=null!=(r=this.model.prototype._assetStoreUpdate)?r:this.defaultUpdate}get count(){return Object.keys(this.activeItems).length}aquireItem(e){var t,r;return e instanceof this.model?(t=e.storeId,console.assert(this.model===e.constructor),null==this.activeItems[t]&&(console.warn("Re-aquiring released object",e),this.activeItems[t]={item:e,count:0},this.toBeReleased.delete(this.activeItems[t]))):(t=e.id,null!=this.activeItems[t]?(r=this.activeItems[t].item,this.mergeFn(r,e)):this.activeItems[t]={item:new this.model(e),count:0}),this.activeItems[t].count++,this.activeItems[t].item}async aquireItemP(e,t){var r;return null!=this.activeItems[e]?(this.activeItems[e].count++,this.activeItems[e]):(r=await de.prototype.requestP("GET",t),this.aquireItem(r))}defaultUpdate(e,t){var r;if(r=new Date(e.attributes.updated),new Date(t.updated)>r)return e.setAttributes(t)}releaseItem(e){var t;return t=e.storeId,null==this.activeItems[t]?console.warn("Releasing unknown item",e):(this.activeItems[t].count--,this.activeItems[t].count<1?(this.toBeReleased.add(this.activeItems[t]),delete this.activeItems[t]):void 0)}cleanUp(){return this.toBeReleased.clear()}static instance(t){var r;return r=(0,Fi.Z)(t),this._instance||(this._instance={}),null==this._instance[r]&&(this._instance[r]=new e(t)),this._instance[r]}},(0,i.Z)(Ri.prototype,"cleanUp",[Zi.Z],Object.getOwnPropertyDescriptor(Ri.prototype,"cleanUp"),Ri.prototype),Ri),Li=o.Z.makePropertyDecorator(((e,t,r,i)=>{n.Z.is_enabled(i)||Object.defineProperty(e,t,r)}));var Mi,Ui;let $i=(Mi=class{constructor(){(0,P.Z)(this,"data",Ui,this)}formatDateAgo(e){var t=(new Date-e)/1e3;return this.formatSecondsAgo(t)}formatSecondsAgo(e,t){null==t&&(t=!1);var r,i,n,o,s=this._getLocale().fields;return e<60?(r=e,i="second",n="$$$/js/viewer/loupe/sidebar/timestamp/seconds_ago={x} s"):e<3600?(r=e/60,i="minute",n="$$$/js/viewer/loupe/sidebar/timestamp/minutes_ago={x} m"):e<86400?(r=e/3600,i="hour",n="$$$/js/viewer/loupe/sidebar/timestamp/hours_ago={x} h"):e<2592e3?(r=e/86400,i="day",n="$$$/js/viewer/loupe/sidebar/timestamp/days_ago={x} d"):e<31536e3?(r=e/2592e3,i="month",n="$$$/js/viewer/loupe/sidebar/timestamp/months_ago={x} M"):(r=e/31536e3,i="year",n="$$$/js/viewer/loupe/sidebar/timestamp/years_ago={x} Y"),r=Math.floor(r),t?(0,y.zt)(n,{x:r}):(o=s[i].pastRelativeTime,(o=1===r||1===o.length?o[0]:o[1]).replace("{0}",r))}formatDateRange(e,t,r){var i;i="full"===r?"yMMMEd":"short"===r?"yMd":"yMMMd";var n,o=this._getLocaleCalendar().dateTimeFormats.intervalFormats[i];if(t<e){var s=t;t=e,e=s}if(e.getFullYear()===t.getFullYear())if(e.getMonth()===t.getMonth()){if(e.getDay()===t.getDay())return this.formatDate(e,r);n="d"}else n="M";else n="y";var a=o[n];return this._fillPattern(a,e,t)}formatDateTime(e,t){var r=this._getLocaleCalendarPattern("dateTime",t);return r=(r=r.replace("{0}",this._getLocaleCalendarPattern("time",t))).replace("{1}",this._getLocaleCalendarPattern("date",t)),this._fillPattern(r,e)}formatTime(e,t){var r=this._getLocaleCalendarPattern("time",t);return this._fillPattern(r,e)}formatDate(e,t){var r=this._getLocaleCalendarPattern("date",t);return this._fillPattern(r,e)}formatShortYearMonth(e){var t=this._getLocaleCalendar().dateTimeFormats.availableFormats.yMMM,r=this._fillPattern(t,e);return r[0].toUpperCase()+r.substr(1)}formatWideYearMonth(e){var t,r=this._getLocaleCalendar().dateTimeFormats.availableFormats.yMMMM;return(t=r?this._fillPattern(r,e):this.formatShortYearMonth(e))[0].toUpperCase()+t.substr(1)}getMonthField(e,t){var r=this._getLocaleCalendar().months;return t=t||"wide",(r["stand-alone"][t]||r.format[t])[e]}getDayField(e,t){var r=this._getLocaleCalendar().days;return t=t||"wide",(r["stand-alone"][t]||r.format[t])[e]}_getLocale(){return this.data}_getLocaleCalendar(){return this._getLocale().calendar}_getLocaleCalendarPattern(e,t){return"date"===e||"dateTime"===e?"spectrum-custom-compact"===t?t="medium":"spectrum-full"===t&&(t="full"):"time"===e&&("spectrum-custom-compact"!==t&&"spectrum-full"!==t||(t="short")),this._getLocaleCalendar()[e+"Formats"][t||"long"]||""}_fillPattern(e,t,r){var i,n=t,o=this._getLocaleCalendar(),s=this._getLocale().timeZoneNames;if(r){var a,l,u=e.replace(/'(''|[^'])*'/g,"").match(/([a-zA-z])\1*/g);e:for(f=0;f<u.length;f++)for(l=u[f],a=f+1;a<u.length;a++)if(l===u[a]){i=l;break e}}for(var c=function(e,t){for(var r=t-(e=e.toString()).length,i="",n=0;n<r;n++)i+="0";return i+e},d=function(e,a){var l=e.length;switch(e===i&&(n===t?t=void 0:n=r),a){case"h":case"H":var u=n.getHours();return"h"===a&&(u>11&&(u-=12),0===u&&(u=12)),2===l?c(u,2):u;case"m":case"s":var d="m"===a?n.getMinutes():n.getSeconds();return 2===l?c(d,2):d;case"a":var h=o.dayPeriods.format,p=n.getHours()<12?"am-variant":"pm-variant";return h.hasOwnProperty(p)||(p="am-variant"===p?"am":"pm"),o.dayPeriods.format[p];case"y":var f=n.getFullYear();switch(l){case 1:return f;case 2:return f.toString().substr(-2)}break;case"M":case"L":if(1===l)return n.getMonth()+1;if(2===l)return c(n.getMonth()+1,2);case"E":case"c":var g;if(3===l?g="abbreviated":4===l?g="wide":5===l&&(g="narrow"),g){var m,v=o["M"===a||"L"===a?"months":"days"];if("M"===a||"E"===a?(m=v.format[g])||(m=v["stand-alone"][g]):(m=v["stand-alone"][g])||(m=v.format[g]),d=m["M"===a||"L"===a?n.getMonth():n.getDay()])return d}break;case"d":return d=n.getDate(),2===l?c(d,2):d;case"z":case"v":var y=n.getTimezoneOffset();if(0===y)return s.gmtZeroFormat||s.gmtFormat.replace("{0}","");var b=s.gmtFormat,_=s.hourFormat.split(";",2),w=y<0?_[0]:_[1],P=Math.abs(y),A=(u=Math.floor(P/60),P%60);return w=(w=(w=(w=w.replace("HH",c(u,2))).replace("H",u)).replace("mm",c(A,2))).replace("m",A),b.replace("{0}",w)}return""},h=e.match(/(^|''|[^'])+/g),p="",f=0;f<h.length;f++){var g=h[f];p+=f%2==0?g.replace(/([a-zA-z])\1*/g,d):g}return p.replace("''","'")}},Ui=(0,i.Z)(Mi.prototype,"data",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi);const zi=new $i;var qi;const Hi=null!==(qi=window.CLDR)&&void 0!==qi?qi:zi;var Ji=r(242898);class Vi{static calculateFriendlyTemporalValues(){let{duration:e,inPoint:t,temporalFraction:r=Vi.TEMPORAL_FRACTION_DEFAULT}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{trimStart:null!=t?t/r:null,trimEnd:null!=e?(t+e)/r:null}}}Vi.TEMPORAL_FRACTION_DEFAULT=1e8;class Bi extends tr{uploadedJP(){return this._uploadPromise}uploadJP(e){var t;return null!==(t=this._uploadPromise)&&void 0!==t||(this._uploadPromise=this._uploadJP(e)),this._uploadPromise}async _uploadJP(e){return await this.initializedJP(),await Promise.all(this.attributes.parts.map((t=>{let{href:r,byte_start:i,byte_end:o}=t;return n.Z.is_enabled("force_develop_aux_upload_failure")&&(r+="error"),fetch(r,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:new Uint8Array(e,i,o-i+1)}).then((async e=>{if(!e.ok){const t=await e.text();throw b.Z.track("Error","binary_upload_data","API",{"event.errorType":"auxUpload.Error","event.uploadMethod":"direct_upload","event.url":r,"event.error_desc":t}),new Error("Error uploading aux")}return e}))}))),this.requestJP("POST",this.linkFullPath("rels/complete_upload"))}}var Wi=r(148178);const Gi=async(e,t)=>{"string"==typeof t&&(t=(new TextEncoder).encode(t));const r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")};var Xi,Ki,Yi;let Qi=(Xi=class extends tr{constructor(e,t){super(e),(0,P.Z)(this,"pollingForRendition",Ki,this),(0,P.Z)(this,"importedByUser",Yi,this),this.parent=t}setAttributes(e){super.setAttributes(e),null!=e.importedByUser&&(this.importedByUser=new yr(e.importedByUser))}get isAutoVersion(){return!this.isNamedVersion}get isNamedVersion(){return!0===this.attributes.payload.createdManually}get name(){return this.attributes.payload.name}get develop(){return this.attributes.payload.develop}hasExternalDevelopSettings(){return this.hasLink("/rels/xmp/develop")}async getExternalEditSettingsJP(){if(null!=this.externalEditSettings)return this.externalEditSettings;const e=await de.prototype.requestJP("GET",this.linkHref("/rels/xmp/develop"),null,{contentType:""});return this.externalEditSettings=e[0]}async getDevelopSettingsJP(){return this.hasExternalDevelopSettings()?await this.getExternalEditSettingsJP():this.attributes.payload.develop.xmpCameraRaw}async renameJP(e){var t;if(0===(null===(t=e)||void 0===t?void 0:t.length)&&(e=null),e!==this.name)return await this.updateAttributesP("renameVersion",{payload:{name:e}})}async uploadExternalizedSettingsJP(e){const t=this.linkHref("/rels/xmp_develop_create").replace("{revision_id}",this.attributes.revision_ids[0]);return await de.prototype.requestJP("PUT",t,e,{contentType:"application/rdf+xml"}),await this.refreshP()}getRenditionHref(e,t){return this.hackCacheableLinkHref(`/rels/rendition_type/${e}`)}hackCacheableLinkHref(e){var t;return null===(t=this.linkHref(e))||void 0===t?void 0:t.replace("/v2/","/v2c/")}pollForRendition(){let e=0;if(!this.pollingForRendition){this.pollingForRendition=!0;var t=()=>{e++,this.refreshP().done((()=>{this.shouldPollForRendition()&&e<6?setTimeout(t,1e3):this.shouldPollForRendition()||(this.pollingForRendition=!1)})).fail((()=>this.pollingForRendition=!1))};t()}}shouldPollForRendition(){var e;if(null==(null===(e=this.attributes.links)||void 0===e?void 0:e.href))return!0}getDevelopPixelMasks(){var e,t;return null!==(e=null===(t=this.attributes.payload.develop)||void 0===t?void 0:t.masks)&&void 0!==e?e:{}}async fetchDevelopPixelMasksJP(){const e=this.getDevelopPixelMasks(),t=this.parent.parentAsset;return Object.fromEntries(await Promise.all(Object.entries(e).map((async e=>{let[r,{digest:i}]=e;const n=t.getAuxHref(r),[o]=await this.requestJP("GET",n,null,{responseType:"arraybuffer"});return[i,o]}))))}},Ki=(0,i.Z)(Xi.prototype,"pollingForRendition",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yi=(0,i.Z)(Xi.prototype,"importedByUser",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xi);var en=r(784090);const tn=function(){class e extends Di{constructor(e,t){var r;super(e),this._dirty=!0,null==(null!=t?t.limit:void 0)&&(n.Z.is_enabled("override_oz_limit_5")?t=en.extend(t||{},{limit:5}):n.Z.is_enabled("override_oz_limit_500")?t=en.extend(t||{},{limit:500}):100!==R.Z.defaultPageSize&&(t=en.extend(t||{},{limit:R.Z.defaultPageSize}))),this.pageSize=null!=(r=null!=t?t.limit:void 0)?r:100,this.options=t,this.reset()}dispose(){return super.dispose(),this._disposeModels()}setCacheSource(e){this.cacheSource=e}reset(){return this._dirty?(this._models?this._disposeModels():this._models=new ke,n.Z.is_enabled("custom_sort_dialog")&&(this.customSortPropPath=null),this.indices={},this.fetchUrl=this.href,this.finished=!1,this.totalCount=null,this.length=0,this.page=0,this._dirty=!1,null!=this.options&&(this.pageSize=this.options.limit,this.fetchUrl+="?"+en.param(this.options)),null==this.pageSize&&(this.pageSize=100),this):this}_disposeModels(){return n.Z.is_enabled("asset_store")&&this._models.forEach((function(e){if(null!=e.dispose)return e.dispose()})),this._models.splice(0,this._models.length)}numLoaded(){return this.length}_parse(e){return e.resources}fetchP(){return null==this.fetchUrl?en.Deferred().reject().promise():this.fetching?this.fetching:(this.fetching=this.requestP("GET",this.fetchUrl)).always((()=>this.fetching=void 0)).fail(((e,t,r)=>(null!=this.modelName?this.reportOzFailure(`fetchP${this.modelName}Failure`,e,t,r):this.reportOzFailure("fetchPFailure",e,t,r),this.fetchUrl=void 0,this._dirty=!0))).done((e=>{var t,r,i,o,s,a,l,u,c;for(this.length,t=0,o=(i=this._parse(e)).length;t<o;t++)(r=i[t]).base=e.base,a=null!=this.model.store&&n.Z.is_enabled("asset_store")?this.model.store.aquireItem(r,this):new this.model(r,this),this._add(a);if(this.page++,0===i.length?this.fetchUrl=void 0:(l=null!=(u=e.links)&&null!=(c=u[this.nextPageLink||"next"])?c.href:void 0,s=new ye(e.base),this.fetchUrl=s.fullHref(l)),null==this.fetchUrl)return this.finished=!0,this.totalCount=this._models.length}))}createP(e,t,r){var i,n,o;return null!=t.payload&&"Catalog"!==this.modelName&&(o=(new Date).toISOString(),null==(i=t.payload).userCreated&&(i.userCreated=o),null==(n=t.payload).userUpdated&&(n.userUpdated=o)),this.requestP("PUT",e,JSON.stringify(t)).then(((e,t,i)=>{var n;return n=null!=r?r:i.getResponseHeader("Location"),this._addCreatedP(n)})).fail(((e,t,r)=>null!=this.modelName?this.reportOzFailure(`create${this.modelName}Failure`,e,t,r):this.reportOzFailure("createOzResourceFailure",e,t,r)))}async createJP(e,t,r){return await this.createP(e,t,r)}_addCreatedP(e){return this.requestP("GET",e).then((e=>{var t;return t=new this.model(e,this),this._add(t,!0),null!=this.totalCount&&this.totalCount++,t}))}deleteP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i;return i=this.index(e),r=this.at(i).href,null!=t&&(r+="?"+en.param(t)),this.requestP("DELETE",r).done((()=>{var t;if((null!=(t=this.at(i))?t.id:void 0)===e)return this._delete(i)})).fail(((e,t,r)=>null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)))}async deleteJP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return await this.deleteP(e,t)}optimisticDeleteP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i,n;return n=this.index(e),i=this.at(n).href,this._delete(n),r=()=>this.requestP("DELETE",i).fail(((e,t,r)=>null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r))),null!=t?t.then((()=>r())):r()}_unshift(e){return this._models.unshift(e)}_add(e,t){if(this.get(e.id)&&this._delete(this.index(e.id)),this._push(e),this.finished&&null!=this.totalCount)return this.totalCount++}_delete(e){if(null!=e)return n.Z.is_enabled("asset_store")&&null!=this._models.at(e).dispose&&this._models.at(e).dispose(),this._models.splice(e,1),null!=this.totalCount&&this.totalCount--,this._reindex()}firstP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<this._models.length?en.Deferred().resolve(this.at(e)).promise():1===this.pageSize?this.fetchP().then((()=>e<this._models.length?en.Deferred().resolve(this.at(e)).promise():en.Deferred().reject().promise())):this.fetchP().then((()=>this.atP(e)))}getTotalCountHref(){return null}totalCountP(){var e;return null!=this.totalCount?en.Deferred().resolve(this.totalCount).promise():(e=this.getTotalCountHref(),null!=this.totalCountPromise?this.haveQueuedTotalCount?this.totalCountPromise:this.isDirty()?(this.haveQueuedTotalCount=!0,this.totalCountPromise.then((()=>this.totalCountP()))):this.totalCountPromise:(this.totalCountPromise=null!=e?this.requestP("GET",e).done((e=>this.totalCount=Math.max(this._models.length,parseInt(e.total_count)))).then((()=>this.totalCountP())):this.allP().then((()=>this.totalCount=this._models.length)),this.totalCountPromise.always((()=>this.totalCountPromise=null))))}}return e.prototype.model=tr,e}.call(void 0),rn=function(){var e;let t=(e=class extends tn{constructor(e,t,r){super(t,r),this.parentAsset=e}_add(e,t){return t?(this._models.unshift(e),this._reindex()):super._add(e)}async deleteAllJP(){var e,t,r,i,n;for(n=[],e=0,i=(r=this.models.map((e=>e.id))).length;e<i;e++)t=r[e],n.push(this.optimisticDeleteP(t));return await Promise.all(n)}canFilterByCreator(e){return this.filterVersionsCreatedByUser(e).length>0&&this.filterVersionsNotCreatedByUser(e).length>0}_versionIsCreatedByUser(e,t){var r,i;return r=R.Z.account.id,t?null==e.importedByUser:r===(null!=(i=e.importedByUser)?i.id:void 0)}get _filteredOwnerVersions(){return this.modelsBindable.filter((e=>this._versionIsCreatedByUser(e,!0)))}get _filteredUserVersions(){return this.modelsBindable.filter((e=>this._versionIsCreatedByUser(e,!1)))}get _filteredNotOwnerVersions(){return this.modelsBindable.filter((e=>!this._versionIsCreatedByUser(e,!0)))}get _filteredNotUserVersions(){return this.modelsBindable.filter((e=>!this._versionIsCreatedByUser(e,!1)))}filterVersionsCreatedByUser(e){return e?this._filteredOwnerVersions:this._filteredUserVersions}filterVersionsNotCreatedByUser(e){return e?this._filteredNotOwnerVersions:this._filteredNotUserVersions}async _createVersionJP(e,t,r){var i,o,s,a,l,u,c;if(t.processingModel="lightroom",a={subtype:"edit",asset:{sha256:this.parentAsset.importSource().sha256},payload:{createdManually:r,develop:t},importedOnDevice:{formFactor:"web"}},r?e.length>0&&(a.payload.name=e):null!=e&&(a.payload.userCreated=a.payload.userUpdated=e),null!=t.xmpCameraRaw&&(t.xmpCameraRaw.length>R.Z.XMP_CAMERA_RAW_MAX_LENGTH||n.Z.is_enabled("force_externalize_edit_settings")||n.Z.is_enabled("jigsaw")&&null!==t.masks)){if(c=t.xmpCameraRaw,n.Z.is_enabled("jigsaw"))l=await Gi(0,c);else{i=new Blob([t],{type:"text/xml"});try{l=await ur.digestP(i,!1,2)}catch(e){throw u=e,b.Z.reportFailure("versionExternalDigestFailure"),u}}t.xmpCameraRaw={sha256:l}}return o=this.createJP(`${this.href}/${this.createUuid()}`,a),null!=c&&(s=await o,await s.uploadExternalizedSettingsJP(c)),o}createAutoJP(e,t){var r;return r={},null!==this.parentAsset.getContentType()&&(r["content.mimeType"]=this.parentAsset.getContentType()),b.Z.track("Develop","Versions","implicitly-created",r),this._createVersionJP(t,e,!1)}createNamedJP(e,t){return this._createVersionJP(e,t,!0)}async createNamedFromAutoVersionJP(e,t){var r;return r=g.Z.extend({},t.develop),t.hasExternalDevelopSettings()&&(r.xmpCameraRaw=await t.getDevelopSettingsJP()),delete r.userUpdated,delete r.userCreated,this._createVersionJP(e,r,!0)}},(0,i.Z)(e.prototype,"_filteredOwnerVersions",[Wi.Z],Object.getOwnPropertyDescriptor(e.prototype,"_filteredOwnerVersions"),e.prototype),(0,i.Z)(e.prototype,"_filteredUserVersions",[Wi.Z],Object.getOwnPropertyDescriptor(e.prototype,"_filteredUserVersions"),e.prototype),(0,i.Z)(e.prototype,"_filteredNotOwnerVersions",[Wi.Z],Object.getOwnPropertyDescriptor(e.prototype,"_filteredNotOwnerVersions"),e.prototype),(0,i.Z)(e.prototype,"_filteredNotUserVersions",[Wi.Z],Object.getOwnPropertyDescriptor(e.prototype,"_filteredNotUserVersions"),e.prototype),e);return t.prototype.model=Qi,t.prototype.modelName="Version",t}.call(void 0);var nn=r(690221),on=r(784090);const sn=function(){class e{constructor(e){this.maxRequests=e}get numActiveRequests(){return Object.keys(this.activeRequests).length}get numPendingRequests(){return this.pendingRequests.length}pollForValidRenditionsP(e,t,r){return this._pollForRenditionsP(e,r,!1,t)}pollForRenditionsP(e,t,r){var i;return i=!(e.isVideo()&&e.wasDevelopUpdatedInLastThirtyMins()&&n.Z.is_enabled("video_editing")),this._pollForRenditionsP(e,r,i,t)}_pollForRenditionsP(e,t,r,i){var n,o;return t||(t=["thumbnail2x"],e.isVideo()&&t.push("360p")),null!=(n=this.activeRequests[e.id])&&n.allowInvalid===r&&t.every((e=>n.renditions.includes(e)))?(n.requestCount++,n.continueCallbacks.push(i),n.loadedP):(o=on.Deferred(),n={id:e.id,asset:e,allowInvalid:r,requestCount:1,loadedP:o.promise(),deferred:o,continueCallbacks:[i],renditions:t},this.pendingRequests.push(n),this._activateNextRequestIfPossible(),n.loadedP)}_activateNextRequestIfPossible(){var e;if(this.numActiveRequests<this.maxRequests&&this.numPendingRequests>0)return e=this.pendingRequests.shift(),this._activatePolling(e)}_activatePolling(e){return e.totalWaitTime=0,e.pollingPeriod=5e3,e.maximumWaitTime=25e5,this.activeRequests[e.id]=e,this._refreshAndCheck(e)}_stopPolling(e,t){return delete this.activeRequests[e.id],t?e.deferred.resolve():e.deferred.reject(),this._activateNextRequestIfPossible()}_shouldContinuePolling(e){var t,r,i,n;if(!((null!=(i=e.continueCallbacks)?i.length:void 0)>0))return!1;for(t=0,r=(n=e.continueCallbacks).length;t<r;t++)if((0,n[t])())return!0;return!1}_refreshAndCheck(e){var t,r;return this._shouldContinuePolling(e)?(({asset:t,renditions:r}=e),e.allowInvalid&&t.hasRenditions(r)||!e.allowInvalid&&t.hasValidRenditions(r)?(b.Z.report("renditionsGenerated",{loadTimeMs:e.totalWaitTime,webSource:t.wasImportedByWeb()}),this._stopPolling(e,!0)):(e.totalWaitTime+=e.pollingPeriod,e.totalWaitTime>e.maximumWaitTime?(b.Z.reportFailure("renditionsNotGenerated",{webSource:t.wasImportedByWeb()}),this._stopPolling(e,!1)):(setTimeout((()=>t.refreshP().done((()=>this._refreshAndCheck(e))).fail((()=>this._stopPolling(e,!1)))),e.pollingPeriod),e.pollingPeriod>=6e4?void 0:e.pollingPeriod+=5e3))):this._stopPolling(e,!1)}}return e.prototype.pendingRequests=[],e.prototype.activeRequests={},e}.call(void 0),an=(0,nn.Z)("general:develop_save_sequence"),ln=new sn(10);class un{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;this.asset=e,this.payload={develop:t,userUpdated:i},this.masks=r,this.externalEditSettings=null}setExternalSettings(e){this.externalEditSettings=e}}class cn{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.saveDevelopInfo=new un(...t)}saveJP(e){return new Promise((async(t,r)=>{const i=new Promise((e=>{this.saveDevelopInfo.resolveRenditionsPromise=e})).finally((()=>null==e?void 0:e())),o=Object.assign(this.saveDevelopInfo,{startTime:new Date,resolve:t,reject:r,renditionsDonePromise:i,saveSequence:[this._configureDevelopJP,this._externalizeDevelopSettingsJP,this._createNewAssetRevisionJP,this._uploadAuxJP,this._uploadEditSettingsJP,this._pollForUpdatedRenditionsJP]});try{window.onbeforeunload=()=>(0,y.zt)("$$$/js/viewer/save/save_in_progress=Save in progress"),n.Z.is_enabled("debug")&&an("Save sequence started.");for(const e of o.saveSequence)await e.call(this,o);t()}catch(e){console.error(e),r(),b.Z.reportFailure("setDevelopJPFailure")}finally{window.onbeforeunload=null,n.Z.is_enabled("debug")&&an("Save sequence completed.")}}))}_configureDevelopJP(e){const{payload:{develop:t},masks:r,asset:i}=e;return new Promise(((o,s)=>{let a=n.Z.is_enabled("force_externalize_edit_settings")||Object.keys(r).length>0;if(n.Z.is_enabled("force_partial_externalize_edit_settings")){if(!window.confirm("Create a partial external edit (to test this sync state)? Check your debug features if this is unexpected"))return s();a=!0}i.isVideo()||(a||t.xmpCameraRaw.length>R.Z.XMP_CAMERA_RAW_MAX_LENGTH)&&(n.Z.is_enabled("debug")&&console.log("Making inline edit settings external. Edit settings size in bytes: "+t.xmpCameraRaw.length),e.setExternalSettings(t.xmpCameraRaw)),o()}))}_externalizeDevelopSettingsJP(e){let{payload:{develop:t},externalEditSettings:r}=e;return new Promise((async(e,i)=>{try{null!=r&&(t.xmpCameraRaw={},t.xmpCameraRaw.sha256=await Gi(0,r)),e()}catch(e){console.error(e),b.Z.reportFailure("editSetDevelopDigestGenFailure"),i()}}))}async _createNewAssetRevisionJP(e){let{asset:t,payload:r,masks:i,externalEditSettings:n,renditionsDonePromise:o}=e;if(t.isVideo()){const e=null==n,i=()=>({payload:r});try{await t.createChildRevisionJP("setDevelopSettings",i,e)}catch(e){console.error(e),b.Z.reportFailure("editSetDevelopRevisionFailure")}}else{const e=Object.fromEntries(await Promise.all(Object.entries(i).filter((e=>{let[,t]=e;return t instanceof ArrayBuffer})).map((async e=>{let[t,r]=e;return[t,await Gi(0,r)]})))),s=n=>{if(n)return;const o=new Set(Object.keys(i));if(r.aux=void 0,0===o.size)r.develop.masks=null;else{r.develop.masks={};const n=t.getAuxIdsByDigest();for(const e of t.getDevelopPixelMasksDigests())if(!o.has(e)){const t=n[e];t&&(r.develop.masks[t]=null)}for(const l of o){let o=n[l];if(!o){do{var s;o=t.createUuid()}while(null!=(null===(s=t.getAux())||void 0===s?void 0:s[o]));const n=i[l],u=e[l];var a;n&&u&&(null!==(a=r.aux)&&void 0!==a||(r.aux={}),r.aux[o]={digest:l,sha256:u,fileSize:n.byteLength,type:"mask"})}r.develop.masks[o]={digest:l}}}return{payload:r}},a=t.selectedVersionUserUpdated;null!=t.selectedVersion&&(t.selectedVersionUserUpdated=r.develop.userUpdated);const l=null==n;try{await t.createChildRevisionJP("setDevelopSettings",s,l,o)}catch(e){throw console.error(e),t.selectedVersionUserUpdated=a,b.Z.reportFailure("editSetDevelopRevisionFailure"),e}}}async _uploadAuxJP(e){let{asset:t,payload:{aux:r},masks:i}=e;if(!r)return;const n=[];return await Promise.all(Object.entries(r).map((e=>{let[r,{digest:o,sha256:s}]=e;const a=i[o];if(a instanceof ArrayBuffer)return n.push(r),t.uploadAuxJP(a,s)}))),yo.pollAssetUntilCheckJP(yo,t.linkHref("self"),(e=>n.every((t=>e.hasLink(`/rels/aux/${t}`)))))}_uploadEditSettingsJP(e){let{asset:t,externalEditSettings:r}=e;return new Promise((async(e,i)=>{try{if(null!=r&&!n.Z.is_enabled("force_partial_externalize_edit_settings")){n.Z.is_enabled("debug")&&console.log("Edit settings external. Uploading now...");const e=t.getLatestRevisionHref()+"/xmp/develop";await t.requestP("PUT",e,r,{contentType:"application/rdf+xml",headers:{"X-Generate-Renditions":"all"}})}e()}catch(e){console.error(e),i(),b.Z.reportFailure("editSetDevelopUploadSettingsFailure")}}))}_pollForUpdatedRenditionsJP(e){let{asset:t,startTime:r,resolveRenditionsPromise:i}=e;return new Promise((async(e,n)=>{const o=new Date;b.Z.report("editUpdateAsset",{loadTimeMs:o-r});try{const r=t.safeToJSPromise(ln.pollForValidRenditionsP(t,(()=>!0)));e(),await r,i();const n=new Date;b.Z.report("editGenerateRenditions",{loadTimeMs:n-o})}catch(e){console.error(e),b.Z.reportFailure("editRenditionGenerationFailure")}}))}}const dn={_seenKeywords:{},registerKeywords(e){Object.assign(this._seenKeywords,e.getKeywords())},getAllKeywords(){return Object.keys(this._seenKeywords)}};var hn=r(537188),pn=r.n(hn),fn=r(165764),gn=r.n(fn),mn=r(774154),vn=r.n(mn),yn=r(811949),bn=r.n(yn),_n=r(934809),wn=r.n(_n),Pn=r(12509),An=r.n(Pn),Sn=r(760693),xn={};xn.styleTagTransform=An(),xn.setAttributes=bn(),xn.insert=vn().bind(null,"head"),xn.domAPI=gn(),xn.insertStyleElement=wn(),pn()(Sn.Z,xn);const Cn=Sn.Z&&Sn.Z.locals?Sn.Z.locals:void 0;var On,kn,En,In,Tn,Dn,Rn,jn,Zn,Fn,Nn,Ln,Mn,Un,$n,zn,qn,Hn,Jn,Vn,Bn,Wn,Gn,Xn,Kn,Yn,Qn,eo,to;new class{get width(){return null==this.scrollBarWidth&&this.calculateScrollBarWidth(),this.scrollBarWidth}calculateScrollBarWidth(){const e=window.document.createElement("div");window.document.body.appendChild(e),e.className=Cn.test_outer;const t=window.document.createElement("div");e.appendChild(t);const r=e.offsetWidth-t.offsetWidth;this.scrollBarWidth=r||0,n.Z.is_enabled("debug_verbose")&&console.log(`ScrollBarInfo.width calculated as ${this.scrollBarWidth}`),e.removeChild(t),window.document.body.removeChild(e)}},r(790608),(!D.Z.safari||D.Z.safari>5)&&window.File&&(window.FileReader&&(On=null!=(kn=window.crypto)?kn:window.msCrypto)&&(null!=(En=On.subtle)?En:On.webkitSubtle)||window.Worker)&&window.XMLHttpRequest&&(new XMLHttpRequest).withCredentials;let ro=(In=dt.byVal,Tn=dt.byVal,Dn=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"croppedWidth",Rn,this),(0,P.Z)(this,"croppedHeight",jn,this)}},Rn=(0,i.Z)(Dn.prototype,"croppedWidth",[In],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jn=(0,i.Z)(Dn.prototype,"croppedHeight",[Tn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dn),io=(Zn=dt.byVal,Fn=dt.byVal,Nn=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"originalWidth",Ln,this),(0,P.Z)(this,"originalHeight",Mn,this)}},Ln=(0,i.Z)(Nn.prototype,"originalWidth",[Zn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mn=(0,i.Z)(Nn.prototype,"originalHeight",[Fn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn),no=(Un=dt.byVal,$n=dt.byOptionalRef(ro),zn=dt.byOptionalRef(io),qn=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"captureDate",Hn,this),(0,P.Z)(this,"develop",Jn,this),(0,P.Z)(this,"importSource",Vn,this)}},Hn=(0,i.Z)(qn.prototype,"captureDate",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jn=(0,i.Z)(qn.prototype,"develop",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vn=(0,i.Z)(qn.prototype,"importSource",[zn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn),oo=(Bn=dt.alias("/rels/rendition_type/2048"),Wn=dt.byVal,Gn=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"rendition2048",Xn,this)}},Xn=(0,i.Z)(Gn.prototype,"rendition2048",[Bn,Wn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gn),so=(Kn=dt.byRef(no),Yn=dt.byRef(oo),Qn=class extends Qt{constructor(){super(...arguments),(0,P.Z)(this,"payload",eo,this),(0,P.Z)(this,"links",to,this)}},eo=(0,i.Z)(Qn.prototype,"payload",[Kn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),to=(0,i.Z)(Qn.prototype,"links",[Yn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qn);var ao,lo,uo,co,ho,po,fo=r(784090);const go=new sn(10),mo=["score","balancing","content","dof","emphasis","harmony","lighting","repetition","rot","symmetry","vivid"];let vo=(ao=Li("jigsaw"),lo=class extends tr{constructor(){super(...arguments),(0,P.Z)(this,"importedByUser",uo,this),(0,P.Z)(this,"_selectedVersion",co,this),(0,P.Z)(this,"generatingRenditionsCount",ho,this),(0,P.Z)(this,"revising",po,this)}setAttributes(e){var t,r,i;super.setAttributes(e),null!==(t=this.namedVersions)&&void 0!==t||(this.namedVersions=new rn(this,`${this.linkHref("self")}/versions`,{created_as:"manual",embed:"user"})),null!==(r=this.autoVersions)&&void 0!==r||(this.autoVersions=new rn(this,`${this.linkHref("self")}/versions`,{created_as:"auto",embed:"user"})),n.Z.is_enabled("jigsaw")&&(null!==(i=this.auxParts)&&void 0!==i||(this.auxParts=new Map)),null!=e.importedByUser?this.importedByUser=new yr(e.importedByUser):this.importedByUser=null,dn.registerKeywords(this)}payload(){return this.attributes.payload}xmp(){return this.attributes.payload.xmp}develop(){return this.payload().develop}importSource(){return this.attributes.payload.importSource}purgeDate(){return this.attributes.payload.purgeDate}personName(){return this.attributes.payload.name}restoreInProgress(){var e;return null===(e=this.attributes)||void 0===e?void 0:e.restore_in_progress}purgeRemainingDays(){const e=(new Date).getTime(),t=Date.parse(this.purgeDate())-e;return Math.floor(t/864e5)}iacDeleteRemainingHours(){const e=(new Date).getTime()-this.getOzCreatedDate();let t=Math.max(e,0);return t=48-Math.floor(t/36e5),t}faceData(){var e,t,r;return null===(e=this.attributes.payload.xmp)||void 0===e||null===(t=e["mwg-rs"])||void 0===t||null===(r=t.Regions)||void 0===r?void 0:r.RegionList}getPersonIdsDetected(){if(null==this.faceData())return null;const e=[],t=this.faceData();for(const r in t){const i=t[r].Extensions["adobe-fi"].People;if(i)for(const t of Object.keys(i))e.push(t)}return e}getPersonRecognitionAppName(){if(null==this.faceData())return null;const e=this.faceData();for(const t in e)return e[t].Extensions["adobe-fi"].Application}getPersonRecognitionAppVersion(){if(null==this.faceData())return null;const e=this.faceData();for(const t in e)return e[t].Extensions["adobe-fi"].Version}debugGetKpTags(){const e=[];for(const t of this.getKeywordsArray())0===t.indexOf("kp_")&&e.push(t);return e}isImportedBy(e){var t;return(null===(t=this.importSource())||void 0===t?void 0:t.importedBy)===e.id}hasImportDevice(){var e;return null!=(null===(e=this.importSource())||void 0===e?void 0:e.importedOnDevice)}getImportDevice(){var e,t;return null!==(e=null===(t=this.importSource())||void 0===t?void 0:t.importedOnDevice)&&void 0!==e?e:""}getFileSize(){var e,t;return null!==(e=null===(t=this.importSource())||void 0===t?void 0:t.fileSize)&&void 0!==e?e:0}getFileSizeInMB(){var e;if(null!=(null===(e=this.importSource())||void 0===e?void 0:e.fileSize)){const e=this.importSource().fileSize;return Math.round(e/1048576)}}getContentType(){var e;return null===(e=this.importSource())||void 0===e?void 0:e.contentType}hasKeyword(e){return!0===this.getKeywords()[e]}getKeywords(){var e,t;return(null===(e=this.xmp())||void 0===e||null===(t=e.dc)||void 0===t?void 0:t.subject)||{}}getKeywordsArray(){const e=this.getKeywords(),t=[];for(const r in e)e[r]&&t.push(r);return t.sort(),t}getCaptureDate(){const{captureDate:e}=this.payload();if(e===ue||null===e)return null;{const t=e.slice(0,19);return new Date(Date.parse(t))}}getImportDate(){var e;const t=null===(e=this.importSource())||void 0===e?void 0:e.importTimestamp;return t===ue?null:new Date(Date.parse(t))}getFormattedCaptureDate(){const e=this.getCaptureDate();return null!=e?Hi.formatDate(e,"long"):(0,y.zt)("$$$/js/oz_resource/unknown_date=Date unknown")}getFormattedImportDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long";const t=this.getImportDate();return null!=t?Hi.formatDate(t,e):(0,y.zt)("$$$/js/oz_resource/unknown_date=Date unknown")}getFileName(){var e,t;return n.Z.is_enabled("debug_empty_filenames")?"":(null===(e=this.importSource())||void 0===e?void 0:e.fileName)||(null===(t=this.payload())||void 0===t?void 0:t.FileName)||""}getFileExtension(){const e=this.getFileName(),t=e.lastIndexOf(".");if(-1!==t){let r;return r=e.substr(t+1).toLowerCase()}return""}getAspectRatio(){const e=this.getCroppedDimensions();return e[0]/e[1]}getDownload2048Href(){return this.getHackRenditionDownloadHref("2048",!0)}getDownload2048FileSizeP(){if(null!=this.downloadFileSizePromise)return this.downloadFileSizePromise;const e=this.getRenditionHref("2048",!0);return null!=e?this.downloadFileSizePromise=this.requestP("HEAD",e,"",{contentType:""}).then(((e,t,r)=>{const i=r.getResponseHeader("Content-Length");return this.downloadFileSize=Math.max(0,i)})):fo.Deferred().reject()}getHackRenditionDownloadHref(e,t){return this.linkHref(`/rels/rendition_type/${e}`)}getRenditionHref(e,t){return this.hackCacheableLinkHref(`/rels/rendition_type/${e}`)}getBestRenditionTypeForSize(e,t){let r,i,o,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(n.Z.is_enabled("pixel_density_multiplier")||s)&&(e*=pr.pixelDensity,t*=pr.pixelDensity);const a=Math.max(null!=e?e:0,null!=t?t:0);for(o of(r=a>2048?["panorama","2048","1280"]:a>1280?["2048","1280"]:a>640?["1280","2048"]:a>320?["640"]:["thumbnail2x"],r))if(this.hasValidRendition(o)){i=o;break}if(null!=i)return i;for(o of r)if(this.hasRendition(o)){i=o;break}return i||"thumbnail2x"}getLargestAvailableRendition(){const e=["panorama","2048","1280","640","thumbnail2x"];for(const t of e)if(this.hasRendition(t))return t;return null}getBestRenditionHrefForSize(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.getBestRenditionTypeForSize(e,t,r);return this.getRenditionHref(i)}hackCacheableLinkHref(e){var t;return R.Z.haveNginxProxy?null===(t=this.linkHref(e))||void 0===t?void 0:t.replace("/v2/","/v2c/"):this.linkHref(e)}hasMaster(){return null!=this.attributes.links["/rels/master"]}hasProxy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2560";return null!=this.attributes.links[`/rels/proxy_type/${e}`]}hasRenditionGenerateHref(e){return this.hasLink(`/rels/rendition_generate/${e}`)}isProxyOnly(){var e;return!0===(null===(e=this.importSource())||void 0===e?void 0:e.willNotUploadMaster)}getMasterHref(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.linkHref("/rels/master"):this.hackCacheableLinkHref("/rels/master")}getProxyHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2560";return this.hackCacheableLinkHref(`/rels/proxy_type/${e}`)}hasExternalDevelopSettings(){return this.hasDevelopSettingsHref()}hasAux(){return null!=this.payload().aux}getAux(){return this.payload().aux}getAuxHref(e){return this.getAux()[e]?this.linkHref(`/rels/aux/${e}`):""}hasAuxHref(e){var t;return(null===(t=this.getAuxHref(e))||void 0===t?void 0:t.length)>0}getAuxDigests(){var e;const t=null!==(e=this.getAux())&&void 0!==e?e:{};return Object.values(t).map((e=>{let{digest:t}=e;return t}))}getAuxIdsByDigest(){const e=this.getAux();return e?Object.entries(e).reduce(((e,t)=>{let[r,{digest:i}]=t;return e[i]=r,e}),{}):{}}async uploadAuxJP(e,t){let r=this.auxParts.get(t);if(r)return r.uploadedJP();Bi.setAuthHeaders(await Ji.default.getTokenJP(),"LightroomMobileWeb1");const i=this.linkHref("/rels/aux_create/parts").replace("{sha256}",t).replace("{type}","mask").replace("{upload_status}","pending").replace("{file_size}",e.byteLength).replace("{part_size}",5242880).replace("{content_type}","application/octet-stream");return this.auxParts.set(t,r=new Bi(i)),r.uploadJP(e).finally((()=>this.auxParts.delete(t)))}hasPixelMasks(){return Object.keys(this.getPixelMasks()).length>0}getPixelMasks(){if(!this.hasAux())return{};const e=this.getAux();return Object.keys(e).filter((t=>"mask"===e[t].type)).reduce(((t,r)=>(t[r]=e[r],t)),{})}getDevelopPixelMasks(){var e,t;return null!==(e=null===(t=this.attributes.payload.develop)||void 0===t?void 0:t.masks)&&void 0!==e?e:{}}developHasPixelMasks(){return Object.keys(this.getDevelopPixelMasks()).length>0}getDevelopDevice(){var e;return null===(e=this.attributes.payload.develop)||void 0===e?void 0:e.device}hasDevelopDevice(){var e;return(null===(e=this.getDevelopDevice())||void 0===e?void 0:e.length)>0}getDevelopedByUserName(){var e,t;return null===(e=this.attributes)||void 0===e||null===(t=e.developedByUser)||void 0===t?void 0:t.full_name}async fetchDevelopPixelMasksJP(){const e=this.getDevelopPixelMasks();return Object.fromEntries(await Promise.all(Object.entries(e).map((async e=>{let[t,{digest:r}]=e;const i=this.getAuxHref(t),[n]=await this.requestJP("GET",i,null,{responseType:"arraybuffer"});return[r,n]}))))}getDevelopPixelMasksDigests(){const e=this.getDevelopPixelMasks();return Object.values(e).map((e=>{let{digest:t}=e;return t}))}getDevelopPixelMaskIds(){const e=this.getDevelopPixelMasks();return Object.keys(e)}hasDevelopSettingsHref(){return this.hasLink("/rels/xmp/develop")}getDevelopSettingsHref(){return this.linkHref("/rels/xmp/develop")}canCreateDefaultAutoVersion(){const{develop:e}=this.payload();return null!=e&&""!==e.xmpCameraRaw}async getAutoVersionDevelopSettingsJP(){var e,t;const{develop:r}=this.payload(),i=await this.getDevelopSettingsJP(),n={croppedWidth:null!==(e=r.croppedWidth)&&void 0!==e?e:this.getOriginalDimensions()[0],croppedHeight:null!==(t=r.croppedHeight)&&void 0!==t?t:this.getOriginalDimensions()[1]};return(null==i?void 0:i.length)>0&&(n.xmpCameraRaw=i),null!=r.userOrientation&&(n.userOrientation=r.userOrientation),null!=r.userUpdated&&(n.userUpdated=r.userUpdated),null!=r.crsVersion&&(n.crsVersion=r.crsVersion),n}hasSyncedAux(){const e=this.getAux(),t=this.getDevelopPixelMasks();let r=!0;for(const i in e){const e=this.hasAuxHref(i);if(null!=t[i]&&!e){r=!1;break}}return r}hasSyncedDevelopSettings(){return!!this.isVideo()||(null!=this.getDevelopSettingsSync()||this.hasDevelopSettingsHref()&&this.hasSyncedAux())}getDevelopSettingsSync(){var e;const t=null===(e=this.payload().develop)||void 0===e?void 0:e.xmpCameraRaw;return t?t.sha256?null!=this.externalEditSettings||null!=this.externalEditSettingsDigest&&this.externalEditSettingsDigest===t.sha256?this.externalEditSettings:void 0:t:""}async getDevelopSettingsJP(){if(n.Z.is_enabled("jigsaw")){if(this.isVideo()){const e=this.payload().develop;return null!=e?e:""}const e=this.getDevelopSettingsSync();if(e)return e;if(n.Z.is_enabled("debug")&&console.log("Edit settings external. Downloading now..."),this.hasDevelopSettingsHref()){let e;try{[e]=await this.requestJP("GET",this.getDevelopSettingsHref(),null,{contentType:""})}catch{throw b.Z.reportFailure("editSettingsDownloadFailure"),new Error}return this.externalEditSettingsDigest=this.payload().develop.xmpCameraRaw.sha256,this.externalEditSettings=e,e}return""}{var e;if(this.isVideo()){const e=this.payload().develop;return null!=e?e:""}const t=null===(e=this.payload().develop)||void 0===e?void 0:e.xmpCameraRaw;if(!t)return"";if(!t.sha256)return t;if(null!=this.externalEditSettings||null!=this.externalEditSettingsDigest&&this.externalEditSettingsDigest===t.sha256)return this.externalEditSettings;if(n.Z.is_enabled("debug")&&console.log("Edit settings external. Downloading now..."),this.hasDevelopSettingsHref()){let e;try{[e]=await this.requestJP("GET",this.getDevelopSettingsHref(),null,{contentType:""})}catch{throw b.Z.reportFailure("editSettingsDownloadFailure"),new Error}return this.externalEditSettingsDigest=t.sha256,this.externalEditSettings=e,e}}}getOrientation(){var e;return null===(e=this.payload().develop)||void 0===e?void 0:e.userOrientation}hasVideoDuration(){var e,t;return(null===(e=this.payload().video)||void 0===e?void 0:e.duration)&&(null===(t=this.payload().video)||void 0===t?void 0:t.frameRate)}getVideoFrameRate(){var e;const t=null===(e=this.payload().video)||void 0===e?void 0:e.frameRate;if(null!=t&&t instanceof Array&&2===t.length)try{return 1*t[0]/t[1]}catch(e){}return null}getVideoDuration(){var e,t;let r;const i=this.payload(),n=null===(e=i.video)||void 0===e?void 0:e.duration;if(null!=n&&n instanceof Array&&2===n.length)try{r=n[0]/n[1]}catch(e){}if(1===(null===(t=i.develop)||void 0===t?void 0:t.version)){const{temporal:e}=i.develop;if(null!=e){const{temporalFraction:t=1e8}=e;if(null!=e.duration){if(0===r)return null;r=e.duration/t}else null!=e.inPoint&&(r-=e.inPoint/t)}}if(r=Math.max(Math.round(r),1),null!=r){const e=r%60,t=Math.floor(r/60);return e<10?`${t}:0${e}`:`${t}:${e}`}return null}getVideoAspectRatio(){var e;const t=null===(e=this.payload().video)||void 0===e?void 0:e.displayAspectRatio;return 2!==(null==t?void 0:t.length)?null:t}getVideoTimes(){const{develop:e}=this.payload();return 1===(null==e?void 0:e.version)?Vi.calculateFriendlyTemporalValues(e.temporal):{}}getCroppedDimensions(){let e,t;const r=this.payload(),{develop:i}=r;return null!=i&&(t=i.croppedWidth,e=i.croppedHeight),t>0&&e>0||([t,e]=this.getOriginalDimensions()),t>0&&e>0||(t=480,e=320),[t,e]}getOriginalDimensions(){let e,t;const r=this.importSource();if(null!=r&&(t=r.originalWidth,e=r.originalHeight),this.isVideo()&&!this.hasProxy("1080p")&&!this.hasRendition("1080p")){const r=this.getVideoAspectRatio();null!=r&&(e>t?r.sort(((e,t)=>e-t)):r.sort(((e,t)=>t-e)),t*=r[0]*e/(r[1]*t))}return[t,e]}hasOriginalDimensions(){const e=this.importSource();return null!=e.originalWidth&&null!=e.originalHeight}getOriginalDimensionsString(){const e=this.getOriginalDimensions();let t=`${Math.round(e[0])} x ${Math.round(e[1])}`;if(this.isVideo()){const e=this.getVideoAspectRatio();null!=e&&(t+=` (${e.join(":")})`)}else t+=` (${this.getOriginalDimensionsInMP()}MP)`;return t}getOriginalDimensionsInMP(){const[e,t]=this.getOriginalDimensions();if(null!=e&&null!=t)return Math.round(e*t/1e6)}getRenditionDimensions(e){const t=this.getCroppedDimensions();if(["thumbnail2x","640","1280","2048","panorama","360p","720p","1080p"].includes(e)){let r,i;return"thumbnail2x"===e?i=r=320:"640"===e?i=r=640:"1280"===e?i=r=1280:"2048"===e?i=r=2048:"panorama"===e?i=r=8192:"360p"===e?r=360:"720p"===e?r=720:"1080p"===e&&(r=1080),this._getScaledDimensions(t,i,r)}return t}getProxyDimensions(){return this._getScaledDimensions(this.getCroppedDimensions(),2560,2560)}_getScaledDimensions(e,t,r){let[i,n]=e;return n>r&&(n=r,i=e[0]*r/e[1]|0),i>t&&(i=t,n=e[1]*t/e[0]|0),[i,n]}getCaption(){var e,t;return(null===(e=this.xmp())||void 0===e||null===(t=e.dc)||void 0===t?void 0:t.description)||""}getFlag(e){var t,r;const i=null!=e?e:null===(t=R.Z.account)||void 0===t?void 0:t.id;return null==i?"unflagged":(null===(r=this._getFlag(i))||void 0===r?void 0:r.flag)||"unflagged"}_getFlag(e){var t;return null===(t=this.attributes.payload.reviews)||void 0===t?void 0:t[e]}hasFlag(e){return this.getFlag()===e}getRating(e){var t,r;const i=null!=e?e:null===(t=R.Z.account)||void 0===t?void 0:t.id;return null==i?0:(null===(r=this._getRating(i))||void 0===r?void 0:r.rating)||0}_getRating(e){var t;return null===(t=this.attributes.payload.ratings)||void 0===t?void 0:t[e]}location(){var e;return null===(e=this.attributes.payload)||void 0===e?void 0:e.location}hasAnyLocationInfo(){return this.hasGPSLocation()||this.getLocationText().length>0||this.getCity().length>0||this.getState().length>0||this.getCountry().length>0}hasGPSLocation(){var e;const t=null===(e=this.attributes.payload)||void 0===e?void 0:e.location;return null!=(null==t?void 0:t.latitude)&&null!=t.longitude&&0!==(null==t?void 0:t.latitude)&&0!==t.longitude}getGPSLocation(){if(!this.hasGPSLocation())return null;const e=this.attributes.payload.location;return{lat:e.latitude,long:e.longitude}}getLocationText(){var e,t,r;return null!==(e=null===(t=this.xmp())||void 0===t||null===(r=t.iptcCore)||void 0===r?void 0:r.Location)&&void 0!==e?e:""}getCity(){var e,t,r,i,n;return null!==(e=null!==(t=null===(r=this.xmp())||void 0===r||null===(i=r.photoshop)||void 0===i?void 0:i.City)&&void 0!==t?t:null===(n=this.location())||void 0===n?void 0:n.city)&&void 0!==e?e:""}getState(){var e,t,r,i,n;return null!==(e=null!==(t=null===(r=this.xmp())||void 0===r||null===(i=r.photoshop)||void 0===i?void 0:i.State)&&void 0!==t?t:null===(n=this.location())||void 0===n?void 0:n.state)&&void 0!==e?e:""}getCountry(){var e,t,r,i,n;return null!==(e=null!==(t=null===(r=this.xmp())||void 0===r||null===(i=r.photoshop)||void 0===i?void 0:i.Country)&&void 0!==t?t:null===(n=this.location())||void 0===n?void 0:n.country)&&void 0!==e?e:""}_getRenditionLink(e){var t;return null===(t=this.attributes.links)||void 0===t?void 0:t[`/rels/rendition_type/${e}`]}_getRenditionLinks(){const e={},t="/rels/rendition_type/";for(const r in this.attributes.links){const i=this.attributes.links[r];r.substr(0,t.length)===t&&(e[r]=i)}return e}hasRendition(e){var t;return null!=(null===(t=this._getRenditionLink(e))||void 0===t?void 0:t.href)}hasValidRendition(e){const t=this._getRenditionLink(e);return null!=t&&null!=t.href&&!t.invalid}hasValidVideoRendition(){return this.hasValidRendition("720p")||this.hasValidRendition("1080p")}hasAnyRendition(){const e=this._getRenditionLinks();for(const t in e)if(null!=e[t].href)return!0;return!1}hasAnyValidRendition(){const e=this._getRenditionLinks();for(const t in e){const r=e[t];if(null!=r.href&&!r.invalid)return!0}return!1}hasRenditions(e){for(const t of e)if(!this.hasRendition(t))return!1;return!0}hasValidRenditions(e){for(const t of e)if(!this.hasValidRendition(t))return!1;return!0}shouldPollForBasicRenditions(){const e=["thumbnail2x"];this.isVideo()&&e.push("360p");const t=this.hasRenditions(e)&&!n.Z.is_enabled("video_editing")||this.hasRenditions(e)&&!this.isVideo()&&n.Z.is_enabled("video_editing"),r=!this.wasCreatedInLastHour()&&!n.Z.is_enabled("video_editing")||!this.wasCreatedInLastHour()&&!this.wasDevelopUpdatedInLastThirtyMins()&&n.Z.is_enabled("video_editing");if(t||r)return!1;const i=this.wasDevelopUpdatedInLastThirtyMins()&&!this.hasValidRenditions(e)&&n.Z.is_enabled("video_editing");return this.isTranscoding()||"rendering"===this.getMissingThumbStatus()||i}pollForBasicRenditionsP(e){return this.shouldPollForBasicRenditions()?go.pollForRenditionsP(this,e):fo.Deferred().reject().promise()}getTitle(){var e,t;return(null===(e=this.xmp())||void 0===e||null===(t=e.dc)||void 0===t?void 0:t.title)||""}getCopyright(){var e,t;return(null===(e=this.xmp())||void 0===e||null===(t=e.dc)||void 0===t?void 0:t.rights)||""}getCameraMake(){var e,t;return(null===(e=this.xmp())||void 0===e||null===(t=e.tiff)||void 0===t?void 0:t.Make)||""}getCameraModel(){var e,t;return(null===(e=this.xmp())||void 0===e||null===(t=e.tiff)||void 0===t?void 0:t.Model)||""}getCameraLens(){var e,t;return(null===(e=this.xmp())||void 0===e||null===(t=e.aux)||void 0===t?void 0:t.Lens)||""}getExposureTime(){var e,t;const r=null===(e=this.xmp())||void 0===e||null===(t=e.exif)||void 0===t?void 0:t.ExposureTime;if(null!=r)return 1===r[1]?r[0]+" "+(0,y.zt)("$$$/js/oz_resource/time_in_seconds=sec"):r[0]+"/"+r[1]+" "+(0,y.zt)("$$$/js/oz_resource/time_in_seconds=sec")}getFocalRatio(){var e,t;const r=null===(e=this.xmp())||void 0===e||null===(t=e.exif)||void 0===t?void 0:t.FNumber;if(null!=r)return"f / "+1*r[0]/r[1]}getIsoSpeedRating(){var e,t;const r=null===(e=this.xmp())||void 0===e||null===(t=e.exif)||void 0===t?void 0:t.ISOSpeedRatings;if(null!=r)return`ISO ${r}`}getFocalLength(){var e,t;const r=null===(e=this.xmp())||void 0===e||null===(t=e.exif)||void 0===t?void 0:t.FocalLength;if((null==r?void 0:r.length)>0)return 1*r[0]/r[1]+" mm"}hasAutoTag(e){var t;return null!=(null===(t=this.getAutoTags())||void 0===t?void 0:t[e])}getAutoTags(){var e,t;return null===(e=this.attributes.payload)||void 0===e||null===(t=e.autoTags)||void 0===t?void 0:t.tags}debugGetExperimentalAutoTags(){var e,t;return null===(e=this.attributes.payload)||void 0===e||null===(t=e["X-autoTags-hashtag2"])||void 0===t?void 0:t.tags}debugGetAutoTagClassifiers(){var e,t;return null===(e=this.attributes.payload)||void 0===e||null===(t=e["X-autoTags-classifiers"])||void 0===t?void 0:t.tags}isValid(){if(this.hasMaster()||this.hasProxy())return!0}wasImportedByWeb(){return this.hasImportDevice()?null!=this.getImportDevice().match(/Lightroom Web/)||null!=this.getImportDevice().match(/Revel Web/):null!=this.importedByUser&&this.importedByUser.id===(null===(e=R.Z.account)||void 0===e?void 0:e.id);var e}getMissingThumbStatus(){return this.getRenditionHref("thumbnail2x")?"":this.getMissingStatus()}getMissingLoupeStatus(){return!this.getRenditionHref("2048")||n.Z.is_enabled("video_editing")&&this.isVideo()&&!this.hasValidVideoRendition()?this.getMissingStatus():""}getMissingStatus(){return null!=this.getMasterHref()?this.wasCreatedInLastHour()?"rendering":n.Z.is_enabled("video_editing")&&this.isVideo()&&!this.hasValidVideoRendition()?"rendering-edits":"rendering-error":this.wasImportedByWeb()&&this.wasCreatedJustNow()?"rendering":this.wasCreatedInLastHour()?"syncing":"stuck-syncing"}wasCreatedJustNow(){const e=this.getImportDate();return null!=e&&new Date-e<6e5}wasDevelopUpdatedJustNow(){var e;const t=null===(e=this.payload().develop)||void 0===e?void 0:e.userUpdated;return null!=t&&new Date-new Date(t)<6e5}wasCreatedInLastHour(){const e=this.getImportDate();return null!=e&&new Date-e<36e5}wasDevelopUpdatedInLastThirtyMins(){var e,t,r;const i=this.isVideo()?null===(e=this.payload().develop)||void 0===e||null===(t=e.adjustments)||void 0===t?void 0:t.userUpdated:null===(r=this.payload().develop)||void 0===r?void 0:r.userUpdated;return null!=i&&new Date-new Date(i)<18e5}isVideo(){return"video"===this.attributes.subtype}isPhoto(){return"image"===this.attributes.subtype}isLayoutSegment(){return"layout_segment"===this.attributes.subtype}isDeleted(){return"deleted_image"===this.attributes.subtype||"deleted_video"===this.attributes.subtype}isPerson(){return"person"===this.attributes.subtype}isPlayable(){return this.getRenditionHref("360p")||this.getRenditionHref("720p")}isTranscoding(){return this.isVideo()&&!this.isPlayable()}hasEdits(){var e;return null!=(null===(e=this.payload().develop)||void 0===e?void 0:e.xmpCameraRaw)}hasAesthetics(){return null!=this.getAesthetics()}getAesthetics(){var e;return null===(e=this.attributes.payload)||void 0===e?void 0:e.aesthetics}getBlurScores(){var e,t;return(null===(e=this.attributes.payload)||void 0===e?void 0:e.blur)||(null===(t=this.attributes.payload)||void 0===t?void 0:t["X-Blur"])}getQuality(){var e;return null===(e=this.attributes.payload)||void 0===e?void 0:e.quality}hasBestFrameScore(){return null!=this.attributes.bestFrame&&null!=this.attributes.bestFrame.frame&&null!=this.attributes.bestFrame.face}getBestFrameScore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&["frame","face"].includes(e))return this.getBestFrameScores()[e]||0;{const{frame:e,face:t}=this.getBestFrameScores();return e+t}}getBestFrameScores(){var e;return null!==(e=this.attributes.bestFrame)&&void 0!==e?e:{}}getAestheticScore(){var e,t;return null==(null===(e=this.attributes.payload)||void 0===e?void 0:e.aesthetics)?0:null===(t=this.attributes.payload)||void 0===t?void 0:t.aesthetics.score}_getGPanoData(){var e,t;return null===(e=this.attributes.payload)||void 0===e||null===(t=e.xmp)||void 0===t?void 0:t.GPano}hasGPanoInfo(){var e,t;return null!=(null===(e=this.attributes.payload)||void 0===e||null===(t=e.xmp)||void 0===t?void 0:t.GPano)}canViewAsPanorama(){let e=!1;if(this.hasGPanoInfo()){const t=this._getGPanoData(),r=1*t.CroppedAreaImageWidthPixels/t.CroppedAreaImageHeightPixels<2;e=!D.Z.mobile&&(t.UsePanoramaViewer||"equirectangular"===this.getProjectionType())&&!r}return e}getProjectionType(){let e="";return this.hasGPanoInfo()&&(e=this._getGPanoData().ProjectionType),e}getHAOV(){let e=0;if(this.hasGPanoInfo()){const t=this._getGPanoData();e=t.CroppedAreaImageWidthPixels/t.FullPanoWidthPixels*360}return e}getVAOV(){let e=0;if(this.hasGPanoInfo()){const t=this._getGPanoData();e=t.CroppedAreaImageHeightPixels/t.FullPanoHeightPixels*180}return e}isPartialPanorama(){let e=!1;if(this.hasGPanoInfo()){const t=this._getGPanoData();e=t.CroppedAreaImageWidthPixels/t.CroppedAreaImageHeightPixels!=2}return e}getFullPanoDimensions(){const e=[];if(this.hasGPanoInfo()){var t,r;const i=this._getGPanoData(),n=this.getOriginalDimensions();e[0]=null!==(t=i.FullPanoWidthPixels)&&void 0!==t?t:n[0],e[1]=null!==(r=i.FullPanoHeightPixels)&&void 0!==r?r:n[1]}return e}set selectedVersion(e){var t;return this._selectedVersion=e,this._selectedVersionUserUpdated=null===(t=this.payload().develop)||void 0===t?void 0:t.userUpdated}get selectedVersion(){var e;return null!=this._selectedVersion&&(null===(e=this.payload().develop)||void 0===e?void 0:e.userUpdated)===this._selectedVersionUserUpdated?this._selectedVersion:null}get selectedVersionUserUpdated(){return this._selectedVersionUserUpdated}set selectedVersionUserUpdated(e){this._selectedVersionUserUpdated=e}getRenditionPublicHrefP(e){const t={rendition_path:this.linkFullPath(`/rels/rendition_type/${e}`)};return this.requestP("POST","/api/public_rendition_url",JSON.stringify(t)).then((e=>e.href))}importedByOwner(){return null==this.importedByUser}haveImporterDisplayInfo(){var e,t;return(null===(e=this.importedByUser)||void 0===e||null===(t=e.getFullName())||void 0===t?void 0:t.length)>0}getFirstRevisionHref(){return this._getRevisionHref(0)}getLatestRevisionHref(){return this._getRevisionHref(this.attributes.revision_ids.length-1)}_getRevisionHref(e){const{href:t}=this.attributes.links.self,r=`${t}/revisions/${this.attributes.revision_ids[e]}`;return this._linkBase.fullHref(r)}setDevelopJP(e,t,r,i){return new cn(this,e,t,i).saveJP(r)}setDevelopP(e,t){let r;e.processingModel="lightroom";const i=fo.Deferred(),o=new Date;let s=r=new Date;const a=()=>{s=r=new Date,b.Z.report("editUpdateAsset",{loadTimeMs:r-o});const e=fo.Deferred();return go.pollForValidRenditionsP(this,(()=>!0)).fail((()=>b.Z.reportFailure("editRenditionGenerationFailure"))).done((()=>{const e=new Date;return b.Z.report("editGenerateRenditions",{loadTimeMs:e-s}),null==t?void 0:t()})).always((()=>e.resolve())),i.resolve(),e.promise()},l=()=>{if(null==this.externalEditSettings||n.Z.is_enabled("force_partial_externalize_edit_settings"))return a();{n.Z.is_enabled("debug")&&console.log("Edit settings external. Uploading now...");const e=this.getLatestRevisionHref()+"/xmp/develop";return this.requestP("PUT",e,this.externalEditSettings,{contentType:"application/rdf+xml",headers:{"X-Generate-Renditions":"all"}}).then((()=>a()))}},u=e=>{const t=this._selectedVersionUserUpdated;null!=this._selectedVersion&&(this._selectedVersionUserUpdated=e.userUpdated);const r=null==this.externalEditSettings;return this._createChildRevisionP("setDevelopSettings",{payload:{develop:e}},r,l).fail((()=>{this._selectedVersionUserUpdated=t,i.reject(),b.Z.reportFailure("editSetDevelopRevisionFailure")}))};let c=n.Z.is_enabled("force_externalize_edit_settings");if(n.Z.is_enabled("force_partial_externalize_edit_settings")){if(!window.confirm("Create a partial external edit (to test this sync state)? Check your debug features if this is unexpected"))return i.reject().promise();c=!0}if((c||e.xmpCameraRaw.length>R.Z.XMP_CAMERA_RAW_MAX_LENGTH)&&(n.Z.is_enabled("debug")&&console.log("Making inline edit settings external. Edit settings size in bytes: "+e.xmpCameraRaw.length),this.externalEditSettings=e.xmpCameraRaw),null!=this.externalEditSettings){const t=new Blob([this.externalEditSettings],{type:"text/xml"});ur.digestP(t,!1,2).done((t=>{this.externalEditSettings=e.xmpCameraRaw,e.xmpCameraRaw={},e.xmpCameraRaw.sha256=t,u(e)})).fail((()=>b.Z.reportFailure("editSetDevelopDigestGenFailure")))}else u(e);return i.promise()}_doRevisionChangeP(e,t,r,i,o){let s,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return n.Z.is_enabled("debug")&&J._forceFailNextRequest&&(a=2),s=o?{"X-Generate-Renditions":"all"}:{},this.requestP("PUT",this._getChildRevisionHref(t),JSON.stringify("function"==typeof r?r():r),{headers:s}).then((()=>(this.revisingApplyList.shift(),this.refreshP().then((()=>this.revisingApplyList.map((e=>e())))))),((n,s,l)=>{var u;const c=a<2&&(0===s||s>=500||400===s&&null!=(null==n||null===(u=n.errors)||void 0===u?void 0:u.parent_revision_id));return c?b.Z.report(`${e}Retry`):(this.reportOzFailure(`${e}Failure`,n,s,l),this.revisingApplyList.shift()),this.refreshP().then((()=>c?this._doRevisionChangeP(e,t,r,i,o,a+1):fo.Deferred().reject(!0)),(()=>{this.attributes=i}))}))}createChildRevisionJP(e,t,r,i){const n=fo.extend(!0,{},this.attributes.toJSON()),o=()=>{const e=t(!0);e&&(this.attributes=fo.extend(!0,this.attributes.toJSON(),e))};o();const s=this.revising=(()=>{const i=()=>this.safeToJSPromise(this._doRevisionChangeP(e,this.createUuid(),t,n,r));return null!=this.revising?(this.revisingApplyList.push(o),this.revising.then(i)):(this.revisingApplyList=[o],i())})();return null==i||i.then((()=>this.refreshJP())),(null!=i?i:s).finally((()=>{s===this.revising&&(this.revising=null)})),this.revising}_createChildRevisionP(e,t){var r,i;let n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;null!==(i=(r=t.payload).userUpdated)&&void 0!==i||(r.userUpdated=(new Date).toISOString());const a=fo.extend(!0,{},this.attributes.toJSON()),l=()=>{this.attributes=fo.extend(!0,this.attributes.toJSON(),t)};l();const u=this.createUuid();return null!=this.revising?(this.revisingApplyList.push(l),n=this.revising.then((()=>this._doRevisionChangeP(e,u,t,a,o)))):(this.revisingApplyList=[l],n=this._doRevisionChangeP(e,u,t,a,o)),this.revising=n,null!=s&&(this.revising=n=n.then((()=>s().then((()=>this.refreshP()))))),this.revising.always((()=>{n===this.revising&&(this.revising=null)}))}_getChildRevisionHref(e){return`${this.getLatestRevisionHref()}/children/${e}`}latestRevision(){return this.attributes.revision_ids[this.attributes.revision_ids.length-1]}isGeneratingRenditions(){return this.generatingRenditionsCount>0}generateRenditionsP(e){let t=this.getLatestRevisionHref();if(null!=t){this.generatingRenditionsCount++,t+="/renditions";const r={"X-Generate-Renditions":e};return this.requestP("POST",t,"",{headers:r}).then((t=>go.pollForValidRenditionsP(this,(()=>!0),e.split(",")))).always((()=>this.generatingRenditionsCount--)).fail(((e,t,r)=>{this.reportOzFailure("generateRenditionsFailure",e,t,r)}))}return fo.Deferred().reject()}},uo=(0,i.Z)(lo.prototype,"importedByUser",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),co=(0,i.Z)(lo.prototype,"_selectedVersion",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ho=(0,i.Z)(lo.prototype,"generatingRenditionsCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),po=(0,i.Z)(lo.prototype,"revising",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.Z)(lo.prototype,"setDevelopP",[ao],Object.getOwnPropertyDescriptor(lo.prototype,"setDevelopP"),lo.prototype),lo);vo.pollAssetUntilCheckJP=(e,t,r)=>new Promise(((i,n)=>{let o=500;const s=new Date,a=()=>setTimeout((async()=>{o+=500;try{const n=await async function(){const r=new e(t);return await r.initializedP()}();r(n)?i(n):a()}catch(e){new Date-s>3e5?n("timeout"):a()}}),o);a()})),vo.prototype.attributeClass=so;const yo=vo;var bo=r(784090);const _o=class{get title(){var e;return null!=(e=this.payload().title)?e:this.payload().name}get description(){return this.payload().description}migrateNameToTitleP(){var e,t;if(null!=(e=this.payload().name))return t={name:null},null==this.payload().title&&(t.title=e),this._createChildRevisionP("migrateLayoutSegmentNameToTitle",{payload:t})}setLayoutSegmentP(e,t){var r;return r={},null!=this.attributes.payload.name&&(r.name=null),e!==this.attributes.payload.title&&(r.title=e),t!==this.attributes.payload.description&&(r.description=t),Object.keys(r).length>0?this._createChildRevisionP("updateLayoutSegment",{payload:r}):bo.Deferred().resolve()}get layoutSegmentHasText(){var e,t;return(null!=(e=this.title)?e.length:void 0)>0||(null!=(t=this.description)?t.length:void 0)>0}};var wo,Po=r(784090);const Ao=wo=function(){var e,t,r,o;let s=(0,ji.Z)(_o)((t=class extends yo{constructor(){super(...arguments),(0,P.Z)(this,"albumsList",r,this),(0,P.Z)(this,"deletedRestoreState",o,this)}setCaptionP(e){var t;return this.getCaption()===e||null==e?(t=Po.Deferred(),null!=e?t.resolve():t.reject(),t.promise()):this._createChildRevisionP("setCaption",{payload:{xmp:{dc:{description:e}}}})}setTitleP(e){var t,r,i,n,o,s;return this.getTitle()===e||null==e?(r=Po.Deferred(),null!=e?r.resolve():r.reject(),r.promise()):(t=null!=(n=null!=(o=this.attributes.payload)&&null!=(s=o.xmp)?s.dc:void 0)?n:{},(i=Po.extend(!0,{},t)).title=e,this._createChildRevisionP("setTitle",{payload:{xmp:{dc:i}}}))}_setAutotagFeedbackP(e,t){var r,i,n,o,s,a;if(null==(r=null!=(o=this.attributes.payload)&&null!=(s=o.autoTags)?s.tags:void 0))return Po.Deferred().reject("no autotags on this asset");for(a=Po.extend(!0,{},r),"all"===e&&(e=Object.keys(a)),i=0,n=e.length;i<n;i++)a[e[i]]=t;return this._createChildRevisionP("setAutotagFeedback",{payload:{autoTags:{tags:a}}})}acceptAllAutoTagsP(){return this._setAutotagFeedbackP("all",!0)}rejectAllAutoTagsP(){return this._setAutotagFeedbackP("all",!1)}acceptAutoTagP(e){return this._setAutotagFeedbackP([e],!0)}rejectAutoTagP(e){return this._setAutotagFeedbackP([e],!1)}setFlagP(e){var t,r;return t={flag:e,date:(new Date).toISOString()},(r={})[R.Z.account.id]=t,this._createChildRevisionP("setFlag",{payload:{reviews:r}})}async setFlagJP(e){return await this.safeToJSPromise(this.setFlagP(e))}setRatingP(e){var t,r;return t={rating:e,date:(new Date).toISOString()},(r={})[R.Z.account.id]=t,this._createChildRevisionP("setRating",{payload:{ratings:r}})}async setRatingJP(e){return await this.safeToJSPromise(this.setRatingP(e))}addKeywordP(e){var t,r,i,n,o,s,a;for(r=(0,y.zt)("$$$/js/keyword_entry_delimiter=,"),t={payload:{xmp:{dc:{subject:{}}}}},o=0,i=0,a=(s=e.split(r)).length;i<a;i++)(n=(e=s[i]).trim()).length>0&&(o++,t.payload.xmp.dc.subject[n]=!0);return o>0?this._createChildRevisionP("addKeyword",t):Po.Deferred().resolve().promise()}removeKeywordP(e){var t;return 1===(t=this.getKeywordsArray()).length&&t.indexOf(e)>=0?1===Object.keys(this.xmp().dc).length?this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:null}}}):this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:{subject:null}}}}):this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:{subject:{[`${e}`]:null}}}}})}optimisticUpdatePayload(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.attributes=Po.extend(!0,this.attributes.toJSON(),{payload:e}),t)return this.attributes.revision_ids.push(t)}getLikesCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r,i,o;return n.Z.is_enabled("lots_of_likes")?7*(null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/favorites"])?r.count:void 0):null!=(i=this._getSpace(null!=e?e.id:void 0))&&null!=(o=i.links["/rels/favorites"])?o.count:void 0}isLiked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.getLikesCount(e)>0}isLikedByUser(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.isLiked(e)&&null!=this._getLikeUrl(e)}getLikesHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r;return null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/favorites"])?r.href:void 0}_getLikeUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r;return null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/this_user_favorite"])?r.href:void 0}likeP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.requestP("PUT",`${this.getLikesHref(e)}/${this.createUuid()}`,"{}").fail(((e,t,r)=>this.reportOzFailure("likeAssetFailure",e,t,r)))}unLikeP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t;if(null!=(t=this._getLikeUrl(e)))return this.requestP("DELETE",t,"{}").fail(((e,t,r)=>this.reportOzFailure("unlikeAssetFailure",e,t,r)))}getCommentCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r;return null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/comments"])?r.count:void 0}hasComments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.getCommentCount(e)>0}getCommentsHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r;return null!=(t=this._getSpace(null!=e?e.id:void 0))&&null!=(r=t.links["/rels/comments"])?r.href:void 0}setCaptureDateP(e){var t;return this.getCaptureDate()===e?Po.Deferred().resolve().promise():(t={payload:{captureDate:e.toISOString()}},this._createChildRevisionP("setCaptureDate",t))}_getSpace(e){var t,r,i,n;if(!this.attributes.spaces)return null;if(null!=e){for(t=0,r=(i=this.attributes.spaces).length;t<r;t++)if((n=i[t]).id===e)return n;return null}return this._getFirstSpace()}_getFirstSpace(){var e;return n.Z.is_enabled("debug")&&null!=this.attributes.spaces&&console.warn("Need to remove usage of _getFirstSpace."),null!=(e=this.attributes.spaces)?e[0]:void 0}getCatalogHref(){return`${this._linkBase.basePath}assets/${this.id}`}async copyAuxToSpaceAssetJP(e,t,r){var i,n,o,s;return i=`/v2/spaces/${e}/assets/${t}`,s=this.getDevelopPixelMaskIds(),n=`${i}/revisions/${r}/aux`,o={source_href:this.getCatalogHref(),aux_ids:s},await this.requestJP("PUT",n,JSON.stringify(o)),yo.pollAssetUntilCheckJP(yo,i,(e=>s.every((t=>e.hasLink(`/rels/aux/${t}`)))))}getAlbumListP(e){var t;return t=this._linkBase.fullHref(`assets/${e}/albums`),this.requestP("GET",t).done((e=>n.Z.is_enabled("LRW_11507_fix")?this.albumsList=e.resources.filter((e=>"collection"===e.subtype)):this.albumsList=e.resources))}_assetStoreUpdate(e,t){var r,i;if(i=new Date(e.attributes.updated),r=new Date(t.updated),isNaN(i)||isNaN(r)||r>i)return null==t.spaces&&(t.spaces=e.attributes.spaces),e.setAttributes(t)}debugTouchUpdatedP(e){var t;return t={payload:{userUpdated:e.toISOString()}},this._createChildRevisionP("debugTouchUpdated",t)}},r=(0,i.Z)(t.prototype,"albumsList",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,i.Z)(t.prototype,"deletedRestoreState",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e=t))||e;return n.Z.is_enabled("asset_store")&&(s.store=Ni.instance(s)),s}.call(void 0);wo.pollUntilValidAssetJP=function(e){return yo.pollAssetUntilCheckJP(wo,e,(function(e){return e.isValid()}))};var So,xo,Co=r(784090);let Oo=(So=class extends de{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(e),(0,P.Z)(this,"loaded",xo,this),this.asset_ids=t,this.options=r}loadP(){const e=Co.param(Object.assign({},this.options,{asset_ids:this.asset_ids.join(",")}));return this.requestP("GET",`${this.href}?${e}`).then(((e,t,r)=>{const i={},n={};let o=0,s=0;const a=r.getResponseHeader("x-request-id");if(null!=e.resources){o=e.resources.length;for(const t of e.resources)t.base=e.base,i[t.id]=new this.model(t)}if(null!=e.errors){s=e.errors.length;for(const t of e.errors)t.base=e.base,n[t.id]=t}return{assets:i,asset_count:o,errors:n,error_count:s,request_id:a}}))}},xo=(0,i.Z)(So.prototype,"loaded",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),So);Oo.prototype.model=null;const ko=function(){class e extends Oo{}return e.prototype.model=Ao,e}.call(void 0);var Eo,Io=r(5081),To=r(125979),Do=r(595734).default;const Ro=Eo=class e extends J{static setAuthHeaders(e,t){return this.authHeaders={Authorization:`Bearer ${e}`,"x-api-key":t}}doUnwantedSearchP(e,t,r,i){var n,o,s,a,l,u;return s=To.Z.isProd?"lightroom-production":"lightroom-stage",u=Io[s].unwanted_host,n=Io[s].unwanted_app_token,l={"x-api-key":"LightroomMobileWeb1",Authorization:`Bearer ${Ji.default.getToken()}`,"x-app-token":n},a=[{catalogId:e.id},{accountId:R.Z.account.id}],null!==t&&a.push({albumId:t.id}),o={experienceId:"Default-Unwanted-Photos",queries:[{id:"query1",start:i,limit:r,scope:{entities:["LRPhoto"]},filters:a}]},this.requestP("POST",`https://${u}/uss/v3/query`,JSON.stringify(o),{headers:l,contentType:"application/vnd.adobe.search-request+json"})}doSearchP(t,r,i,o,s){var a,l;return l={"x-product-location":"main search input"},a={scope:["lightroom"],q:t,limit:r,start_index:i,fields_excluded:["links","tags"],locale:y.Z.getLocaleWithUnderscore(),fetch_fields:{includes:["lightroom_album_id"]}},"__clear_search_cache__"===t&&(a.lightroom_disable_cache="true"),null!=s&&Object.assign(a,s),null!=o&&Object.assign(a,o),Do.sdk?(Object.assign(l,e.authHeaders),this.requestP("POST","/search_sdk_api/universal-search-lr/v2/search",JSON.stringify(a),{headers:l,contentType:"application/vnd.adobe.search-request+json"})):n.Z.is_enabled("debug_uss_stage_fac_endpoint")?(null==a.hints&&(a.hints=[]),a.hints.push({lightroom_version:"3"}),this.requestP("POST","/search_api_fac/universal-search-lr/v2/search",JSON.stringify(a),{headers:l,contentType:"application/vnd.adobe.search-request+json"})):this.requestP("POST","/search_api/universal-search-lr/v2/search",JSON.stringify(a),{headers:l,contentType:"application/vnd.adobe.search-request+json"})}};n.Z.is_enabled("debug")&&(window.LrSearch=Eo);var jo,Zo,Fo,No,Lo,Mo=r(784090);Lo=0;const Uo=(jo=class extends Di{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(),(0,P.Z)(this,"sortOrderBy",Zo,this),(0,P.Z)(this,"sortOrderDirection",Fo,this),(0,P.Z)(this,"errored",No,this),this.catalog=e,this.searchText=t,this.filterParams=r,this.sortOrderBy=i,this.sortOrderDirection=o,this._dirty=!0,this._searchId=Lo++,this.search=new Ro,n.Z.is_enabled("search_ml_feedback")&&(this.requestLog=[]),this.assetSearchData={},this.reset()}reset(){var e;return this._dirty?(this._models=new ke,this.indices={},this.page=0,this.pageSize=null!=(e=this.filterParams.limit)?e:100,this.finished=!1,this.errored=!1,this.length=0,this.totalCount=null,this._dirty=!1,this):this}getSearchId(){return Lo}markDirty(){return super.markDirty(),this.totalCount=null,this}getSearchQueryString(){return this.searchText}_reportError(e,t,r){var i;return null==e&&(e="unknown"),null==t&&(t="unknown"),i=r.getResponseHeader("x-request-id"),b.Z.reportFailure("searchFailure",{errorCode:e,errorDescription:t,requestId:i})}fetchP(){var e,t,r;return this.finished?Mo.Deferred().reject().promise():this.fetching?this.fetching:(e=this._models,this.sortOrderBy,this.sortOrderDirection,null==this.sortOrderBy&&null==this.sortOrderDirection||(r={},null!=this.sortOrderDirection&&(r.sort_order=this.sortOrderDirection),null!=this.sortOrderBy&&(r.sort_orderby=this.sortOrderBy)),t=this.fetching=this.search.doSearchP(this.searchText,this.pageSize,this.page*this.pageSize,this.filterParams,r),n.Z.is_enabled("debug_simulate_slow_search")&&(t=t.then((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i;return i=Mo.Deferred(),setTimeout((function(){return i.resolve(...t)}),3e3),i}))),t.always((()=>this.fetching=void 0)).fail(((e,t,r)=>(this.errored=!0,this._reportError(t,JSON.stringify(e),r),this._dirty=!0))).then(((r,i,o)=>{var s,a,l,u,c,d,h,p,f,g,m,v,y,b,_,w,P,A,S,x,C,O,k,E,I;if(this._models===e){if(null!=r&&null!=r.status&&200<=(g=r.status[0].status)&&g<=299){if(k=o.getResponseHeader("x-request-id"),this.totalCount=null!=(m=null!=(b=r.result_sets)&&null!=(_=b[0])?_.total_items:void 0)?m:0,(I=null!=(w=null!=(P=r.result_sets)&&null!=(A=P[0])&&null!=(S=A.items)?S.length:void 0)?w:0)>0&&null!=(null!=(x=r.result_sets)?x[0]:void 0)){for(f=[],p={},c=0,h=(C=r.result_sets[0].items).length;c<h;c++)O=C[c],null==(d=O.asset_id)||null!=p[d]||null!=this.index(d)||xi.isAssetIdDeleted(d)||(f.push(d),p[d]=!0,this.assetSearchData[d]=O);u=`/v2/catalogs/${this.catalog.id}/assets`,R.Z.hostOverride&&(u=`${R.Z.hostOverride}${u}`),s=new ko(u,f,{embed:"user"}),t=s.loadP().then((t=>{var r,i,o,s;if(this._models===e){for(s=t.request_id,i=0,o=f.length;i<o;i++)d=f[i],null!=(r=t.assets[d])&&this._add(r);return n.Z.is_enabled("search_ml_feedback")?this.requestLog.push({searchRequestId:k,ozRequestId:s,ozIds:f}):void 0}})).always((()=>{if(this._models===e)return I<this.pageSize?(this.finished=!0,this.totalCount=this._models.length):void 0}))}else this.finished=!0,this.totalCount=this._models.length;return this.page++,t}return null!=(E=null!=r&&null!=(v=r.status)?v[0]:void 0)&&(null!=(l=null!=(y=E.errors)?y[0]:void 0)&&(a=JSON.stringify(l)),this._reportError(E.status,a,o)),this.finished=!0,this.totalCount=this._models.length}})))}deleteAssetsLocally(e){return this.deleteLocally(e)}get assets(){return this}getAssetParentAlbumIds(e){var t,r;return null==(null!=(t=this.assetSearchData)&&null!=(r=t[e])?r.lightroom_album_id:void 0)?[]:this.assetSearchData[e].lightroom_album_id}_getPageNumberForAssetId(e){var t,r,i,n;for(i=t=0,r=(n=this.requestLog).length;t<r;i=++t)if(n[i].ozIds.indexOf(e)>=0)return i;return-1}_initsearchFeedbackData(e,t){var r;return r={client_request_id:this.requestLog[e].ozRequestId,false_positive_results:[],allow_asset_view:!1},null!=t&&(r.feedback=t),{created:Date.now(),account_id:R.Z.account.id,catalog_id:xi.catalog.id,type:"autotag_search",source:{client:"LrW",search_url:window.__adobe_search_api_host,search_query:this.getSearchQueryString(),search_request_id:this.requestLog[e].searchRequestId,payload:r}}}sendSearchFeedbackJP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i,n,o,s,a,l,u,c,d;for(c=new Array(this.requestLog.length).fill(null),i=0,s=e.length;i<s;i++)n=e[i],(l=this._getPageNumberForAssetId(n))<0||(null==(r=c[l])&&(r=c[l]=this._initsearchFeedbackData(l,t)),r.source.payload.false_positive_results.push(n));for(u=[],o=0,a=(d=c.filter((function(e){return null!=e}))).length;o<a;o++)r=d[o],u.push(xi.catalog.submitSearchFeedbackJP(r));return Promise.all(u)}},Zo=(0,i.Z)(jo.prototype,"sortOrderBy",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fo=(0,i.Z)(jo.prototype,"sortOrderDirection",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),No=(0,i.Z)(jo.prototype,"errored",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo);var $o,zo,qo=r(784090);let Ho=($o=class extends Di{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),(0,P.Z)(this,"errored",zo,this),this.catalog=e,this.album=t,this._dirty=!0,this.search=new Ro,this.assetSearchData={},this.reset()}reset(){if(this._dirty)return this._models=new ke,this.indices={},this.page=0,this.pageSize=100,this.finished=!1,this.errored=!1,this.length=0,this.totalCount=null,this._dirty=!1,this}markDirty(){return super.markDirty(),this.totalCount=null,this}_reportError(e,t,r){var i,n;t=null!==(n=e=null!==(i=e)&&void 0!==i?i:"unknown")&&void 0!==n?n:"unknown";const o=r.getResponseHeader("x-request-id");b.Z.reportFailure("searchFailure",{errorCode:e,errorDescription:t,requestId:o})}fetchP(){if(this.finished)return qo.Deferred().reject().promise();if(this.fetching)return this.fetching;const{_models:e}=this;let t=this.fetching=this.search.doUnwantedSearchP(this.catalog,this.album,this.pageSize,this.page*this.pageSize);return n.Z.is_enabled("debug_simulate_slow_search")&&(t=t.then((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=qo.Deferred();return setTimeout((()=>i.resolve(...t)),3e3),i}))),t.always((()=>{this.fetching=void 0})).fail(((e,t,r)=>{this.errored=!0,this._reportError(t,JSON.stringify(e),r),this._dirty=!0})).then(((r,i,o)=>{var s;if(this._models!==e)return;const a=null==r||null===(s=r.status)||void 0===s?void 0:s.httpCode;if(null!=a&&a>=200&&a<=299){var l,u,c,d,h,p;const e=null!==(l=r.resultSets)&&void 0!==l?l:[];this.totalCount=null!==(u=null===(c=e[0])||void 0===c?void 0:c.metadata.totalHits)&&void 0!==u?u:0;const i=null!==(d=null===(h=e[0])||void 0===h||null===(p=h.items)||void 0===p?void 0:p.length)&&void 0!==d?d:0;if(i>0&&null!=e[0]){const r=[],o={};for(const t of e[0].items){const e=t.id;null==e||null==!o[e]||null!=this.index(e)||xi.isAssetIdDeleted(e)||(r.push(e),o[e]={score:t["unwantedPhotosService.score"]},this.assetSearchData[e]=t)}let s=`/v2/catalogs/${this.catalog.id}/assets`;R.Z.hostOverride&&(s=`${R.Z.hostOverride}${s}`);const a=new ko(s,r,{embed:"user"});t=a.loadP().then((e=>{e.request_id;for(const t of r){const r=e.assets[t];n.Z.is_enabled("debug_asset_data")&&(r.debugUnwantedScore=o[t].score),null!=r&&this._add(r)}})).always((()=>{i<this.pageSize&&(this.finished=!0,this.totalCount=this._models.length)}))}else this.finished=!0,this.totalCount=this._models.length;return this.page++,t}}))}deleteAssetsLocally(e){this.deleteLocally(e)}get assets(){return this}},zo=(0,i.Z)($o.prototype,"errored",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$o);var Jo,Vo;Vo=function(e){return Math.abs(e)<1e-4},Jo={calculateCombinedAestheticRating:function(e){var t,r,i,n;if(null==(t=e.getAesthetics()))return 0;for(r in i=0,t)"number"==typeof(n=t[r])&&"version"!==r&&0!==this.importanceWeights.aestheticWeights[r]&&(i+=n*this.importanceWeights.aestheticWeights[r]);return i<0&&(i=0),i},calculateImportance:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i,o,s,a,l,u;return null==t&&(t=null!=(l=null!=(u=this.bestPhotosState)?u.senseiOnlyCalculation:void 0)&&l),n.Z.is_enabled("best_photos_trust_oz")?parseInt(e.hackBestPhotosOrder):n.Z.is_enabled("best_aesthetics_score_only")?e.getAestheticScore():((i=this._calculateBaseImportance(e,t))+(r=this._getAutoTagImportance(e,t))+(a=this._getFrameImportance(e))+(s=this._getFaceImportance(e))+(o=this._getBlurImportance(e)))/this._getNormalizer(i,r,a,s,o)},_calculateBaseImportance:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r,i,n;return r=0,(i=!t&&!(null!=(n=this.bestPhotosState)?n.senseiOnlyCalculation:void 0))&&(r+=this._getFlagImportance(e),r+=this._getRatingImportance(e),r+=this._getTitleImportance(e),r+=this._getCaptionImportance(e),r+=this._getEditImportance(e)),r=(r+=this._getAestheticImportance(e))/this._getMaxAestheticScore(t)*100,i&&(r+=this._getRatedFlaggedPenalty(e)),r},_getNormalizer:function(e,t,r,i,n){var o;return o=0,Vo(e)||(o+=1),Vo(t)||(o+=this.importanceWeights.autoTagScore),Vo(r)||(o+=this.importanceWeights.frameScore),Vo(i)||(o+=this.importanceWeights.faceScore),Vo(n)||(o+=this.importanceWeights.blurScore),o},_getFrameImportance:function(e){return e.getBestFrameScore("frame")*this.importanceWeights.frameScore/this.maxScores.frame*100},_getFaceImportance:function(e){var t,r,i,n;return t=e.getBestFrameScore("face"),r=null!=(i=null!=(n=this.bestPhotosState)?n.peopleMultiplier:void 0)?i:1,t>=this.importanceWeights.faceScoreOutlierMin?t*this.importanceWeights.faceScoreOutlier*r/this.maxScores.face*100:t*this.importanceWeights.faceScore*r/this.maxScores.face*100},_getBlurImportance:function(e){var t,r,i,o,s,a,l;if(t=e.getBlurScores(),r=this.importanceWeights.blur,null==t)return 0;for(l=0,i=0,s=(a=["desired","undesired","clear","acceptable"]).length;i<s;i++)o=a[i],this._shouldIgnoreBlurScore(e,o)||(l+=t[o]*r[o]);return n.Z.is_enabled("debug_best_photos")&&(l+=(t.desired+t.clear+t.acceptable)*r.goodScore,l+=(t.undesired+.5*t.acceptable)*r.badScore),l},_shouldIgnoreBlurScore:function(e,t){var r,i,n,o,s;if("desired"===t){if(null==(r=e.getAutoTags()))return!1;for(n=i=0,o=(s=this.importanceWeights.blur.desiredIgnoreTags).length;i<o;n=++i)if(r[s[n]]>this.importanceWeights.blur.desiredIgnoreThresholds[n])return!0}return!1},_getFlagImportance:function(e){var t;return t=e.getFlag(),this.importanceWeights.flags[t]},_getRatingImportance:function(e){var t;return t=e.getRating(),this.importanceWeights.rating[t]},_getTitleImportance:function(e){return""!==e.getTitle().trim()?this.importanceWeights.hasTitle:0},_getCaptionImportance:function(e){return""!==e.getCaption().trim()?this.importanceWeights.hasCaption:0},_getAestheticImportance:function(e){return this.importanceWeights.aestheticScore*this.calculateCombinedAestheticRating(e)},_getEditImportance:function(e){return e.hasEdits()?this.importanceWeights.hasEdits:0},_getRatedFlaggedPenalty:function(e){var t,r,i;return(null!=(i=this.bestPhotosState)?i.excludeRatedFlagged:void 0)?(r=0!==e.getRating(),t="unflagged"!==e.getFlag(),r||t?-1e3:0):0},_isPeopleTagType:function(e){return"people"===e||"people_secondary"===e||"faces"===e},_getAutoTagImportance:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r,i,n,o,s,a,l;for(o in i=e.getAutoTags(),n=0,s=this.autoTagMaxPercent*this._getAestheticImportance(e),i)r=i[o]*((null!=(a=this.autoTagLookupTable[o])?a.weight:void 0)||0),null!=this.bestPhotosState&&this._isPeopleTagType(null!=(l=this.autoTagLookupTable[o])?l.type:void 0)&&(r*=this.bestPhotosState.peopleMultiplier),n+=r;return Math.min(n,s)*this.importanceWeights.autoTagScore/this._getMaxAutoTagScore(t)*100},autoTagMaxPercent:.3,autoTagWeights:{people:{weight:.005,tags:["person","human","people","couple","friends","man","guy","men","male","father","dad","female","woman","lady","women","mother","mom","boy","son","girl","daughter","adult","kid","baby","child","children","couple","family","teenager","young adult"]},people_adjectives:{weight:.02,tags:["beautiful","beauty","pretty","cute","glamour","sexy","attractive","handsome","fashion"]},people_secondary:{weight:.005,tags:["businesswoman","businessman","businesspeople","bride","groom","manager","executive","engineer","architect","student","waiter","worker","police","doctor","patient","senior","elderly","mature","audience","team","teacher","wife","husband","partner"]},people_actions:{weight:.005,tags:["walking","looking","drinking","handshake","talking","togetherness","social"]},on_people:{weight:.005,tags:["dress","skin"]},emotion:{weight:.005,tags:["happy","cheerful","love","happiness","friendship"]},faces:{weight:.02,tags:["smiling","smile","face","portrait","expression"]},on_faces:{weight:.005,tags:["blond","blonde","brunette","hair","glasses","sunglasses","head"]}},autoTagLookupTable:{},importanceWeights:{flags:{pick:50,reject:-20,unflagged:0},aestheticScore:.3,autoTagScore:.1,aestheticWeights:{balancing:0,blur:0,content:0,dof:0,emphasis:0,harmony:0,lighting:0,repetition:0,rot:0,score:1,symmetry:0,vivid:0},hasEdits:0,rating:[0,5,10,20,40,80],hasTitle:5,hasCaption:5,frameScore:10,faceScore:1,faceScoreOutlierMin:.9,faceScoreOutlier:2,blurScore:1,blur:n.Z.is_enabled("best_photos_blur_weights")?{desired:.8,desiredIgnoreTags:["landscape"],desiredIgnoreThresholds:[55],undesired:-.2,clear:0,acceptable:0,goodScore:-.2,badScore:0}:{desired:2.2,desiredIgnoreTags:["landscape"],desiredIgnoreThresholds:[55],undesired:-.02,clear:0,acceptable:0,goodScore:0,badScore:0},undesiredBlurCutoff:98},calculateImportanceBreakdown:function(e){var t,r,i,n,o,s,a,l,u,c,d;return d=null!=(a=null!=(l=this.bestPhotosState)?l.senseiOnlyCalculation:void 0)&&a,r=this._calculateBaseImportance(e,d),t=this._getAutoTagImportance(e,d),o=this._getFrameImportance(e),n=this._getFaceImportance(e),i=this._getBlurImportance(e),s=this._getNormalizer(r,t,o,n,i),{total:this.calculateImportance(e,d).toFixed(4),base:`${(r/s).toFixed(2)} (${r.toFixed(2)})`,autotags:`${(t/s).toFixed(4)} (${t.toFixed(4)})`,frame:`${(o/s).toFixed(4)} (${o.toFixed(4)})`,face:`${(n/s).toFixed(4)} (${n.toFixed(4)})`,blur:`${(i/s).toFixed(4)} (${i.toFixed(4)})`,normalizer:s,flag:`${this._getFlagImportance(e).toFixed(2)}`,rating:`${this._getRatingImportance(e).toFixed(2)}`,title:`${this._getTitleImportance(e).toFixed(2)}`,caption:`${this._getCaptionImportance(e).toFixed(2)}`,edited:`${this._getEditImportance(e).toFixed(2)}`,"Frame Raw":e.getBestFrameScore("frame").toFixed(4),"Face Raw":e.getBestFrameScore("face").toFixed(4),"Num Faces":null!=(u=e.getBestFrameScores().numFaces)?u:"null","Oz Score":parseFloat(null!=(c=e.hackBestPhotosOrder)?c:0).toFixed(1)}},calculateBestQualityAsset:function(e,t){var r,i,n,o,s;for(s=-1e4,n=0,o=e.length;n<o;n++){if(!(r=e[n]).hasBestFrameScore(t))return null;r.getBestFrameScore(t)>s&&(s=(i=r).getBestFrameScore(t))}return i},_calculateAutoTagLookupTable:function(){var e,t,r,i,n;for(n in r=[],t=this.autoTagWeights)e=t[n],r.push(function(){var t,r,o,s;for(s=[],t=0,r=(o=e.tags).length;t<r;t++)i=o[t],s.push(this.autoTagLookupTable[i]={weight:e.weight,type:n});return s}.call(this));return r},_getMaxAestheticScore:function(e){return e?this.maxScores.aesthetics.senseiOnly:this.maxScores.aesthetics.allProperties},_getMaxAutoTagScore:function(e){return e?this.maxScores.autoTag.senseiOnly:this.maxScores.autoTag.allProperties},_calculateMaxScores:function(){var e,t,r,i,n;return r=(e=(t=100*(n=this.importanceWeights).aestheticScore)+n.flags.pick+n.hasEdits+n.rating[5]+n.hasTitle+n.hasCaption)*this.autoTagMaxPercent,i=t*this.autoTagMaxPercent,this.maxScores={aesthetics:{senseiOnly:t,allProperties:e},autoTag:{senseiOnly:i,allProperties:r},frame:1,face:1}},setBestPhotosState:function(e){this.bestPhotosState=e}},Jo._calculateAutoTagLookupTable(),Jo._calculateMaxScores(),n.Z.is_enabled("debug")&&(window.StoryHelper=Jo);const Bo=Jo,Wo=(e,t)=>{let r=t.trim();r=r.replace(/\[(\w+)\]/g,".$1"),r=r.replace(/^\./,"");const i=r.split(".");let n=e;e.payload&&e.attributes&&(n=null!=e.payload()[i[0]]?e.payload():e.attributes);for(const e of i){if(null==n[e])return"";n=n[e]}return null!=n?n:""};var Go;const Xo=Go={SORT_NEWEST_FIRST:0,SORT_OLDEST_FIRST:1,SORT_CUSTOM:2,_localeCompare:function(e,t){var r;return e=e.toString(),t=t.toString(),0===(r=e.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase()))?e.localeCompare(t):r},localeCompare:function(e,t){return Go.logicalStringComparison(e,t)},stringToArrayOfCharactersAndNumbers:function(e){return(null!=e?e.length:void 0)>0?e.match(/([\d]+)|[^\d]+/g):[]},_stringTokenComparison:function(e,t){var r,i;return r=parseFloat(e),i=parseFloat(t),isNaN(r)&&isNaN(i)?""===e?-1:""===t?1:Go._localeCompare(e,t):isNaN(r)?1:isNaN(i)?-1:r-i},logicalStringComparison:function(e,t){var r,i,n,o,s,a,l,u,c;for(i=Go.stringToArrayOfCharactersAndNumbers(e.toString()),n=(s=Go.stringToArrayOfCharactersAndNumbers(t.toString())).length,u=l=0,c=i.length;l<c;u=++l){if(r=i[u],u>=n)return 1;if(o=s[u],0!==(a=Go._stringTokenComparison(r,o)))return a}return a},ozModelCreatedCompareAsc:function(e,t){var r,i;return(r=e.getBestCreatedDateAttribute())===(i=t.getBestCreatedDateAttribute())?0:r>i?1:-1},ozModelCreatedCompareDesc:function(e,t){return Go.ozModelCreatedCompareAsc(t,e)},assetQualityCompareAsc:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Go.assetCaptureDateCompareAsc;var i,n;return i=Bo.calculateImportance(e,!0),n=Bo.calculateImportance(t,!0),Math.abs(i-n)<.001?r(e,t):i-n},assetQualityCompareDesc:function(e,t){return Go.assetQualityCompareAsc(t,e,Go.assetCaptureDateCompareDesc)},_dateCompare:function(e,t,r){var i,n,o,s,a;return i=("function"==typeof e[s=r[0]]?e[s]():void 0)||null,n=("function"==typeof t[s]?t[s]():void 0)||null,o=null===i&&null===n,a=(null!=i?i.getTime():void 0)===(null!=n?n.getTime():void 0),o?r.length>1?(r.shift(),Go._dateCompare(e,t,r)):0:a&&r.length>1?(r.shift(),Go._dateCompare(e,t,r)):null===i?-1:null===n?1:i-n},assetCaptureDateCompareLikeOzAsc:function(e,t){return Go._dateCompare(e,t,["getCaptureDate","getOzCreatedDate"])},assetCaptureDateCompareLikeOzDesc:function(e,t){return Go.assetCaptureDateCompareLikeOzAsc(t,e)},assetCaptureDateCompareAsc:function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var i;return 0===(i=Go._dateCompare(e,t,["getCaptureDate"]))&&r?Go.assetFileNameCompareAsc(e,t):i},assetCaptureDateCompareDesc:function(e,t){return Go.assetCaptureDateCompareAsc(t,e)},assetImportDateCompareAsc:function(e,t){var r;return 0===(r=Go._dateCompare(e,t,["getImportDate","getCaptureDate"]))?Go.assetFileNameCompareAsc(e,t):r},assetImportDateCompareDesc:function(e,t){return Go.assetImportDateCompareAsc(t,e)},assetModifiedDateCompareAsc:function(e,t){var r;return 0===(r=Go._dateCompare(e,t,["getUserUpdatedDate","getCaptureDate"]))?Go.assetFileNameCompareAsc(e,t):r},assetModifiedDateCompareDesc:function(e,t){return Go.assetModifiedDateCompareAsc(t,e)},assetRatingCompareAsc:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Go.assetCaptureDateCompareAsc;var i,n;return(i=e.getRating())===(n=t.getRating())?r(e,t):i-n},assetRatingCompareDesc:function(e,t){return Go.assetRatingCompareAsc(t,e,Go.assetCaptureDateCompareDesc)},assetFileNameCompareAsc:function(e,t){var r,i,n;return r=e.getFileName(),i=t.getFileName(),""===r&&""===i?Go.assetCaptureDateCompareAsc(e,t,!1):""===r?-1:""===i?1:0===(n=Go.logicalStringComparison(r,i))?Go.assetCaptureDateCompareAsc(e,t,!1):n},assetFilenameCompareDesc:function(e,t){return Go.assetFilenameCompareAsc(t,e)},makeCustomSortPropertyComparer:function(e){return function(t,r){return(parseFloat(Wo(r,e))||0)-(parseFloat(Wo(t,e))||0)}}};var Ko=[];class Yo{static get active(){return Ko.length>0}static start(e){Ko.push(e)}static end(e){let t=Ko[Ko.length-1];if(e!==t)throw new Error("ActionDispatcher: Expected to end "+t+", but instead ended a different action of type "+e);Ko.pop()}}Yo.IMPLICIT_ACTION_PREFIX="@",Yo.INIT_ACTION="@@INIT";class Qo{static register(e){for(var t=e.prototype.constructor.name||"Unknown",r=t,i=1;Qo._nameToClass[r];)r=t+i++;Qo._nameToClass[r]=e,e.prototype.__classLookupName=r}static lookup(e){return Qo._nameToClass[e]}static valueToJSON(e){return e&&e instanceof ns?{className:e.__classLookupName,json:e.toJSON()}:e}static valueFromJSON(e){if(e&&e.className&&e.json){var t=new(Qo.lookup(e.className));return t.fromJSON(e.json),t}return e}}Qo._nameToClass={};const es=function(e,t,r,i){return"function"==typeof t?t(e,...r):i()};var ts,rs;let is=(ts=class{constructor(){(0,P.Z)(this,"parent",rs,this),this.name=void 0,this.middleware=void 0,this.subStores={}}},rs=(0,i.Z)(ts.prototype,"parent",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ts);class ns extends Wt{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.__data=new is;var i=this.__data;i.middleware=r?[es]:[],t instanceof Array?i.middleware=i.middleware.concat(t):t&&i.middleware.push(t),e&&this.dispatch(Yo.INIT_ACTION,e)}forEach(e){var t=this.__data.subStores;for(var r in t){var i=t[r];i&&e(i)}}dispose(){super.dispose(),this.forEach((e=>e.dispose()))}_isMutable(){return void 0!==this.__allowMutable?this.__allowMutable:this.__data.parent?this.__data.parent._isMutable():void 0}_isMutableProperty(e){if(void 0!==this.__allowMutableProperties&&void 0!==this.__allowMutableProperties[e])return!0}_linkStore(e,t){var r=this.__data.subStores;if(r[e]&&(r[e].__data.parent=void 0,r[e].__data.name=void 0,r[e]=void 0),t&&t instanceof ns){if(t.__data.parent&&t.__data.parent!==this)throw new Error("The store you're attempting to assign to \""+e+'" already belongs to another store. The store hierarchy must be a tree.');r[e]=t,t.__data.parent=this,t.__data.name=e}}_doDispatch(e,t){var r,i=!1;if(e===Yo.INIT_ACTION)super.fromJSON(...t),i=!0;else if(0===e.indexOf(Yo.IMPLICIT_ACTION_PREFIX)){for(var n=this,o=(e=e.substring(Yo.IMPLICIT_ACTION_PREFIX.length)).split(".");o.length>1;)n=n[o.shift()];var s=o[0];"()"===s.substring(s.length-2)?r=n[s.substring(0,s.length-2)](...t.map(Qo.valueFromJSON)):n[s]=Qo.valueFromJSON(...t),i=!0}else{var a=this.__actionHandlers&&this.__actionHandlers[e];a&&(a.options.async?console.warn('Ignoring an asynchronous handler for action "'+e+'" while propagating. Asynchronous actions can only be dispatched directly to the target store.'):i=!0===(r=this[a.name](...t))||!1===a.options.propagate)}if(i)return r;this.forEach((r=>{r._doDispatch&&r._doDispatch(e,t)}))}_dispatchDown(e,t){var r=e.split("/");e=r.pop();for(var i=this,n=0;n<r.length;n++)if(!(i=i.__data.subStores[r[n]]))return;return i._doDispatch(e,t)}_dispatchWithMiddleware(e,t,r){for(var i=this,n=arguments.length,o=new Array(n>3?n-3:0),s=3;s<n;s++)o[s-3]=arguments[s];if(r&&!Yo.active)return r(this,e,t,(function(r){if(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return i._dispatchWithMiddleware(r,s,...o)}return i._dispatchWithMiddleware(e,t,...o)}));if("string"!=typeof e){if(Yo.active&&"function"==typeof e)throw new Error("Cannot dispatch an asynchronous action from a synchronous action");throw new Error("Action name must be a string")}let a;try{Yo.start(e),a=this._dispatchDown(e,t)}catch(t){throw Yo.end(e,!0),t}return Yo.end(e),a}_dispatchUp(e,t,r,i){var n=this.__data.parent;if(n)return n._dispatchUp(e,t,r,this.__data.name+"/"+i);var o=this.__data.middleware;return"string"==typeof e?this._dispatchWithMiddleware(i+e,t,...o):r._dispatchWithMiddleware(e,t,...o)}dispatch(e){for(var t=this.__actionHandlers&&this.__actionHandlers[e],r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return t&&t.options.async?this[t.name](...i):this._dispatchUp(e,i,this,"")}getParentStore(){return this.__data.parent}}const os=e=>"object"==typeof e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype;class ss extends ns{constructor(e,t){super(e,t),e&&this._fromJSON(e)}fromJSON(e){const t=super.fromJSON(e);return this._fromJSON(e),t}_fromJSON(e){const{exportables:t}=this;for(const r of t.properties)delete e[t.getJsonName(r.name)];Object.assign(this,e)}toJSON(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={},{exportables:i}=this;for(const o of i.properties){const s=o.toJSON.call(this,this[o.key],e);t&&(void 0===s||(n=s,Array.isArray(n)&&0===n.length)||os(s))||(r[i.getJsonName(o.name)]=s)}var n;if(e)for(const e of Object.getOwnPropertyNames(this))"_"!==e[0]&&(r[e]=Bt()(this[e]));return r}}const as=o.Z.makeClassDecorator(((e,t)=>{e.prototype.__allowMutable=t&&t.mutable,Qo.register(e)})),ls=o.Z.makePropertyDecorator((function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("function"!=typeof r.value)throw new Error("@Action can only be used with a method (the handler for the action)");if(!(e instanceof ns))throw new Error("@Action can only be used for methods on a Store");if(-1!==t.indexOf("/"))throw new Error('@Action name can\'t include the "/" character');if(-1!==t.indexOf("@"))throw new Error('@Action name can\'t include the "@" character');e.__actionHandlers=e.__actionHandlers||{},e.__actionHandlers[t]={name:t,options:i}}),{throwOnClassInvocation:"@Action must be used on a method, not a class."});var us,cs,ds,hs,ps,fs=function(e,t){if(e&&(e._isMutableProperty(t)||e._isMutable())){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return e.dispatch(Yo.IMPLICIT_ACTION_PREFIX+t,...i.map(Qo.valueToJSON))}throw new Error("Attempting to set state outside of an action")};function gs(e,t,r,i,n){var o=n&&n[r],s=void 0!==o?o:e.defaultValue,a=e.fromJSON.call(i,s);i[t]=a}class ms extends Se{add(e){var t=super.add(...arguments),r=t.set;return t.set=function(t){if(!Yo.active)return fs(this,e,t);r.call(this,t),this._linkStore(e,t)},t}computeJSONMethod(){for(var e=[],t=this.properties,r=0,i=t.length;r<i;++r){var n=t[r],o=n.name,s=this.getJsonName(n.name);e.push(gs.bind(this,n,o,s))}this.fromJSON=(t,r)=>(e.forEach((e=>e(t,r))),t)}}var vs=Object.getOwnPropertyDescriptor(ke.prototype,"length");class ys extends ke{_linkItem(e,t){this._parent._linkStore(this._name+":"+e,t)}_linkItems(e,t){e=e||0,t=t||this.length;for(let r=e;r<t;r++)this._linkItem(r);for(let r=e;r<t;r++)this._linkItem(r,this.at(r))}get length(){return vs.get.call(this)}set length(e){if(Yo.active){var t=this.base.length;vs.set.call(this,e),t>e&&this._linkItems(e,t)}else fs(this._parent,this._name+".length",e)}swapItems(e){if(!Yo.active)return fs(this._parent,this._name+".swapItems()",e);var t=this.base.length;super.swapItems(e),this._linkItems(0,Math.max(t,e.length))}setAt(e,t){if(!Yo.active)return fs(this._parent,this._name+".setAt()",e,t);super.setAt(e,t),this._linkItem(e,t)}push(){if(!Yo.active)return fs(this._parent,this._name+".push()",...arguments);var e=this.length,t=super.push(...arguments);return this._linkItems(e,e+arguments.length),t}pop(){if(!Yo.active)return fs(this._parent,this._name+".pop()",...arguments);var e=super.pop();return this._linkItem(this.length),e}unshift(){if(!Yo.active)return fs(this._parent,this._name+".unshift()",...arguments);var e=super.unshift(...arguments);return this._linkItems(),e}shift(){if(!Yo.active)return fs(this._parent,this._name+".shift()",...arguments);var e=super.shift();return this._linkItems(0,this.length+1),e}splice(){if(!Yo.active)return fs(this._parent,this._name+".splice()",...arguments);var e=this.length,t=super.splice(...arguments);return this._linkItems(0,Math.max(e,this.length)),t}fill(e,t,r){return Yo.active?(super.fill(e,t,r),this._linkItems(t,r),this):fs(this._parent,this._name+".fill()",e,t,r)}reverse(){return Yo.active?(super.reverse(),this._linkItems(),this):fs(this._parent,this._name+".reverse()")}sort(){return Yo.active?(super.sort(...arguments),this._linkItems(),this):fs()}}class bs extends Le{_linkItem(e,t){this._parent._linkStore(this._name+":"+e,t)}_linkItems(e){var t=e||this.keys();for(var r of t)this._linkItem(r,this.get(r))}set(e,t){return Yo.active?(super.set(e,t),this._linkItem(e,t),this):fs(this._parent,this._name+".set()",e,t)}delete(e){if(!Yo.active)return fs(this._parent,this._name+".delete()",e);var t=super.delete(e);return this._linkItem(e),t}clear(){if(!Yo.active)return fs(this._parent,this._name+".clear()");var e=this.keys();super.clear(),this._linkItems(e)}}const _s=new(us=o.Z.wrapPropertyDecorator,cs=o.Z.wrapPropertyDecorator,ds=o.Z.wrapPropertyDecorator,hs=o.Z.wrapPropertyDecorator,ps=class extends ct{constructor(){super(...arguments),this._jsonPropertiesType=ms,this._arrayType=ys,this._mapType=bs}byRefArray(e,t,r,i,n){if(n)throw new Error("static is not supported for @State.byRefArray");return ct.prototype.byRefArray.call(this,e,t,r,i,n)}byCustomRefArray(e,t,r,i,n){if(n)throw new Error("static is not supported for @State.byCustomRefArray");return ct.prototype.byCustomRefArray.call(this,e,t,r,i,n)}byRefMap(e,t,r,i,n){if(n)throw new Error("static is not supported for @State.byRefMap");return ct.prototype.byRefMap.call(this,e,t,r,i,n)}mutable(e,t){e.__allowMutableProperties=e.__allowMutableProperties||{},e.__allowMutableProperties[t]={name:t}}wrapArray(e,t,r){var i=new this._arrayType(e);return i._parent=t,i._name=r,i._linkItems(),i}wrapMap(e,t,r){var i=new this._mapType(e);return i._parent=t,i._name=r,i._linkItems(),i}},(0,i.Z)(ps.prototype,"byRefArray",[us],Object.getOwnPropertyDescriptor(ps.prototype,"byRefArray"),ps.prototype),(0,i.Z)(ps.prototype,"byCustomRefArray",[cs],Object.getOwnPropertyDescriptor(ps.prototype,"byCustomRefArray"),ps.prototype),(0,i.Z)(ps.prototype,"byRefMap",[ds],Object.getOwnPropertyDescriptor(ps.prototype,"byRefMap"),ps.prototype),(0,i.Z)(ps.prototype,"mutable",[hs],Object.getOwnPropertyDescriptor(ps.prototype,"mutable"),ps.prototype),(0,i.Z)(ps.prototype,"wrapArray",[be.Z],Object.getOwnPropertyDescriptor(ps.prototype,"wrapArray"),ps.prototype),(0,i.Z)(ps.prototype,"wrapMap",[be.Z],Object.getOwnPropertyDescriptor(ps.prototype,"wrapMap"),ps.prototype),ps)("State");var ws,Ps,As,Ss,xs,Cs,Os,ks,Es,Is,Ts,Ds,Rs,js,Zs,Fs,Ns,Ls,Ms,Us,$s,zs,qs,Hs,Js,Vs,Bs,Ws,Gs,Xs,Ks,Ys,Qs,ea,ta,ra,ia,na,oa,sa,aa,la,ua,ca,da,ha,pa,fa,ga;let ma=(ws=as({mutable:!0}),Ps=_s.byVal,As=_s.byVal,Ss=_s.byVal,xs=_s.byVal,ws((Os=class extends ss{constructor(){super(...arguments),(0,P.Z)(this,"showTitle",ks,this),(0,P.Z)(this,"showAuthor",Es,this),(0,P.Z)(this,"showCover",Is,this),(0,P.Z)(this,"cover",Ts,this)}},ks=(0,i.Z)(Os.prototype,"showTitle",[Ps],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Es=(0,i.Z)(Os.prototype,"showAuthor",[As],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Is=(0,i.Z)(Os.prototype,"showCover",[Ss],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ts=(0,i.Z)(Os.prototype,"cover",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"background"}}),Cs=Os))||Cs),va=(Ds=as({mutable:!0}),Rs=_s.byVal,js=_s.byVal,Zs=_s.byVal,Ds((Ns=class extends ss{constructor(){super(...arguments),(0,P.Z)(this,"version",Ls,this),(0,P.Z)(this,"themeId",Ms,this),(0,P.Z)(this,"styleId",Us,this)}},Ls=(0,i.Z)(Ns.prototype,"version",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ms=(0,i.Z)(Ns.prototype,"themeId",[js],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Gallery"}}),Us=(0,i.Z)(Ns.prototype,"styleId",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Dark"}}),Fs=Ns))||Fs),ya=($s=as({mutable:!0}),zs=_s.byRef(ma),qs=_s.byRef(va),$s((Js=class extends ss{constructor(){super(...arguments),(0,P.Z)(this,"options",Vs,this),(0,P.Z)(this,"explore",Bs,this)}},Vs=(0,i.Z)(Js.prototype,"options",[zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bs=(0,i.Z)(Js.prototype,"explore",[qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hs=Js))||Hs),ba=(Ws=as({mutable:!0}),Gs=_s.byVal,Ws((Ks=class extends ss{constructor(){super(...arguments),(0,P.Z)(this,"author",Ys,this)}},Ys=(0,i.Z)(Ks.prototype,"author",[Gs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xs=Ks))||Xs),_a=(Qs=as({mutable:!0}),ea=_s.byRef(ya),ta=_s.byRef(ba),Qs((ia=class extends ss{constructor(){super(...arguments),(0,P.Z)(this,"presentation",na,this),(0,P.Z)(this,"story",oa,this)}convertToDisplay(){this.presentation.explore.version=1,this.story.author||(this.story.author=xi.account.getDefaultShareAuthor())}revertFromDisplay(){1===this.presentation.explore.version&&(this.presentation=null)}},na=(0,i.Z)(ia.prototype,"presentation",[ea],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oa=(0,i.Z)(ia.prototype,"story",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.Z)(ia.prototype,"convertToDisplay",[ls],Object.getOwnPropertyDescriptor(ia.prototype,"convertToDisplay"),ia.prototype),(0,i.Z)(ia.prototype,"revertFromDisplay",[ls],Object.getOwnPropertyDescriptor(ia.prototype,"revertFromDisplay"),ia.prototype),ra=ia))||ra),wa=(sa=_s.byRef(_a),as((la=class extends ss{constructor(){super(...arguments),(0,P.Z)(this,"payload",ua,this)}},ua=(0,i.Z)(la.prototype,"payload",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aa=la))||aa),Pa=(ca=dt.byVal,da=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"name",ha,this)}},ha=(0,i.Z)(da.prototype,"name",[ca],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),da),Aa=(pa=dt.byRef(Pa),fa=class extends Qt{constructor(){super(...arguments),(0,P.Z)(this,"payload",ga,this)}},ga=(0,i.Z)(fa.prototype,"payload",[pa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fa);var Sa,xa,Ca,Oa,ka,Ea,Ia=r(784090);let Ta=(Sa=class extends tr{constructor(){super(...arguments),(0,P.Z)(this,"albumCoverDirty",xa,this),(0,P.Z)(this,"_coverAsset",Ca,this),(0,P.Z)(this,"_coverFallbackAsset",Oa,this),(0,P.Z)(this,"_coverPromise",ka,this),(0,P.Z)(this,"_defaultAssetOptions",Ea,this)}_getAttributesMiddleware(){return null}_createAttributes(e){if("collection"===e.subtype){if(null!=this._attributes){Yo.start("@@REINIT");const t=this._attributes.fromJSON(e);return Yo.end("@@REINIT"),t}return new wa(e,this._getAttributesMiddleware())}return super._createAttributes(e)}setAttributes(e){var t,r,i;super.setAttributes(e),null!==(t=this._defaultAssetOptions)&&void 0!==t||(this._defaultAssetOptions=this._createDefaultAssetOptions()),this.albumCoverDirty=!0,null!==(r=this.cachedAssets)&&void 0!==r||(this.cachedAssets={}),null!==(i=this.cachedAssetCountPromises)&&void 0!==i||(this.cachedAssetCountPromises={})}_createDefaultAssetOptions(){return null}setDefaultAssetOptions(e){this._defaultAssetOptions=e}get assets(){return this.getAssets(this._defaultAssetOptions)}set assets(e){this._assets=e}hasAssetLoaded(e){return null!=this.assets.get(e)}get albumCover(){var e;return null!==(e=this._coverAsset)&&void 0!==e?e:this._coverFallbackAsset}isFallbackCover(){return null==this._coverAsset&&null!=this._coverFallbackAsset}get filtersWereConverted(){return null!=this.attributes.migratedToUnfilteredAlbum}get migratedToUnfilteredAlbumId(){var e;return null===(e=this.attributes.migratedToUnfilteredAlbum)||void 0===e?void 0:e.id}getUserSetCoverId(){var e;return null===(e=this.attributes.payload.cover)||void 0===e?void 0:e.id}get journalHero(){return this._coverAsset}getSpace(){return null}_setCover(e){this._coverAsset=e,this._coverFallbackAsset=null,this.albumCoverDirty=!1}isLoadingCover(){return null!=this._coverPromise}isCoverLoaded(){return!this.albumCoverDirty}hasCover(){return null!=this.getAttribute("payload").cover}loadAlbumCoverP(){if(!this.albumCoverDirty)return Ia.Deferred().resolve();if(null!=this._coverPromise)return this._coverPromise;const e=this.linkHref("/rels/cover_asset");if(null!=e){const t=new this.coverClass(e);this._coverPromise=t.initializedP().done((e=>{this._setCover(e)}))}else this._coverPromise=this.getOldestAssetP().done((e=>{this._setCover(null),this._coverFallbackAsset=e}));return this._coverPromise.fail((()=>{this._setCover(null)})).always((()=>{this._coverPromise=null}))}getAssets(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=zr()(e);null!==(r=(t=this.cachedAssets)[n])&&void 0!==r||(t[n]=new this.assetListClass(`${this.href}/assets`,e));const o=this.cachedAssets[n];return o.parentAlbum=this,i&&o.reset(),o}markAssetsDirty(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.albumCoverDirty=!0),this.cachedAssetCountPromises={},this.assets.markDirty();for(const e in this.cachedAssets)this.cachedAssets[e].markDirty()}markAssetsExceptDefaultDirty(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.albumCoverDirty=!0),this.cachedAssetCountPromises={};const e=zr()(this._defaultAssetOptions);for(const t in this.cachedAssets){const r=this.cachedAssets[t];t!==e&&r.markDirty()}}markCustomOrderedAssetsDirty(e){const t=zr()(this._defaultAssetOptions);for(const r in this.cachedAssets){const i=this.cachedAssets[r];r===t&&e||"-"===i.options.order_after&&i.markDirty()}}markFilteredAssetsDirty(){var e;this.cachedAssetCountPromises={},!0===(null===(e=this.assets)||void 0===e?void 0:e.options.album_filters)&&this.assets.markDirty();for(const e in this.cachedAssets){const t=this.cachedAssets[e];!0===t.options.album_filters&&t.markDirty()}}toString(){return this.getName()}getName(e){let{name:t}=this.attributes.payload;return null!=e&&t.length>e&&(t=t.substr(0,e)),t}setPayloadStory(e){var t,r;const i=(null===(t=this.attributes.payload)||void 0===t?void 0:t.story)||{};null!==(r=this._pooledStorySettings)&&void 0!==r||(this._pooledStorySettings={}),this._pooledStorySettings=Ia.extend(i,this._pooledStorySettings,e),null!=this._setPlayloadStoryTimeout&&clearTimeout(this._setPlayloadStoryTimeout),this._setPlayloadStoryTimeout=setTimeout((()=>{this._setPayloadStory(),this._setPlayloadStoryTimeout=null}),50)}_setPayloadStory(){this.updateAttributesP("setPayloadStory",{payload:{story:this._pooledStorySettings}}).fail((()=>{var e,t,r,i,n,o,s,a,l,u;null!=(null===(e=this.attributes.payload)||void 0===e?void 0:e.story)&&(this.attributes.payload.story.title=null===(t=this.attributes)||void 0===t||null===(r=t._originalSourceJson.payload)||void 0===r||null===(i=r.story)||void 0===i?void 0:i.title,this.attributes.payload.story.author=null===(n=this.attributes)||void 0===n||null===(o=n._originalSourceJson.payload)||void 0===o||null===(s=o.story)||void 0===s?void 0:s.author,this.attributes.payload.story.description=null===(a=this.attributes)||void 0===a||null===(l=a._originalSourceJson.payload)||void 0===l||null===(u=l.story)||void 0===u?void 0:u.description)})),this._pooledStorySettings=null}getPayloadStory(){var e,t,r,i;const n=null===(e=this.attributes.payload)||void 0===e?void 0:e.story,o=null!==(t=null==n?void 0:n.title)&&void 0!==t?t:this.getName(),s=null!==(r=null==n?void 0:n.author)&&void 0!==r?r:"";return{title:o,description:null!==(i=null==n?void 0:n.description)&&void 0!==i?i:"",author:s}}getPresentationFilters(){var e,t;return null!==(e=null===(t=this.attributes.payload.presentation)||void 0===t?void 0:t.filters)&&void 0!==e?e:{}}getPresentationFilterPickedOnly(){return!0===this.getPresentationFilters().pickedOnly}getPresentationFilterRatingAtLeast(){var e;return null!==(e=this.getPresentationFilters().ratingAtLeast)&&void 0!==e?e:0}hasPresentationFiltersApplied(){return this.getPresentationFilterPickedOnly()||this.getPresentationFilterRatingAtLeast()>0}getPresentationStyleId(){var e,t;return(null===(e=this.attributes.payload.presentation)||void 0===e||null===(t=e.explore)||void 0===t?void 0:t.styleId)||""}get name(){return this.getName()}get title(){var e,t;return(null===(e=this.attributes.payload)||void 0===e||null===(t=e.story)||void 0===t?void 0:t.title)||""}hasTitle(){var e,t;return null!=(null===(e=this.attributes.payload)||void 0===e||null===(t=e.story)||void 0===t?void 0:t.title)}getShareTitle(){return this.hasTitle()&&this.title.length>0?this.title:this.name}get author(){var e,t;return(null===(e=this.attributes.payload)||void 0===e||null===(t=e.story)||void 0===t?void 0:t.author)||""}get showAuthor(){var e,t,r;return!0===(null===(e=this.attributes.payload)||void 0===e||null===(t=e.presentation)||void 0===t||null===(r=t.options)||void 0===r?void 0:r.showAuthor)}get showTitle(){var e,t,r;return!0===(null===(e=this.attributes.payload)||void 0===e||null===(t=e.presentation)||void 0===t||null===(r=t.options)||void 0===r?void 0:r.showTitle)}hasNonBlankAuthor(){return this.hasAuthor()&&""!==this.author.trim()}get description(){var e,t;return(null===(e=this.attributes.payload)||void 0===e||null===(t=e.story)||void 0===t?void 0:t.description)||""}set title(e){var t,r,i;null!=this.attributes.payload&&(null!==(i=(r=this.attributes.payload).story)&&void 0!==i||(r.story={})),(null===(t=this.attributes.payload)||void 0===t?void 0:t.story.title)!==e&&(null!=this.attributes.payload&&(this.attributes.payload.story.title=e),this.setPayloadStory({title:e}))}set author(e){var t,r,i;null!=this.attributes.payload&&(null!==(i=(r=this.attributes.payload).story)&&void 0!==i||(r.story={})),(null===(t=this.attributes.payload)||void 0===t?void 0:t.story.author)!==e&&(null!=this.attributes.payload&&(this.attributes.payload.story.author=e),this.setPayloadStory({author:e}))}set description(e){var t,r,i;null!=this.attributes.payload&&(null!==(i=(r=this.attributes.payload).story)&&void 0!==i||(r.story={})),(null===(t=this.attributes.payload)||void 0===t?void 0:t.story.description)!==e&&(null!=this.attributes.payload&&(this.attributes.payload.story.description=e),this.setPayloadStory({description:e}))}hasAuthor(){var e;return null!=(null===(e=this.attributes.payload.story)||void 0===e?void 0:e.author)}getNewestAssetP(){const e={captured_before:ce,embed:"asset",subtype:"image;video",limit:1};return this.getAssets(e,!0).firstP()}getOldestAssetP(){const e={captured_after:"-0001-12-31T23:59:59",embed:"asset",subtype:"image;video",limit:1};return this.getAssets(e,!0).firstP()}getFirstAssetP(){return this.getAssets({order_after:"-",embed:"asset",subtype:"image;video",limit:1},!0).firstP()}getLastOrderedAssetP(){const e={order_before:"",captured_before:ce,embed:"asset",subtype:"image;video;layout_segment",limit:1};return this.getAssets(e,!0).firstP()}getSubtype(){return this.attributes.subtype||""}getParentId(){var e,t;return null===(e=this.attributes.payload)||void 0===e||null===(t=e.parent)||void 0===t?void 0:t.id}getHideInOrganize(){var e;return(null===(e=this.attributes.payload)||void 0===e?void 0:e.hideInOrganize)||!1}hasDisplaySettings(){return"collection"===this.getSubtype()}},xa=(0,i.Z)(Sa.prototype,"albumCoverDirty",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ca=(0,i.Z)(Sa.prototype,"_coverAsset",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oa=(0,i.Z)(Sa.prototype,"_coverFallbackAsset",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ka=(0,i.Z)(Sa.prototype,"_coverPromise",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ea=(0,i.Z)(Sa.prototype,"_defaultAssetOptions",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sa);Ta.prototype.attributeClass=Aa,Ta.prototype.assetListClass=null;const Da=Ta;var Ra,ja,Za=r(784090);n.Z.is_enabled("asset_store")?Ra=function(){class e extends Ao{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(e),this.isLocal=t,this.albumAssetRelativeUrl=e.links.self.href}get attributes(){return ve.Z.recordEvent(this,"attributes"),this._assetsWithOverrides}set attributes(e){var t;return"album_asset"===e.type?(null!=this.asset&&this.disposeLink(this.asset),e.asset.base=e.base,this.isLocal?this._attributes=this._createAttributes(e):this.asset=this.link(Ao.store.aquireItem(e.asset)),this.order=null!=(t=e.payload)?t.order:void 0,this._assetsWithOverrides=Object.create(this.asset.attributes,{base:{value:e.base,enumerable:!0},spaces:{value:e.spaces,enumerable:!0}}),this._storeId=e.id):"asset"===e.type?this.asset.id!==e.id?(console.error("Assignment for mismatched catalog asset and asset"),b.Z.reportFailure("mismatchedCatalogAsset")):this.asset.attributes=e:(console.error(`Do not know how to assign attributes of type ${e.type}`),b.Z.reportFailure("unhandledAttributeTypes")),ve.Z.recordChange(this,"attributes",this._attributes)}get storeId(){return this._storeId}refreshP(){var e,t;return null!=this.albumAssetRelativeUrl?(e={embed:"spaces;asset;user"},t=this._linkBase.fullHref(this.albumAssetRelativeUrl)+"?"+Za.param(e),this.requestP("GET",t).done((e=>this.setAttributes(e)))):super.refreshP()}getOrder(){return this.order||""}setOrder(e){return this.order=e}}return n.Z.is_enabled("asset_store")&&(e.store=Ni.instance(e)),e}.call(void 0):(ja=function(e){return e.asset.base=e.base,e.asset.spaces=e.spaces},Ra=class extends Ao{constructor(e){var t;ja(e),super(e.asset),this.albumAssetRelativeUrl=e.links.self.href,this.order=null!=(t=e.payload)?t.order:void 0}refreshP(){var e,t;return null!=this.albumAssetRelativeUrl?(e={embed:"spaces;asset;user"},t=this._linkBase.fullHref(this.albumAssetRelativeUrl)+"?"+Za.param(e),this.requestP("GET",t).done((e=>{var t;return this.order=null!=(t=e.payload)?t.order:void 0,ja(e),this.setAttributes(e.asset)}))):super.refreshP()}getOrder(){return this.order||""}setOrder(e){return this.order=e}});const Fa=Ra;var Na=r(784090);const La=function(){class e extends tn{modelsByCreatedP(){return this.allP().then((e=>(e.sort((function(e,t){return Xo.localeCompare(t.getBestCreatedDateAttribute(),e.getBestCreatedDateAttribute())})),e)))}modelsByCreated(){var e;return(e=this.models.slice(0)).sort((function(e,t){return Xo.localeCompare(t.getBestCreatedDateAttribute(),e.getBestCreatedDateAttribute())})),e}modelsByName(){var e;return(e=this.models.slice(0)).sort(Xo.localeCompare),e}getCreateHref(){return`${this.href}/${this.createUuid()}`}createP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?(null==t.payload&&(t.payload={}),t.payload.name=e):t={subtype:"collection",payload:{name:e}},"collection"===t.subtype?super.createP(this.getCreateHref(),t).then((e=>(e.convertToDisplay(),e))):super.createP(this.getCreateHref(),t)}createWithAssetsP(e,t,r){var i,n,o;return n=Na.Deferred(),i="string"==typeof t||t instanceof String?{subtype:t}:t,r.length>0&&("string"==typeof r[0]||r[0]instanceof String)?o=!1:(o=!0,r[0]),this.createP(e,i).then((e=>{var t;return t=o?r.map((function(e){return e.id})):r,e.assets.addAssetIdsP(t).done((()=>n.resolve(e))).fail((()=>n.reject("addAssetsToAlbumFailure")))}),(()=>n.reject("albumCreationFailure"))),n.promise()}}return e.prototype.model=Da,e.prototype.modelName="Album",e}.call(void 0),Ma=e=>{let t;const r=(i,n,o,s)=>{const a=t,l=a.length,u=i.toJSON();if(c=s,d=u,JSON.stringify(c)===JSON.stringify(d))return a.splice(0,l);var c,d;const h=e.requestP("POST",e.href,JSON.stringify(i.toJSON(!1)));h.done((()=>{a===t&&(a.splice(0,l),Yo.start("@@UPDATE"),i.fromJSON(u),Yo.end("@@UPDATE"),a.length>0&&r(i,n,o,u))})),h.fail((()=>{if(a===t){a.splice(0,l),Yo.start("@@REVERT"),i.fromJSON(s);for(const e of a){const{action:t,payload:r}=e;i.dispatch(t,...r)}Yo.end("@@REVERT"),a.length>0&&r(i,n,o,s)}}))};return(e,i,n,o)=>{if("@"===i[0])"@@INIT"!==i&&"@@REINIT"!==i||(t=[]);else{if(0===t.length){const t=e.toJSON(),s=o();return r(e,i,n,t),s}t.push({action:i,payload:n})}return o()}};var Ua,$a=r(86462);const za=Ua=function(){var e,t;let r=(e=class extends tn{constructor(e,r){n.Z.is_enabled("debug_force_show_error_assets")&&"incomplete"===(null!=r?r.exclude:void 0)&&delete r.exclude,super(e,r),(0,P.Z)(this,"haveNonOwnerAssets",t,this),null!=this.options.captured_before&&(this.nextPageLink="prev")}_add(e,t){return null!=e.importedByUser&&(this.haveNonOwnerAssets=!0),super._add(e,t)}_parse(e){var t;return t=super._parse(e),null!=this.options.captured_before&&t.reverse(),t}getTotalAesthetic(e){var t,r,i,o,s,a,l,u;for(u=0,i=0,o=(s=this.models).length;i<o;i++)null!=(null!=(a=(t=s[i]).attributes)&&null!=(l=a.payload)?l.aesthetics:void 0)&&(u+=t.attributes.payload.aesthetics[e]);return r=u/this.models.length,n.Z.is_enabled("debug")&&console.log(`Total ${e} is ${u}, avg ${r.toFixed(1)}`),u}getAestheticStats(){var e,t,r,i;for(i={},t=0,r=mo.length;t<r;t++)i[e=mo[t]]=this.getTotalAesthetic(e);return i}get displayEmpty(){return this.modelsBindable.every((function(e){return e.isLayoutSegment()}))}get displayLength(){return this.modelsBindable.reduce(((e,t)=>t.isLayoutSegment()?e:e+1),0)}async nextDisplayIndexJP(e){var t,r;return r=e+1,this.finished||r<this.length?(null!=(t=this.at(r))?t.isLayoutSegment():void 0)?this.nextDisplayIndexJP(r):null!=t?r:null:(await this.fetchJP(),this.nextDisplayIndexJP())}prevDisplayIndex(e){var t,r;for(r=e-1;r>=0&&(null!=(t=this.at(r))?t.isLayoutSegment():void 0);)r--;return null!=t?r:null}getAssetSectionText(e,t){var r,i,n,o;if(null==e)return[null,null];for(i=this.index(e.id),--i;i>=0&&!(n=this.at(i)).isLayoutSegment();)--i;return(null!=n?n.isLayoutSegment():void 0)&&(o=n.title,r=n.description),i<=0&&((null!=o?o.length:void 0)>0||(o=t)),[o,r]}},t=(0,i.Z)(e.prototype,"haveNonOwnerAssets",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.Z)(e.prototype,"displayEmpty",[Wi.Z],Object.getOwnPropertyDescriptor(e.prototype,"displayEmpty"),e.prototype),(0,i.Z)(e.prototype,"displayLength",[Wi.Z],Object.getOwnPropertyDescriptor(e.prototype,"displayLength"),e.prototype),e);return r.prototype.model=yo,r.prototype.modelName="Asset",r}.call(void 0);Ua.defaultPayloadForNewAsset=function(e,t){var r;return{payload:{userCreated:r=e.toISOString(),userUpdated:r,importSource:{importedOnDevice:null!=t?t:"Lightroom Web {0363f1a98b0c507a237977267358886724194e58198ae5efc58c659238ee8fc3}",importTimestamp:r}}}},Ua.defaultPayloadForUpload=function(e,t,r){let{file:i,payload:o}=e;var s,a;return(a=Ua.defaultPayloadForNewAsset(t,r)).payload.importSource.fileSize=i.size,a.payload.importSource.fileName=i.name,n.Z.is_enabled("upload_crs_version")&&(s=$a.Z.VERSION,a.payload.develop={crsVersion:s}),null!=o&&X()(a.payload,o),a};class qa extends tr{matchesSyncChange(e){if("error"===this.getType())return e.id===this.getSourceId();if(this.getType()!==e.type)return!1;if("asset"===e.type){if("delete"===e.action)return this.isDeleted()&&this.getChangedId()===e.id;if("create"===e.action)return this.isCreated()&&!this.isDeleted()&&this.getChangedId()===e.id;if("update"===e.action)return this.getChangedId()===e.id&&this.attributes.revision_ids.includes(e.revision_id)}return!1}isCatalogUpdateError(){return"error"===this.getType()}isStorageExceededError(){return"StorageExceededError"===this.getSubtype()}getType(){return this.attributes.type}getSubtype(){return this.attributes.subtype}isCreated(){return null!=this.attributes.created}isDeleted(){return!0===this.attributes.deleted}getChangedId(){return this.attributes.id}getSourceId(){var e,t;return null===(e=this.attributes)||void 0===e||null===(t=e.source)||void 0===t?void 0:t.id}}var Ha,Ja,Va;let Ba=(Ha=x(500),Ja=class extends de{get isSyncing(){return this.pendingRequestCount>0}constructor(e){super(e),(0,P.Z)(this,"pendingRequestCount",Va,this),z.on("requests-idle",(()=>{this.assetMap={}})),this.pendingRequestCount=0}setAssetFlagJP(e,t){this._initSyncUpdate();const r=this._makeAssetPayloadUpdateData(e);return r.payload.reviews={[R.Z.account.id]:{flag:t,date:r.updated}},this.assetUpdateQueue.push(r),e.optimisticUpdatePayload(r.payload,r.revision_id),this._doSyncUpdate(),this.syncPromise}_removeExistingAssetUpdate(e,t){return this.assetUpdateQueue=this.assetUpdateQueue.filter((r=>!(r=>{var i;return r.id===e.id&&(null===(i=r.payload)||void 0===i?void 0:i[t])})(r)))}setAssetRatingJP(e,t){this._initSyncUpdate();const r=this._makeAssetPayloadUpdateData(e);return r.payload.ratings={[R.Z.account.id]:{rating:t,date:r.updated}},this.assetUpdateQueue.push(r),e.optimisticUpdatePayload(r.payload,r.revision_id),this._doSyncUpdate(),this.syncPromise}flagManyAssetsJP(e,t){for(const r of e)this.setAssetFlagJP(r,t);return this.syncPromise}deleteManyAssetIdsJP(e){for(const t of e)this.deleteAssetIdJP(t);return this.syncPromise}restoreManyAssetIdsJP(e){for(const t of e){this.restoreAssetIdJP(t);const e={id:t,action:"delete",type:"asset"};this._addExpectedSyncUpdate(e)}return this.syncPromise}deleteAssetIdJP(e){const t={id:e,revision_id:`${this.createUuid()}`,action:"delete",type:"asset"};return this._addAssetDeleteJP(t)}restoreAssetIdJP(e){const t={id:`${this.createUuid()}`,revision_id:`${this.createUuid()}`,type:"asset",action:"create",restore_from:{id:e}};return this._addAssetRestoreJP(t)}_makeAssetPayloadUpdateData(e,t,r){const i=(new Date).toISOString(),n={id:e.id,updated:i,revision_id:`${this.createUuid()}`,action:"update",type:"asset",if_match:e.latestRevision(),payload:{userUpdated:i}};return this.assetMap[e.id]=e,n}_initSyncUpdate(){null==this.assetUpdateQueue&&(this.assetUpdateQueue=[],this.assetMap={},this.syncPromise=new Promise(((e,t)=>{this.syncResolve=e,this.syncReject=t})))}_addAssetDeleteJP(e){return this._initSyncUpdate(),this.assetUpdateQueue.push(e),this._doSyncUpdate(),this.syncPromise}_addAssetRestoreJP(e){return this._initSyncUpdate(),this.assetUpdateQueue.push(e),this._doSyncUpdate(),this.syncPromise}_addExpectedSyncUpdate(e){return e._excludeFromRequest=!0,this.assetUpdateQueue.push(e),this.syncPromise}_refreshFailedAssets(e){for(const r of e){var t;"asset"===r.type&&"update"===r.action&&(null===(t=this.get(r.id))||void 0===t||t.refreshP())}}_readSyncForSuccessJP(e,t,r){return new Promise(((i,n)=>{let o=t,s=!0,a=0;r.catch((()=>s=!1));var l=e=>{this.requestP("GET",e).then((e=>{if(!s)return n("sync requests failed while reading for success");const t=new tr(e);for(const e of t.attributes.updates){var r=new qa(e);o=o.filter((e=>{const t=r.matchesSyncChange(e);return t&&r.isStorageExceededError()&&(a+=1),!t}))}0===o.length?i():setTimeout((()=>l(t.linkHref("next"))),1e3)})).fail(((e,t,r)=>{n([e,t,r]),this._refreshFailedAssets(o),this.reportOzFailure("syncReadFailure",e,t,r)}))};l(e,0)}))}get(e){return this.assetMap[e]}_batchRequested(){this.successCheckAssetId=this.successCheckP=this.assetUpdateQueue=this.syncResolve=this.syncReject=this.syncPromise=null}_makeBatchSyncRequestJP(e){return new Promise(((t,r)=>this.requestP("POST",this.href,JSON.stringify(e)).done((e=>t(e))).fail((()=>r()))))}async _doSyncUpdate(){const{syncPromise:e}=this,t=this.syncResolve,r=this.syncReject,i=this.assetUpdateQueue,o=i.filter((e=>!e._excludeFromRequest)),{successCheckP:s}=this;this._batchRequested(),++this.pendingRequestCount;const a=[];let l=0;for(;l<o.length;)a.push(o.slice(l,l+100)),l+=100;let u=a.shift();try{const o=await this._makeBatchSyncRequestJP(u),s=new tr(o).linkHref("/rels/future_updates");for(this._readSyncForSuccessJP(s,i,e).then((()=>{n.Z.is_enabled("debug")&&console.log("sync complete"),t()})).catch((e=>{let[t]=e;n.Z.is_enabled("debug")&&console.warn("sync failed"),r([t])})).finally((()=>{--this.pendingRequestCount}));a.length>0;)u=a.shift(),await this._makeBatchSyncRequestJP(u)}catch(e){for(const e of u){var c;null===(c=this.get(e.id))||void 0===c||c.refreshP()}r()}}},Va=(0,i.Z)(Ja.prototype,"pendingRequestCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.Z)(Ja.prototype,"_doSyncUpdate",[Ha],Object.getOwnPropertyDescriptor(Ja.prototype,"_doSyncUpdate"),Ja.prototype),Ja);var Wa=r(784090);const Ga=function(){class e extends za{getTotalCountHref(){var e;return e={},null!=this.options.exclude&&(e.exclude=this.options.exclude),null!=this.options.subtype&&(e.subtype=this.options.subtype),`${this.href}/count?${Wa.param(e)}`}debugCreateEmptyAssetP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r;return r=Wa.Deferred(),this.pageP(0).then((()=>{var i,n,o,s,a;return o={size:1234,name:"DEBUG_LONGFILENAMEFOROVERFLOWTESTING.JPG"},(s=za.defaultPayloadForUpload({file:o},e,t)).subtype="image",s.payload.captureDate=e.toISOString(),s.payload.importSource.importedBy=R.Z.account.id,s.payload.importSource.originalWidth=s.payload.importSource.originalHeight=Math.floor(2264*Math.random())+1e3,n=this.createUuid(),i=`${this.href}/${n}`,a=`${i}/revisions/${this.createUuid()}`,this.requestP("PUT",a,JSON.stringify(s)).done((e=>r.resolve(a,n)))})).fail((()=>r.reject())),r.promise()}createNewEmptyAssetP(e,t,r){var i;return i=Wa.Deferred(),null==r?i.reject():(this.pageP(0).then((()=>{var n,o,s,a;return(s=za.defaultPayloadForUpload(e,r)).subtype=ur.ozSubtype(e.file),s.payload.captureDate="0000-00-00T00:00:00",s.payload.importSource.importedBy=t.id,null!=e.sha256&&(s.payload.importSource.sha256=e.sha256),o=this.createUuid(),n=`${this.href}/${o}`,a=`${n}/revisions/${this.createUuid()}`,this.requestP("PUT",a,JSON.stringify(s)).done((e=>i.resolve(a,o)))})).fail((()=>i.reject())),i.promise())}async debugCopyAssetAsProxyOnlyJP(e){var t,r,i,n,o,s,a;return e.hasExternalDevelopSettings()?Promise.reject("no support for external develop settings"):((n=e.cloneAttributes().payload).importSource.willNotUploadMaster=!0,(i=X()({},{payload:n},za.defaultPayloadForNewAsset(new Date))).subtype=e.attributes.subtype,i.captureDate=e.attributes.captureDate,r=this.createUuid(),s=`${t=`${this.href}/${r}`}/revisions/${a=this.createUuid()}`,await this.requestJP("PUT",s,JSON.stringify(i)),o=`${t}/revisions/${a}/proxies/${this.createUuid()}`,await this.requestJP("PUT",`${o}`,JSON.stringify({file_href:e.linkFullPath("/rels/proxy_type/2560")}),{headers:{"X-Generate-Renditions":"all","X-Async-Copy":!0}}),t)}deleteManyP(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var i,n,o;for(n=void 0,i=0;i<e.length;)o=e.slice(i,i+=100),n=n?n.pipe((e=>()=>this._deleteManyP(e,t))(o)):this._deleteManyP(o,t);return n.then((()=>{var t,i,n,o,s,a,l,u,c;for(o=[],s=0,l=e.length;s<l;s++)i=e[s],null!=(n=this.index(i))&&o.push(n);for(o.sort((function(e,t){return e-t})),c=0,t=a=0,u=o.length;a<u;t=++a)n=o[t],this._models.splice(n-c++,1);return null!=this.totalCount&&r&&(this.totalCount-=e.length),o.length>0&&this._reindex(),o}))}deleteManyJP(e,t){var r;return r=this._deleteManyJP(e,t),this._deleteMany(e),r}restoreManyJP(e,t){return this._restoreManyJP(e,t)}_deleteManyJP(e,t){return R.Z.catalogContext.catalogUpdates.deleteManyAssetIdsJP(e)}_restoreManyJP(e,t){return R.Z.catalogContext.catalogUpdates.restoreManyAssetIdsJP(e)}_deleteManyP(e,t){return this.requestP("DELETE",this.href,`asset_ids=${e.join("%3B")}`,{contentType:"application/x-www-form-urlencoded;charset=UTF-8"}).fail(((e,r,i)=>{var n;return n=null!=t?`${t}Failure`:"deleteAssetsFailure",this.reportOzFailure(n,e,r,i)}))}}return e.prototype.model=Ao,e.prototype.modelName="CatalogAsset",e}.call(void 0);class Xa extends tr{setAttributes(e){return super.setAttributes(e),null!=e.author&&(e.author.base=e.base,this.author=new yr(e.author)),this}isAuthoredBy(e){var t;return null!=e&&(null===(t=this.attributes.author)||void 0===t?void 0:t.id)===e.id}getBody(){var e;return(null===(e=this.attributes.payload)||void 0===e?void 0:e.body)||""}removeP(){return this.requestP("DELETE",this.href)}}const Ka=function(){class e extends tn{createP(e,t){var r;return r={payload:{body:e}},this.allP().then((()=>super.createP(this.href+"/"+this.createUuid(),r)))}_add(e,t){return t?(this._unshift(e),this._reindex()):super._add(e)}}return e.prototype.model=Xa,e.prototype.modelName="Comment",e}.call(void 0);class Ya extends tr{setAttributes(e){return super.setAttributes(e),null!=e.author&&(this.author=new yr(e.author)),this}isAuthoredBy(e){var t;return null!=e&&(null===(t=this.attributes.author)||void 0===t?void 0:t.id)===e.id}}var Qa=r(784090);const el=function(){class e extends tn{_parse(e){var t,r,i,o,s,a,l,u;if(o=e.resources,n.Z.is_enabled("lots_of_likes"))for(a=0,u=(i=o).length;a<u;a++)for(r=i[a],s=l=0;l<=7;s=++l)(t=Qa.extend(!0,{},r)).id+=s.toString(),o.push(t);return o}}return e.prototype.model=Ya,e.prototype.modelName="Like",e}.call(void 0),tl=function(){class e extends Oo{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{embed:"asset;spaces;user"})}}return e.prototype.model=Fa,e}.call(void 0);var rl=r(784090),il=[].indexOf;const nl=function(){class e extends Ga{isOrdered(){return 0===this.length||""!==this.at(0).getOrder()}addAssetsP(e){var t,r;return r=function(){var r,i,n;for(n=[],r=0,i=e.length;r<i;r++)t=e[r],n.push(t.id);return n}(),this._addAssetIdsP(r)}addAssetIdsP(e){return this._addAssetIdsP(e)}addOrderedAssetIdsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doInsertIdsOrderingP(e,t,r)}hasOrdering(e){var t,r,i,n;for(t=r=0,i=e.length;r<i;t=++r)if(e[t].id!==(null!=(n=this.at(t))?n.id:void 0))return!1;return!0}addOrderedAssetsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doOrderingP(e,t,r)}reorderAssetIdsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i,n;return i=function(){var t,r,i;for(i=[],t=0,r=e.length;t<r;t++)n=e[t],i.push(this.get(n));return i}.call(this),this._doOrderingP(i,t,r)}reorderAssetsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doOrderingP(e,t,r)}addAndReorderAssetsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doOrderingP(e,t,r)}_doInsertIdsOrderingP(e,t,r){var i,n,o;return!this.finished&&(r||!this.isOrdered()||t>=this.length||-1===t)?this.allP().then((()=>this._doInsertIdsOrderingP(e,t,r))):(-1===t&&(t=this.length),this.isOrdered()&&!r?null!=(n=this._getOrdersForInsert(e.length,t))?this._applyReorderDataP(e,n,[],[]):this._doInsertIdsOrderingP(e,t,!0):null==(o=this._getOrders(e.length+this.length))?(b.Z.reportFailure("albumAssetLex64ReindexFailure"),rl.Deferred().reject()):(i=o.splice(t,e.length),this._applyReorderDataP(e,i,this.models,o)))}_doOrderingP(e,t,r){var i,n,o,s,a,l,u,c,d,h,p,f,g,m,v,y;if(!this.finished&&(r||!this.isOrdered()||t>=this.length))return this.allP().then((()=>this._doOrderingP(e,t,r)));for(-1===t&&(t=this.length),f=0,u=0,h=e.length;u<h;u++)i=e[u],null==this.index(i.id)&&f++;if(this.isOrdered()&&!r){if(null==(v=this._getOrdersForInsert(e.length,t)))return this._doOrderingP(e,t,!0);n=e}else{if(null==(v=this._getOrders(f+this.length)))return b.Z.reportFailure("albumAssetLex64ReindexFailure"),rl.Deferred().reject();for(n=[],l=c=0,y=this.length;c<=y;l=c+=1)l===t&&n.push(...e),l<this.length&&(o=this.models[l],il.call(e,o)<0&&n.push(o))}for(g=[],m=[],s=[],a=[],l=d=0,p=n.length;d<p;l=++d)i=n[l],null!=this.index(i.id)?(s.push(i),a.push(v[l])):(g.push(i),m.push(v[l]));return this._applyReorderDataP(g,m,s,a)}_getOrdersForInsert(e,t){var r,i;if(!(t-1>=0&&t-1<this.length&&""===(i=this.at(t-1).getOrder())||t<this.length&&""===(r=this.at(t).getOrder())))return this._getOrders(e,i,r)}_getOrders(e,t,r){var i,n,o,s,a;if(!m.doRandomFailure("getLex64Orders")){if(1===e)return null!=(o=null!=t&&null!=r?B.insertBetween(t,r,"middle"):null!=t?B.insertAfter(t,"middle"):null!=r?B.insertBefore(r,"middle"):B.MIDPOINT)?[o]:void 0;for(n=null!=t?t:null!=r?B.insertBefore(r,"middle"):B.MIDPOINT,s=[],i=1,a=e;i<=a;i+=1){if(null==(o=null!=r?B.insertBetween(n,r,"low"):B.insertAfter(n,"low")))return;s.push(o),n=o}return s}}_applyReorderDataP(e,t,r,i){var o,s,a,l,u,c,d,h,p,f,g,m,v,y,_,w,P,A,S,x;if(a=rl.Deferred(),n.Z.is_enabled("debug_verbose")&&(console.log("applying reorder"),console.log(`current order: ${function(){var e,t,r,i;for(i=[],e=0,t=(r=this.models).length;e<t;e++)o=r[e],i.push(o.getOrder());return i}.call(this).join(" ")}`),console.log(`new asset orders: ${t.join(" ")}`),console.log(`existing asset orders: ${i.join(" ")}`)),x=(new Date).toISOString(),y=!0,A=[],e.length>0)if(v=[],"string"==typeof(u=e[0])||u instanceof String)y=!1,(v=e).length<=5?(P=this._addAssetIdsP(v,t,x).then((()=>new tl(this.href,v).loadP())).then((e=>{var t,r;for(r in t=e.assets)o=t[r],this._add(o);return a.notify("optimistically-applied"),e.error_count>0&&(b.Z.reportFailure("assetInsertFailure"),n.Z.is_enabled("debug")&&console.log(`${e.error_count} failures inserting ${v.length} assets`,e.errors)),this._sortByOrder()})),A.push(P)):(y=!1,A.push(this._addAssetIdsP(v,t,x)));else{for(c=d=0,f=e.length;d<f;c=++d)(o=e[c]).setOrder(t[c]),this._add(o),v.push(o.id);a.notify("optimistically-applied"),A.push(this._addAssetIdsP(v,t,x))}if(r.length>0){for(c=h=0,g=r.length;h<g;c=++h)(o=r[c]).order=i[c];s=r.map((function(e){return{id:e.id,payload:{userUpdated:x,order:e.order}}})),r.length>10?A.push(this._debouncedBulkUpdateAttributesJP("updateOrder",s)):A.push(this._bulkUpdateAttributesP(s))}if(y?this._sortByOrder():this.markDirty(),n.Z.is_enabled("debug")){for(_={},w=0,l=0,p=0,m=(S=this.models).length;p<m;p++)null==(o=S[p]).order?n.Z.is_enabled("debug_verbose")&&console.error("Asset with null order (this is legal at the end)",o):o.order<null?(console.error("Asset out of order",o),++w):_.hasOwnProperty(o.order)&&(console.error("Duplicate asset order",o.order,o),++l),_[o.order]=!0;w>0&&b.Z.report("albumAssetOutOfOrder",{count:w}),l>0&&b.Z.report("albumAssetDuplicateOrder",{count:l})}return rl.when(...A).then(a.resolve).fail(a.reject),a.promise()}_sortByOrder(){return this.modelsBindable.sort((function(e,t){var r,i,n,o,s,a;return(n=e.getOrder())!==(a=t.getOrder())?""===n?1:""===a?-1:n>a?1:-1:(r=e.payload().captureDate)!==(o=t.payload().captureDate)?r>o?1:-1:(i=e.attributes.created)>(s=t.attributes.created)?1:i<s?-1:0})),this._reindex()}deleteAssetsP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r;return r=e.map((function(e){return e.id})),this.deleteAssetIdsP(r,t)}deleteAssetIdsP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i,n,o;for(n=0,o=e.length;n<o;n++)r=e[n],null!=(i=this.index(r))&&this._delete(i);return null!=t?t.then((()=>this.deleteManyP(e,"removeAssetsFromAlbum",!1))):this.deleteManyP(e,"removeAssetsFromAlbum",!1)}async _getOrdersForAppendJP(e){var t;if(null!=this.parentAlbum){try{t=await this.parentAlbum.getLastOrderedAssetP()}catch(e){}if(null!=t&&""!==t.getOrder())return this._getOrders(e.length,t.getOrder())}}async _addAssetIdsV2JP(e,t,r){var i,n,o,s,a,l;for(null==t&&(t=await this._getOrdersForAppendJP(e)),null==r&&(r=(new Date).toISOString()),l=[],n=s=0,a=(o=t?e.map((function(e,r){return[e,t[r]]})):e.map((function(e){return[e]}))).length-1;s<=a;n=s+=50)i=o.slice(n,n+50),l.push(await this._doAddAssetIdsV2JP(i,r));return l}_addAssetIdsP(){var e,t;return t=this._addAssetIdsV2JP(...arguments),e=rl.Deferred(),t.then((t=>e.resolve(...null!=t?t:[])),(t=>e.reject(...null!=t?t:[]))),e}_doAddAssetIdsP(e,t,r){var i,n;return n=rl.Deferred(),i=t&&t.length===e.length?e.map((function(e,i){return{id:e,payload:{userCreated:r,userUpdated:r,order:t[i]}}})):e.map((function(e){return{id:e,payload:{userCreated:r,userUpdated:r}}})),this.requestP("PUT",this.href,JSON.stringify({resources:i})).always(((e,t)=>t>=200&&t<300||null!=e.errors&&403===t?n.resolve(e,t):n.reject(e,t))),n.promise()}_doAddAssetIdsV2JP(e,t){return this.safeToJSPromise(this._doAddAssetIdsV2P(e,t))}_doAddAssetIdsV2P(e,t){var r,i;return i=rl.Deferred(),r=e.map((function(e){var r,i,n;return[i,n]=e,r={id:i,payload:{userCreated:t,userUpdated:t}},null!=n&&(r.payload.order=n),r})),this.requestP("PUT",this.href,JSON.stringify({resources:r})).always(((e,t)=>t>=200&&t<300||null!=e.errors&&403===t?i.resolve(e,t):i.reject(e,t))),i.promise()}getTotalCountHref(){var e;return!0===this.options.album_filters?null:(e={},null!=this.options.exclude&&(e.exclude=this.options.exclude),null!=this.options.subtype&&(e.subtype=this.options.subtype),`${this.href}/count?${rl.param(e)}`)}_deleteManyP(e,t){return this.requestP("DELETE",this.href,`asset_ids=${e.join("%3B")}`,{contentType:"application/x-www-form-urlencoded;charset=UTF-8"}).fail(((e,r,i)=>{var n;return n=null!=t?`${t}Failure`:"deleteAssetsFailure",this.reportOzFailure(n,e,r,i)}))}_debouncedBulkUpdateAttributesJP(e,t){var r,i;return null==(r=this.debouncedRequests)[e]&&(r[e]={}),this.debouncedRequests[e].assetData=t,i=()=>(null!=this.debouncedRequests[e].timeout&&clearTimeout(this.debouncedRequests[e].timeout),this.debouncedRequests[e].timeout=setTimeout((()=>this._bulkUpdateAttributesP(this.debouncedRequests[e].assetData).done((()=>(this.debouncedRequests[e].resolve(),this.debouncedRequests[e]=null))).fail((()=>this.debouncedRequests[e].reject()))),5e3)),null!=this.debouncedRequests[e].promise?i():this.debouncedRequests[e].promise=new Promise(((t,r)=>(this.debouncedRequests[e].resolve=t,this.debouncedRequests[e].reject=r,i()))),this.debouncedRequests[e].promise}_bulkUpdateAttributesP(e){var t;return t={resources:e},this.requestP("POST",this.href,JSON.stringify(t)).then((()=>{var e,r,i,n,o,s,a;for(a=[],r=0,i=(n=t.resources).length;r<i;r++)null!=(null!=(o=(e=n[r]).payload)?o.order:void 0)?a.push(null!=(s=this.get(e.id))?s.setOrder(e.payload.order):void 0):a.push(void 0);return a}))}getReviewedAssetsP(e,t){return null!=this.proofingAssetsDeferred?this.proofingAssetsDeferred:this.proofingAssetsDeferred=this.allP().then((r=>{var i,n,o,s,a,l,u,c;for(n=[],this.proofingClientIdList=new Set,this.proofingClientList=new Set,this.selectedAssetsForFiltering=new Set,this.commentedAssetsForFiltering=new Set,this.selectedPromises=[],this.commentedPromises=[],c=r=>{var i,o;return i=r.getLikesHref(e),(o=new el(i)).allP().then((()=>{var e,i,s,a,l;for(l=[],i=0,s=(a=o.modelsBindable.base).length;i<s;i++)e=a[i].author,this.proofingClientIdList.has(e.id)||this.proofingClientList.add(e),this.proofingClientIdList.add(e.id),e.id===t&&"all_clients"!==t?(this.selectedAssetsForFiltering.add(r),l.push(n.push(r))):l.push(void 0);return l}))},u=r=>{var i,o;return i=r.getCommentsHref(e),(o=new Ka(i)).allP().then((()=>{var e,i,s,a,l;for(l=[],i=0,s=(a=o.modelsBindable.base).length;i<s;i++)e=a[i].author,this.proofingClientIdList.has(e.id)||this.proofingClientList.add(e),this.proofingClientIdList.add(e.id),e.id===t&&"all_clients"!==t?(this.commentedAssetsForFiltering.add(r),l.push(n.push(r))):l.push(void 0);return l}))},s=0,a=r.length;s<a;s++)i=r[s],t?(i.getLikesCount(e)>0&&("all_clients"===t&&(this.selectedAssetsForFiltering.add(i),n.push(i)),this.selectedPromises.push(c(i))),i.getCommentCount(e)>0&&("all_clients"===t&&(this.commentedAssetsForFiltering.add(i),n.push(i)),this.commentedPromises.push(u(i)))):(l=i.getLikesCount(e),i.isLikedByUser(e)&&(l-=1),this.reviewSelectedCount+=l,o=i.getCommentCount(e),(l>0||o>0)&&n.push(i));return this.selectAndCommentPromises=this.selectedPromises.concat(this.commentedPromises),rl.when(...this.selectAndCommentPromises).always((()=>this.proofingAssetsDeferred=null)).then((function(){return n.sort((function(t,r){return r.getLikesCount(e)-t.getLikesCount(e)}))}))}))}async deleteRedundantLayoutSegmentsJP(){var e,t,r,i,n,o;for(r=new Set,n=null,t=0,i=(o=this.models).length;t<i;t++)(e=o[t]).isLayoutSegment()?(null!=n&&(n.layoutSegmentHasText?e.layoutSegmentHasText||r.add(e.id):r.add(n.id)),n=e):n=null;if(r.size>0)return await this.deleteAssetIdsP(Array.from(r))}async deleteAllLayoutSegmentsJP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t,r,i,n,o,s;for(n=[],r=i=0,o=(s=this.models).length;i<o;r=++i)t=s[r],e&&0===r||t.isLayoutSegment()&&n.push(t.id);if(n.length>0)return await this.deleteAssetIdsP(n)}validateLayoutSegmentsJP(){var e,t,r,i,n,o;for(o=[],t=r=0,i=(n=this.models).length;r<i;t=++r)(e=n[t]).isLayoutSegment()?o.push(e.migrateNameToTitleP()):o.push(void 0);return o}}return e.prototype.model=Fa,e.prototype.modelName="CatalogAlbumAsset",e.prototype.debouncedRequests={},e}.call(void 0);class ol extends Da{setAttributes(e){var t;return this.order=null===(t=e.payload)||void 0===t?void 0:t.order,super.setAttributes(e)}markAssetsDirty(){super.markAssetsDirty()}getOrder(){return this.order||""}_getAssetsLink(){return`${this.linkHref("self")}/assets`}_refreshP(e){return e=e||`${this.href}?embed=spaces;asset`,super._refreshP(e)}}class sl extends ol{_createDefaultAssetOptions(){return{embed:"spaces;asset",order_after:"-",subtype:"image;video",exclude:"incomplete"}}removeManyAssetsP(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.assets.deleteAssetsP(e,t);{var r;let t;t=e.length>0&&("string"==typeof e[0]||e[0]instanceof String)?e:e.map((e=>e.id));const i=null===(r=this.getAttribute("payload").cover)||void 0===r?void 0:r.id,n=null!=i&&t.includes(i),o=this.assets.deleteManyP(e,"removeAssetsFromAlbum");return n?o.then((()=>this.deleteAlbumCoverP())):o}}isShared(){return!0}}sl.prototype.assetListClass=nl;const al=sl;var ll=r(784090);const ul=function(){var e,t,r,o;let s=(e=class extends tn{constructor(e){super(),(0,P.Z)(this,"initialized",t,this),(0,P.Z)(this,"requestQueue",r,this),(0,P.Z)(this,"allPProgress",o,this),this.loadAlbumsCallback=e,this.albums=[],this.reset()}_addAssets(e){var t,r,i,o,s;if(n.Z.is_enabled("asset_store"))for(r=0,o=e.length;r<o;r++)t=e[r],this._add(t.aquire());else for(i=0,s=e.length;i<s;i++)t=e[i],this._add(t);return this.totalCount=this.length=this._models.length}reset(){return null==this.albums?this:this._dirty?(super.reset(),this.initialized=!1,this):this}_setupFetchUrls(){var e,t,r,i;for(this.fetchUrls=[],t=0,i=[];t<this.albums.length;)e=Math.min(this.albums.length,t+this.albumsPerFetch),r=this.albums.slice(t,e).map((function(e){return e.id})),this.fetchUrls.push(R.Z.catalogContext.href+`/albums/assets?album_ids=${r.join("%2C")}`),i.push(t+=this.albumsPerFetch);return i}_setupNextFetchUrl(){return this.fetchUrl=this.fetchUrls.shift()}_fetchP(){return null==this.fetchUrl?ll.Deferred().reject().promise():this.fetching?this.fetching:(this.fetching=this.requestP("GET",this.fetchUrl)).always((()=>this.fetching=void 0)).fail(((e,t,r)=>(null!=this.modelName?this.reportOzFailure(`fetchP${this.modelName}Failure`,e,t,r):this.reportOzFailure("fetchPFailure",e,t,r),this._dirty=!0))).done((e=>{var t,r,i,n,o;if(t=this._addFetchedData(e),this.page++,0===t.length?this.fetchUrl=void 0:(i=null!=(n=e.links)&&null!=(o=n[this.nextPageLink||"next"])?o.href:void 0,r=new ye(e.base),this.fetchUrl=r.fullHref(i),null==this.fetchUrl&&this._setupNextFetchUrl()),null==this.fetchUrl)return this.finished=!0,this.totalCount=this._models.length}))}fetchP(){var e;return this.initialized?this.finished?ll.Deferred().reject().promise():this.fetching?this.fetching.promise():((e=this.fetching=this._fetchP()).fail((()=>this._dirty=!0)).always((()=>this.fetching=void 0)),e):this.loadAlbumsCallback().then((e=>(this.albums=e,this._setupFetchUrls(),this._setupNextFetchUrl(),this.initialized=!0,this.fetchP())))}_addFetchedData(e){var t,r,i,o,s,a,l,u,c,d,h,p;for(s=o=0,u=(i=e.albums).length;o<u;s=++o)if(r=i[s],null!=(t=null!=(h=this.albums)?h.find((function(e){return e.id===r.id})):void 0))for(l=0,c=(p=r.resources).length;l<c;l++)(a=p[l]).base=e.base,d=null!=this.model.store&&n.Z.is_enabled("asset_store")?this.model.store.aquireItem(a,this):new this.model(a,this),t.assets._add(d),s<i.length-1&&(t.assets.finished=!0),this._add(d);return i}_fetchAndAddAllP(e){return null==e?ll.Deferred().reject().promise():this.requestWithRetryP("GET",e,void 0,void 0,1).fail(((e,t,r)=>(null!=this.modelName?this.reportOzFailure(`fetchP${this.modelName}Failure`,e,t,r):this.reportOzFailure("fetchPFailure",e,t,r),this._dirty=!0))).then((e=>{var t,r,i,o,s;return t=e.albums.reduce((function(e,t){return e+t.resources.length}),0),this.allPProgress+=e.albums.length/this.albums.length*100,n.Z.is_enabled("debug_best_photos")&&console.log(`Adding ${t} assets from ${e.albums.length} albums, ~${this.allPProgress.toFixed(0)}% done`),this._addFetchedData(e),i=null!=(o=e.links)&&null!=(s=o.next)?s.href:void 0,!(r=new ye(e.base).fullHref(i))||this._fetchAndAddAllP(r)}))}_parallelAllP(){var e,t,r;if(!this.initialized)return this.loadAlbumsCallback().then((e=>(this.albums=e,this._setupFetchUrls(),this.initialized=!0,this._parallelAllP())));if(this.finished)return ll.Deferred().reject().promise();for(this.allPProgress=0,this.requestQueue=new Hr(this.maxParallelFetches),t=e=>()=>this._fetchAndAddAllP(e);this.fetchUrls.length>0;)r=this.fetchUrls.shift(),this.requestQueue.enqueuePromise(t(r));return(e=this.requestQueue.promise()).fail((()=>this._dirty=!0)).done((()=>this.finished=!0)).always((()=>this.requestQueue=null)),e}async allJP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return await this.allP(e)}allP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.finished?ll.Deferred().resolve(this.models.slice(0)).promise():this._parallelAllP().then((()=>this.allP(e))):super.allP()}totalCountP(){var e,t,r,i,n,o;for(t=ll.Deferred(),n=[],r=0,i=(o=this.albums).length;r<i;r++)e=o[r],n.push(e.assets.totalCountP());return ll.when(...n).then((()=>{var r,i,n;for(this.totalCount=0,r=0,i=(n=this.albums).length;r<i;r++)e=n[r],this.totalCount+=e.assets.totalCount;return t.resolve(this.totalCount)})).fail((()=>t.reject())),t.promise()}get hasLoadingProgress(){return null!=this.requestQueue}createP(e,t){if(n.Z.is_enabled("debug"))return console.log("createP is unimplemented in this paged list")}_addCreatedP(e){if(n.Z.is_enabled("debug"))return console.log("_addCreatedP is unimplemented in this paged list")}deleteP(e){if(n.Z.is_enabled("debug"))return console.log("deleteP is unimplemented in this paged list")}},t=(0,i.Z)(e.prototype,"initialized",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r=(0,i.Z)(e.prototype,"requestQueue",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,i.Z)(e.prototype,"allPProgress",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e);return s.prototype.model=Fa,s.prototype.modelName="CatalogAlbumAsset",s.prototype.albumsPerFetch=10,s.prototype.maxParallelFetches=5,s}.call(void 0),cl=function(){class e extends La{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r;null==t&&(t={subtype:"topic",order_after:"-"}),super(e,t),r=()=>this.allP(),this.allAssets=new ul(r)}setParentAlbum(e){return this.parentAlbum=e,this}get assets(){return this.allAssets}addAlbum(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i,n,o,s,a;if(this.get(e.id)&&this._delete(this.index(e.id)),!t)for(t=0,r=0,i=(n=this.models).length;r<i&&!(n[r].getOrder()>e.getOrder());r++)++t;return this._models.splice(t,0,e),this._reindex(t),this.length=this.models.length,"cluster"===(null!=(o=this.parentAlbum)?o.getSubtype():void 0)?null!=(s=this.allAssets)?s.markDirty():void 0:null!=(a=this.allAssets)?a.reinitialize(this.models):void 0}getAssetPosition(e){var t,r,i,n,o,s,a;for(t=i=0,o=this.length;i<o;t=i+=1)for(r=n=0,s=(a=this.at(t)).assets.length;n<s;r=n+=1)if(a.assets.at(r).id===e)return[t,r]}getTopicAlbumContaining(e){var t,r;if([t,r]=this.getAssetPosition(e),t>=0)return this.at(t)}getAssetAt(e,t){var r;return null!=(r=this.at(e))?r.assets.at(t):void 0}getAssetPositionBefore(e){var t,r;return[r,t]=this.getAssetPosition(e),--t<0&&--r,r<0?null:[r,t]}getAssetBefore(e){var t;return(t=this.getAssetPositionBefore(e))?this.getAssetAt(...t):null}getAssetPositionAfter(e){var t,r;return[r,t]=this.getAssetPosition(e),++t>=this.at(r).length&&++r,r>=this.length?null:[r,t]}getAssetAfter(e){var t;return(t=this.getAssetPositionAfter(e))?this.getAssetAt(...t):null}markAssetsDirty(){var e,t,r,i;for(e=0,t=(r=this.models).length;e<t;e++)r[e].assets.markDirty();return null!=(i=this.allAssets)?i.markDirty():void 0}resetAssets(){var e,t,r,i,n;for(t=0,r=(i=this.models).length;t<r;t++)(e=i[t]).assets.reset(e.assets.options);return null!=(n=this.allAssets)?n.reset():void 0}areAssetsDirty(){var e,t;return null!=(e=null!=(t=this.allAssets)?t.isDirty():void 0)&&e}areAllAssetsLoaded(){var e,t;return null!=(e=null!=(t=this.allAssets)?t.finished:void 0)&&e}get totalCount(){var e;return(null!=(e=this.allAssets)?e.finished:void 0)?this.allAssets.length:0}set totalCount(e){}loadAssetsP(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.markAssetsDirty(),this.resetAssets()),this.allAssets.allP(e)}}return e.prototype.model=ol,e.prototype.modelName="TopicAlbum",e}.call(void 0),dl=function(){class e extends cl{getCreateHref(){return`${R.Z.catalogContext.href}/albums/${this.createUuid()}`}}return e.prototype.model=al,e.prototype.modelName="CatalogTopicAlbum",e}.call(void 0);var hl,pl;let fl=(hl=class extends tr{constructor(){super(...arguments),(0,P.Z)(this,"user",pl,this)}setAttributes(e){return super.setAttributes(e),null!=e.user&&(this.user=new yr(e.user)),this}_refreshP(e){return e=e||`${this.href}?embed=user`,super._refreshP(e)}getFullName(){return this.attributes.full_name}async _setAbandonedJP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{const e={payload:{status:"abandoned"}};e.payload.userUpdated=(new Date).toISOString(),await this.requestJP("POST",this.href,JSON.stringify(e)),b.Z.report("setStatusAbandoned")}catch(t){const[r,i,o]=t,s=2;n.Z.is_enabled("debug")&&J._forceFailNextRequest&&(e=s);const a=e<s&&(0===i||i>=500);a?b.Z.report("setStatusAbandonedRetry"):this.reportOzFailure("setStatusAbandonedFailure",r,i,o);try{if(a)return this._setAbandonedJP(e+1)}catch(e){}}}async setAbandonedJP(){return await this._setAbandonedJP()}isContributorRole(){return"accepted"===this.attributes.payload.status&&"contributor"===this.attributes.payload.role}isEditorRole(){return"accepted"===this.attributes.payload.status&&"editor"===this.attributes.payload.role}canContribute(){return this.isContributorRole()||this.isEditorRole()}canEdit(){return this.isEditorRole()}get role(){return this.attributes.payload.role}},pl=(0,i.Z)(hl.prototype,"user",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hl);class gl extends fl{get status(){return this.attributes.payload.status}get userCreated(){return new Date(this.attributes.payload.userCreated)}async setRoleViewerJP(){return await this.updateAttributesP("setUserRoleViewer",{payload:{role:"viewer"}})}async setRoleContributorJP(){return await this.updateAttributesP("setUserRoleContributor",{payload:{role:"contributor"}})}async setRoleEditorJP(){return await this.updateAttributesP("setUserRoleEditor",{payload:{role:"editor"}})}async setStatusRemovedJP(){return await this.updateAttributesP("setUserStatusRemoved",{payload:{status:"removed"}})}}var ml,vl,yl;let bl=(ml=class extends tr{constructor(){super(...arguments),(0,P.Z)(this,"user",vl,this),(0,P.Z)(this,"spaceUser",yl,this)}setAttributes(e){return super.setAttributes(e),null!=e.user&&(this.user=new yr(e.user)),null!=e.space_user&&(this.spaceUser=new gl(e.space_user)),this}_refreshP(e){return e=e||`${this.href}?embed=user`,super._refreshP(e)}get status(){return this.attributes.payload.status}get role(){if(null!=this.attributes.payload.role)return this.attributes.payload.role}async acceptJP(){const e=await this.safeToJSPromise(this.updateAttributesP("inviteRequestAccept",{payload:{status:"approved",role:"viewer"}}));let t=1e3;for(;t<64e3&&(await this.refreshP(),null==this.attributes.space_user);)t*=2;return e}async declineJP(){return await this.updateAttributesP("inviteRequestDecline",{payload:{status:"rejected"}})}async setRoleViewerJP(){return await this.updateAttributesP("inviteRoleViewer",{payload:{role:"viewer"}})}async setRoleContributorJP(){return await this.updateAttributesP("inviteRoleContributor",{payload:{role:"contributor"}})}async setRoleEditorJP(){return await this.updateAttributesP("inviteRoleEditor",{payload:{role:"editor"}})}isSingleUse(){return"single_use"===this.attributes.subtype}isRequest(){return"request"===this.attributes.subtype}getEmail(){var e;return null===(e=this.attributes.payload)||void 0===e?void 0:e.email}},vl=(0,i.Z)(ml.prototype,"user",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=(0,i.Z)(ml.prototype,"spaceUser",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml);const _l=function(){class e extends tn{createP(e){var t;return t={subtype:"single_use",payload:{status:"open",role:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewer",email:e}},super.createP(this.getCreateHref(),t)}async createJP(e,t){return await this.createP(e,t)}getCreateHref(){return`${new URL(this.href).pathname}/${this.createUuid()}`}_deleteP(e){var t,r;return r=this.index(e),t=this.at(r).href,this.requestP("DELETE",t).fail(((e,t,r)=>null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)))}async deleteAllJP(){var e,t,r,i,n,o,s;if(this.models.length>0){for(o=[],i=[],this.models.forEach((e=>(i.push(e.id),o.push(this._deleteP(e.id))))),await Promise.all(o),s=[],e=0,n=i.length;e<n;e++)r=i[e],null!=(t=this.index(r))?s.push(this._delete(t)):s.push(void 0);return s}}}return e.prototype.model=bl,e.prototype.modelName="CatalogSpaceInvite",e}.call(void 0),wl=function(){class e extends tn{}return e.prototype.model=yr,e.prototype.modelName="User",e}.call(void 0),Pl=function(){class e extends wl{}return e.prototype.model=fl,e.prototype.modelName="SpaceUser",e}.call(void 0),Al=function(){class e extends Pl{_deleteP(e){var t,r;return r=this.index(e),t=this.at(r).href,this.requestP("DELETE",t).fail(((e,t,r)=>null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)))}async deleteAllJP(){var e,t,r,i,n,o,s;if(this.models.length>0){for(i=[],s=[],this.models.forEach((e=>(s.push(e.id),i.push(this._deleteP(e.id))))),await Promise.all(i),n=[],e=0,r=s.length;e<r;e++)o=s[e],null!=(t=this.index(o))?n.push(this._delete(t)):n.push(void 0);return n}}}return e.prototype.model=gl,e.prototype.modelName="CatalogSpaceUser",e}.call(void 0);var Sl,xl,Cl=r(784090);const Ol=(Sl=class extends Di{constructor(e){super(),(0,P.Z)(this,"_models",xl,this),this.initializedWithAssetsP=Cl.Deferred(),this._dirty=!0,this.reset(),this.addAssets(e)}setAssets(e){return this._dirty=!0,this.reset(),this.addAssets(e)}addAssets(e){var t,r,i;if(null!=e){for(r=0,i=e.length;r<i;r++)t=e[r],this._add(t);return this.totalCount=e.length,this.initializedWithAssetsP.resolve()}}reset(){return this._dirty?(null!=this._models?this._models.splice(0,this._models.length):this._models=new ke,this.indices={},this.page=0,this.pageSize=100,this.finished=!0,this.length=0,this.totalCount=null,this._dirty=!1,this):this}fetchP(){return this.finished||console.log("Finished is not true in LocalPagedlist"),Cl.Deferred().reject().promise()}async allJP(){return await this.allP()}allP(){return Cl.Deferred().resolve(this.models.slice(0)).promise()}indexP(e){return this.initializedWithAssetsP.then((()=>super.indexP(e)))}get assets(){return this}},xl=(0,i.Z)(Sl.prototype,"_models",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sl);var kl,El,Il,Tl=r(784090);const Dl=e=>e.asset.base=e.base;let Rl=(0,ji.Z)(_o)((El=class extends yo{constructor(e){var t;Dl(e),super(e.asset),(0,P.Z)(this,"hackSpaceContext",Il,this),this.albumAssetRelativeUrl=e.links.self.href,this.order=null===(t=e.payload)||void 0===t?void 0:t.order}refreshP(){const e=this._linkBase.fullHref(this.albumAssetRelativeUrl)+"?"+Tl.param({embed:"asset;user"});return this.requestP("GET",e).done((e=>{var t;return this.order=null===(t=e.payload)||void 0===t?void 0:t.order,Dl(e),this.setAttributes(e.asset)}))}setHackSpaceContext(e){this.hackSpaceContext=e}setRatingP(e){console.error("if you implement this be sure you understand the confusing rating model")}setRatingJP(e){console.error("if you implement this be sure you understand the confusing rating model")}setFlagP(e){console.error("if you implement this be sure you understand the confusing review model")}setFlagJP(e){console.error("if you implement this be sure you understand the confusing review model")}getRating(){var e,t;const r=null===(e=this.hackSpaceContext)||void 0===e||null===(t=e.owner)||void 0===t?void 0:t.id;return null==r?(console.error("SpaceAsset.getRating ownerAccountId not retrievable"),0):super.getRating(r)}getFlag(){var e,t;const r=null===(e=this.hackSpaceContext)||void 0===e||null===(t=e.owner)||void 0===t?void 0:t.id;return null==r?(console.error("SpaceAsset.getFlag ownerAccountId not retrievable"),0):super.getFlag(r)}getOrder(){return this.order||""}getReportAbuseHref(){return`/abuse_reports?asset-href=${this.linkFullPath("self")}`}getLikesCount(){var e,t;return n.Z.is_enabled("lots_of_likes")?7*(null===(e=this.attributes.links["/rels/favorites"])||void 0===e?void 0:e.count):null===(t=this.attributes.links["/rels/favorites"])||void 0===t?void 0:t.count}getLikesHref(){return this.linkHref("/rels/favorites")}_getLikeUrl(){return this.linkHref("/rels/this_user_favorite")}isLiked(){return this.getLikesCount()>0}isLikedByUser(){return this.isLiked()&&null!=this._getLikeUrl()}likeP(){return this.requestP("PUT",`${this.getLikesHref()}/${this.createUuid()}`,"{}")}unLikeP(){const e=this._getLikeUrl();if(null!=e)return this.requestP("DELETE",e,"{}")}getCommentCount(){var e;return null===(e=this.attributes.links["/rels/comments"])||void 0===e?void 0:e.count}getCommentsHref(){return this.linkHref("/rels/comments")}hasComments(){return this.getCommentCount()>0}},Il=(0,i.Z)(El.prototype,"hackSpaceContext",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kl=El))||kl;Rl.pollAssetUntilAvailableJP=function(e){let t=!1,r=!1;return yo.pollAssetUntilCheckJP(yo,e,(e=>!!e.hasAnyRendition()||(t?r:(t=!0,setTimeout((()=>r=!0),5e3),!1))))};const jl=function(){var e,t;let r=(e=class extends za{constructor(){super(...arguments),(0,P.Z)(this,"hackSpaceContext",t,this)}setHackSpaceContext(e){var t,r,i,n,o;if(this.hackSpaceContext!==e){for(this.hackSpaceContext=e,o=[],r=0,i=(n=this.models).length;r<i;r++)t=n[r],o.push(t.setHackSpaceContext(e));return o}}_add(){return(arguments.length<=0?void 0:arguments[0]).setHackSpaceContext(this.hackSpaceContext),super._add(...arguments)}getReviewedAssetLikeCountP(e){return this.allP().then((t=>{var r,i;for(this.reviewSelectedCount=0,r=0,i=t.length;r<i;r++)t[r].isLikedByUser(e)&&(this.reviewSelectedCount+=1);return this.reviewSelectedCount}))}},t=(0,i.Z)(e.prototype,"hackSpaceContext",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e);return r.prototype.model=Rl,r.prototype.modelName="SpaceAsset",r}.call(void 0);class Zl extends Da{_createDefaultAssetOptions(){let e;return e=this.hasDisplaySettings()?"image;video;layout_segment":"image;video",{embed:"asset",order_after:"-",exclude:"incomplete",subtype:e}}set assets(e){this._assets=e}get assets(){return this.getAssets(this._defaultAssetOptions)}getAssets(){const e=super.getAssets(...arguments);return e.setHackSpaceContext(this.getAnySpaceHack()),e}_getAssetsLink(){return`${this.linkHref("self")}/assets`}isShared(){return!0}getGalleryLink(){var e;return null===(e=this.attributes.payload)||void 0===e?void 0:e.web_space_href}getName(e){var t;let r=(null===(t=this.attributes.payload)||void 0===t?void 0:t.name)||"";return null!=e&&r.length>e&&(r=r.substr(0,e)),r}getReportAbuseHref(){return`/abuse_reports?album-href=${this.linkFullPath("self")}`}getChildAlbumsLink(){return this.linkHref("/rels/child_albums")}getSpace(){if(null==this.spaces)return null;for(let e=0,t=this.spaces.length;e<t;e++){const t=this.spaces.at(e),r=t.getSubType();if("gallery"!==r&&"review"!==r)return t}}setSpace(e){var t;return null!==(t=this.spaces)&&void 0!==t||(this.spaces=new Ol([])),this.spaces.addAssets([e]),this.spaces}getReviewSpace(){return null}getAnySpaceHack(){return null!=this.spaces?this.spaces.at(0):null}}Zl.prototype.coverClass=Ao,Zl.prototype.assetListClass=jl;const Fl=Zl;var Nl=r(784090);const Ll=function(){class e extends tn{createManyP(e,t){var r,i;return r=`${e.href}/resources`,i={resources:t},this.requestP("PUT",r,JSON.stringify(i)).done((()=>this.markDirty())).fail(((e,t,r)=>this.reportOzFailure("addSpaceAlbumResourcesFailure",e,t,r)))}createP(e,t){var r,i,n;return i=`${e.href}/resources`,n=`/v2/spaces/${e.id}/albums/${t.id}`,r={resources:[t]},super.createP(i,r,n)}deleteManyP(e,t){var r,i;return i={resource_ids:t.join(";")},r=`${e}/resources?`+Nl.param(i),this.requestP("DELETE",r).done((()=>{var e,r,i,n,o;for(o=[],e=0,n=t.length;e<n;e++)r=t[e],null!=(i=this.index(r))?o.push(this._delete(i)):o.push(void 0);return o})).fail(((e,t,r)=>this.reportOzFailure("deleteSpaceAlbumResourcesFailure",e,t,r)))}}return e.prototype.model=Fl,e.prototype.modelName="SpaceAlbum",e}.call(void 0);var Ml,Ul,$l,zl,ql,Hl,Jl,Vl,Bl=r(784090);let Wl=(Ml=class extends tr{constructor(e,t){var r;super(e),(0,P.Z)(this,"albums",Ul,this),(0,P.Z)(this,"userAndOwnerRefreshPromise",$l,this),(0,P.Z)(this,"owner",zl,this),(0,P.Z)(this,"user",ql,this),(0,P.Z)(this,"users",Hl,this),(0,P.Z)(this,"inMaintenance",Jl,this),(0,P.Z)(this,"inInvalid",Vl,this),null!==(r=this.users)&&void 0!==r||(this.users=new Pl(`${this.linkHref("self")}/users?embed=user`))}get author(){var e;return null===(e=this.attributes.payload.profile_info)||void 0===e?void 0:e.author}get description(){var e;return null===(e=this.attributes.payload.profile_info)||void 0===e?void 0:e.description}get firstAlbum(){var e;return null===(e=this.albums)||void 0===e?void 0:e.at(0)}setAttributes(e){var t,r;let i;if(super.setAttributes(e),(null===(t=e.resources)||void 0===t?void 0:t.length)>0){let t;i=[];for(const r of e.resources)"album"===r.type&&(r.base=e.base,t=new Fl(r),t.setSpace(this),i.push(t));if(null!=this.albums)for(let e=0;e<i.length;e++){t=i[e];const r=this.albums.at(e);if(r.id!==t.id||r.attributes.updated!==t.attributes.updated){i.length>0&&(this.albums=new Ol(i));break}}else i.length>0&&(this.albums=new Ol(i))}return null!==(r=this.albums)&&void 0!==r||(this.albums=new Ll(this.linkHref("/rels/space_resources"))),null!=e.space_user&&(e.space_user.base=e.base,this.user=new fl(e.space_user)),null!=e.owner&&(e.owner.base=e.base,this.owner=new yr(e.owner)),this}webHref(){return this.linkHref("/rels/web_space")}hasCatalog(){var e;return null!=(null===(e=this.attributes.links)||void 0===e?void 0:e["/rels/catalog"])}isOwner(){return this.hasCatalog()}hasLegacyFilters(){return!0!==this.attributes.payload.presentationFilters}getSubType(){return this.attributes.subtype}getSharesHref(){return`${window.location.origin}/shares/${this.id}`}_refreshP(e){return e="shared"===this.getSubType()?e||`${this.href}?embed=owner%3Bspace_user%3Bfirst_resource`:e||`${this.href}?embed=owner%3Bspace_user`,super._refreshP(e).then((()=>{if(this.inMaintenance)return this.inMaintenance=!1})).fail(((e,t,r)=>{503===t&&(this.inMaintenance=!0),404===t&&(this.isInvalid=!0)}))}ensureUserAndOwnerP(){return null!=this.userAndOwnerRefreshPromise?this.userAndOwnerRefreshPromise:null!=this.user&&null!=this.owner||this.inMaintenance||this.isInvalid?Bl.Deferred().resolve():(this.userAndOwnerRefreshPromise=this.refreshP(),this.userAndOwnerRefreshPromise.always((()=>{this.userAndOwnerRefreshPromise=null})))}ensureUserAndOwnerJP(){return this.safeToJSPromise(this.ensureUserAndOwnerP())}hasDefaultBehanceAvatar(e){return-1!==e.indexOf("no-image")}getAvatarHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"large";const{host:t}=$a.R,{ownerId:r}=window.SharesConfig;if(!t||!r)return;const i=e=>e<10?`0${e}`:`${e}`,n=new Date;return`${t}/v2/avatars/${r}/${n.getFullYear()}${i(n.getMonth()+1)}${i(n.getDate())}000000/${e}`}downloadEnabled(){var e;return!0===this.attributes.payload.download||!0===(null===(e=this.user)||void 0===e?void 0:e.canEdit())}isPrivate(){return!0===this.attributes.payload.private}isMetadataVisible(){var e;return!0===this.attributes.payload.metadata||!0===(null===(e=this.user)||void 0===e?void 0:e.canEdit())}isLocationVisible(){var e;return!0===this.attributes.payload.location||!0===(null===(e=this.user)||void 0===e?void 0:e.canEdit())}isReview(){var e;return"review"===(null===(e=this.attributes)||void 0===e?void 0:e.subtype)&&!this.isPrivate()}getReviewCount(){var e,t;return null!=(null===(e=this.attributes.payload)||void 0===e?void 0:e.count)&&(null===(t=this.attributes.payload)||void 0===t?void 0:t.count)>0?this.attributes.payload.count:null}hasReviewCount(){return this.getReviewCount>0}isGallerySpace(){var e;return"gallery"===(null===(e=this.attributes)||void 0===e?void 0:e.subtype)}_isCommentsFavoritesDisabled(e){return!(!this.isGallerySpace()||null!=e)||e}isCommentsDisabled(){return this._isCommentsFavoritesDisabled(this.attributes.payload.comments_disabled)}isFavoritesDisabled(){return this._isCommentsFavoritesDisabled(this.attributes.payload.favorites_disabled)}commentsAndLikesEnabled(){return!(!0===this.attributes.payload.comments_disabled||!0===this.attributes.payload.favorites_disabled)}async _ensureUploadPermissionsJP(){var e;return await this.ensureUserAndOwnerJP(),null!==(e=this.user)&&void 0!==e&&e.canContribute()||this.isOwner()?null==this.owner?Promise.reject("The owner info must be loaded"):"shared"!==this.getSubType()?Promise.reject("Only shared subtype spaces can be contributed to."):null==this.firstAlbum?Promise.reject("This space has no space album to contribute to."):void 0:Promise.reject("You must have contribute access to the space")}async copyAssetToSpaceJP(e,t){var r,i,o,s;let a,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];await this._ensureUploadPermissionsJP(),e.hasExternalDevelopSettings()&&(a=await e.getDevelopSettingsJP());const c=e.cloneAttributes().payload;var d,h,p;if(delete c.copy,null===(r=c.importSource)||void 0===r||delete r.localAssetId,null===(i=c.importSource)||void 0===i||delete i.lrcatStoreProviderId,null===(o=c.importSource)||void 0===o||delete o.lrcatImageId,null===(s=c.importSource)||void 0===s||delete s.status,0===Object.keys(null!=c.importSource?c.importSource:{}).length&&delete c.importSource,delete c.autoTags,delete c.aesthetics,delete c.bestFrame,delete c.blur,delete c.cropHints,delete c.quality,delete c.changedAtTime,delete c.changedOnDevice,delete c.stacks,delete c.ratings,u.includes("ratings")||0!==e.getRating()&&(c.ratings={},c.ratings[this.owner.id]={rating:e.getRating(),date:(new Date).toISOString()}),delete c.reviews,u.includes("reviews")||"unflagged"!==e.getFlag()&&(c.reviews={},c.reviews[this.owner.id]={flag:e.getFlag(),date:(new Date).toISOString()}),u.includes("location")&&(delete c.location,null!=(null===(d=c.xmp)||void 0===d?void 0:d.iptcCore)&&(delete c.xmp.iptcCore.CountryCode,delete c.xmp.iptcCore.Location,0===Object.keys(c.xmp.iptcCore).length&&delete c.xmp.iptcCore),null!=(null===(h=c.xmp)||void 0===h?void 0:h.photoshop)&&(delete c.xmp.photoshop.City,delete c.xmp.photoshop.Country,delete c.xmp.photoshop.State,0===Object.keys(c.xmp.photoshop).length&&delete c.xmp.photoshop)),u.includes("keywords")&&null!=(null===(p=c.xmp)||void 0===p?void 0:p.dc)&&(delete c.xmp.dc.subject,0===Object.keys(c.xmp.dc).length&&delete c.xmp.dc),n.Z.is_enabled("jigsaw")&&e.developHasPixelMasks()){const t=e.getAux();c.aux=e.getDevelopPixelMaskIds().reduce(((e,r)=>(e[r]=Object.assign({},t[r]),e)),{})}const f=X()({},{payload:c},za.defaultPayloadForNewAsset(t));f.subtype=e.attributes.subtype,f.captureDate=e.attributes.captureDate;const g=this.createUuid(),m=`/v2/spaces/${this.id}/assets/${g}`,v=this.createUuid(),y=`${this.firstAlbum.href}/assets/${g}/revisions/${v}`;if(await this.requestJP("PUT",y,JSON.stringify(f)),null!=a){n.Z.is_enabled("debug")&&console.log("Copying asset with external develop settings..."),n.Z.is_enabled("jigsaw")&&e.developHasPixelMasks()&&await e.copyAuxToSpaceAssetJP(this.id,g,v);const t=`${m}/revisions/${v}/xmp/develop`;await this.requestJP("PUT",t,a,{contentType:"application/rdf+xml"})}if(e.hasMaster()){const t=`${m}/revisions/${v}/master`;l={"X-Generate-Renditions":"all","X-Async-Copy":!0},(n.Z.is_enabled("video_v2_swy")||e.isPhoto())&&(l["X-Generate-Proxies"]="all"),u.length>0&&(l["X-Redact-Meta"]=u.join(",")),await this.requestJP("PUT",`${t}`,JSON.stringify({file_href:e.linkFullPath("/rels/master")}),{headers:l})}else if(e.isProxyOnly()){const t=`${m}/revisions/${v}/proxies/${this.createUuid()}`;await this.requestJP("PUT",`${t}`,JSON.stringify({file_href:e.linkFullPath("/rels/proxy_type/2560")}),{headers:{"X-Generate-Renditions":"all","X-Async-Copy":!0}})}await Rl.pollAssetUntilAvailableJP(m),this.firstAlbum.markAssetsDirty(!0)}createNewEmptyAssetP(e,t,r){const i=Bl.Deferred();return this._ensureUploadPermissionsJP().then((()=>{if(null==r)return i.reject("You must provide a batch time for uploads.");const n=za.defaultPayloadForUpload(e,r);n.subtype=ur.ozSubtype(e.file),n.payload.captureDate="0000-00-00T00:00:00",n.payload.importSource.importedBy=t.id,null!=e.sha256&&(n.payload.importSource.sha256=e.sha256);const o=this.createUuid(),s=`/v2/spaces/${this.id}/assets/${o}`,a=this.createUuid(),l=`${this.firstAlbum.href}/assets/${o}/revisions/${a}`,u=`${s}/revisions/${a}`;return this.requestP("PUT",l,JSON.stringify(n)).then((()=>{i.resolve(u,o)})).fail(((e,t,r)=>{i.reject(e,t,r)}))}),(e=>{i.reject(e)})),i.promise()}getSlideshowEmbedHref(e){return null==e?`${window.location.origin}/embed/shares/${this.id}/slideshow?background_color=%23191919&color=%23cccdcd`:"Light"===e.getPresentationStyleId()?`${window.location.origin}/embed/shares/${this.id}/slideshow?background_color=%23FBFBFB&color=%23707070`:`${window.location.origin}/embed/shares/${this.id}/slideshow?background_color=%232D2D2D&color=%23999999`}getSlideshowEmbedCode(e){return`<div class='lr_embed' style='position: relative; padding-bottom: 50%; height: 0; overflow: hidden;'><iframe id='iframe' src='${this.getSlideshowEmbedHref(e)||""}' frameborder='0'style='width:100%; height:100%; position: absolute; top:0; left:0;' ></iframe></div>`}},Ul=(0,i.Z)(Ml.prototype,"albums",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$l=(0,i.Z)(Ml.prototype,"userAndOwnerRefreshPromise",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zl=(0,i.Z)(Ml.prototype,"owner",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ql=(0,i.Z)(Ml.prototype,"user",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hl=(0,i.Z)(Ml.prototype,"users",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jl=(0,i.Z)(Ml.prototype,"inMaintenance",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vl=(0,i.Z)(Ml.prototype,"inInvalid",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ml);var Gl,Xl,Kl,Yl,Ql,eu;let tu=(Gl=dt.byVal,Xl=class extends Gt{constructor(){super(...arguments),(0,P.Z)(this,"private",Kl,this)}},Kl=(0,i.Z)(Xl.prototype,"private",[Gl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xl),ru=(Yl=dt.byRef(tu),Ql=class extends Qt{constructor(){super(...arguments),(0,P.Z)(this,"payload",eu,this)}},eu=(0,i.Z)(Ql.prototype,"payload",[Yl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ql);var iu,nu,ou=r(784090);let su=(iu=class extends Wl{constructor(){super(...arguments),(0,P.Z)(this,"invites",nu,this)}setAttributes(e){var t,r;super.setAttributes(e),null!==(t=this.invites)&&void 0!==t||(this.invites=new _l(`${this.linkHref("self")}/invites?embed=user`)),null!==(r=this.users)&&void 0!==r||(this.users=new Al(`${this.linkHref("self")}/users?embed=user`))}async loadAllInvitesAndUsersJP(){const e=[];return e.push(this.invites.allJP()),e.push(this.users.allJP()),await Promise.all(e)}hasShortWebHref(){var e;return(null===(e=this.webHref())||void 0===e?void 0:e.length)<30}pollForShortWebHrefP(){const e=ou.Deferred();if(this.hasShortWebHref())e.resolve();else{let r=0;var t=()=>(r++,this.refreshP().done((()=>{!this.hasShortWebHref()&&r<5?setTimeout(t,350):this.hasShortWebHref()?e.resolve():(b.Z.reportFailure("pollForShortUrlFailure"),e.reject())})).fail((()=>{e.reject()})));t()}return e.promise()}getFilterFlags(){var e;return(null===(e=this.attributes.payload.filters)||void 0===e?void 0:e.flags)||[]}enableNewPresentationFiltersP(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.updateAttributesP("enableSpacePresentationFilters",{payload:{presentationFilters:e}})}setDownloadEnabledP(e){return this.downloadEnabled()===e?ou.Deferred().resolve():this.updateAttributesP("setSpaceDownloadEnabled",{payload:{download:e}})}async setAllowInviteRequestsJP(e){if("shared"===this.attributes.subtype)return await this.updateAttributesP("setAllowInviteRequests",{payload:{allowInviteRequests:e}})}get allowInviteRequests(){return!0===this.attributes.payload.allowInviteRequests}isOwner(){return!0}get hideUrl(){return!0===this.attributes.payload.hide_url}async reenableProofingJP(e){return await this.updateAttributesP("reshareAlbum",{payload:e})}async disableProofingJP(e){return await this.updateAttributesP("unshareAlbum",{payload:e})}},nu=(0,i.Z)(iu.prototype,"invites",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iu);su.prototype.attributeClass=ru;const au=su;var lu,uu,cu=r(784090);const du=(lu=class extends Ol{constructor(e){super(),(0,P.Z)(this,"_models",uu,this)}reset(){return this._dirty?(this._models=new ke,this.indices={},this.page=0,this.pageSize=100,this.finished=!1,this.length=0,this.totalCount=null,this._dirty=!1,this):this}fetchP(){return this.finished?cu.Deferred().reject().promise():cu.Deferred()}get assets(){return this}},uu=(0,i.Z)(lu.prototype,"_models",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lu);var hu,pu,fu,gu,mu,vu,yu,bu,_u=r(784090);let wu=(hu=class e extends Da{constructor(){super(...arguments),(0,P.Z)(this,"currentProofingClient",pu,this),(0,P.Z)(this,"isProofLoading",fu,this),(0,P.Z)(this,"proofingClientList",gu,this),(0,P.Z)(this,"selectedAssetsForFiltering",mu,this),(0,P.Z)(this,"commentedAssetsForFiltering",vu,this),(0,P.Z)(this,"spaces",yu,this),(0,P.Z)(this,"reviewAssets",bu,this)}_getAttributesMiddleware(){return[Ma(this)]}setAttributes(e){var t;super.setAttributes(e),"cluster"===this.getSubtype()&&(this.attributes.incomplete=e.incomplete),["cluster","project"].includes(this.getSubtype())&&null==this.topics&&(this.topics=this._createTopics()),this._initSpaces(),n.Z.is_enabled("collaborative_proofing")&&(null!==(t=this.reviewAssets)&&void 0!==t||(this.reviewAssets=new du),this.reviewAssets.space=this.spaces)}markAssetsDirty(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];super.markAssetsDirty(t),null===(e=this.topics)||void 0===e||e.markAssetsDirty()}_createDefaultAssetOptions(){return{embed:"asset;spaces;user",order_after:"-",subtype:"image;video",exclude:"incomplete"}}_createTopics(){return new dl(this.linkHref("/rels/child_albums")).setParentAlbum(this)}set assets(e){this._assets=e}get assets(){var e;return this.isCluster()||this.isProjectV1()?null===(e=this.topics)||void 0===e?void 0:e.assets:this.getAssets(this._defaultAssetOptions)}_initSpaces(){if(this.spaces=new ke,null!=this.attributes.spaces)for(const e of this.attributes.spaces)e.base=this.attributes.base,this.spaces.push(new au(e))}hasOpenInviteRequests(){const e=this.getSpace();return(null==e?void 0:e.invites.length)>0&&e.invites.models.filter((e=>e.isRequest()&&"open"===e.status)).length>0}isSharePublic(){const e=this.getSpace();return null!=e&&!e.isPrivate()}isShared(){const e=this.getSpace();return null!=e&&(!e.isPrivate()||(!(!e.allowInviteRequests&&e.hideUrl)||(null!=e.users&&null!=e.users.modelsBindable.find((e=>"accepted"===e.status))||null!=e.invites&&null!=e.invites.modelsBindable.find((e=>"open"===e.status)))))}async isSharedJP(){if(this.isShared())return!0;const e=this.getSpace();return null!=e&&(await e.loadAllInvitesAndUsersJP(),this.isShared())}getFilterFlags(){let e=[];const t=this.getSpace();return null!=t&&(e=t.getFilterFlags()),e}getSpace(){if(null==this.spaces)return null;for(let e=0,t=this.spaces.length;e<t;e++){const t=this.spaces.at(e),r=t.getSubType();if("gallery"!==r&&"review"!==r)return t}}async hasAnyRejectedAssetsJP(){return(await this.getAssets({flag:"reject",subtype:"image;video",limit:1},!0).pageP(0)).length>0}async canSafelyConvertLegacyShareFiltersJP(){const e=this.getSpace();if(null!=e){if(e.hasLegacyFilters()){const e=this.getFilterFlags();if(0===e.length||3===e.length){const e=await this.hasAnyRejectedAssetsJP();return Promise.resolve(!e)}return 1===e.length&&e.includes("pick")||e.includes("pick")&&e.includes("unflagged")?Promise.resolve(!0):Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)}async safeConvertLegacyShareFiltersJP(){const e=this.getSpace();if(null!=e&&e.hasLegacyFilters()&&await this.canSafelyConvertLegacyShareFiltersJP()){const t=this.getFilterFlags();if(1===t.length&&t.includes("pick")){const t=this.updateAttributesP("safeConvertFilters",{presentation:{filters:{pickedOnly:!0}}}),r=e.enableNewPresentationFiltersP();await _u.when([t,r]),b.Z.report("albumSafeLegacyFilterConversion",{pickedOnly:!0})}else await e.enableNewPresentationFiltersP(),b.Z.report("albumSafeLegacyFilterConversion");return Promise.resolve()}return Promise.reject()}hasPublicReview(){let e=!1;const t=this.getReviewSpace();return null!=t&&(e=!t.isPrivate()),e}getReviewSpace(){if(null==this.spaces)return null;for(let e=0,t=this.spaces.length;e<t;e++){const t=this.spaces.at(e);if("review"===t.getSubType())return t}}hasGallerySpace(){if(null!=this.spaces)for(let e=0,t=this.spaces.length;e<t;e++)if("gallery"===this.spaces.at(e).getSubType())return!0}updateAttributeP(e,t,r){const i={};return i[t]=r,super.updateAttributeP(e,"payload",i)}renameP(e){return this.updateAttributesP("renameAlbum",{payload:{name:e}})}async setNameJP(e){return await this.renameP(e)}async setStoryTitleJP(e){return await this.updateAttributesP("setAlbumTitle",{payload:{story:{title:e}}})}async deleteStoryTitleJP(){return await this.updateAttributesP("setAlbumTitle",{payload:{story:{title:null}}})}async setStoryAuthorJP(e){return await this.updateAttributesP("setAlbumAuthor",{payload:{story:{author:e}}})}async deleteStoryAuthorJP(){return await this.updateAttributesP("setAlbumAuthor",{payload:{story:{author:null}}})}reparentP(e){return null!=e?this.updateAttributesP("reparentAlbum",{payload:{parent:{id:e}}}):this.updateAttributesP("reparentAlbum",{payload:{parent:null}})}setSlideshowSettingsP(e){const t=this.getSlideshowSettings();return _u.extend(t,e),this.updateAttributesP("setSlideshowSettings",{payload:{presentation:{slideshow:e}}})}setPresentationSettingsP(e){const t=this.getPresentationSettings();return _u.extend(!0,t,e),this.updateAttributesP("setPresentationSettings",{payload:{presentation:e}})}setPresentationFilterPickedOnlyP(e){return this.updateAttributesP("setPresentationFilterPickedOnlyP",{payload:{presentation:{filters:{pickedOnly:e}}}}).then((()=>{this.markFilteredAssetsDirty()}))}setPresentationFilterRatingAtLeastP(e){let t;return t=0===e?"clearPresentationFilterRatingAtLeastP":"setPresentationFilterRatingAtLeastP",this.updateAttributesP(t,{payload:{presentation:{filters:{ratingAtLeast:e}}}}).then((()=>{this.markFilteredAssetsDirty()}))}clearPresentationFilterSettingsP(){return this.updateAttributesP("clearPresentationFiltersP",{payload:{presentation:{filters:null}}}).then((()=>{this.markFilteredAssetsDirty()}))}saveCoverSettingsP(e){const t=this.getCoverSettings();return _u.extend(t,e),this.updateAttributesP("setCoverSettings",{payload:{presentation:{cover:e}}})}resetCoverCropSettingsP(){return this.updateAttributesP("setCoverCropSettings",{payload:{presentation:{cover:{cropHints:{}}}}})}hideInOrganizeP(){return this.updateAttributesP("hideInOrganize",{payload:{hideInOrganize:!0,parent:null}})}showInOrganizeP(){return this.updateAttributesP("hideInOrganize",{payload:{hideInOrganize:!1}})}deleteSpaceP(e){return this.requestP("DELETE",e.href).then((()=>(this.markAssetsDirty(),this.refreshP())))}async createSpaceJP(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"shared";if(!["review","shared"].includes(r))throw"This method needs to be updated for the new space subtype";const i=this._linkBase.fullHref(`spaces/${this.createUuid()}`),n=(new Date).toISOString();e.userCreated=n,e.userUpdated=n;const o={payload:e,subtype:r,resources:[{id:this.id,type:"album"}]};this.markAssetsDirty();try{const e={"If-None-Match":this.id};await this.requestJP("PUT",i,JSON.stringify(o),{headers:e}),await this.refreshP(),t="shared"===r?this.getSpace():this.getReviewSpace();try{return await t.pollForShortWebHrefP()}catch(e){}}catch(e){const[i,n,o]=e;if(412!==n)throw this.reportOzFailure("createSpaceFailure",i,n,o),e;if(await this.refreshP(),t="shared"===r?this.getSpace():this.getReviewSpace(),null==t)throw this.reportOzFailure("createSpace412RefreshFailure",i,n,o),e}}createSpaceP(e){const t=_u.Deferred();return this.createSpaceJP.then((e=>t.resolve(e)),(e=>t.reject(e))),t.promise()}_getAssetsLink(){return this.linkHref("self")+"/assets"}hasAssetsP(e){return e=_u.extend({limit:1},e),new nl(this._getAssetsLink(),e).pageP(0).then((e=>e.length>0))}removeManyAssetsP(e){let t,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.length>0&&("string"==typeof e[0]||e[0]instanceof String)?e:e.map((e=>e.id)),r=i?this.assets.deleteAssetsP(e):this.assets.deleteManyP(t,"removeAssetsFromAlbum"),this.assetsIdsRemoved(t,!0),r}assetsIdsRemoved(e){var t,r;const i=null===(t=this.getAttribute("payload").cover)||void 0===t?void 0:t.id,n=null!=i&&e.includes(i);n&&this.deleteAlbumCoverP();const o=null===(r=this._coverFallbackAsset)||void 0===r?void 0:r.id;(null!=o&&e.includes(o)||n)&&this.markAssetsDirty(!0)}deleteAssetsLocally(e){this.assets.deleteLocally(e)}coverIsSet(){return null!=this.getAttribute("payload").cover}setAlbumCoverP(e){let t;null!=e?(t={},t.id=e):t=null;const r=_u.Deferred().resolve().promise();return _u.when(this.updateAttributesP("setAlbumCover",{payload:{cover:t}}),r).done((()=>null!=e?this.assets.getP(t.id).done((e=>this._setCover(e))):this._setCover(null)))}async setAlbumCoverJP(e){return await this.setAlbumCoverP(e)}deleteAlbumCoverP(){return this._setCover(null),this.updateAttributesP("deleteAlbumCover",{payload:{cover:null}})}addAsset(e){const t=new Fa(e);return t.refreshP().done((()=>{this.assets.index(t.id)>=0||this.assets._add(t)}))}_refreshP(e){return e=e||`${this.href}?embed=spaces`,super._refreshP(e)}isProjectV1(){var e,t,r,i,n,o;return null!=(null===(e=this.attributes)||void 0===e||null===(t=e.payload)||void 0===t||null===(r=t.presentation)||void 0===r?void 0:r.portfolio)||"project"===this.getSubtype()&&1===(null===(i=this.attributes)||void 0===i||null===(n=i.payload)||void 0===n||null===(o=n.publishInfo)||void 0===o?void 0:o.version)}isCluster(){return"cluster"===this.getSubtype()}createClustersP(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=`${this.href}/clusters`;t.length>0&&(r+=`?${t}`);let i={};return n.Z.is_enabled("best_photos_trust_oz_ignore_ratings_flags")&&(i={weights:{importance_weights:{rating:[0,0,0,0,0,0],hasTitle:0,hasCaption:0,flags:{pick:0,reject:0,unflagged:0}}}}),this.requestP("POST",r,JSON.stringify(i)).then(((t,r,i)=>{const o=i.getResponseHeader("Location"),s=new e(o);return n.Z.is_enabled("debug_best_photos")&&(s.debugClusterRequestId=i.getResponseHeader("x-request-id")),s}))}refreshUntilClusteringCompletesP(e){const t=_u.Deferred(),r=1e3;let i=0,o=0;var s=()=>null==e||e()?r*i>=18e4?(b.Z.report("bestPhotosClusterTimeout"),void t.reject("timeout")):this.refreshP().done((()=>{o=0,++i,!0===this.attributes.incomplete||n.Z.is_enabled("best_photos_load_forever")?(n.Z.is_enabled("debug")&&console.log("Still clustering."),setTimeout(s,r)):(n.Z.is_enabled("debug")&&console.log("Clustering complete!"),t.resolve())})).fail((()=>{++o,o<=2?(b.Z.report("bestPhotosClusterRefreshRetry"),setTimeout(s,r)):(b.Z.report("bestPhotosClusterFail"),t.reject("fail"))})):t.reject("aborted");return s(),t.promise()}loadClustersP(){return this.topics.loadAssetsP(!1,!0)}getReviewedAssetsP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all_clients";const r=this.getReviewSpace();return null!=r?(this.isProofLoading=!0,e&&this.assets.markDirty().reset(),this.reviewAssets.markDirty().reset(),this.assets.getReviewedAssetsP(r,t).done((e=>{this.proofingClientList=this.assets.proofingClientList,this.selectedAssetsForFiltering=this.assets.selectedAssetsForFiltering,this.commentedAssetsForFiltering=this.assets.commentedAssetsForFiltering,this.reviewAssets.addAssets(e)})).always((()=>{this.currentProofingClient=t,this.reviewAssets.finished=!0,this.isProofLoading=!1}))):(this.reviewAssets.finished=!0,_u.Deferred().resolve([]).promise())}splitAtAssetP(e,t,r,i){let n;return"first"===t?(n="left",e=this.assets.at(0).id):n=t,this.createNewLayoutSegmentP(e,n,r,i)}createNewLayoutSegmentP(e,t,r,i){const n=this.createUuid(),o=`${R.Z.catalogContext.href}/assets/${n}/revisions/${this.createUuid()}`,s={payload:{name:null!=r?r:"",description:null!=i?i:""},subtype:"layout_segment"};return this.requestP("PUT",o,JSON.stringify(s)).then((()=>{const r=this.assets.index(e);if(!(r>=0))return _u.Deferred().reject(`Unknown asset id ${e}`);let i=r;return"right"===t&&i++,this.assets.addOrderedAssetIdsP([n],i)}))}convertToDisplay(){var e;0===this.attributes.payload.presentation.explore.version&&this.attributes.dispatch("convertToDisplay"),1===(null===(e=this.attributes.payload.presentation.slideshow)||void 0===e?void 0:e.version)&&this.setSlideshowSettingsP(this.getSlideshowSettings().convertV1Properties().toJSON())}},pu=(0,i.Z)(hu.prototype,"currentProofingClient",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fu=(0,i.Z)(hu.prototype,"isProofLoading",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gu=(0,i.Z)(hu.prototype,"proofingClientList",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mu=(0,i.Z)(hu.prototype,"selectedAssetsForFiltering",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vu=(0,i.Z)(hu.prototype,"commentedAssetsForFiltering",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yu=(0,i.Z)(hu.prototype,"spaces",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bu=(0,i.Z)(hu.prototype,"reviewAssets",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hu);wu.prototype.coverClass=Ao,wu.prototype.assetListClass=nl;const Pu=wu,Au=function(){class e extends La{_add(e,t){var r,i,n,o,s;if(t){for(n=0,i=(s=this.models).length-1;n<=i;)if(o=Math.floor(n+(i-n)/2),(r=Xo.localeCompare(s[o],e))<0)n=o+1;else{if(!(r>0))break;i=o-1}return this._models.splice(n,0,e),this._reindex(n)}return super._add(e)}deleteP(e){var t,r;if(null!=(r=(t=this.get(e)).getSpace()))this.requestP("DELETE",r.href).fail(((e,t,r)=>this.reportOzFailure("deleteSpaceForAlbumDeleteFailure",e,t,r)));else if(t.isCluster()||t.isProjectV1())return super.deleteP(e,{child_albums:!0});return super.deleteP(e)}getTotalCountHref(){return"topic"===this.options.subtype?`${this.href}/count?subtype=topic`:`${this.href}/count?subtype=collection`}}return e.prototype.model=Pu,e.prototype.modelName="CatalogAlbum",e}.call(void 0);var Su,xu;let Cu=(Su=class extends tr{constructor(){super(...arguments),(0,P.Z)(this,"albums",xu,this)}setAttributes(e){var t;super.setAttributes(e),null!==(t=this.albums)&&void 0!==t||(this.albums=new Ll(this.linkHref("/rels/space_resources")))}addManyResourcesP(e){return this.albums.createManyP(this,e)}addResourceP(e){return this.albums.createP(this,e)}getResourcesP(){return this.albums.reset(),this.albums.allP()}deleteManyResourcesP(e){return this.albums.deleteManyP(this.href,e)}webHref(){return this.linkHref("/rels/web_space")}getLongWebHref(){return`${this._linkBase.hostUrl}/gallery/${this.id}`}getAuthor(){var e,t,r;return null!==(e=null===(t=this.attributes.payload)||void 0===t||null===(r=t.profile_info)||void 0===r?void 0:r.author)&&void 0!==e?e:""}getDescription(){var e,t,r;return null!==(e=null===(t=this.attributes.payload)||void 0===t||null===(r=t.profile_info)||void 0===r?void 0:r.description)&&void 0!==e?e:""}},xu=(0,i.Z)(Su.prototype,"albums",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su);var Ou=r(784090);const ku=function(){class e extends tn{createNewGallerySpaceP(e){var t,r;return r=`${this.href}/${this.createUuid()}`,t={payload:{download:!1,location:!1,metadata:!1,private:!1,gallery_type:"public_profile",profile_info:{author:e},comments_disabled:!0,favorites_disabled:!0},subtype:this.subtype,resources:[]},this.createP(r,t)}deleteAllGallerySpacesP(){return this.allP().then((e=>{var t,r,i,n,o;for(n=[],t=0,r=e.length;t<r;t++)o=e[t],i=this.deleteP(o.id),n.push(i);return Ou.when(...n)}))}}return e.prototype.model=Cu,e.prototype.modelName="CatalogGallerySpace",e.prototype.subtype="gallery",e}.call(void 0),Eu=class extends yo{setAttributes(e){return super.setAttributes(e),this.name=e.payload.name,this}getName(){return this.name}},Iu=function(){class e extends Ga{constructor(e){super(e,{subtype:"person"})}getNameForId(e){var t;return(null!=(t=this.get(e))?t.getName():void 0)||""}}return e.prototype.model=Eu,e.prototype.modelName="CatalogPerson",e}.call(void 0);class Tu extends Da{setAttributes(e){var t;return this.order=null===(t=e.payload)||void 0===t?void 0:t.order,super.setAttributes(e)}getOrder(){return this.order||""}}const Du=function(){class e extends La{constructor(e){super(e,{subtype:"collection_set"})}}return e.prototype.model=Tu,e.prototype.modelName="CollectionSetAlbum",e}.call(void 0);class Ru extends Tu{reparentP(e){return null!=e?this.updateAttributesP("reparentFolder",{payload:{parent:{id:e}}}):this.updateAttributesP("reparentFolder",{payload:{parent:null}})}}Ru.prototype.assetListClass=nl;const ju=Ru,Zu=function(){class e extends Du{}return e.prototype.model=ju,e.prototype.modelName="CatalogCollectionSetAlbum",e}.call(void 0);var Fu,Nu,Lu,Mu,Uu,$u,zu,qu,Hu,Ju,Vu,Bu,Wu,Gu=r(784090);let Xu=(Fu=class extends tr{constructor(){super(...arguments),(0,P.Z)(this,"photoCount",Nu,this),(0,P.Z)(this,"videoCount",Lu,this),(0,P.Z)(this,"photoExcludedIncompleteCount",Mu,this),(0,P.Z)(this,"videoExcludedIncompleteCount",Uu,this),(0,P.Z)(this,"photoDeletedCount",$u,this),(0,P.Z)(this,"videoDeletedCount",zu,this),(0,P.Z)(this,"countsDirty",qu,this),(0,P.Z)(this,"incompleteCountsDirty",Hu,this),(0,P.Z)(this,"deletedCountsDirty",Ju,this),(0,P.Z)(this,"allPhotosRestoreInProgress",Vu,this),(0,P.Z)(this,"peopleCount",Bu,this),(0,P.Z)(this,"peopleCountDirty",Wu,this)}get assetCount(){return this.photoCount+this.videoCount}get assetIncompleteCount(){return this.photoExcludedIncompleteCount+this.videoExcludedIncompleteCount}get assetDeletedCount(){return this.photoDeletedCount+this.videoDeletedCount}get assetDeletedCountsLoaded(){return!this.deletedCountsDirty}get assetIncompleteCountsLoaded(){return!this.incompleteCountsDirty}get assetCountsLoaded(){return!this.countsDirty}get assetPeopleCount(){return this.peopleCount}setAttributes(e){var t,r,i,o,s;super.setAttributes(e),null!==(t=this.assets)&&void 0!==t||(this.assets=new Ga(`${this.linkHref("self")}/assets`,{subtype:"image;video"})),null!==(r=this.albums)&&void 0!==r||(this.albums=new Au(`${this.linkHref("self")}/albums`,{subtype:"collection",embed:"spaces",limit:500})),null!==(i=this.collectionSetAlbums)&&void 0!==i||(this.collectionSetAlbums=new Zu(`${this.linkHref("self")}/albums`)),this.cachedAssets={},this.cachedSearchAssets={},this.cachedUnwantedAssets=null,this.catalogUpdates=new Ba(this.linkHref("/rels/updates")),null!==(o=this.gallerySpaces)&&void 0!==o||(this.gallerySpaces=new ku(`${this.linkHref("self")}/spaces`,{subtype:"gallery"})),n.Z.is_enabled("face_detection")&&(null!==(s=this.persons)&&void 0!==s||(this.persons=new Iu(`${this.linkHref("self")}/assets`)),this.persons.allP())}getPersonAssets(){var e;return null!==(e=this.personAssets)&&void 0!==e||(this.personAssets=new Iu(`${this.linkHref("self")}/assets`)),this.personAssets}getImageAssets(){var e;return null!==(e=this.photoAssets)&&void 0!==e||(this.photoAssets=new Ga(`${this.linkHref("self")}/assets`,{subtype:"image"})),this.photoAssets}getProjectAlbums(){var e;return null!==(e=this.projectAlbums)&&void 0!==e||(this.projectAlbums=new Au(`${this.linkHref("self")}/albums`,{subtype:"project"})),this.projectAlbums}getClusterAlbums(){return new Au(`${this.linkHref("self")}/albums`,{subtype:"cluster"})}cleanupClusterAlbumsP(){const e=this.getClusterAlbums();return e.allP().done((()=>{e.models.sort(((e,t)=>t.getOzCreatedDate()-e.getOzCreatedDate()));const t=e.models.slice(5,7);n.Z.is_enabled("debug")&&console.log(`Cleaning up ${t.length} albums`);const r=t.map((e=>e.id)),i=t=>()=>e.deleteP(t),o=new Hr(1);for(const e of r)o.enqueuePromise(i(e));return o.promise().done((()=>{n.Z.is_enabled("debug")&&console.log("Done cleaning up clusters.")}))}))}getName(){return this.attributes.name}getAssets(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=zr()(e);null!==(r=(t=this.cachedAssets)[n])&&void 0!==r||(t[n]=new Ga(`${this.href}/assets`,e));const o=this.cachedAssets[n];return i&&o.reset(),o}getSearchAssets(e,t,r,i){var n,o;const s={search:e,filters:t},a=zr()(s);return null!==(o=(n=this.cachedSearchAssets)[a])&&void 0!==o||(n[a]=new Uo(this,e,t,r,i)),this.cachedSearchAssets[a]}getUnwantedAssets(){var e;return null!==(e=this.cachedUnwantedAssets)&&void 0!==e?e:this.cachedUnwantedAssets=new Ho(this)}markSearchAssetsDirty(){if(n.Z.is_enabled("recently_added")||n.Z.is_enabled("recently_edited"))for(const e of Object.values(this.cachedSearchAssets))e.markDirty();this.cachedSearchAssets={}}markAssetsDirty(){var e;null===(e=this.assets)||void 0===e||e.markDirty(),this.countsDirty=!0,this.incompleteCountsDirty=!0,this.deletedCountsDirty=!0,this.allPhotosRestoreInProgress=!0,this.markSearchAssetsDirty(),n.Z.is_enabled("unwanted_photos")&&this.cachedUnwantedAssets.markDirty();for(const e of Object.values(this.cachedAssets))e.markDirty()}assetUpdated(){this.trigger("assetUpdated")}allCountsP(){return null!=this.loadingCountsP?this.loadingCountsP:this.countsDirty?this.loadingCountsP=this.requestP("GET",`${this.href}/assets/count?subtype=image%3Bvideo&exclude=incomplete`).then((e=>{var t,r;return this.photoCount=(null==e||null===(t=e.subtype_counts)||void 0===t?void 0:t.image)||0,this.videoCount=(null==e||null===(r=e.subtype_counts)||void 0===r?void 0:r.video)||0,this.countsDirty=!1,this.allPhotosRestoreInProgress=!1,[this.photoCount,this.videoCount]})).always((()=>this.loadingCountsP=void 0)):Gu.Deferred().resolve([this.photoCount,this.videoCount])}errorCountsP(){return null!=this.loadingErrorCountsP?this.loadingErrorCountsP:this.incompleteCountsDirty?this.loadingErrorCountsP=this.requestP("GET",`${this.href}/assets/count?subtype=image%3Bvideo&exclude=complete`).then((e=>{var t,r;return this.photoExcludedIncompleteCount=(null==e||null===(t=e.subtype_counts)||void 0===t?void 0:t.image)||0,this.videoExcludedIncompleteCount=(null==e||null===(r=e.subtype_counts)||void 0===r?void 0:r.video)||0,this.incompleteCountsDirty=!1,[this.photoExcludedIncompleteCount,this.videoExcludedIncompleteCount]})).always((()=>this.loadingErrorCountsP=void 0)):Gu.Deferred().resolve([this.photoExcludedIncompleteCount,this.videoExcludedIncompleteCount])}deletedCountsP(){return null!=this.loadingDeletedCountsP?this.loadingDeletedCountsP:this.deletedCountsDirty?this.loadingDeletedCountsP=this.requestP("GET",`${this.href}/assets/count?subtype=deleted_image%3Bdeleted_video`).then((e=>{var t,r;return this.photoDeletedCount=(null==e||null===(t=e.subtype_counts)||void 0===t?void 0:t.deleted_image)||0,this.videoDeletedCount=(null==e||null===(r=e.subtype_counts)||void 0===r?void 0:r.deleted_video)||0,this.deletedCountsDirty=!1,[this.photoDeletedCount,this.videoDeletedCount]})).always((()=>this.loadingDeletedCountsP=void 0)):Gu.Deferred().resolve([this.photoDeletedCount,this.videoDeletedCount])}peopleCountP(){return null!=this.loadingPeopleCountP?this.loadingPeopleCountP:this.peopleCountDirty?this.loadingPeopleCountP=this.requestP("GET",`${this.href}/assets/count?subtype=person`).then((e=>{var t;return this.peopleCount=(null==e||null===(t=e.subtype_counts)||void 0===t?void 0:t.person)||0,this.peopleCountDirty=!1,this.peopleCount})).always((()=>this.loadingPeopleCountP=void 0)):Gu.Deferred().resolve([this.photoExcludedIncompleteCount,this.videoExcludedIncompleteCount])}getConnections(){var e,t;return(null===(e=this.attributes.payload.settings)||void 0===e||null===(t=e.universal)||void 0===t?void 0:t.connections)||{}}addConnectionToSettingsP(e){var t,r,i;if(null!==(t=this.attributes.payload.settings)&&void 0!==t&&null!==(r=t.universal)&&void 0!==r&&null!==(i=r.connections)&&void 0!==i&&i[e])return Gu.Deferred().resolve();const n=(new Date).toISOString(),o={universal:{connections:{}}};o.universal.connections[e]={created:n};const s={payload:{settings:o}};return this.updateAttributesP("catalogConnection",s)}removeConnectionFromSettingsP(e){var t,r,i;if(null===(t=this.attributes.payload.settings)||void 0===t||null===(r=t.universal)||void 0===r||null===(i=r.connections)||void 0===i||!i[e])return Gu.Deferred().resolve();const n={universal:{connections:{}}};n.universal.connections[e]=null;const o={payload:{settings:n}};return this.updateAttributesP("catalogConnection",o)}async submitSearchFeedbackJP(e){return await this.requestP("PUT",`${this.href}/feedback`,JSON.stringify(e))}},Nu=(0,i.Z)(Fu.prototype,"photoCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Lu=(0,i.Z)(Fu.prototype,"videoCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mu=(0,i.Z)(Fu.prototype,"photoExcludedIncompleteCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Uu=(0,i.Z)(Fu.prototype,"videoExcludedIncompleteCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$u=(0,i.Z)(Fu.prototype,"photoDeletedCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zu=(0,i.Z)(Fu.prototype,"videoDeletedCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qu=(0,i.Z)(Fu.prototype,"countsDirty",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hu=(0,i.Z)(Fu.prototype,"incompleteCountsDirty",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ju=(0,i.Z)(Fu.prototype,"deletedCountsDirty",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vu=(0,i.Z)(Fu.prototype,"allPhotosRestoreInProgress",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bu=(0,i.Z)(Fu.prototype,"peopleCount",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wu=(0,i.Z)(Fu.prototype,"peopleCountDirty",[T.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fu);var Ku=r(784090);const Yu=function(){class e extends tn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/v2/catalogs")}reset(e){return super.reset(Ku.extend({role:"any",subtype:"lightroom;X-lightroom"},e))}createCatalogP(){var e,t;return null!=this.creating?this.creating:(t=`/v2/catalogs/${this.createUuid()}`,e={subtype:"lightroom",payload:{name:"lightroom"}},this.creating=this.createP(t,e).always((()=>this.creating=null)))}}return e.prototype.model=Xu,e.prototype.modelName="Catalog",e}.call(void 0);var Qu=r(200202),ec=r(369628);const tc=new class{getCatalogP(){if(this.catalogDeferred)return this.catalogDeferred.promise;this.catalogDeferred=new ec.Z;let e=new Yu(`${R.Z.hostOverride}/v2/catalogs`);return e.fetchP().done((()=>{0===e.numLoaded()?this.catalogDeferred.reject("failed to load catalog"):this.catalogDeferred.resolve(e.at(0))})).fail((e=>{h.Z.noticeError(e),this.catalogDeferred.reject("failed to load catalog")})),this.catalogDeferred.promise}getProjectWithSourceAlbumIdForServiceIdP(e,t){return this.getProjectsForServiceIdP(t).then((t=>{let r;for(let i=t.length,n=0;n<i;n++){let i=t[n],o=i.attributes.payload.sourceAlbum,s=i.attributes.payload.publishInfo;if(o&&o.id===e&&!s.deleted){r=i;break}}return r}))}getProjectsP(){return this.getCatalogP().then((e=>e.getProjectAlbums().allP()))}getCollectionsP(){return this.getCatalogP().then((e=>e.albums.allP()))}getCollectionWithIdP(e){return this.getCatalogP().then((t=>t.albums.getP(e)))}getAssetsOfCollectionWithIdP(e){return this.getCollectionWithIdP(e).then((e=>(e.setDefaultAssetOptions({subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"}),e.assets.allP().then((t=>({album:e,assets:t}))))))}getProjectsForServiceIdP(e){return this.getProjectsP().then((t=>t.reduce(((t,r)=>{let i=r.attributes.payload.publishInfo;return i&&i.serviceId===e&&t.push(r),t}),[])))}publishProjectSnapshotOfCollectionWithIdForServiceIdP(e,t){return this.getProjectWithSourceAlbumIdForServiceIdP(e,t).then((r=>r?Promise.reject("source album is currently published"):this.getCatalogP().then((r=>r.albums.getP(e).then((e=>{if("collection"!==e.attributes.subtype)return Promise.reject("source album not of subtype collection");let i=r.getProjectAlbums(),n=[];return e.assets.allP().then((r=>{n=r.map((e=>e.id));let o=(new Date).toISOString(),s={subtype:"project",payload:{sourceAlbum:{id:e.id},publishInfo:{version:2,serviceId:t,created:o,updated:o}}},a=e.attributes.payload.cover;return a&&(s.payload.cover={id:a.id}),i.createP(e.name||e.id,s)})).then((e=>e.assets.addOrderedAssetIdsP(n,0).then((()=>e))))}))))))}republishSourceAlbumSnapshotOfProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t=e.attributes.payload.sourceAlbum;return t?this.getCollectionWithIdP(t.id).then((t=>{let r={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(r),t.setDefaultAssetOptions(r),Promise.all([e.assets.allP(),t.assets.allP()]).then((t=>{let r=t[0],i=t[1],n=r.map((e=>e.id)),o=i.map((e=>e.id));return e.removeManyAssetsP(n).then((()=>e.assets.addOrderedAssetIdsP(o,0).then((()=>{let t={payload:{publishInfo:{updated:(new Date).toISOString()}}};return e.updateAttributesP("setPublishInfo",t)}))))}))}),(t=>e)):e}))}getProjectWithIdForServiceIdP(e,t){return this.getProjectsForServiceIdP(t).then((t=>t.find((t=>t.id===e))||Promise.reject("no matching album")))}updateProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t={payload:r};return e.updateAttributesP("setPublishInfo",t)}))}deleteProjectWithIdForServiceIdP(e,t){return this.getCatalogP().then((r=>this.getProjectWithIdForServiceIdP(e,t).then((e=>r.getProjectAlbums().deleteP(e.id)))))}deleteOrphanedProjectWithIdP(e){return this.getCatalogP().then((t=>this.getProjectsP().then((r=>(r.find((t=>t.id===e)),t.getProjectAlbums().deleteP(e))))))}getAssetsOfProjectWithIdForServiceIdP(e,t){return this.getProjectWithIdForServiceIdP(e,t).then((e=>(e.setDefaultAssetOptions({subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"}),e.assets.allP().then((t=>({album:e,assets:t}))))))}updateAssetsOfProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>(e.setDefaultAssetOptions({subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"}),e.assets.allP().then((t=>{let i=r.map((e=>({id:e.id,payload:e.infoOverlay})));return e.assets._bulkUpdateAttributesP(i)})))))}addAssetsToProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>e.assets.addOrderedAssetIdsP(r,0)))}removeAssetsFromProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>e.removeManyAssetsP(r)))}publishV1SnapshotOfAlbumWithIdForServiceIdP(e,t){return this.getProjectWithSourceAlbumIdForServiceIdP(e,t).then((r=>r?Promise.reject("source album is currently published"):this.getCatalogP().then((r=>r.albums.getP(e).then((e=>{if("collection"!==e.attributes.subtype)return Promise.reject("source album not of subtype collection");let i=r.getProjectAlbums();var n=[];return e.assets.allP().then((r=>{n=r.map((e=>e.id));let o=(new Date).toISOString(),s={subtype:"project",payload:{sourceAlbum:{id:e.id},publishInfo:{version:1,serviceId:t,created:o,updated:o}}};return i.createP(e.name||e.id,s)})).then((t=>{let r={subtype:"topic",payload:{order:"Uzzz",parent:{id:t.id}}},n=e.attributes.payload.cover;return n&&(r.payload.cover={id:n.id}),i.createP(e.name||e.id,r)})).then((e=>e.assets.addOrderedAssetIdsP(n,0).then((()=>e))))}))))))}deleteV1ProjectWithIdForServiceIdP(e,t){return this.getCatalogP().then((r=>this.getProjectWithIdForServiceIdP(e,t).then((e=>e.topics.allP().then((t=>r.getProjectAlbums().deleteP(e.id)))))))}deleteOrphanedTopicsP(){return this.getCatalogP().then((e=>{let t=new Au(`${e.linkHref("self")}/albums`,{subtype:"topic"});return t.allP().then((e=>{let r=[];e.forEach((e=>{e.attributes.payload.parent||r.push(t.deleteP(e.id))}));let i=r.length;return Promise.all(r).then((function(){return"number of deleted topics without a parent: "+i}))}))}))}};var rc,ic,nc,oc,sc,ac,lc,uc,cc;const{LrSDK:dc}=window,hc=3e3;function pc(){return new Promise(((e,t)=>{let r=new Yu(`${R.Z.hostOverride}/v2/catalogs`);r.fetchP().done((()=>{if(0===r.numLoaded())t("failed to load catalog");else{let t=r.at(0),i=new Au(`${t.linkHref("self")}/albums`,{});e(i)}})).fail((e=>{h.Z.noticeError(e),t("failed to load catalog")}))}))}function fc(e){return e.assets.allP().then((()=>{let t=e.attributes.toJSON();return t.resources=e.assets.models.map((e=>{let t=e.attributes.toJSON();return delete t.base,{asset:t}})),t}))}let gc=(rc=s("debug_projects"),ic=s("debug_projects"),nc=s("debug_projects"),oc=s("debug_projects"),sc=s("debug_projects"),ac=s("debug_projects"),lc=s("debug_projects"),uc=s("debug_projects"),cc=class extends de{initialize(e){try{if(e.features){let t=Object.getOwnPropertyNames(e.features);for(const r of t)n.Z._override(r,e.features[r])}W.Z.token=e.token,W.Z.environment=dc.environment,W.Z.clientId=e.clientId,W.Z.ozHost="prod"===dc.environment?"https://photos.adobe.io":"https://photos-stage.adobe.io",z.reset(),R.Z.hostOverride=W.Z.ozHost,Qu.Z.isReady||(Qu.Z.setGetTokenMethod((()=>this._token)),Qu.Z.setAuthReady()),de.setAuthHeaders(W.Z.token,W.Z.clientId),R.Z.authErrorCallback=()=>h.Z.report("ozAuthError"),h.Z.reportApiCall("LrCatalog.initialize")}catch(e){h.Z.noticeError(e),console.log("Could not initialize LrCatalog",e)}e.disableAnalytics||(0,le.Z)(W.Z)}getEntitlementStatusP(){return h.Z.reportApiCall("LrCatalog.getEntitlementStatusP"),Ur.getCurrentP().then((e=>{let t;return e&&(t=e.getStatus()),t||"unknown"}))}isEmptyP(){return new Promise(((e,t)=>{let r=new Yu(`${R.Z.hostOverride}/v2/catalogs`);r.fetchP().done((()=>{let t=0===r.numLoaded();h.Z.report("isCatalogEmptyCheck",{value:t?"empty":"not empty"}),e(t)})).fail((t=>{h.Z.report("isCatalogEmptyCheck",{value:"missing"}),e(!0)}))}))}unpublishProjectP(e){return h.Z.reportApiCall("LrCatalog.unpublishProjectP"),pc().then((t=>t.getP(e).then((e=>"topic"===e.attributes.subtype&&e.attributes.payload.parent?t.getP(e.attributes.payload.parent.id).then((e=>{let t=(new Date).toISOString();return e.updateAttributesP("setPublishInfo",{payload:{publishInfo:{updated:t,deleted:!0}}}).then((()=>!0))})):function(e){if("project"!==e.attributes.subtype)return Promise.reject("not a valid project");let t=(new Date).toISOString();return e.updateAttributesP("setPublishInfo",{payload:{publishInfo:{updated:t,deleted:!0}}}).then((()=>!0))}(e)))))}republishProjectP(e){return h.Z.reportApiCall("LrCatalog.republishProjectP"),pc().then((t=>t.getP(e).then((e=>"topic"===e.attributes.subtype&&e.attributes.payload.parent?t.getP(e.attributes.payload.parent.id).then((r=>{let i=r.attributes.payload.sourceAlbum;return i?t.getP(i.id).then((t=>function(e,t){let r={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(r),t.setDefaultAssetOptions(r),Promise.all([e.assets.allP(),t.assets.allP()]).then((r=>{let i=r[0],n=r[1],o=i.map((e=>e.id)),s=n.map((e=>e.id)),a=e.attributes.toJSON();return a.resources=t.assets.models.map((e=>{let t=e.attributes.toJSON();return delete t.base,{asset:t}})),e.removeManyAssetsP(o).then((()=>e.assets.addOrderedAssetIdsP(s,0).then((()=>a))))}))}(e,t).then((e=>{let t={payload:{publishInfo:{updated:(new Date).toISOString()}}};return r.updateAttributesP("setPublishInfo",t).then((()=>e))}))),(t=>fc(e))):fc(e)})):function(e,t){if("project"!==t.attributes.subtype)return Promise.reject("not a valid project");let r=t.attributes.payload.sourceAlbum;return r?e.getP(r.id).then((e=>function(e,t){let r={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(r),t.setDefaultAssetOptions(r),Promise.all([e.assets.allP(),t.assets.allP()]).then((r=>{let i=r[0],n=r[1],o=i.map((e=>e.id)),s=n.map((e=>e.id)),a=t.assets.models.map((e=>{let t=e.attributes.toJSON();return delete t.base,{asset:t}}));return e.removeManyAssetsP(o).then((()=>e.assets.addOrderedAssetIdsP(s,0).then((()=>a))))}))}(t,e).then((e=>{let r={payload:{publishInfo:{updated:(new Date).toISOString()}}};return t.updateAttributesP("setPublishInfo",r).then((()=>{let r=t.attributes.toJSON();return r.resources=e,r}))}))),(e=>fc(t))):fc(t)}(t,e)))))}_isRenditionValidP(e){return ie.Z.requestOzUrlP("HEAD",e).then((e=>!0)).catch((e=>!1))}get2560RenditionRelativeUrlP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.Z.reportApiCall("get2560RenditionRelativeUrlP");var i=t.links["/rels/rendition_type/2560"];if(i&&!i.invalid&&!r)return this._isRenditionValidP(e+i.href).then((r=>r?i.href:this.get2560RenditionRelativeUrlP(e,t,!0)));if(!t.links["/rels/master"]&&!t.links["/rels/proxy_type/2560"])return Promise.reject("no proxy or master file");if(!t.revision_ids||t.revision_ids.length<1)return Promise.reject("no revisions");let n=t.revision_ids[t.revision_ids.length-1],o=t.links["/rels/rendition_create"].href.replace("{revision_id}",n),s=e+o.replace("{rendition_id}","");return new Promise(((r,n)=>{var o=0;let a=e=>{(o+=hc)>=9e4?n("timed out"):setTimeout((()=>{ie.Z.requestOzUrlP("HEAD",e).then((e=>{r(i.href)})).catch((t=>{a(e)}))}),hc)};ie.Z.requestOzUrlP("POST",s,null,{"x-generate-renditions":"2560"}).then((r=>{(r=r.responseObject)&&r.links&&r.links["/rels/rendition_type/2560"]?(i=r.links["/rels/rendition_type/2560"],a(e+i.href)):n(`failed request to create rendition for asset id ${t.id}`)})).catch((e=>{n(`failed request to create rendition for asset id ${t.id}`)}))}))}getFullsizeRenditionRelativeUrlP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.Z.reportApiCall("getFullsizeRenditionRelativeUrlP");let i=t.links["/rels/rendition_type/fullsize"];if(i&&!i.invalid&&!r)return this._isRenditionValidP(e+i.href).then((r=>r?i.href:this.getFullsizeRenditionRelativeUrlP(e,t,!0)));let n=t.links["/rels/master"];if(!n)return Promise.reject("no master file");if(!((t.payload||{}).develop||{}).xmpCameraRaw&&"image/jpeg"===n.content_type)return Promise.resolve(n.href);if(!t.revision_ids||t.revision_ids.length<1)return Promise.reject("no revisions");let o=t.revision_ids[t.revision_ids.length-1],s=t.links["/rels/rendition_create"].href.replace("{revision_id}",o),a=e+s.replace("{rendition_id}","");return new Promise(((r,n)=>{var o=0;let s=e=>{(o+=hc)>=9e4?n("timed out"):setTimeout((()=>{ie.Z.requestOzUrlP("HEAD",e).then((e=>{r(i.href)})).catch((t=>{s(e)}))}),hc)};ie.Z.requestOzUrlP("POST",a,null,{"x-generate-renditions":"fullsize"}).then((r=>{(r=r.responseObject)&&r.links&&r.links["/rels/rendition_type/fullsize"]?(i=r.links["/rels/rendition_type/fullsize"],s(e+i.href)):n(`failed request to create rendition for asset id ${t.id}`)})).catch((e=>{n(`failed request to create rendition for asset id ${t.id}`)}))}))}getImageP(e){return h.Z.reportApiCall("LrCatalog.getImageP"),ie.Z.getOzUrlP(e,"blob").then((e=>e.response))}assetUrlP(e){return h.Z.reportApiCall("LrCatalog.assetUrlP"),new Promise(((t,r)=>{let i=new Yu(`${R.Z.hostOverride}/v2/catalogs`);i.fetchP().done((()=>{let r=i.at(0),n=r._linkBase.fullHref(`catalogs/${r.id}/assets/${e}`);t(n)})).fail((e=>{h.Z.noticeError(e),r(e)}))}))}getAssetP(e){return h.Z.reportApiCall("LrCatalog.getAssetP"),new Promise(((t,r)=>{this.requestP("GET",e).done((e=>{t(e)})).fail((e=>{h.Z.noticeError(e),r(e)}))}))}xmpForAssetP(e){return h.Z.reportApiCall("LrCatalog.xmpForAssetP"),new Promise(((t,r)=>{var i,n;let o=null===(i=e.payload)||void 0===i||null===(n=i.develop)||void 0===n?void 0:n.xmpCameraRaw;if(e.links["/rels/xmp"]){let i=`${e.base}${e.links["/rels/xmp"].href}`;this.requestP("GET",i,null,{contentType:null}).done((e=>{t(((e,t)=>{if(!e)return t;if(!t)return e;let i=new DOMParser,n=i.parseFromString(e,"text/xml"),o=n.documentElement.getElementsByTagName("parsererror");if(o&&o.length>0)return void r(o[0].innerText);let s=i.parseFromString(t,"text/xml");if(o=n.documentElement.getElementsByTagName("parsererror"),o&&o.length>0)r(o[0].innerText);else try{let e=n.getElementsByTagName("rdf:Description")[0]||n.getElementsByTagName("Description")[0],t=s.getElementsByTagName("rdf:Description")[0]||s.getElementsByTagName("Description")[0];for(const[r,i]of Object.entries(t.attributes))e.setAttribute(i.nodeName,i.nodeValue);for(;t.firstChild;)e.appendChild(t.firstChild);return(new XMLSerializer).serializeToString(n)}catch(e){throw new Error("Invalid XMP")}})(e,o))})).fail((e=>{h.Z.noticeError(e),r(e)}))}else t(o)}))}async publishProjectSnapshotOfCollectionWithIdP(e){h.Z.reportApiCall("LrCatalog.publishProjectSnapshotOfCollectionWithIdP");let t=await re.getProjectManagerP(),r=await t.createProjectFromCollectionWithIdP(e),i=(new Date).toISOString(),n={userUpdated:i,publishInfo:{created:i,updated:i}};return await t.updateProjectWithIdP(r,n),r}async republishSourceAlbumSnapshotOfProjectWithIdP(e){h.Z.reportApiCall("LrCatalog.republishSourceAlbumSnapshotOfProjectWithIdP");let t=await re.getProjectManagerP();await t.resetProjectWithIdFromSourceCollectionP(e);let r=(new Date).toISOString(),i={userUpdated:r,publishInfo:{updated:r}};return t.updateProjectWithIdP(e,i)}async getProjectsP(){return h.Z.reportApiCall("LrCatalog.getProjectsP"),(await re.getProjectManagerP()).getDeepCopyOfProjectListP()}async getProjectWithIdP(e){return h.Z.reportApiCall("LrCatalog.getProjectWithIdP"),(await re.getProjectManagerP()).getDeepCopyOfProjectWithIdP(e)}async getCollectionWithIdP(e){h.Z.reportApiCall("LrCatalog.getCollectionWithIdP");let t=await re.getCollectionWithIdP(e);return JSON.parse(JSON.stringify(t))}async getAssetsOfCollectionWithIdP(e){return h.Z.reportApiCall("LrCatalog.getAssetsOfCollectionWithIdP"),re.getAssetsOfCollectionWithIdP(e)}async createProjectWithAssetIdsP(e,t){return h.Z.reportApiCall("LrCatalog.createProjectWithAssetIdsP"),(await re.getProjectManagerP()).createProjectWithAssetIdsP(e,t)}async createProjectFromCollectionWithIdP(e){return h.Z.reportApiCall("LrCatalog.createProjectFromCollectionWithIdP"),(await re.getProjectManagerP()).createProjectFromCollectionWithIdP(e)}async resetProjectWithIdFromSourceCollectionP(e){return h.Z.reportApiCall("LrCatalog.resetProjectWithIdFromSourceCollectionP"),(await re.getProjectManagerP()).resetProjectWithIdFromSourceCollectionP(e)}async updateProjectWithIdP(e,t){return h.Z.reportApiCall("LrCatalog.updateProjectWithIdP"),(await re.getProjectManagerP()).updateProjectWithIdP(e,t)}async deleteProjectWithIdP(e){return h.Z.reportApiCall("LrCatalog.deleteProjectWithIdP"),(await re.getProjectManagerP()).deleteProjectWithIdP(e)}async getAssetsOfProjectWithIdP(e){return h.Z.reportApiCall("LrCatalog.getAssetsOfProjectWithIdP"),(await re.getProjectManagerP()).getAssetsOfProjectWithIdP(e)}async getUncachedProjectsP(){return(await re.getProjectManagerP()).getUncachedProjectsP()}async getUncachedProjectWithIdP(e){return(await re.getProjectManagerP()).getUncachedProjectWithIdP(e)}async deleteProjectWithIdForServiceIdP(e,t){return(await re.getProjectManagerForServiceIdP(t)).deleteProjectWithIdP(e)}async deleteChildAlbumsOfProjectWithIdForServiceIdP(e,t){return(await re.getProjectManagerForServiceIdP(t)).deleteChildAlbumsOfProjectWithIdP(e)}deleteOrphanedProjectWithIdP(e){return tc.deleteOrphanedProjectWithIdP(e)}publishV1SnapshotOfAlbumWithIdP(e){let t=W.Z.clientId;return tc.publishV1SnapshotOfAlbumWithIdForServiceIdP(e,t).then((e=>e.attributes.toJSON()))}deleteOrphanedTopicsP(){return tc.deleteOrphanedTopicsP()}selfTestP(e){return ae.runP(e)}},(0,i.Z)(cc.prototype,"getUncachedProjectsP",[rc],Object.getOwnPropertyDescriptor(cc.prototype,"getUncachedProjectsP"),cc.prototype),(0,i.Z)(cc.prototype,"getUncachedProjectWithIdP",[ic],Object.getOwnPropertyDescriptor(cc.prototype,"getUncachedProjectWithIdP"),cc.prototype),(0,i.Z)(cc.prototype,"deleteProjectWithIdForServiceIdP",[nc],Object.getOwnPropertyDescriptor(cc.prototype,"deleteProjectWithIdForServiceIdP"),cc.prototype),(0,i.Z)(cc.prototype,"deleteChildAlbumsOfProjectWithIdForServiceIdP",[oc],Object.getOwnPropertyDescriptor(cc.prototype,"deleteChildAlbumsOfProjectWithIdForServiceIdP"),cc.prototype),(0,i.Z)(cc.prototype,"deleteOrphanedProjectWithIdP",[sc],Object.getOwnPropertyDescriptor(cc.prototype,"deleteOrphanedProjectWithIdP"),cc.prototype),(0,i.Z)(cc.prototype,"publishV1SnapshotOfAlbumWithIdP",[ac],Object.getOwnPropertyDescriptor(cc.prototype,"publishV1SnapshotOfAlbumWithIdP"),cc.prototype),(0,i.Z)(cc.prototype,"deleteOrphanedTopicsP",[lc],Object.getOwnPropertyDescriptor(cc.prototype,"deleteOrphanedTopicsP"),cc.prototype),(0,i.Z)(cc.prototype,"selfTestP",[uc],Object.getOwnPropertyDescriptor(cc.prototype,"selfTestP"),cc.prototype),cc);dc.catalog||(dc.catalog=new gc),dc.provide&&dc.provide("catalog",dc.catalog),dc.catalog},989914:(e,t,r)=>{"use strict";r(936963),r(396842);var i=r(375029);const n=new class{constructor(){this.standAloneMode="stand-alone",this.embeddedMode="embedded",this.returnAfterSingleSelect=!1,this.singleSelect=!1,this.showConnectedProjects=!1,this.publishProjects=!1,this.ignorePublishedProjects=!1,this.softImportLimit=1/0,this.allowImportEntireAlbum=!1,this.headerStyle="full",this.mode=this.standAloneMode,this.externalUrlHandler=void 0,this.initialSearch=void 0,this.browseOnlyCollections=!1,this.showConnectedProjects=!1,this.browseProjectId=void 0,this.browseAlbums=!1,this.preferredLanguage=void 0,this.colorStop="dark"}};function o(e,t){return e.createElement(t)}function s(e,t){e.appendChild(t)}var a=r(291100),l=r.n(a),u=r(590447);class c{constructor(){this._index=[],this._regexps=[]}register(e,t){if(e instanceof RegExp)this._regexps.push({name:e,fn:t});else if(Array.isArray(e))for(var r=0,i=e.length;r<i;++r)this.register(e[r],t);else this._index["_"+e]=t}get(e){for(var t=this._regexps,r=0,i=t.length;r<i;++r){var n=t[r];if(n.name.test(e))return n.fn}return this._index["_"+e]}}var d=r(781255);class h extends d.Z{constructor(){super(...arguments),this.exports=new c,this.imports=new c,this.templateImports=new c}getImport(e){return this.imports.get(e)}registerImport(e,t){this.imports.register(e,t)}getTemplateImport(e){return this.templateImports.get(e)}registerTemplateImport(e,t){this.templateImports.register(e,t)}}const p=new h;var f=r(125276);const g=f.Z.makeClassDecorator((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;r.exports.register(t,e),Object.defineProperty(e.prototype,"_export",{value:t,enumerable:!1,configurable:!0})}));var m=r(256622),v=r(232959),y=r(821687);r(595249),r(497814),r(28227);const b={};class _ extends d.Z{constructor(){super(),Object.defineProperty(this,"_id",{enumerable:!1,value:b.id});var e=b.props;if("object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=this._port.importValue(e[t]))}dispose(){super.dispose(),this._port.disposeImport(this)}callMethod(e,t){this._port.callMethod(this,e,t)}callMethodWithPromise(e,t){return this._port.callMethodWithPromise(this,e,t)}}class w extends Error{constructor(e,t){super(e),this.remoteStack=t}toString(){return this.message+"\n"+this.remoteStack}}var P=r(745268),A=r(143653);class S{constructor(e){this.value=e}}var x,C,O=r(79675),k=r.n(O),E=r(578710),I=r.n(E);let T=g("Port")((C=class extends d.Z{constructor(e){super(),this.exportedValues={},this.exportedTypes={},this.importedValues={},this.pendingResults={},this.pendingMessages=[],this.importedTypes={},this.register=e,this.loaded=new Promise(((e,t)=>this._loadedPromise={resolve:e,reject:t}))}dispose(){var e=this.importedValues;if(this.importedValues=null,e)for(let t in e)e[t].dispose();if(this.exportedValues)for(let e in this.exportedValues){const t=this.exportedValues[e];t===this||t.selfManaged||t.dispose()}super.dispose()}postMessages(){}handleMessages(e){this.isDisposed||e&&e.forEach(this.handleMessage)}postMessage(e,t){this.pendingMessages.push({type:e,values:t}),this.flushMessagesSoon()}flushMessagesSoon(){var e=this.pendingMessages;this.pendingMessages=[],this.postMessages(e)}handleMessage(e){let{type:t,values:r}=e;switch(t){case"dispose":this.disposeExport(r._id);break;case"callMethod":this.handleCallMethod(r);break;case"result":this.handleResult(r);break;case"error":this.handleError(r);break;case"type":this.handleType(r);break;case"init":this.handleInit(r)}}postInit(){this._postInitPosted||(this._postInitPosted=!0,this.postMessage("init",{workerId:this.exportValue(this)}))}handleInit(e){let{workerId:t}=e;this.main=this.importValue(t),this.postInit(),this._loadedPromise.resolve(this)}handleType(e){let{className:t,methods:r,selfManaged:i}=e;this.getImportType(t,r,i)}getImportType(e,t,r){if(this.importedTypes.hasOwnProperty(e))return this.importedTypes[e];var i=this.register.getImport(e);if(i){var n=i;i=class extends n{}}else{var o=e.split("::"),s=this.register.getTemplateImport(o[0]);s?(i=s(o[1],e),Object.defineProperty(i.prototype,"_import",{enumerable:!1,value:e})):(i=class extends _{},this.register.registerImport(e,i),Object.defineProperty(i.prototype,"_import",{enumerable:!1,value:e}),Object.defineProperty(i.prototype,"_interceptor",{enumerable:!1,value:i}))}if(t&&t.length){var a=i.prototype._interceptor;if(!a)throw new Error("No @Import decorator found for "+e);t.forEach((e=>{let{name:t}=e;Object.defineProperty(a.prototype,t+"Async",{enumerable:!1,value:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.callMethod(t,r)},configurable:!0}),Object.defineProperty(a.prototype,t,{enumerable:!1,value:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.callMethodWithPromise(t,r)},configurable:!0})})),Object.defineProperty(a.prototype,"_export",{enumerable:!1,value:e,configurable:!0}),Object.defineProperty(a.prototype,"_publicMethods",{enumerable:!1,value:t,configurable:!0})}return Object.defineProperty(i.prototype,"selfManaged",{enumerable:!1,value:r}),Object.defineProperty(i.prototype,"_port",{enumerable:!1,value:this}),this.importedTypes[e]=i,i}handleCallMethod(e){let{thisId:t,method:r,args:i,responseId:n}=e;var o=this.importValue(t);if(!o)throw new Error("Invalid this object for call method call.");var s,a=i&&this.importValue(i)||[];try{var l=o[r];if(!l)throw new Error(`No method ${r} detected on ${o._export}.`);if(!o._publicMethods||!I()(o._publicMethods,(e=>{let{name:t}=e;return t===r})))throw new Error(`Method ${r} is not public on ${o._export}.`);if("function"!=typeof l)throw new Error(`Property ${r} on ${o._export} is not a function.`);s=l.apply(o,a)}catch(e){return void(n?this.postMessage("error",{responseId:n,message:e.toString(),stack:e.stack}):console.error(e.toString()+e.stack))}if(n){if(s&&s.then&&"function"==typeof s.then)return void s.then((e=>{this.postMessage("result",{responseId:n,result:this.exportValue(e)})})).catch((e=>{this.postMessage("error",{responseId:n,message:e.toString(),stack:e.stack})}));this.postMessage("result",{responseId:n,result:this.exportValue(s)})}}popResponsePromise(e){var t=this.pendingResults;if(!t.hasOwnProperty(e))throw new Error(`Invalid response id received as result from the other thread: ${e}`);var r=t[e];return delete t[e],r}handleResult(e){let{responseId:t,result:r}=e;var i=this.popResponsePromise(t),n=this.importValue(r);i.resolve(n)}handleError(e){let{responseId:t,message:r,stack:i}=e;var n=this.popResponsePromise(t);console.error(i),n.reject(new w(r,i))}callMethod(e,t,r){this.postMessage("callMethod",{thisId:this.exportValue(e),method:t,args:r?this.exportValue(r):null})}callMethodWithPromise(e,t,r){return new Promise(((i,n)=>{var o=k()("responseId");this.pendingResults[o]={resolve:i,reject:n},this.postMessage("callMethod",{responseId:o,thisId:this.exportValue(e),method:t,args:r?this.exportValue(r):null})}))}exportObject(e){var t=(0,P.Z)(e);return this.exportedValues.hasOwnProperty(t)||(this.exportedValues[t]=e,this.exportedTypes.hasOwnProperty(e._export)||(this.exportedTypes[e._export]=!0,this.postMessage("type",{className:e._export,methods:e._publicMethods,selfManaged:!e.dispose||e.selfManaged}))),{_id:t,_export:e._export}}disposeExport(e){var t=this.exportedValues;if(t.hasOwnProperty(e)){var r=t[e];if(!r||r.selfManaged)return;r.dispose(),r.isDisposed&&delete t[e]}}exportValue(e){if(e){if(this.isOpaqueValue(e))return e;if(Array.isArray(e))return e.map(this.exportValue);if("object"==typeof e){if(e instanceof S)return{_opaqueValue:!0,_wrappedValue:e.value};if(e._import&&e._port===this)return{_import:e._import,_id:e._id};if(e._export)return this.exportObject(e);let t={};for(let r in e)t[r]=this.exportValue(e[r]);return t}}return e}importObject(e){var t=e._id,r=this.importedValues.hasOwnProperty(t)?this.importedValues[t]:null;if(!r){var i=e._export||"BaseImport",n=this.getImportType(i);b.id=e._id,b.props=e._props,Array.isArray(e._ctorArgs)&&e._ctorArgs.length>0?A.Z.Reflect&&A.Z.Reflect.construct?r=A.Z.Reflect.construct(n,e._ctorArgs):(r=Object.create(n.prototype),n.apply(r,e._ctorArgs)):r=new n,this.importedValues[t]=r}return r}disposeImport(e){var t=this.importedValues;t&&(delete t[e._id],e.selfManaged||this.postMessage("dispose",{_id:e._id}))}isOpaqueValue(e){return e instanceof ArrayBuffer||e instanceof Uint8Array||e instanceof Int8Array||A.Z.Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array||A.Z.NSObject&&e instanceof A.Z.NSObject}importValue(e){if(e){if(this.isOpaqueValue(e))return e;if(Array.isArray(e))return e.map(this.importValue);if("object"==typeof e){if(e._opaqueValue)return new S(e._wrappedValue);if(e._export)return this.importObject(e);if(e._import)return this.exportedValues[e._id];let t={};for(let r in e)t[r]=this.importValue(e[r]);return t}}return e}},(0,u.Z)(C.prototype,"postMessages",[y.Z],Object.getOwnPropertyDescriptor(C.prototype,"postMessages"),C.prototype),(0,u.Z)(C.prototype,"flushMessagesSoon",[v.Z],Object.getOwnPropertyDescriptor(C.prototype,"flushMessagesSoon"),C.prototype),(0,u.Z)(C.prototype,"handleMessage",[m.Z],Object.getOwnPropertyDescriptor(C.prototype,"handleMessage"),C.prototype),(0,u.Z)(C.prototype,"exportValue",[m.Z],Object.getOwnPropertyDescriptor(C.prototype,"exportValue"),C.prototype),(0,u.Z)(C.prototype,"importValue",[m.Z],Object.getOwnPropertyDescriptor(C.prototype,"importValue"),C.prototype),x=C))||x;var D=r(369628);class R extends T{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p)}initiateConnection(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";this.channel=new window.MessageChannel,this.port=this.channel.port1,e.postMessage(JSON.stringify({kind:"torq-message-channel-init",name:r}),t,[this.channel.port2]),this.channel.port1.onmessage=e=>{this.handleChannelMessage(e)}}waitForConnection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";var r=new D.Z,i=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r,i)}(window,"message",(e=>{if(/torq-message-channel-init/.test(e.data))try{var n=JSON.parse(e.data);"torq-message-channel-init"===n.kind&&n.name===t&&(this.port=e.ports[0],this.port.onmessage=e=>{this.handleChannelMessage(e)},i(),this.postInit(),r.resolve())}catch(e){}}));return r.promise}handleInit(){super.handleInit(...arguments),this.postInit()}handleChannelMessage(e){try{this.handleMessages(e.data)}catch(e){return void console.error(e)}}postMessages(e){this.port.postMessage(e)}}const j=new h;var Z=r(143037),F=r(537188),N=r.n(F),L=r(165764),M=r.n(L),U=r(774154),$=r.n(U),z=r(811949),q=r.n(z),H=r(934809),J=r.n(H),V=r(12509),B=r.n(V),W=r(713967),G={};G.styleTagTransform=B(),G.setAttributes=q(),G.insert=$().bind(null,"head"),G.domAPI=M(),G.insertStyleElement=J(),N()(W.Z,G);const X=W.Z&&W.Z.locals?W.Z.locals:void 0;var K=r(745651),Y=r(56851),Q=(r(666222),r(565777),r(196731)),ee=r(200202);const te=f.Z.makePropertyDecorator((function(e,t,r){e.hasOwnProperty("_publicMethods")||Object.defineProperty(e,"_publicMethods",{enumerable:!1,value:e._publicMethods?e._publicMethods.slice():[]});for(var i=arguments.length,n=new Array(i>3?i-3:0),o=3;o<i;o++)n[o-3]=arguments[o];e._publicMethods.push({name:t,args:n}),r.value=f.Z.getInitialValue(r)}));var re,ie;let ne=g("StreamDelegate")((ie=class extends d.Z{constructor(e){super(),this.stream=e,e.attach(this)}write(e){this.trigger("data",e)}dispose(){super.dispose(),this.stream&&(this.stream.detach(),this.stream=null)}},(0,u.Z)(ie.prototype,"write",[te],Object.getOwnPropertyDescriptor(ie.prototype,"write"),ie.prototype),re=ie))||re;const{LrSDK:oe}=window;class se extends d.Z{initialize(e){try{if(e.features)for(const[t,r]of Object.entries(e.features))Q.Z._override(t,r);i.Z.token=e.token,i.Z.environment=oe.environment,i.Z.clientId=e.clientId,i.Z.ozHost="prod"===oe.environment?"https://photos.adobe.io":"https://photos-stage.adobe.io",ee.Z.isReady||(ee.Z.setGetTokenMethod((()=>this._token)),ee.Z.setAuthReady()),this.disableAnalytics=!!e.disableAnalytics,this.disableAnalytics||(0,Y.Z)(i.Z),Object.keys(n).forEach((t=>{e.hasOwnProperty(t)&&(n[t]=e[t])})),this._config=e,this._iframes={},this.browseCount=0}catch(e){K.Z.noticeError(e),console.log("Could not initialize LrImporter",e)}}attachCatalogBrowserP(e){if(K.Z.reportApiCall("LrImporter.attachCatalogBrowserP"),K.Z.beginTiming("importerBrowse"),!i.Z.token)return Promise.reject("There must be a valid IMS token");e.textContent="";var t=(0,P.Z)(e);let r;return new Promise(((a,u)=>{var c=`${window.location.protocol}//${window.location.hostname}`+(window.location.port?":"+window.location.port:""),d=new R(j);d.waitForConnection(c,"lr-importer-browser");var h=o(document,"div");h.classList.add(X["lr-importer-container"]);var p=o(document,"iframe"),f={source:c,session:K.Z.sessionGuid,count:++this.browseCount};return p.src=oe.baseURL+`sdk/LrImporter.html?${l().stringify(f)}`,p.id="lrimporter-iframe",e.dataset.importerStatus="loading",r=t=>{e.dataset.importerStatus=t},s(h,p),s(e,h),this._iframes[t]=h,d.loaded.then((()=>{var e=d.main,t={disableAnalytics:this.disableAnalytics,features:this.features};Object.assign(t,i.Z,n),t.externalUrlHandler=!!t.externalUrlHandler,e.initialize(t).then((t=>{t&&(this.streamDelegate=this.link(new ne(t)),this.listenTo(this.streamDelegate,"data",this._handleRemoteMessage),this.on("status-change",r)),a({iframe:h,importer:e})})).catch((e=>{u(e),K.Z.noticeError(e)}))}))})).then((e=>e.importer.browse().then((e=>(this.stopListening(this.streamDelegate,"data",this._handleRemoteMessage),this.disposeLink(this.streamDelegate),this.off("status-change",r),K.Z.reportWithTiming("importerBrowse",{api:"LrImporter.attachCatalogBrowserP",value:e?1:0,count:e?e.resources.length:0}),e))))).catch((e=>(console.log("Could not create lr-importer iframe",e),K.Z.noticeError(e),Promise.reject(e))))}detachCatalogBrowser(e){K.Z.reportApiCall("LrImporter.detachCatalogBrowser");var t=(0,P.Z)(e);t&&this._iframes[t]?function(e){if(e.remove)e.remove();else{var t=e.parentNode;t&&t.removeChild(e)}}(this._iframes[t]):console.error("No LrImporter found for",e)}browseCatalogInWindowP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxWidth:1920,maxHeight:1080};if(K.Z.reportApiCall("LrImporter.browseCatalogInWindowP"),K.Z.beginTiming("importerBrowse"),!i.Z.token)return Promise.reject("There must be a valid IMS token");var t=new R(j);t.waitForConnection(u,"lr-importer-browser");var r=Math.min(e.maxHeight,window.screen.availHeight),o=Math.min(e.maxWidth,window.screen.availWidth),s=window.screen.availTop+window.screen.availHeight/2-r/2,a=window.screen.availLeft+window.screen.availWidth/2-o/2,u=`${window.location.protocol}//${window.location.hostname}`+(window.location.port?":"+window.location.port:""),c=`menubar=yes,resizable=yes,scrollbars=no,status=yes,width=${o},height=${r},top=${s},left=${a}`,d={source:u,session:K.Z.sessionGuid},h=oe.baseURL+`sdk/LrImporter.html?${l().stringify(d)}`,p=window.open(h,"lr_importer_window",c);(p.outerWidth<screen.availWidth||p.outerHeight<screen.availHeight)&&(p.moveTo(0,0),p.resizeTo(screen.availWidth,screen.availHeight));var f=Z.Z.background;return Z.Z.background=!0,new Promise(((e,r)=>{this._windowCloseHandler=t=>{K.Z.reportWithTiming("importerBrowse",{api:"LrImporter.browseCatalogInWindowP",value:0,count:0}),e(null)},t.loaded.then((()=>{var e=t.main,r={disableAnalytics:this.disableAnalytics,features:this.features};return Object.assign(r,i.Z,n),r.externalUrlHandler=!!r.externalUrlHandler,e.initialize(r).then((t=>(t&&(this.streamDelegate=this.link(new ne(t)),this.listenTo(this.streamDelegate,"data",this._handleRemoteMessage)),e.browse()))).then((e=>(p.close(),Z.Z.background=f,t.dispose(),this.stopListening(this.streamDelegate,"data",this._handleRemoteMessage),this.disposeLink(this.streamDelegate),K.Z.reportWithTiming("importerBrowse",{api:"LrImporter.browseCatalogInWindowP",value:e?1:0,count:e?e.resources.length:0}),this._windowCloseHandler=void 0,e))).catch((e=>(K.Z.noticeError(e),this._windowCloseHandler=void 0,Promise.reject(e))))})).then((t=>{e(t)})).catch((e=>{r(e)}))}))}enableFeature(e){Q.Z._override(e,!0)}get softImportLimit(){return n.softImportLimit}set softImportLimit(e){K.Z.setAttribute("softImportLimit",e),n.softImportLimit=e}set preferredLanguage(e){K.Z.setAttribute("preferredLanguage",e),n.preferredLanguage=e}get returnAfterSingleSelect(){return n.returnAfterSingleSelect}set returnAfterSingleSelect(e){K.Z.setAttribute("returnAfterSingleSelect",e),n.returnAfterSingleSelect=e}get singleSelect(){return n.singleSelect}set singleSelect(e){K.Z.setAttribute("singleSelect",e),n.singleSelect=e}get initialSearch(){return n.initialSearch}set initialSearch(e){K.Z.setAttribute("initialSearch",!0),n.initialSearch=e}get browseProjectId(){return n.browseProjectId}set browseProjectId(e){K.Z.setAttribute("browseProjectId",!0),n.browseProjectId=e}get browseOnlyCollections(){return n.browseOnlyCollections}set browseOnlyCollections(e){K.Z.setAttribute("browseOnlyCollections",e),n.browseOnlyCollections=e}get browseAlbums(){return n.browseAlbums}set browseAlbums(e){K.Z.setAttribute("browseAlbums",e),n.browseAlbums=e}get showConnectedProjects(){return n.showConnectedProjects}set showConnectedProjects(e){K.Z.setAttribute("showConnectedProjects",e),n.showConnectedProjects=e}get publishProjects(){return n.publishProjects}set publishProjects(e){K.Z.setAttribute("publishProjects",e),n.publishProjects=e}get ignorePublishedProjects(){return n.ignorePublishedProjects}set ignorePublishedProjects(e){K.Z.setAttribute("ignorePublishedProjects",e),n.ignorePublishedProjects=e}get allowImportEntireAlbum(){return n.allowImportEntireAlbum}set allowImportEntireAlbum(e){K.Z.setAttribute("allowImportEntireAlbum",e),n.allowImportEntireAlbum=e}get headerStyle(){return n.headerStyle}set headerStyle(e){K.Z.setAttribute("headerStyle",e),n.headerStyle=e}get mode(){return n.mode}set mode(e){K.Z.setAttribute("mode",e),n.mode=e}get colorStop(){return n.colorStop}set colorStop(e){K.Z.setAttribute("colorStop",e),n.colorStop=e}_handleRemoteMessage(e){switch(e.name){case"remote-analytics-set-attribute":let t=e.args[0];K.Z.setAttribute(t.name,t.value);break;case"remote-analytics-report":let r=e.args[0];K.Z.report(r.action,r.variables);break;case"remote-analytics-notice-error":let i=e.args[0];K.Z.report("jsError",{message:i.message,errorName:i.name,errorStackTrace:i.stack,url:i.url,automation:Q.Z.is_enabled("automation"),noticed:!0}),K.Z.noticeError(new Error("LrImporterRemote noticed error"));break;case"remote-status-change":let o={unknown:"loading",partial:"loading",complete:"ready",missing:"missing",empty:"empty",maintenance:"maintenance"};this.trigger("status-change",o[e.args[0]]);break;case"remote-open-url":n.externalUrlHandler(e.args[0]);break;case"remote-log":console.log("REMOTE LOG",e.args[0]);break;case"remote-window-close":this._windowCloseHandler&&this._windowCloseHandler();break;default:console.log("Unknown remote event",e.name)}}}oe.importer||(oe.importer=new se),oe.provide&&oe.provide("importer",oe.importer),oe.importer},745651:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i,n=r(590447),o=r(175476),s=(r(936963),r(807664)),a=r(781255),l=r(546156),u=s.Z.parseQueryFromUrl(window.location.href),c=u.session,d=u.count||0;const h=new(i=class extends a.Z{constructor(){super(),this.reset()}reset(){this.messages=[],this.timings=[],this.collectors=[],this.attributes={browseCount:d}}addCollector(e){for(const[t,r]of Object.entries(this.attributes))e.setAttribute(t,r);this.collectors.push(e)}_callCollectorMethods(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.collectors.forEach((t=>t[e](...r)))}setAttribute(e,t){this.attributes[e]!==t&&(this._callCollectorMethods("setAttribute",e,t),this.attributes[e]=t)}noticeError(e){e||(e=new Error("Unknown error")),this._callCollectorMethods("noticeError",e)}report(e,t){this._callCollectorMethods("report",e,t)}reportApiCall(e,t){this._callCollectorMethods("reportApiCall",e,t)}beginTiming(e){this.timings[e]=performance.now()}reportWithTiming(e,t){var r=this.timings[e];if(r){var i=performance.now(),n=i-r;this._callCollectorMethods("reportTimed",e,r,i,n,t),delete this.timings[e]}else this.report(e,t)}get sessionGuid(){return c||this.generateGUID()}generateGUID(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}getUserGuidP(e){if(!this.guidPromise){let t=("prod"===e.environment?"https://photos.adobe.io":"https://photos-stage.adobe.io")+"/v2/accounts/00000000000000000000000000000000";this.guidPromise=l.Z.getOzUrlP(t).then((e=>`${e.responseObject.wcd_guid}@AdobeID`)).catch((e=>"UnknownUserGuid"))}return this.guidPromise}},(0,n.Z)(i.prototype,"sessionGuid",[o.Z],Object.getOwnPropertyDescriptor(i.prototype,"sessionGuid"),i.prototype),i)},56851:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var i=r(745651);class n{constructor(){this.attributes=[],i.Z.addCollector(this)}setAttribute(e,t){console.log(`Analytics Set Atribute ${e}=${t}`),this.attributes[e]=t}noticeError(e){console.error("Analytics Error",e)}report(e,t){console.log("Analytics Action",e,Object.assign({},t,this.attributes))}reportTimed(e,t,r,i,n){console.log("Analytics Timing",e,i,Object.assign({},n,this.attributes))}reportApiCall(e,t){console.log("Analytics API Call",e,Object.assign({},t,this.attributes))}}var o,s=r(590447),a=r(256622),l=r(175476),u=r(624338);const c=new(o=class extends u.Z{register(){"loading"!==document.readyState?setTimeout(this.run,0):document.addEventListener("DOMContentLoaded",this.exec)}exec(){this.run()}},(0,s.Z)(o.prototype,"exec",[a.Z],Object.getOwnPropertyDescriptor(o.prototype,"exec"),o.prototype),o);var d;const h=r(140917).replace("<ORIGIN>",window.location.origin);let p=(d=class{constructor(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;this.iFrame=e,this.messages=[],this.iFrame.addEventListener("load",(e=>{var t;this.isLoaded=!0;var r=new window.MessageChannel;this.port=r.port1;var i=window.location.origin||`${window.location.protocol}//${window.location.host}`;this.iFrame.contentWindow.postMessage(JSON.stringify({kind:"lr-organizer-nr-init"}),i,[r.port2]),null===(t=this.messages)||void 0===t||t.forEach((e=>this._postMessage(e))),this.messages&&delete this.messages}),!1);const n=null===(t=window)||void 0===t||null===(r=t.LrSDK)||void 0===r?void 0:r.environment;i=i.replace("<APPID>","prod"===n?41710945:41710984),this.iFrame.setAttribute("srcdoc",i),"srcdoc"in this.iFrame||this.iFrame.setAttribute("src","javascript: window.frameElement.getAttribute('srcdoc');"),this.iFrame.style.display="none",c.push((()=>{document.body.appendChild(this.iFrame)})),new MessageChannel,this.isLoaded=!1}setCustomAttribute(e,t){this._callRemote("setCustomAttribute",e,t)}addPageAction(e,t){this._callRemote("addPageAction",e,t)}noticeError(e){this._callRemote("noticeError",JSON.stringify(e,["message","arguments","type","name","stack"]))}setErrorHandler(){}_callRemote(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this._postMessage({method:e,args:r},window.location.origin)}_postMessage(e){this.isLoaded?this.port.postMessage(e):this.messages.push(e)}static get instance(){var e=document.getElementById("lr-new-relic-iframe");return e||((e=document.createElement("iframe")).id="lr-new-relic-iframe",e.proxy=new this(e)),e.proxy}},(0,s.Z)(d,"instance",[l.Z],Object.getOwnPropertyDescriptor(d,"instance"),d),d);var f,g=r(196731);let m=(f=class{constructor(){this.newrelic=p.instance,this.newrelic.setErrorHandler(this.errorHandler),i.Z.addCollector(this)}setAttribute(e,t){this.newrelic.setCustomAttribute(e,t)}noticeError(e){this.newrelic.noticeError(e),this.errorHandler(e,!0)}report(e,t){this.newrelic.addPageAction(e,t)}reportTimed(e,t,r,i,n){var o=Object.assign({},n);o.duration=i,this.report(e,o)}reportApiCall(e,t){var r=Object.assign({},t);r.apiName=e,this.report("apiCall",r)}errorHandler(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.report("jsError",{message:e.message,errorName:e.name,errorStackTrace:e.stack,url:window.location.toString(),automation:g.Z.is_enabled("automation"),noticed:t}):this.report("jsError",{message:"Unknown error",errorName:"Unknown",url:window.location.toString(),automation:g.Z.is_enabled("automation"),noticed:t}),!1}},(0,s.Z)(f.prototype,"errorHandler",[a.Z],Object.getOwnPropertyDescriptor(f.prototype,"errorHandler"),f.prototype),f);function v(e){g.Z.is_enabled("automation")&&new n,i.Z.getUserGuidP(e).then((e=>{i.Z.setAttribute("guid",e)}),(e=>{})),new m,i.Z.setAttribute("clientId",e.clientId),i.Z.setAttribute("sessionGuid",i.Z.sessionGuid),i.Z.setAttribute("environment",e.environment)}},375029:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=new class{constructor(){this.token=!1,this.environment="prod",this.clientId="PhotoSDK3rdParty1",this.ozHost="https://photos.adobe.io"}}},546156:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(375029),n=r(369628);const o=new class{set session(e){i.Z.token=e.accessToken,i.Z.clientId=e.apiKey,i.Z.ozHost=e.host}getOzUrlP(e,t,r){return this.requestOzUrlP("GET",e,t,void 0,r)}requestOzUrlP(e,t,r,o,s){var a=new n.Z,l=new XMLHttpRequest;if(/^http/.test(t)||(i.Z.ozHost||console.error("Please initialize OzProvider with an ozHost"),t=`${i.Z.ozHost}${t}`),l.open(e,t,!0),l.setRequestHeader("x-api-key",i.Z.clientId),l.setRequestHeader("x-creativesdk-versions","CreativeSDK/0.1.<development>"),l.setRequestHeader("Authorization",`Bearer ${i.Z.token}`),o)for(const[e,t]of Object.entries(o))l.setRequestHeader(e,t);return r&&(l.responseType=r),l.onload=()=>{if(200<=l.status&&l.status<300){var e={response:l.response,contentType:l.getResponseHeader("content-type"),type:l.responseType};if("application/json"===e.contentType||"application/json;charset=utf-8"===e.contentType)try{e.responseObject=JSON.parse(this._trimWhileExpression(l.responseText))}catch(e){return console.log("Failed JSON Parse"),console.log("URL",t),console.log("Response",l.responseText),void a.reject("Failed JSON Parse")}""!==l.responseType&&"text"!==l.responseType||(e.responseText=l.responseText),a.resolve(e)}else a.reject(l.status)},s&&s.then((()=>{l.abort(),a.reject("aborted")})),l.onerror=()=>{var e=`XHR call to Oz failed with status ${l.status}`;a.reject(e),console.error(e)},l.send(),a.promise}_trimWhileExpression(e){return e.replace(/^while\s*\(\s*1\s*\)\s*{\s*}\s*/,"")}}},878950:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(555399),n=r(747652),o=r(200202),s=r(943156),a=r(125979),l=r(637598),u=r(196731);class c{constructor(){this.readyJP=new Promise(((e,t)=>{this._readyResolve=e,this._readyReject=t})),this._init()}get status(){if(u.Z.is_enabled("debug_account_trial_expired"))return s.Z.FREEMIUM;if(u.Z.is_enabled("debug_account_sub_expired"))return s.Z.EXPIRED;if(u.Z.is_enabled("debug_just_access_platform"))return this._apStatus;if([s.Z.BLOCKED,s.Z.SUBSCRIBER].includes(this._apStatus))return this._apStatus;{const e=i.Z.account;return null!=e?e.isTrialExpired()?s.Z.FREEMIUM:e.isSubscriptionExpired()?s.Z.EXPIRED:"trial"===e.getStatus()?s.Z.TRIAL:"subscriber"===e.getStatus()?s.Z.SUBSCRIBER:"created"===e.getStatus()?s.Z.FREEMIUM:s.Z.UNKNOWN:s.Z.UNKNOWN}}get haveCatalogAccess(){return[s.Z.TRIAL,s.Z.SUBSCRIBER].includes(this.status)}async _init(){const e=o.Z.signedIn;try{await Promise.all([o.Z.readyJP,this._fetchProfileStatusWithTimeout()]),o.Z.signedIn&&!e&&await this._fetchProfileStatusWithTimeout(),null==this.status&&o.Z.signedIn?this._readyReject():this._readyResolve()}catch(e){this._readyReject(),console.error("Access Platform initialization failed:",e)}}async _fetchProfileStatusWithTimeout(){if(u.Z.is_enabled("debug_just_access_platform"))return this._fetchProfileStatus();await new Promise(((e,t)=>{let r=!1;const i=u.Z.is_enabled("debug_access_platform_timeout")?0:3e3,n=setTimeout((()=>{u.Z.is_enabled("debug")&&console.log("Access Platorm init timeout -- falling back to Oz"),l.Z.report("accessPlatformTimeoutFailure"),r=!0,e()}),i);this._fetchProfileStatus().then((()=>{r||(clearTimeout(n),e())}),(()=>{r||(clearTimeout(n),e())}))}))}async _fetchProfileStatus(){if(this._apStatus=s.Z.UNKNOWN,o.Z.signedIn)try{const t=a.Z.isProd?"production":"stage",{host:r}=n.environments[t],l=await fetch(`https://${r}/web/access_profile/v2`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"LightroomMobileWeb1",Authorization:`Bearer ${o.Z.getToken()}`},body:JSON.stringify({appDetails:{appId:"LightroomWebApp1"}})});if(200===l.status){const t=await l.json();switch(t.profileStatus){case"PROFILE_AVAILABLE":this._apStatus=s.Z.SUBSCRIBER;break;case"PROFILE_UNAVAILABLE":this._apStatus=s.Z.FREEMIUM;break;case"PROFILE_EXPIRED":this._apStatus=s.Z.EXPIRED;break;case"PROFILE_DENIED":this._apStatus=s.Z.BLOCKED;break;default:this._apStatus=s.Z.UNKNOWN}var e;u.Z.is_enabled("debug_access_platform_blocked")&&(this._apStatus=s.Z.BLOCKED),u.Z.is_enabled("debug")&&console.log(`Access Platform Status: profileStatus: ${t.profileStatus} ozStatus: ${null===(e=i.Z.account)||void 0===e?void 0:e.getStatus()} webStatus: ${this.status}`)}else this._apStatus=s.Z.UNKNOWN}catch(e){console.error("Access Platform initialization failed:",e),l.Z.report("accessPlatformInitFailure"),this._apStatus=s.Z.UNKNOWN}}}c.readyJP=void 0,c._apStatus=s.Z.UNKNOWN;const d=new c},943156:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i={SUBSCRIBER:"subscriber",TRIAL:"trial",TRIAL_EXPIRED:"trial_expired",EXPIRED:"expired",FREEMIUM:"freemium",BLOCKED:"blocked",UNKNOWN:"unknown"}},200202:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});class i{constructor(){i.readyJP=new Promise((e=>{this._readyResolve=e}))}setGetTokenMethod(e){this.getTokenMethod=e}setAuthReady(){this.isReady=!0,this._readyResolve()}getToken(){if(null!=this.getTokenMethod)return this.getTokenMethod()}get readyJP(){return i.readyJP}get signedIn(){return null!=this.getToken()}}i.readyJP=void 0,i.isReady=!1;const n=new i},196731:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i,n,o=r(301254),s=r(590447),a=r(741712),l=r(522810),u=r(330918),c=r.n(u);const d=new(i=class{constructor(){(0,o.Z)(this,"features",n,this);const{features:e}=this;for(const t of c())e.add(t);{var t,r;const e=null!==(t=window.MidwayFeatures)&&void 0!==t?t:null===(r=window.PageResources)||void 0===r?void 0:r.features.enabled_features;if(e)for(const[t,r]of Object.entries(e))this._override(t,r)}}is_enabled(e){return this.features.has(e)}all_enabled(){return Array.from(this.features)}prerelease_enabled(){var e,t;return!0===(null===(e=window)||void 0===e||null===(t=e.PageResources)||void 0===t?void 0:t.features.prerelease)}prerelease_features(){var e,t;return null===(e=window)||void 0===e||null===(t=e.PageResources)||void 0===t?void 0:t.features.prerelease_hash}_override(e,t){"string"!=typeof e||e.length<1||(t?this.features.add(e):this.features.delete(e))}},n=(0,s.Z)(i.prototype,"features",[a.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l.Z}}),i);window.Feature=d;const h=d},242898:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g}),r(936963);var i=r(327682),n=r(772280),o=r(369628),s=r(196731),a=r(637598),l=r(882660),u=r(188728);const c=e=>{if(e)return(e instanceof URL?e:new URL(e,window.location.href)).toString()};var d=r(200202),h=r(595734).default;const p=new n.Z;class f{static get cookieOptions(){return{path:"/",secure:!0,domain:window.location.hostname.replace(/^f\d+\./,"")}}static setSignedIn(e,t){p.set("lrw_token",e,{expires:t,...this.cookieOptions})}static setSignedOut(){p.remove("lrw_token",this.cookieOptions)}constructor(){if(this.callbacks={},h.sdk||h.embed)f.readyJP=Promise.resolve(),this.readyOrRenderTimeoutDeferred=new o.Z,this.readyOrRenderTimeoutDeferred.resolve();else{this.readyOrRenderTimeoutDeferred=new o.Z,this.renderTimeout=!1,setTimeout((()=>{d.Z.isReady||(this.renderTimeout=!0,this.readyOrRenderTimeoutDeferred.resolve())}),2e3);const{hostname:e}=window.location,t=document.documentElement.lang.replace("-","_"),{hostnames:r,scope:n}=l,{client_id:a,env:u}=r[e]||r.default,c={client_id:a,locale:t,scope:n,autoValidateToken:!0===window.imsForceValidateToken,environment:u};d.Z.setGetTokenMethod((()=>this.getToken())),f.readyJP=new Promise(((e,t)=>{const r={...c,onReady:()=>{if(n.isSignedInUser()){const{token:e,expire:t}=n.getAccessToken();if(f.setSignedIn(e,t),!this.isSignedIn()&&"/cookies"!==window.location.pathname)return void(window.location.href="/cookies");this.checkEduPrivacySettings()}else f.setSignedOut();s.Z.is_enabled("debug_delay_ims_ready")?setTimeout((()=>e(n)),5e3):e(n)},onError:(e,r)=>{console.error("login status error:",e,r),f.setSignedOut(),t()}},n=new i.AdobeIMS(r);this.adobeid=r,this.adobeIMS=n,n.initialize()})),f.readyJP.then((()=>{this.renderTimeout||this.readyOrRenderTimeoutDeferred.resolve(),d.Z.setAuthReady()})).catch((()=>{this.renderTimeout||this.readyOrRenderTimeoutDeferred.reject()}))}}async checkEduPrivacySettings(){const e=(await this.getProfileJP()).tags;null!=e&&(e.includes("edu")||e.includes("edu_k12")||e.includes("edu_hed"))&&u.Z.updateSettingsForEduAccount()}get readyJP(){return f.readyJP}get readyOrRenderTimeoutJP(){return this.readyOrRenderTimeoutDeferred.promise}set locale(e){var t;this.adobeid?this.adobeid.locale=e.replace("-","_"):null!==(t=window)&&void 0!==t&&t.adobeid&&(window.adobeid.locale=e.replace("-","_"))}on(e,t){var r,i;null!==(i=(r=this.callbacks)[e])&&void 0!==i||(r[e]=[]),this.callbacks[e].push(t)}isSignedIn(){return null!=this.getToken()}getSigninRedirectUrl(e){const t=c(e),{hostname:r,href:i}=window.location;return`https://${r}/signin?redirect=${encodeURIComponent(null!=t?t:i)}`}signIn(e){a.Z.flush(),this.adobeIMS.signIn({redirect_uri:this.getSigninRedirectUrl(e)})}signOut(e){var t;this.signingOut||(a.Z.flush(),this.signingOut=!0,f.setSignedOut(),null===(t=this.callbacks.signOut)||void 0===t||t.forEach((e=>e())),e=c(e),this.adobeIMS.signOut({redirect_uri:e}))}signUp(e){a.Z.flush(),null==e?this.adobeIMS.signUp():(e=c(e),this.adobeIMS.signUp({redirect_uri:this.getSigninRedirectUrl(e),el:!0}))}socialSignIn(e,t){a.Z.flush(),null==t?this.adobeIMS.signInWithSocialProvider(e):(t=c(t),this.adobeIMS.signInWithSocialProvider(e,{redirect_uri:this.getSigninRedirectUrl(t)}))}getToken(){return p.get("lrw_token")}async getTokenJP(){if(await this.readyJP,this.adobeIMS.isSignedInUser())return this.getToken();throw new Error("Cannot get token for unauthenticated user")}async getProfileJP(){if(await this.readyJP,!this.adobeIMS.isSignedInUser())throw new Error("Cannot get profile for unauthenticated user");try{return await this.adobeIMS.getProfile()}catch(e){throw console.error("getProfile error",e),e}}}f.readyJP=void 0;const g=new f},637598:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var i=r(908611),n=r(781255),o=r(772280),s=r(808795),a=r.n(s),l=r(555399),u=r(435007),c=r(196731),d=r(715560),h=r(760298),p=r(690221),f=r(614147),g=r(403631),m=r(502361),v=r(928160),y=r(590200),b=r(343746),_=r(367112),w=r(162530),P=r(200202),A=r(188728),S=r(595734).default;const x=(0,p.Z)("metrics_track:info"),C=(0,p.Z)("metrics_report:info"),O=(0,p.Z)("metrics_verbose:info"),k=new o.Z;class E extends n.Z{constructor(){var e;super(),S.sdk?this.disabled=!0:(this.disabled=!1,this.setPage(null!==(e=window.metricsPageName)&&void 0!==e?e:"unknown"),this.setViewChangeSource("pageLoad"),this.initPromise=this._initializeJP().then((()=>this.initPromise=null)).catch((e=>{c.Z.is_enabled("debug")&&console.log("Metrics initialization failed. Error:",e)})),this.reportPageLoad(),this.watch((()=>d.Z.locale),(e=>{null!=e&&this._updateLocale()})))}get ingestPage(){return u.pageNames[this.page]}setPage(e){null!=u.pageNames[e]?(this.page=e,this.wildcardPath||(this.wildcardPath="/")):console.error("Invalid page name key",e)}spaPageChanged(e){this.ingestPage!==u.pageNames[e]&&(this.setPage(e),this.reportPageLoad(!0))}async _initializeJP(){await Promise.all([new Promise((e=>b.Z.complete.push(e))),d.Z.readyJP,P.Z.readyJP,w.Z.readyJP,A.Z.consentedJP]),await this._initializeIngestJP();try{this._debuglogMetricStatus()}catch{}}_updateLocale(){var e,t;this._canTrackIngest()&&(this._ingestDefaultPayload["event.language"]=d.Z.getLocaleWithUnderscore()),this._canReportAdobe()&&window.digitalData._set("digitalData.page.pageInfo.language",null!==(e=null===(t=d.Z.locale)||void 0===t?void 0:t.toLowerCase())&&void 0!==e?e:"us")}async _getImsUtilsJP(){const{default:e}=await new i.Z(((e,t)=>Promise.all([r.e(7682),r.e(3763)]).then(r.bind(r,242898)).then(e,t)));return e}async _initializeIngestJP(){if(this.disabled)return;const e={async getAccessToken(e){let t;try{await P.Z.readyJP,t=P.Z.getToken()}catch{}e(null,t)},getAgent(e,t){t(null,{keepalive:!0})}};this._debugLog&&(e.log=e=>O(e));const t={ENVIRONMENT:(()=>{switch(window.location.hostname){case"lightroom.adobe.com":return"prod";case"stage.adobelr.com":return"stage";default:return"dev"}})(),ALLOW_NO_TOKEN:!0,ANALYTICS_MAX_QUEUED_EVENTS:100,ANALYTICS_API_KEY:"LightroomMobileWeb1",ANALYTICS_X_PRODUCT:`${window.location.hostname}/1.0.0`,ANALYTICS_PROJECT:"lr-web-service"};this._ingest=new(a())(e,t),this._ingest.enable(!0),this._ingestDefaultPayload={"event.language":d.Z.getLocaleWithUnderscore(),"event.session_guid":"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),"event.offline":!1,"event.user_agent":navigator.userAgent,"event.category":"WEB","event.referrer":document.referrer,"source.name":"Lightroom","source.platform":"Web","source.device":v.Z.mobile?"mobile":"desktop","source.version":"1.0.0"};const{account:r}=l.Z;null!=r&&(this._ingestDefaultPayload["event.user_guid"]=r.getWCDGuid());const i=await this._getImsUtilsJP(),{adobeid:n}=i;let o;if(null!=(null==n?void 0:n.client_id)&&(this._ingestDefaultPayload["source.client_id"]=n.client_id),!S.sdk)try{o=await i.getProfileJP()}catch{}if(null!=o){var s;const e=null===(s=o.serviceAccounts)||void 0===s?void 0:s[0];null!=e&&(this._ingestDefaultPayload["user.service_code"]=e.serviceCode)}this._ingestDefaultPayload["user.service_level"]=r.getStatus(),await Promise.all([w.Z.readyJP,_.Z.readyJP]),null!=_.Z.code&&(this._ingestDefaultPayload["custom.country_code"]=_.Z.code),null!=k.get("lrig")&&(this._ingestDefaultPayload["event.context_guid"]="internal");const u=await w.Z.loadVisitorGuid();if(null!=u&&(this._ingestDefaultPayload["event.visitor_guid"]=u),c.Z.is_enabled("furlong")&&(await g.Z.readyJP,g.Z.active?(this._ingestDefaultPayload["custom.plg_code"]="PLG P0",null==r||r.settings.setAccountSawPLG_P0_JP()):g.Z.metricsActive&&null!=r&&r.isSubscriber()&&(r.settings.getAccountSawPLG_P0()?this._ingestDefaultPayload["custom.plg_code"]="PLG P0_Converted":r.subscriptionStartDate()>g.Z.TEST_LAUNCH_DATE?this._ingestDefaultPayload["custom.plg_code"]="PLG P0_NewSubscriber":this._ingestDefaultPayload["custom.plg_code"]="PLG P0_PrevSubscriber")),c.Z.is_enabled("simplified_hero_abc_test")&&(await m.Z.readyJP,m.Z.active&&(this._ingestDefaultPayload["exp.campaign_id"]="LRW007",this._ingestDefaultPayload["exp.treatment_id"]=m.Z.variant)),c.Z.is_enabled("auth_home_ab_test")&&(await f.Z.readyJP,f.Z.active&&(this._ingestDefaultPayload["exp.campaign_id"]="LRW008",this._ingestDefaultPayload["exp.treatment_id"]=f.Z.variant)),this._debugLog){O("Ingest common variables:");for(const e in this._ingestDefaultPayload){const t=this._ingestDefaultPayload[e];O(`\t${e}: ${t}`)}}}setAdobePageVariables(e){this.pageVariables=e}setNewNavigationContext(e){this.navView=e,this.contextSequence=1}setViewChangeSource(e){this.viewChangeSource=e}reportViewChange(e,t,r){this.view=e,this.wildcardPath=t,this._reportAdobeViewChange(this.view),this._reportNRViewChange(this.view,this.wildcardPath,r)}reportWithView(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._report(t,e,r)}report(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._report(e,this.view,t)}track(e,t,r){let i,n;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];if(1===s.length){const e=s[0];"string"==typeof e||e instanceof String?i=e:n=e}else s.length>1&&([i,n]=s);this._track(e,t,r,i,n)}_debuglogMetricStatus(){c.Z.is_enabled("debug")&&(null!=this.debugLogTimeout&&clearTimeout(this.debugLogTimeout),this.debugLogTimeout=setTimeout((()=>{console.group("Metrics State"),console.log("Adobe metrics (Launch) enabled : ",this._canReportAdobe()),console.log("NewRelic metrics enabled: ",this._canReportNewrelic()),console.log("Ingest metrics enabled: ",null!=this._ingest),console.groupEnd(),this.debugLogTimeout=null}),500))}reportAdobeOnly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._report(e,this.view,t,"adobe")}reportNROnly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._report(e,this.view,t,"newrelic")}reportPageLoad(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{const{page:t,ingestPage:r}=this;if(null!=t){"Landing"===r?this.track(r,"Default","page","render"):this.track("Default","Page",r,"render");const i=e;this._reportAdobeViewChange(`${t}Load`,i),this.flush()}else c.Z.is_enabled("debug")&&console.error("No page name on page load.")}catch(e){console.error(`Error: ${e}`)}}reportFailure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.failure="true",this._report(e,this.view,t)}reportClickWithView(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.reportWithView(e,t,r)}get _debugLog(){return!this.disabled&&(c.Z.is_enabled("debug_log_metrics_track")||c.Z.is_enabled("debug_log_metrics_report")||c.Z.is_enabled("debug_log_metrics_verbose"))}async _report(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{if(c.Z.is_enabled("automation")&&(r.automation=!0),this._debugLog){if(this.initPromise)try{await this.initPromise}catch{return}const n=null!=t?` view[${t}]`:"";let o;o="adobe"===i?"Adobe":"newrelic"===i?"NewRelic":"",C(`${o}: [${e}]${n} path[${this.wildcardPath}]`,r);for(const e in r){const t=r[e];O(`\t\t${e}: ${t}`)}}null!=i&&"adobe"!==i||this._reportAdobe(e,t,r),null!=i&&"newrelic"!==i||this._reportNR(e,t,r);const n={};for(const e in r){const t=r[e];"automation"!==e&&(n[`lrw.${e}`]=t)}null!=i&&"adobe"!==i||this._track("Legacy","Metric",e,"click",n,"ingest")}catch(e){return console.log(`Error: ${e}`)}}async _reportNR(e,t,r){var i;if(!this._canReportNewrelic())return;const n={page:this.page};if(this.initPromise)try{await this.initPromise}catch{return}null!=t&&(n.view=t);for(const e in r){const t=r[e];n[e]=t}n.visitor_guid=null===(i=window._satellite)||void 0===i?void 0:i.getVisitorId().getMarketingCloudVisitorID(),window.newrelic.addPageAction(e,n)}async _reportNRViewChange(e,t,r){if(this.initPromise)try{await this.initPromise}catch{return}const i=`${window.location.host}${t}`,{newrelic:n}=window,o=null==n?void 0:n.interaction();if(this._debugLog){var s;const t=[];for(const e in r){const i=r[e];t.push(`query-${e}=${i}`)}null==this.viewChangeSource&&console.warn("No view change source"),C(`NewRelic View: view[${e}], interaction[${i}], changeSource[${null!==(s=this.viewChangeSource)&&void 0!==s?s:""}] vars[${t.join("&")}]`)}if(this._canReportNewrelic())if(null!=o){o.setName(i),o.setAttribute("view",e),null!=this.viewChangeSource&&(o.setAttribute("view-change-source",this.viewChangeSource),this.viewChangeSource=null);for(const e in r){const t=r[e];o.setAttribute(`query-${e}`,t)}o.save()}else this.viewChangeSource=null}_canReport(){return!this.disabled&&!0===A.Z.consented}_canReportAdobe(){return this._canReport()&&null!=window.digitalData&&null!=window._satellite}_canReportNewrelic(){return this._canReport()&&null!=window.newrelic}_canTrackIngest(){return this._canReport()&&null!=this._ingest}_initAdobeLaunchGlobals(){var e,t;this.adobeLaunchGlobalsInitialized||(window.digitalData._set("digitalData.page.pageInfo.siteSection","lightroom.adobe.com"),window.digitalData._set("digitalData.page.pageInfo.language",null!==(e=null===(t=d.Z.locale)||void 0===t?void 0:t.toLowerCase())&&void 0!==e?e:"us"),window.digitalData._set("digitalData.page.pageInfo.legacyMarketSegment","com"),window.digitalData._set("digitalData.lightroom.test","lr_no_test"),window.digitalData._set("digitalData.page.pageInfo.pageName",this.page),window.digitalData._set("digitalData.primaryProduct.productInfo.productName","Lightroom"),this.adobeLaunchGlobalsInitialized=!0)}_debugGetDigitalDataPageInfo(){const e=Object.assign({},window.digitalData.page.pageInfo);return delete e.location,delete e.queryParameters,e}async _reportAdobe(e,t,r){if(this._canReportAdobe()){if(this.initPromise)try{await this.initPromise}catch{return}if(this._initAdobeLaunchGlobals(),window.digitalData._set("digitalData.primaryEvent.eventInfo.eventName",`${e}`),window.digitalData._set("digitalData.page.attributes",r),window._satellite.track("event",{digitalData:window.digitalData._snapshot()}),this._debugLog){const t=window.digitalData;O(`Report Launch event [${e}]`);const r=Object.assign({eventName:t.primaryEvent.eventInfo.eventName},this._debugGetDigitalDataPageInfo(),t.page.attributes);O("\t\tDigitalData",window.digitalData);for(const e in r){const t=r[e];O(`\t\t${e}: ${JSON.stringify(t)}`)}}window.digitalData._delete("digitalData.primaryEvent.eventInfo.eventName"),window.digitalData._delete("digitalData.page.attributes")}}async _reportAdobeViewChange(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._canReportAdobe())return;const r=this.page;if(this.initPromise)try{await this.initPromise}catch{return}this._initAdobeLaunchGlobals(),window.digitalData._set("digitalData.page.pageInfo.pageName",r),window.digitalData._set("digitalData.page.pageInfo.template",e);const i=t?"state":"event";window._satellite.track(i,{digitalData:window.digitalData._snapshot()}),this._debugLog&&(C(`Adobe Launch View: view[${e}] hierarchy[${this.wildcardPath}] asPageLoad: ${t}`),this._canReportAdobe()||C("\t\tNOT ACTUALLY SENDING"),O("\t\tDigitalData",window.digitalData))}async _track(e,t,r,i,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{var s;c.Z.is_enabled("automation")&&(null!==(s=n)&&void 0!==s||(n={}),n.automation=!0,h.q.metricTriggered(`${e}:${t}:${r}`));let a=`${null!=e?e:""}:${null!=t?t:""}:${null!=r?r:""}`;if(null!=i&&(a+=`:${i}`),this._debugLog){if(this.initPromise)try{await this.initPromise}catch{return}let e;e="adobe"===o?"Adobe":"newrelic"===o?"NewRelic":"ingest"===o?"Ingest":"",x(`${e}: ${a} path[${this.wildcardPath}]`),this._canTrackIngest()||x("\t\tNOT ACTUALLY TRACKING");for(const e in n){const t=n[e];x(`\t\t${e}: ${t}`)}}null!=o&&"adobe"!==o||this._reportAdobe(a,this.view,n),null!=o&&"newrelic"!==o||this._reportNR(a,this.view,n),null!=o&&"ingest"!==o||this._trackIngest(e,t,r,i,n)}catch(e){return console.error(`Error: ${e}`)}}async _trackIngest(e,t,r,i,n){if(this.initPromise)try{await this.initPromise}catch{return}if(!this._canTrackIngest())return;let o=y.Z.extend(!0,{},this._ingestDefaultPayload);if(o=y.Z.extend(o,n),null!=r&&(o["event.subtype"]=r.toLowerCase().replace(/[^a-z\-]/,"")),null!=t&&(o["event.subcategory"]=t),null!=i&&(o["event.type"]=i.toLowerCase().replace(/[^a-z\-]/,"")),null!=e&&(o["event.workflow"]=e),c.Z.is_enabled("debug")&&"Legacy"!==e){let e,t;null!=i&&(e=Boolean(i.match(/[^a-z\-]/))),null!=r&&(t=Boolean(r.match(/[^a-z\-]/))),(e||t)&&console.warn("invalid metric format",{type:i,action:r})}this._ingestDefaultPayload["event.contextSequence"]=this.contextSequence++,this._ingest.postEvent(o)}flush(){this._flush()}async _flush(){var e;if(this.initPromise)try{await this.initPromise}catch{return}null===(e=this._ingest)||void 0===e||e.flush(!0)}}const I=new E},188728:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(196731),n=r(343746);const o=new(r(772280).Z);class s{get consented(){return s.consented}get consentedJP(){return s.consentedJP}async updateSettingsForEduAccount(){if(i.Z.is_enabled("edu_cookies")){try{await s.consentedJP}catch{if(null==window.adobePrivacy)return}if(window.adobePrivacy.activeCookieGroups().includes("C0004")&&null!=document.cookie){const e="OptanonConsent",t=e=>document.cookie.split(`${e}=`)[1].split(";")[0];try{const r=t(e);if(r&&(-1!==r.indexOf("C0004:1")||-1!==r.indexOf("C0004%3A1"))){const t=r.replace("C0004:1","C0004:0").replace("C0004%3A1","C0004%3A0"),i=new Date((new Date).setFullYear((new Date).getFullYear()+1)),n=window.location.hostname,o=n.endsWith(".adobe.com")?".adobe.com":n,s="; expires="+i.toUTCString(),a=`${e}=${t}${s}${`; domain= ${o}`}; path=/; SameSite=Lax`;document.cookie=a}}catch(e){console.error("Error updating cookie",e)}}if(await window.adobePrivacy.loadOneTrust(),null!=window.Optanon){const e=window.Optanon.GetDomainData().Groups.find((e=>"C0004"===e.OptanonGroupId)).Cookies.map((e=>e.Name)).sort();for(const t of e)i.Z.is_enabled("debug")&&console.log(`deleting marketing cookie ${t}`),o.remove(t)}}}constructor(){var e;null!==(e=window.adobePrivacy)&&void 0!==e&&e.hasUserProvidedConsent()?(s.consented=!0,s.consentedJP=Promise.resolve()):s.consentedJP=new Promise(((e,t)=>{const r=()=>{s.consented=!0,e(),o()},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"privacy not consented";s.consented=!1,t(e),o()},o=()=>{window.removeEventListener("adobePrivacy:PrivacyConsent",r),window.removeEventListener("adobePrivacy:PrivacyReject",i),window.removeEventListener("adobePrivacy:PrivacyCustom",i)};window.addEventListener("adobePrivacy:PrivacyConsent",r),window.addEventListener("adobePrivacy:PrivacyReject",i),window.addEventListener("adobePrivacy:PrivacyCustom",i),n.Z.interactive.push((()=>{null==window.adobePrivacy&&i("privacy script did not load")}))})),i.Z.is_enabled("debug")&&s.consentedJP.finally((()=>{null==window.adobePrivacy?console.log("Privacy Status: script not loaded (not on VPN?)"):s.consented?console.log("Privacy Status: consented"):console.log("Privacy Status: rejected")})).catch((()=>{}))}}s.consented=void 0,s.consentedJP=void 0;const a=new s},928160:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=new class{constructor(){this.userAgent=null}get _userAgent(){return this.userAgent?this.userAgent:window.navigator.userAgent}_version(e){const t=this._userAgent.match(e);if(t&&t.length>1){const e=parseInt(t[1],10);return t.length>2?{major:e,minor:parseInt(t[2],10)}:e}}get iOS(){return this._version(/(?:CPU iPhone|iPod|iPad; CPU) OS ([0-9]+)_([0-9]+)/)}get edge(){return this._version(/Edge\/([\d]+)\./)}get android(){return/Android|Silk/.test(this._userAgent)}get silk(){return/Silk/.test(this._userAgent)}get ie(){return/MSIE|Trident/.test(this._userAgent)}get mobile(){return/Mobile|Android/i.test(this._userAgent)}get win(){return/Windows/.test(this._userAgent)}get win32(){return this.win&&!/Win64|WOW64/.test(this._userAgent)}get mac(){return!this.silk&&/Macintosh/.test(this._userAgent)}get chrome(){return this._version(/Chrome\/([\d]+)/i)}get safari(){if(/Safari/i.test(this._userAgent)&&!/(?:CriOS|Silk|Android)/i.test(this._userAgent))return this._version(/Version\/([\d]+)/)}get firefox(){return this._version(/Firefox\/([\d]+)/)}}},710799:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var i,n,o,s=r(301254),a=r(590447),l=r(175476),u=r(741712),c=r(369628),d=r(781255),h=r(956508);function p(e,t,r,i){if(0===t.length)return e;var n=t[0],o=t.slice(1),s=`{${n}}`,a=e.split(s).map((e=>p(e,o,r,i))),l=[].concat(a.shift());if(i)var u=r[n];else(u={})[n]=r[n];for(var c of a)l=l.concat(u,c);return i?l.join(""):l}let f=(i=class extends d.Z{constructor(){super(),(0,s.Z)(this,"locale",n,this),(0,s.Z)(this,"translations",o,this),this._readyDeferred=new c.Z,this._isReady=!1,this.watch((()=>this.locale),(e=>{null==e||this._isReady||(this._isReady=!0,this._readyDeferred.resolve())}))}get readyJP(){return this._readyDeferred.promise}get language_display_name(){return this.locale_hash[this.locale]}get language_code(){return this.locale.split("-")[0]}translate(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var i=e.indexOf("="),n=e.slice(0,i),o=e.slice(i+1),s=this.translations?this.translations[n]:void 0;return s=s||o,n.match(/^\$\$\$/)||console.log(`ZString should start with '$$$': ${e}`),t&&(s=p(s,Object.getOwnPropertyNames(t),t,r)),s}addTextTranslations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("en-US"===this.locale)return;const{translations:r}=this,i="$".repeat(3)+t;for(let t of e.split("\n")){const{length:e}=t,n='"'===t.charAt(0)?1:0,o='"'===t.charAt(e-1)?e-1:e;if(t=t.substring(n,o),t.startsWith(i)){const[e,i]=t.split("=");r[e]=i.replace(/\\["']/g,(e=>e[1])).replace(/\\n/g,(e=>"\n"))}}}getLocaleWithUnderscore(){this.locale.replace("-","_")}humanFileSizeValue(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=1024;let i=0;if(arguments.length>1&&void 0!==arguments[1]&&!arguments[1])for(;Math.abs(e)>=r&&i<t;)e/=r,++i;else i=3,e/=Math.pow(r,i);return[e,i]}humanFileSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[this.translate("$$$/js/zstring/common/bytes=B"),this.translate("$$$/js/zstring/common/kilobytes=KB"),this.translate("$$$/js/zstring/common/megabytes=MB"),this.translate("$$$/js/zstring/common/gigabytes=GB"),this.translate("$$$/js/zstring/common/terabytes=TB")],[n,o]=this.humanFileSizeValue(e,r,i.length);t=o<1?0:t;const s=this.translate("$$$/js/zstring/common/decimal_separator=.");return this.translate("$$$/js/zstring/common/storage_format={number} {unit}",{number:n.toFixed(t).replace(".",s),unit:i[o]})}humanCountValue(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=1e3;let i;for(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?i=0:(i=2,e/=Math.pow(r,i));Math.abs(e)>=r&&i<t;)e/=r,++i;return[e,i]}humanCount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=["",this.translate("$$$/js/zstring/common/thousand=K"),this.translate("$$$/js/zstring/common/million=M"),this.translate("$$$/js/zstring/common/billion=B"),this.translate("$$$/js/zstring/common/trillion=T")],[n,o]=this.humanCountValue(e,r,i.length);o<1&&(t=0);const s=this.translate("$$$/js/zstring/common/decimal_separator=."),a=n.toFixed(t).replace(/\.0+$/,"").replace(".",s);return this.translate("$$$/js/zstring/compact_storage_format={count}{units}",{count:a,units:i[o]})}humanDurationValue(e,t){const r=[1e3,60,60,24];let i=0;for(;Math.abs(e)>=r[0]&&i<t;)e/=r[0],r.shift(),++i;return[e,i]}humanDuration(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=this.translate("$$$/js/zstring/duration={duration} {unit_string}"),o=[this.translate("$$$/js/zstring/common/milliseconds=ms"),this.translate("$$$/js/zstring/common/seconds=seconds"),this.translate("$$$/js/zstring/common/minutes=minutes"),this.translate("$$$/js/zstring/common/hours=hours"),this.translate("$$$/js/zstring/common/days=days")],s=[this.translate("$$$/js/zstring/common/milliseconds=ms"),this.translate("$$$/js/zstring/common/second=second"),this.translate("$$$/js/zstring/common/minute=minute"),this.translate("$$$/js/zstring/common/hour=hour"),this.translate("$$$/js/zstring/common/day=day")],a=[this.translate("$$$/js/zstring/common/milliseconds_short=ms"),this.translate("$$$/js/zstring/common/seconds_short=sec"),this.translate("$$$/js/zstring/common/minutes_short=min"),this.translate("$$$/js/zstring/common/hours_short=hr")];let l,u;[l,u]=i?this.humanDurationValue(e,a.length):this.humanDurationValue(e,o.length),l=t>0?Math.ceil(l/t)*t:l;const c=l.toFixed(r);let d;return d=i?a[u]:"1"===c?s[u]:o[u],n.replace("{duration}",c).replace("{unit_string}",d)}humanDimensions(e){const t=e[0],r=e[1];return null!=t&&null!=r?`${Math.round(t)} x ${Math.round(r)}`:""}humanNumber(e){const t=this.translate("$$$/js/zstring/common/decimal_separator=."),r=this.translate("$$$/js/zstring/common/thousand_separator=,");return e.toString().replace(".",t).replace(/\B(?=(\d{3})+(?!\d))/g,r)}ok_string(){return this.translate("$$$/zstring/common/ok=OK")}cancel_string(){return this.translate("$$$/zstring/common/cancel=Cancel")}continue_string(){return this.translate("$$$/zstring/common/continue=Continue")}submit_string(){return this.translate("$$$/zstring/common/submit=Submit")}close_string(){return this.translate("$$$/zstring/common/close=Close")}retry_string(){return this.translate("$$$/zstring/common/retry=Retry")}or_cap_string(){return this.translate("$$$/zstring/common/or_caps=OR")}back_string(){return this.translate("$$$/js/zstring/common/back=Back")}on_string(){return this.translate("$$$/js/zstring/common/on=On")}off_string(){return this.translate("$$$/js/zstring/common/off=Off")}next_string(){return this.translate("$$$/js/zstring/common/next=Next")}try_again_string(){return this.translate("$$$/js/zstring/common/try_again=Try Again")}get_started_string(){return this.translate("$$$/js/zstring/common/get_started=Get Started")}get locale_hash(){const e={};for(const t of h.supported){const r=h.display_names[t];r&&(e[t]=r)}return e}},n=(0,a.Z)(i.prototype,"locale",[u.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,a.Z)(i.prototype,"translations",[u.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.Z)(i.prototype,"locale_hash",[l.Z],Object.getOwnPropertyDescriptor(i.prototype,"locale_hash"),i.prototype),i)},690221:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(116376),n=r(414270),o=r.n(n),s=r(196731);const a=/^debug_log_((?:_(?!_)|[^_])*[^_])(?:__(.*))?/,l=[];for(const e of s.Z.all_enabled()){const t=a.exec(e);if(null!=t){const[,e,r="*"]=t;l.push(`${e}:${r}`)}}const u=l.join(",");o().enable(u),i.Z.enable(u);const c=o()},955528:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(474414);function n(e){return function(t){if(e){Array.isArray(e)||(e=[e]);for(const r of e)(0,i.Z)(t,r)}}}},162530:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(196731),n=r(595734).default;class o{get launchEnvironment(){return"lightroom.adobe.com"===window.location.hostname?"production":"stage"}get readyJP(){return o.readyJP}async loadVisitorGuid(){return null==o.visitorGuidPromise&&(o.visitorGuidPromise=this._loadVisitorGuid()),await o.visitorGuidPromise}async _loadVisitorGuid(){return await this.readyJP,await new Promise((e=>{var t;if(this.visitorGuid=null===(t=window._satellite)||void 0===t?void 0:t.getVisitorId().getMarketingCloudVisitorID((e=>this.visitorGuid=e)),this.visitorGuid)return void e();let r=0;const i=window.setInterval((()=>{var t;const n=null===(t=window.s_adblightroomweb)||void 0===t?void 0:t.marketingCloudVisitorID;r++,(null!=n||r>25)&&(this.visitorGuid=n,clearInterval(i),e())}),200)})),this.visitorGuid}constructor(){if(n.sdk)o.readyJP=Promise.resolve();else{window.marketingtech={adobe:{launch:{property:"global",environment:this.launchEnvironment},target:!0,audienceManager:!1}};const e=async()=>{await Promise.resolve().then(r.t.bind(r,978746,23)),await window.__satelliteLoadedPromise};o.readyJP=e()}i.Z.is_enabled("debug")&&o.readyJP.then((()=>console.log("Adobe Launch Status: initialized")),(e=>console.log("Adobe Launch Status: error initializing",e)))}}o.readyJP=void 0,o.visitorGuidPromise=void 0;const s=new o},614147:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i,n,o,s=r(301254),a=r(590447),l=r(175476),u=r(741712),c=r(781255),d=r(196731),h=r(715560),p=r(878950),f=r(943156),g=r(806190);const m=new(i=class extends c.Z{constructor(){super(),(0,s.Z)(this,"ready",n,this),(0,s.Z)(this,"initialAccountStatus",o,this),d.Z.is_enabled("auth_home_ab_test")?window.requestAnimationFrame((()=>this.initTestEnablement())):this.ready=!0}get variantOverride(){return d.Z.is_enabled("auth_home_test_a_variant")?"A":d.Z.is_enabled("auth_home_test_b_variant")?"B":void 0}async initTestEnablement(){try{await this.readyJP}catch(e){console.error(e)}this.initialAccountStatus=p.Z.status,this.ready=!0}get readyJP(){return Promise.all([p.Z.readyJP,g.Z.readyJP,h.Z.readyJP])}get variant(){var e;return null!==(e=this.variantOverride)&&void 0!==e?e:g.Z.defaultVariant}get active(){return null!=this.variant&&this.initialAccountStatus===f.Z.FREEMIUM}get aGroupActive(){return"A"===this.variant}get bGroupActive(){return"B"===this.variant}},n=(0,a.Z)(i.prototype,"ready",[u.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=(0,a.Z)(i.prototype,"initialAccountStatus",[u.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,a.Z)(i.prototype,"readyJP",[l.Z],Object.getOwnPropertyDescriptor(i.prototype,"readyJP"),i.prototype),i)},403631:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var i,n,o,s,a=r(301254),l=r(590447),u=r(175476),c=r(741712),d=r(715560),h=r(878950),p=r(943156),f=r(200202),g=r(781255),m=r(196731),v=r(806190),y=r(790608);const b=Date.parse("2022-08-02T06:30:00Z"),_=new(i=class extends g.Z{get TEST_LAUNCH_DATE(){return b}get plans_url_ca_hack(){return"https://www.adobe.com/ca/products/photoshop-lightroom/compare-plans.html?promoid=VKW3KGR6&mv=other"}get pricing_url_ca_hack(){return"https://www.adobe.com/ca/creativecloud/photography/compare-plans.html?promoid=XFWLHGM1&mv=other"}get buy_url_ca_hack(){return"https://www.adobe.com/ca/creativecloud/photography/compare-plans.html?promoid=F4KHZRTL&mv=other"}constructor(){super(),(0,a.Z)(this,"ready",n,this),(0,a.Z)(this,"testEnabled",o,this),(0,a.Z)(this,"initialAccountStatus",s,this),m.Z.is_enabled("furlong")&&y.Z.isSupported?window.requestAnimationFrame((()=>this.initTestEnablement())):this.ready=!0}async initTestEnablement(){try{await this.readyJP}catch(e){console.error(e)}this.initialAccountStatus=h.Z.status,this.testEnabled=!0,this.ready=!0}get readyJP(){return m.Z.is_enabled("debug_force_furlong")?h.Z.readyJP:Promise.all([h.Z.readyJP,v.Z.readyJP,d.Z.readyJP])}get active(){return!!this.metricsActive&&(!f.Z.signedIn||this.initialAccountStatus===p.Z.FREEMIUM||this.initialAccountStatus===p.Z.SUBSCRIBER&&m.Z.is_enabled("debug_force_furlong_subscriber"))}get metricsActive(){return!(!this.testEnabled||!m.Z.is_enabled("debug_force_furlong")&&("en-US"!==d.Z.locale&&"en-GB"!==d.Z.locale||null==v.Z.plgVariant))}},n=(0,l.Z)(i.prototype,"ready",[c.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=(0,l.Z)(i.prototype,"testEnabled",[c.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,l.Z)(i.prototype,"initialAccountStatus",[c.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,l.Z)(i.prototype,"readyJP",[u.Z],Object.getOwnPropertyDescriptor(i.prototype,"readyJP"),i.prototype),i)},502361:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i,n,o=r(301254),s=r(590447),a=r(741712),l=r(781255),u=r(196731),c=r(806190);const d=new(i=class extends l.Z{constructor(){super(),(0,o.Z)(this,"ready",n,this),u.Z.is_enabled("simplified_hero_test_a_variant")||u.Z.is_enabled("simplified_hero_test_b_variant")||u.Z.is_enabled("simplified_hero_test_c_variant")?this.ready=!0:u.Z.is_enabled("simplified_hero_abc_test")?c.Z.readyJP.finally((()=>this.ready=!0)):this.ready=!0}get variantOverride(){return u.Z.is_enabled("simplified_hero_test_a_variant")?"A":u.Z.is_enabled("simplified_hero_test_b_variant")?"B":u.Z.is_enabled("simplified_hero_test_c_variant")?"C":void 0}get readyJP(){return c.Z.readyJP}get variant(){var e;return null!==(e=this.variantOverride)&&void 0!==e?e:c.Z.defaultVariant}get active(){return null!=this.variant}get aGroupActive(){return"A"===this.variant}get bGroupActive(){return"B"===this.variant}get cGroupActive(){return"C"===this.variant}},n=(0,s.Z)(i.prototype,"ready",[a.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i)},806190:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i,n,o,s,a,l=r(301254),u=r(590447),c=r(741712),d=(r(470373),r(19067),r(781255)),h=r(196731),p=r(637598),f=r(928160),g=r(162530);const m=new((a=class e extends d.Z{constructor(){super(),(0,l.Z)(this,"debugVariant",n,this),(0,l.Z)(this,"plgVariant",o,this),(0,l.Z)(this,"defaultVariant",s,this),e.readyJP=this._initializeJP()}get readyJP(){return e.readyJP}async _getOfferJP(e){return await new Promise(((t,r)=>{const i=!(!f.Z.iOS&&!f.Z.android);let n=!!h.Z.is_enabled("debug_target_timeout");setTimeout((()=>{n&&!h.Z.is_enabled("debug_target_timeout")||(t(),n=!0,console.error("target initialization timeout error"),p.Z.reportFailure("targetTimeoutFailure"))}),1e4),window.adobe.target.getOffer({mbox:e,params:{mobile:i},success:function(r){var i,o,s;const a=null===(i=r[0])||void 0===i||null===(o=i.content)||void 0===o||null===(s=o.at(0))||void 0===s?void 0:s.variant;h.Z.is_enabled("debug")&&console.log(`Target getOffer ${e} success, variant: ${a}, offer:`,r),n||(t(a),n=!0)},error:function(e,r){console.log("Target getOffer error",e,r),n||(t(),n=!0)}})}))}async _initializeJP(){var e;if(await g.Z.readyJP,null==(null===(e=window.adobe)||void 0===e?void 0:e.target))return;if(h.Z.is_enabled("automation"))return;const t=[];h.Z.is_enabled("debug_target_test")&&t.push(this._getOfferJP("LrDebugMbox").then((e=>this.debugVariant=e))),h.Z.is_enabled("furlong")&&t.push(this._getOfferJP("LrPlgMbox").then((e=>this.plgVariant=e))),h.Z.is_enabled("simplified_hero_abc_test")&&t.push(this._getOfferJP("LrDefaultTestMbox").then((e=>this.defaultVariant=e))),h.Z.is_enabled("auth_home_ab_test")&&t.push(this._getOfferJP("LrAuthHomeMbox").then((e=>this.defaultVariant=e))),await Promise.all(t)}}).readyJP=void 0,i=a,n=(0,u.Z)(i.prototype,"debugVariant",[c.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=(0,u.Z)(i.prototype,"plgVariant",[c.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=(0,u.Z)(i.prototype,"defaultVariant",[c.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i)},790608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i,n=r(590447),o=r(175476),s=r(196731),a=r(928160),l=r(715560),u=r(637598),c=r(86462),d=r(443099);const h=new(i=class{get isSupported(){return!!s.Z.is_enabled("develop_force_enable")||!s.Z.is_enabled("develop_force_disable")&&!a.Z.edge&&!a.Z.mobile&&!a.Z.win32&&null!=window.WebAssembly&&null!=document.createElement("canvas").getContext("webgl")}get version(){return c.Z.VERSION}loadJP(){const e=new Date;if(null!=this.loading)return this.loading;{const{version:t}=this;return u.Z.report("editBridgeInitializing",{version:t}),this.loading=new Promise((async(r,i)=>{if(!this.isSupported)return i();const{ic_web_js:n,app_manifest:o}=c.Z.PATHS,a=await(async(e,t)=>{let r;r=s.Z.is_enabled("develop_force_legacy")?"legacy":(await Promise.all([(0,d.C6)(),(0,d.Wy)()])).every(Boolean)?"modern":"legacy";const i=[];i.push(`self.type = '${r}'`),i.push(`self.origin = '${window.location.origin}'`),null!=t&&i.push(`self.appManifest = '${t}'`),i.push(`importScripts('${e}')`);const n=new Blob([i.join(";")],{type:"text/javascript"}),o=URL.createObjectURL(n);return new Worker(o)})(n,o);let h;try{h=await(p=a,g=new Promise(((e,t)=>{s.Z.is_enabled("force_edit_bridge_failure")&&t();const r={};let i=0;const n=e=>function(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return"function"==typeof s[s.length-1]?r[i]=s.pop():g=new Promise((e=>r[i]=e)),p.postMessage({id:i,method:e,params:s}),i++,null!==(t=g)&&void 0!==t?t:o},o={getFunctions:n()};p.addEventListener("message",(e=>{const{data:t}=e,i=r[t.id];null!=i&&(i.call(o,t.result),delete r[t.id])})),p.addEventListener("error",t),o.getFunctions((t=>{for(let e=0;e<t.length;e++){const r=t[e];o[r]=n(e)}e(o,f)}))})),s.Z.is_enabled("develop_simulate_slow_load")&&(g=g.then((e=>new Promise((t=>setTimeout((()=>t(e,f)),3e4)))))),g)}catch(e){return u.Z.reportFailure("editBridgeFailed",{version:t}),i(e)}var p,f,g;await h.initialize("0".repeat(32),!1),"en-US"!==l.Z.locale&&await h.setLocale(l.Z.locale),u.Z.report("editBridgeInitialized",{version:t,loadTimeMs:new Date-e}),r(this.bridge=h)}))}}},(0,n.Z)(i.prototype,"isSupported",[o.Z],Object.getOwnPropertyDescriptor(i.prototype,"isSupported"),i.prototype),i)},590200:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const i=function(){let e=!1;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if("boolean"==typeof r[0]&&(e=r[0],r.shift()),!e)return Object.assign(...r);const o={},s=e=>{for(const r in e){var t;Object.prototype.hasOwnProperty.call(e,r)&&("[object Object]"===(null===(t=e[r])||void 0===t?void 0:t.toString())?o[r]=i(!0,o[r],e[r]):void 0!==e[r]&&(o[r]=e[r]))}};for(const e of r)s(e);return o},n={extend:i}},367112:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i,n,o,s=r(301254),a=r(590447),l=r(741712),u=r(781255);const c=new((o=class e extends u.Z{constructor(){super(),(0,s.Z)(this,"_code",n,this),this._resolved=!1,e.readyJP=new Promise((e=>{this._readyResolve=e})),setTimeout((()=>{this._resolved||(this._resolved=!0,this._readyResolve())}),5e3)}get code(){return this._code}set code(e){this._code=e,null==e||this._resolved||(this._resolved=!0,this._readyResolve())}}).readyJP=void 0,i=o,n=(0,a.Z)(i.prototype,"_code",[l.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i)},86462:(e,t,r)=>{"use strict";var i,n;r.d(t,{Z:()=>i,R:()=>n}),({DevelopResources:i,PageResources:n}=window)},807664:(e,t,r)=>{"use strict";var i;r.d(t,{Z:()=>n}),i=/\+/g;const n={parsePathFromUrl:function(e){return e.split("#")[0].split("?")[0]},parseQueryFromUrl:function(e){var t;return null==(t=e.split("?")[1])?{}:(t=t.split("#")[0],this.parseQuery(t))},parseQuery:function(e){var t,r,n,o,s,a,l;if(0===(null!=e?e:"").length)return{};for(a={},t=0,r=(s=e.split("&")).length;t<r;t++)if(1===(o=(n=s[t]).split("=")).length)a[n]="";else{if(2!==o.length)continue;l=decodeURIComponent(o[1].replace(i," ")),a[o[0]]=l}return a}}},555399:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(301254),n=r(590447),o=r(741712);r(196731);const s=new(function(){var e,t,r,s,a;let l=(e=class{constructor(){(0,i.Z)(this,"account",t,this),(0,i.Z)(this,"userDefaults",r,this),(0,i.Z)(this,"catalogContext",s,this),(0,i.Z)(this,"spaceContext",a,this),this._hostOverride="https://lightroom.adobe.com",this._callbacks=[],this.defaultPageSize=100,this.haveNginxProxy=!0,this.authErrorCallback=void 0}get hostOverride(){return this._hostConfig}set hostOverride(e){return this._hostConfig=e,this._callbacks.forEach((e=>e(this)))}watch(e){return this._callbacks.push(e),e(this)}},t=(0,n.Z)(e.prototype,"account",[o.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=(0,n.Z)(e.prototype,"userDefaults",[o.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,n.Z)(e.prototype,"catalogContext",[o.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=(0,n.Z)(e.prototype,"spaceContext",[o.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e);return l.prototype.XMP_CAMERA_RAW_MAX_LENGTH=10240,l.prototype.MAX_COMMENT_LENGTH=1023,l}.call(void 0))},125979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=new(function(){class e{get hostName(){return(null!==window?window.location.hostname:void 0)||this.prodHostName}get pathName(){return(null!==window?window.location.pathname:void 0)||""}get isProd(){return this.hostName===this.prodHostName}get isStage(){return!this.isProd}objectToUrlParamString(e){return new URLSearchParams(e).toString()}}return e.prototype.prodHostName="lightroom.adobe.com",e}.call(void 0))},474414:(e,t,r)=>{"use strict";var i;function n(e,t,r){var n,o,s,a,l,u;for(o in s=Object.getOwnPropertyDescriptors(t.prototype),r&&(a=new Set(r)),u=[],s)if(n=s[o],null!=a||"constructor"!==o)if(null==a||a.has(o)){if(null!=e.prototype[o])throw new Error(`Mixin method ${null!=(l=t.prototype.constructor)?l.name:void 0}.${o} hides ${i(e,o)}.${o}`);u.push(Object.defineProperty(e.prototype,o,n))}else u.push(void 0);return u}r.d(t,{Z:()=>n}),r(936963),i=function(e,t){var r;return r=function(e){return e.hasOwnProperty(t)?e.constructor.name:r(Object.getPrototypeOf(e))},r(e.prototype)}},760298:(e,t,r)=>{"use strict";r.d(t,{q:()=>i});var i,n,o,s,a,l,u,c=r(301254),d=r(590447),h=r(741712),p=(r(470373),r(19067),r(781255));r(196731).Z.is_enabled("automation")?(s=function(e,t){var r;return(r=document.createElement("a")).download=t,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},o={},a={},l=class extends p.Z{metricTriggered(e){return null==a[e]&&(a[e]=0),a[e]++}constructor(){super(),(0,c.Z)(this,"forceGridHover",u,this),this.forceGridHover=!1}},u=(0,d.Z)(l.prototype,"forceGridHover",[h.Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=l,window.Automation=i=new i,window.AutomationManager=n={set:function(e,t,r){return o[e]=t,window.Automation[e]=r},remove:function(e){return delete window.Debug[e],delete o[e]}},n.set("scrollGridto","Scroll the current torq grid to (left, top)",(function(e,t){return setTimeout((function(){var r,i,n,o,s;return null!=(null!=(i=window.Automation.controller)&&null!=(n=i.virtualScroll)&&null!=(o=n.scroll)?o.scrollTo:void 0)?window.Automation.controller.virtualScroll.scroll.scrollTo(e,t):null!=(null!=(s=window.Automation.controller.scroll)?s.scrollTo:void 0)&&"function"==typeof(r=window.Automation.controller.scroll).scrollTo?r.scrollTo(e,t):void 0}),300)})),n.set("animateGridto","Animate the current torq grid to (left, top)",(function(e,t){var r,i,n;return null!=(r=window.Automation.controller)&&null!=(i=r.virtualScroll)&&null!=(n=i.scroll)&&"function"==typeof n.animateTo?n.animateTo(e,t):void 0})),n.set("setGridHover","true/false - Force torq grid to hovered state",(function(e){return window.Automation.forceGridHover=e})),n.set("getVisibleGridAssets","idsOnly(=true), includePartiallyVisible(=false) - Get visible grid assets",(function(e,t){var r;return null!=(r=window.Automation.controller)?r.getAssetsInView(e,t):void 0})),n.set("getInviteLinkForEmail","Get the invite link for a share invite on the currently viewed album (email)",(function(e){var t;return null!=(t=window.Automation.controller)?t.automationGetInviteLinkForEmail(e):void 0})),n.set("didMetricTrigger","Check if a metric was triggered. Pass a count if you need to confirm the number of times it fired.",(function(e,t){return null!=a[e]&&(null==t||a[e]===t)})),n.set("clearMetricCache","Clears the cache used to track automation for metrics.",(function(){return a={}})),n.set("downloadRendition","In Loupe view, download the 2048 renditon for the current image",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2048";var t,r,i;return null==(t=window.Automation.asset)?console.error("Automation.downloadRendition() will only work in Loupe view"):(i=t.getRenditionHref("2048"),s(i,r=`image${e}.jpg`),r)})),n.set("getNamedVersionMasks","In Loupe view, get the masks (an object) for a named version at the given index",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t;return null==(t=window.Automation.asset)?console.error("Automation.getNamedVersionMasks() will only work in Loupe view"):t.namedVersions.at(e).getDevelopPixelMasks()})),n.set("deleteAllDiscovers","Delete discovers for the current logged-in author. Will delete all by default, or `numToDelete` if given.",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,r,i;return null==(null!=(i=null!=(t=window.Automation.controller)?t.scope.store:void 0)&&null!=(r=i.author)?r.me:void 0)?console.error("Error accessing store"):await i.author.me.debugDeleteAllDiscovers(e)})),n.set("resetProfileEdits","Reset your author profile in Community.",(async function(){var e,t,r;return null==(null!=(r=null!=(e=window.Automation.controller)?e.scope.store:void 0)&&null!=(t=r.author)?t.me:void 0)?console.error("Error accessing store"):await r.author.me.debugResetAllProfileEdits()})),n.set("help","list available commands",(function(){var e,t,r;for(t in r="",o)e=o[t],r+=`\n${t}:${Array(22-t.length).join(" ")}${e}`;return r}))):(window.Automation=i={},window.AutomationManager=n={set:function(){},remove:function(){}})},343746:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i,n,o=r(590447),s=r(256622),a=r(624338),l=[].indexOf;i=class extends a.Z{constructor(e,t){super(),this.readyState=e,this.eventName=t}register(){var e;return e=document.readyState,l.call(this.readyState,e)>=0?setTimeout(this.run,0):window.addEventListener(this.eventName,this.exec)}exec(){return this.run()}},(0,o.Z)(i.prototype,"exec",[s.Z],Object.getOwnPropertyDescriptor(i.prototype,"exec"),i.prototype);const u={interactive:new(n=i)(["interactive","complete"],"DOMContentLoaded"),complete:new n(["complete"],"load")}},330918:e=>{e.exports=["coneydog","furlong","commerce_getstarted_update","commerce_language_update","selection_download","LRW-10811-caret-sidebar","dry_remix_discover_dialog","furlong_unauth","furlong_upsell","remix_suggested_following_title","best_photos_blur_weights","coneydog_mobile","furlong_3","rec_preset_unauth","stonehenge","edu_cookies","video_editing","video_v2_custom_controls","video_v2_swy","jigsaw","develop_preset_amount","discover_car","LRW_11507_fix","author_following_sidebar","furlong_4","video_edit_presets","zorilla","aretuza_image_editing","mobile_download_all","cpra","auth_home_ab_test","video_edit_preset_amount_slider","lrw_9951_fix","update_what_youll_find"]},747652:e=>{e.exports={environments:{stage:{host:"aps-web-stage.adobe.io"},production:{host:"aps-web.adobe.io"}}}},882660:e=>{e.exports={hostnames:{"lightroom.adobe.com":{client_id:"LightroomMobileWeb1"},"dev.adobelr.com":{client_id:"LightroomMobileWeb1",env:"stg1"},default:{client_id:"LightroomMobileWeb1",env:"stg1"}},scope:"AdobeID,openid,gnav,creative_sdk,creative_cloud,additional_info.roles,portfolio.sdk.accounts,portfolio.sdk.import"}},5081:e=>{e.exports={"lightroom-production":{name:"prod",host:"adobesearch.adobe.io",unwanted_host:"uss-lr-organize.adobe.io",unwanted_app_token:"8494d9d7-11a2-48de-b0cc-f928d4ddb13f",host_fac:"adobesearch.adobe.io",host_lr:"adobesearch-lr.adobe.io",api_key:"LrWebUssService"},"lightroom-stage":{name:"stage",host:"adobesearch-stage.adobe.io",unwanted_host:"uss-lr-organize-stage.adobe.io",unwanted_app_token:"6ac45059-41a0-4fda-869b-14051fd7c71c",host_fac:"adobesearch-fac-stage.adobe.io",host_lr:"adobesearch-lr-stage.adobe.io",api_key:"LrWebUssService"}}},435007:e=>{e.exports={pageNames:{"abuse-report":"abuse-report",academy:"academy",author:"author",debug:"debug","community-blocking":"community-blocking","community-featured-edits":"community-featured-edits","community-guidelines":"community-guidelines",discover:"discover",downloader:"downloader",gallery:"gallery",home:"home",homepage:"Landing",landing:"Landing",learn:"learn",libraries:"libraries",news:"news",share:"share","try-edit":"try-edit",tv:"tv",unauthorized:"unauthorized",unsupported:"unsupported",unknown:"unknown","update-lightroom":"update-lightroom"}}},956508:e=>{e.exports={supported:["cs-CZ","da-DK","de-DE","en-GB","en-US","es-ES","es-MX","fi-FI","fr-CA","fr-FR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","nb-NO","nl-NL","pl-PL","pt-BR","ru-RU","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-TW"],display_names:{"en-US":"English, US","en-GB":"English, UK","ja-JP":"日本語","zh-CN":"简体中文","zh-TW":"繁體中文","de-DE":"Deutsch","pt-BR":"Português, Brasil","es-ES":"Español, España","es-MX":"Español, México","fr-CA":"Français, Canada","fr-FR":"Français, France","id-ID":"Bahasa Indonesia","it-IT":"Italiano","ko-KR":"한국어","ru-RU":"Русский","nl-NL":"Nederlands","sv-SE":"Svenska","th-TH":"ภาษาไทย","uk-UA":"Українська","hu-HU":"Magyar","cs-CZ":"Čeština","da-DK":"Dansk","fi-FI":"Suomi","nb-NO":"Norsk","pl-PL":"Polski","tr-TR":"Türkçe","vi-VN":"Tiếng Việt","zz-ZZ":"Mock Test"},urls:{ad_choices_url:"https://www.adobe.com/${adobecom_country_fragment}privacy/opt-out.html#interest-based-ads",privacy_url:"http://www.adobe.com/${adobecom_country_fragment}privacy.html",terms_url:"http://www.adobe.com/${adobecom_country_fragment}legal/general-terms.html",privacy_url_for_shares:"http://www.adobe.com/${adobecom_country_fragment}privacy/policy-linkfree.html",terms_url_for_shares:"http://www.adobe.com/${adobecom_country_fragment}legal/general-terms.html",support_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom-cc.html",cpra_personal_info_url:"https://www.adobe.com/privacy/us-rights.html",signup_url:{locales:{"zh-CN":"https://www.adobe.com/creativecloud/photography.html",default:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography.html"}},renew_url:"https://account.adobe.com?promoid=2SLRC4PQ&mv=other",renew_stage_url:"https://stage.account.adobe.com?promoid=2SLRC4PQ&mv=other",subscribe_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=2NVQC8FR&mv=other",upgrade_storage_url:"http://www.adobe.com/go/lrcc_upgrade",download_lightroom_url:"https://creative.adobe.com/products/download/lightroom?locale=${locale}",welcome_download_lightroom_url:"https://creative.adobe.com/products/download/lightroom?sdid=5F1G8NTM&mv=other&locale=${locale}",welcome_to_lightroom_try_for_free_url:"https://creative.adobe.com/products/download/lightroom?promoid=Z2G1FY7X&mv=other&locale=${locale}",pricing_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=XFWLHGM1&mv=other&locale=${locale}",pricing_a_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=D4P81RPV&mv=other&locale=${locale}",pricing_b_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DZTGZWKM&mv=other&locale=${locale}",pricing_c_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DW3G119N&mv=other&locale=${locale}",plans_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=VKW3KGR6&mv=other",plans_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FR7NZ55F&mv=other&locale=${locale}",plans_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DRCF151P&mv=other&locale=${locale}",plans_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FHRLZDMH&mv=other&locale=${locale}",trial_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=X2PHHV1S&mv=other",trial_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=D8F91MYT&mv=other&locale=${locale}",trial_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DD5B1J7S&mv=other&locale=${locale}",trial_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DMMD18RQ&mv=other&locale=${locale}",trial_header_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=F89JZN3K&mv=other&locale=${locale}",trial_header_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FVYPZ1FD&mv=other&locale=${locale}",trial_header_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FZPQYWPC&mv=other&locale=${locale}",trial_header_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=G4FRYRYB&mv=other&locale=${locale}",buy_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=F4KHZRTL&mv=other&locale=${locale}",buy_a_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=CZY71WFW&mv=other&locale=${locale}",buy_b_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=FD1KZJCJ&mv=other&locale=${locale}",buy_c_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=FMHMZ8WG&mv=other&locale=${locale}",lrmobile_branch_url:"https://lightroom.app.link/friy7F70Xcb",lrmobile_branch_a_url:"https://lightroom.app.link/Pc0Kq9aDypb",lrmobile_branch_b_url:"https://lightroom.app.link/qAVbnBrDypb",lrmobile_branch_c_url:"https://lightroom.app.link/AAZFytvDypb",retired_trial_6_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=LLVYT9J4&mv=other&locale=${locale}",retired_trial_7_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=LVC1T222&mv=other&locale=${locale}",retired_buy_1_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DHWC1DHR&mv=other&locale=${locale}",ccp_help_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/how-to/get-started-photography.html",learn_more_url:"http://www.adobe.com/${adobecom_country_fragment}products/lightroom-mobile.html",lrmobile_iphone_url:"https://itunes.apple.com/${country_code_downcase}/app/adobe-lightroom/id878783582?ls=1&mt=8",lrmobile_ipad_url:"https://itunes.apple.com/${country_code_downcase}/app/adobe-lightroom/id804177739?ls=1&mt=8",lrmobile_android_url:"https://play.google.com/store/apps/details?id=com.adobe.lrmobile",photoshop_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop.html",support_file_sync_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/kb/sync-different-lightroom-desktop-catalog-with-mobile.html",support_fileformats_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/help/supported-file-formats.html",lr_support_fileformats_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/help/supported-file-formats.html"},adobecom_language_codes:{"bg-BG":"bg","cs-CZ":"cz","da-DK":"dk","de-AT":"at","de-CH":"ch_de","de-DE":"de","de-LU":"lu_de","en-AU":"au","en-BE":"be_en","en-CA":"ca","en-CY":"cy_en","en-GB":"uk","en-GR":"gr_en","en-HK":"hk_en","en-IE":"ie","en-IL":"il_en","en-IN":"in","en-LU":"lu_en","en-MT":"mt","en-NZ":"nz","en-sea":"sea","en-UK":"uk","en-US":null,"es-ES":"es","es-LA":"la","es-MX":"mx","et-EE":"ee","fi-FI":"fi","fr-BE":"be_fr","fr-CA":"ca_fr","fr-CH":"ch_fr","fr-FR":"fr","fr-LU":"lu_fr","he-IL":"il_he","hu-HU":"hu","it-CH":"ch_it","id-ID":"sea","it-IT":"it","ja-JP":"jp","ko-KR":"kr","lt-LT":"lt","lv-LV":"lv","nb-NO":"no","nl-BE":"be_nl","nl-NL":"nl","pl-PL":"pl","pt-BR":"br","pt-PT":"pt","ro-RO":"ro","ru-RU":"ru","sk-SK":"sk","sl-SI":"si","sv-SE":"se","th-TH":"sea","tr-TR":"tr","uk-UA":"ua","vi-VN":"sea","zh-CN":"cn","zh-HK":"hk_zh","zh-TW":"tw","zz-ZZ":null}}},666222:(e,t)=>{function r(){var e=4022871197,t=function(t){t=t.toString();for(var r=0;r<t.length;r++){var i=.02519603282416938*(e+=t.charCodeAt(r));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}t.r=function(){return function(e){for(var t=0,i=0,n=0,o=1,s=[],a=0,l=r(),u=(t=l(" "),i=l(" "),n=l(" "),0);u<8;u++)s[u]=l(" ");0==e.length&&(e=[+new Date]);for(var c=0;c<e.length;c++)for((t-=l(e[c]))<0&&(t+=1),(i-=l(e[c]))<0&&(i+=1),(n-=l(e[c]))<0&&(n+=1),u=0;u<8;u++)s[u]-=l(e[c]),s[u]<0&&(s[u]+=1);var d=function(){a=8*s[a]|0;var e=s[a],r=2091639*t+2.3283064365386963e-10*o;return t=i,i=n,n=r-(o=0|r),s[a]-=n,s[a]<0&&(s[a]+=1),e};return d.uint32=function(){return 4294967296*d()},d.fract53=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.addNoise=function(){for(var e=arguments.length-1;e>=0;e--)for(u=0;u<8;u++)s[u]-=l(arguments[e]),s[u]<0&&(s[u]+=1)},d.version="Kybos 0.9",d.args=e,d}(Array.prototype.slice.call(arguments))}},891218:function(){function e(e){this.size=0,this.limit=e,this._keymap={}}e.prototype.put=function(e,t){var r={key:e,value:t};if(this._keymap[e]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size===this.limit)return item=this.shift(),item.value&&item.value.dispose&&item.value.dispose(),item;this.size++},e.prototype.shift=function(){var e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e},e.prototype.get=function(e,t){var r=this._keymap[e];if(void 0!==r)return r===this.tail||(r.newer&&(r===this.head&&(this.head=r.newer),r.newer.older=r.older),r.older&&(r.older.newer=r.newer),r.newer=void 0,r.older=this.tail,this.tail&&(this.tail.newer=r),this.tail=r),t?r:r.value},e.prototype.find=function(e){return this._keymap[e]},e.prototype.set=function(e,t){var r,i=this.get(e,!0);return i?(r=i.value,i.value=t):(r=this.put(e,t))&&(r=r.value),r},e.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):this.head=this.tail=void 0,this.size--,t.value},e.prototype.removeAll=function(){this.head=this.tail=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?e.prototype.keys=function(){return Object.keys(this._keymap)}:e.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},e.prototype.forEach=function(e,t,r){var i;if(!0===t?(r=!0,t=void 0):"object"!=typeof t&&(t=this),r)for(i=this.tail;i;)e.call(t,i.key,i.value,this),i=i.older;else for(i=this.head;i;)e.call(t,i.key,i.value,this),i=i.newer},e.prototype.toJSON=function(){for(var e=[],t=this.head;t;)e.push({key:t.key.toJSON(),value:t.value.toJSON()}),t=t.newer;return e},e.prototype.toString=function(){for(var e="",t=this.head;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=e)},140917:e=>{"use strict";e.exports='<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="utf-8">\n        <title></title>\n        <script id="lr-organizer-nr-snippet" type="text/javascript">\n            window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(19),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{h?h-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,(new Date).getTime(),!0])}catch(s){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,(new Date).getTime()])}var i=t("handle"),a=t(20),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,h=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(d){"stack"in d&&(t(12),t(11),"addEventListener"in window&&t(6),s.xhrWrappable&&t(13),u=!0)}c.on("fn-start",function(t,e,n){u&&(h+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&h>0&&(h-=1)}),c.on("internal-error",function(t){i("ierr",[t,(new Date).getTime(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){j++,S=y.hash,this[u]=Date.now()}function o(){j--,y.hash!==S&&i(0,!0);var t=Date.now();this[l]=~~this[l]+t-this[u],this[h]=t}function i(t,e){x.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=Date.now()})}var c="-start",s="-end",f="-body",u="fn"+c,h="fn"+s,d="cb"+c,p="cb"+s,l="jsTime",m="fetch",v="addEventListener",w=window,y=w.location;if(w[v]){var g=t(9),b=t(10),x=t(8),E=t(6),T=t(12),O=t(7),R=t(13),P=t("ee"),D=P.get("tracer");t(14),t("loader").features.spa=!0;var S,N=w[v],j=0;P.on(u,r),P.on(d,r),P.on(h,o),P.on(p,o),P.buffer([u,h,"xhr-done","xhr-resolved"]),E.buffer([u]),T.buffer(["setTimeout"+s,"clearTimeout"+c,u]),R.buffer([u,"new-xhr","send-xhr"+c]),O.buffer([m+c,m+"-done",m+f+c,m+f+s]),x.buffer(["newURL"]),g.buffer([u]),b.buffer(["propagate",d,p,"executor-err","resolve"+c]),D.buffer([u,"no-"+u]),a(R,"send-xhr"+c),a(P,"xhr-resolved"),a(P,"xhr-done"),a(O,m+c),a(O,m+"-done"),x.on("pushState-end",i),x.on("replaceState-end",i),N("hashchange",i,!0),N("load",i,!0),N("popstate",function(){i(0,j>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(12),c=t(11),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",h="bstResource",d="resource",p="-start",l="-end",m="fn"+p,v="fn"+l,w="bstTimer",y="pushState";t("loader").features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=Date.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,Date.now()])}),a.on(m,function(t,e,n){this.bstStart=Date.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,Date.now(),this.bstType])}),c.on(m,function(){this.bstStart=Date.now()}),c.on(v,function(t,e){i(w,[e,this.bstStart,Date.now(),"requestAnimationFrame"])}),o.on(y+p,function(t){this.time=Date.now(),this.startPath=location.pathname+location.hash}),o.on(y+l,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(h,[window.performance.getEntriesByType(d)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(h,[window.performance.getEntriesByType(d)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,h],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(21)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",h="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(h+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(19);e.exports=o;var a=window,c="fetch-",s=c+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,h=a.Response,d=a.fetch,p="prototype";u&&h&&d&&(i(f,function(t,e){r(u[p],e,s),r(h[p],e,s)}),r(a,"fetch",c),o.on(c+"end",function(t,e){var n=this;e?e.clone().arrayBuffer().then(function(t){n.rxSize=t.byteLength,o.emit(c+"done",[null,e],n)}):o.emit(c+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(21)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){var r=t("ee").get("mutation"),o=t(21)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],10:[function(t,e,n){function r(t){var e=a.context(),n=c(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(21),a=t("ee").get("promise"),c=i(a),s=t(19),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;s(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),c=f.resolve(i);return c}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),s(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=c(t[0],"resolve-",this),t[1]=c(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),c.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=c(t[0],"cb-",this),t[1]=c(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],11:[function(t,e,n){var r=t("ee").get("raf"),o=t(21)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],12:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(21)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",h="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+h),a.inPlace(window,[s],s+h),a.inPlace(window,[f,"clearImmediate"],f+h),i.on(s+u,r),i.on(c+u,o)},{}],13:[function(t,e,n){function r(t,e){h.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),h.inPlace(t,v,"fn-",c)}function i(t){w.push(t),l&&(g=-g,b.data=g)}function a(){for(var t=0;t<w.length;t++)r([],w[t]);w.length&&(w=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),h=t(21)(u),d=NREUM.o,p=d.XHR,l=d.MO,m="readystatechange",v=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],w=[];e.exports=u;var y=window.XMLHttpRequest=function(t){var e=new p(t);try{u.emit("new-xhr",[e],e),e.addEventListener(m,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(p,y),y.prototype=p.prototype,h.inPlace(y.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),l){var g=1,b=document.createTextNode(g);new l(a).observe(b,{characterData:!0})}else f.on("fn-end",function(t){t[0]&&t[0].type===m||a()})},{}],14:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<h;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var a=t.getResponseHeader("X-NewRelic-App-Data");a&&(e.cat=a.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return l(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(15),f=t("ee"),u=["load","error","abort","timeout"],h=u.length,d=t("id"),p=t(18),l=t(17),m=window.XMLHttpRequest;a.features.xhr=!0,t(13),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=l(r);i&&(n.txSize=i)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var a=0;a<h;a++)e.addEventListener(u[a],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{}],15:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],16:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[(new Date).getTime()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(19),c=t(20),s=t("ee").get("tracer"),f=NREUM;"undefined"==typeof window.newrelic&&(newrelic=f);var u=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],h="api-",d=h+"ixn-";a(u,function(t,e){f[e]=o(h+e,!0,"api")}),f.addPageAction=o(h+"addPageAction",!0),f.setCurrentRouteName=o(h+"routeName",!0),e.exports=newrelic,f.interaction=function(){return(new r).get()};var p=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(d+"tracer",[Date.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[Date.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[Date.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){p[e]=o(d+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,(new Date).getTime()])}},{}],17:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],18:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\\/\\s](\\d+\\.\\d+)/);o&&(r=+o[1]),e.exports=r},{}],19:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],20:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],21:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(20),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){d([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(h){throw u(e+"err",[r,a,h],c),h}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,h(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o)}catch(a){d([a,n,r,o])}s=i}}function h(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){d([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function d(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o){if(!d.aborted){t&&t(n,r,o);for(var i=e(o),a=l(n),c=a.length,s=0;s<c;s++)a[s].apply(i,r);var f=u[y[n]];return f&&f.push([g,n,r,i]),i}}function p(t,e){w[t]=l(t).concat(e)}function l(t){return w[t]||[]}function m(t){return h[t]=h[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var w={},y={},g={on:p,emit:n,get:m,listeners:l,context:e,buffer:v,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(d.aborted=!0,u=d.backlog={})}var c="nr@context",s=t("gos"),f=t(19),u={},h={},d=e.exports=o();d.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!b++){var t=g.info=NREUM.info,e=h.getElementsByTagName("script")[0];if(setTimeout(f.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return f.abort();s(w,function(e,n){t[e]||(t[e]=n)}),c("mark",["onload",a()],null,"api");var n=h.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===h.readyState&&i()}function i(){c("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var c=t("handle"),s=t(19),f=t("ee"),u=window,h=u.document,d="addEventListener",p="attachEvent",l=u.XMLHttpRequest,m=l&&l.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:l,REQ:u.Request,EV:u.Event,PR:u.Promise,MO:u.MutationObserver},t(16);var v=""+location,w={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1016.min.js"},y=l&&m&&m[d]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:a(),origin:v,features:{},xhrWrappable:y};h[d]?(h[d]("DOMContentLoaded",i,!1),u[d]("load",r,!1)):(h[p]("onreadystatechange",o),u[p]("onload",r)),c("mark",["firstbyte",a()],null,"api");var b=0},{}]},{},["loader",2,14,5,3,4]);\n            ;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"b3a229b3da",applicationID:"<APPID>",sa:1}\n        <\/script>\n\n        <script type="text/javascript">\n            "use strict";\n            var port, kind, client;\n            var origin = "<ORIGIN>";\n\n            function report(action, view, variables) {\n                var data = {};\n\n                if (kind) data.kind = kind;\n                if (view) data.view = view;\n                if (client) data.client = client;\n                for (var key in variables) {\n                    data[key] = variables[key];\n                }\n\n                console.log("Page action", action, data);\n                if (window.newrelic) {\n                    window.newrelic.addPageAction(action, data);\n                }\n            }\n\n            function handleCall(event) {\n                window.newrelic[event.data.method].apply(newrelic, event.data.args);\n            }\n\n            function handleInit(event) {\n                if (!/lr-organizer-nr-init/.test(event.data) || event.origin !== origin) return;\n\n                try {\n                    var data = JSON.parse(event.data);\n                    if (data.kind === \'lr-organizer-nr-init\') {\n                        port = event.ports[0];\n                        port.onmessage = handleCall;\n                        window.removeEventListener(\'message\', handleInit);\n                    }\n                }\n                catch(error) {}\n            }\n\n            window.addEventListener(\'message\', handleInit);\n\n        <\/script>\n    </head>\n    <body></body>\n</html>\n'},514632:()=>{},590447:(e,t,r)=>{"use strict";function i(e,t,r,i,n){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}r.d(t,{Z:()=>i})},301254:(e,t,r)=>{"use strict";function i(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}r.d(t,{Z:()=>i})}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=n,s.c=o,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"==typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"==typeof r.then)return r}var n=Object.create(null);s.r(n);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,s.d(n,o),n},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[])),s.u=e=>(3763===e?"shared_utils/ImsUtils":e)+"."+{3763:"330a376b0c889a2a1c7d",7682:"d92703670bc83357b5f8"}[e]+".js",s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},i="LrWeb:",s.l=(e,t,n,o)=>{if(r[e])r[e].push(t);else{var a,l;if(void 0!==n)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==i+n){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",i+n),a.src=e),r[e]=[t];var h=(t,i)=>{a.onerror=a.onload=null,clearTimeout(p);var n=r[e];if(delete r[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(i))),t)return t(i)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.p="/modern/",(()=>{var e={4746:0,3392:0,3763:0,7682:0};s.f.j=(t,r)=>{var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var n=new Promise(((r,n)=>i=e[t]=[r,n]));r.push(i[2]=n);var o=s.p+s.u(t),a=new Error;s.l(o,(r=>{if(s.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var n=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",a.name="ChunkLoadError",a.type=n,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,n,[o,a,l]=r,u=0;if(o.some((t=>0!==e[t]))){for(i in a)s.o(a,i)&&(s.m[i]=a[i]);l&&l(s)}for(t&&t(r);u<o.length;u++)n=o[u],s.o(e,n)&&e[n]&&e[n][0](),e[o[u]]=0},r=self.webpackChunkLrWeb=self.webpackChunkLrWeb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),s(s.s=989914)})();